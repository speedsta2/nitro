(self.webpackChunknitro_client=self.webpackChunknitro_client||[]).push([[179],{8255:Gt=>{function kt(U){return Promise.resolve().then(()=>{var qe=new Error("Cannot find module '"+U+"'");throw qe.code="MODULE_NOT_FOUND",qe})}kt.keys=()=>[],kt.resolve=kt,kt.id=8255,Gt.exports=kt},8845:(Gt,kt,U)=>{"use strict";var qe=U(9075),e=U(7716),Ii=U(6237),s=U(458);let w=(()=>{class i{constructor(t){this._ngZone=t,this._isReady=!1,this._avatarEditorVisible=!1,this._navigatorVisible=!1,this._catalogVisible=!1,this._inventoryVisible=!1,this._friendlistVisible=!1,this._userProfileVisible=!1,this._achievementsVisible=!1,this._meMenuVisible=!1,this._chatHistoryVisible=!1,this._userSettingsVisible=!1,this._floorPlanVisible=!1,this._userContextVisible=!0}showAvatarEditor(){this._avatarEditorVisible=!0}hideAvatarEditor(){this._avatarEditorVisible=!1}showNavigator(){this._navigatorVisible=!0}hideNavigator(){this._navigatorVisible=!1}toggleAvatarEditor(){this._avatarEditorVisible=!this._avatarEditorVisible}toggleNavigator(){this._navigatorVisible=!this._navigatorVisible}showCatalog(){this._catalogVisible=!0}hideCatalog(){this._catalogVisible=!1}toggleCatalog(){this._catalogVisible=!this._catalogVisible}showInventory(){this._inventoryVisible=!0}hideInventory(){this._inventoryVisible=!1}toggleInventory(){this._inventoryVisible=!this._inventoryVisible}showFriendList(){this._friendlistVisible=!0}hideFriendList(){this._friendlistVisible=!1}toggleFriendList(){this._friendlistVisible=!this._friendlistVisible}showUserProfile(){this._userProfileVisible=!0}hideUserProfile(){this._userProfileVisible=!1}toggleUserProfile(){this._userProfileVisible=!this._userProfileVisible}showAchievements(){this._achievementsVisible=!0}hideAchievements(){this._achievementsVisible=!1}toggleAchievements(){this._achievementsVisible=!this._achievementsVisible}showMeMenu(){this._meMenuVisible=!0}hideMeMenu(){this._meMenuVisible=!1}toggleMeMenu(){this._meMenuVisible=!this._meMenuVisible}showChatHistory(){this._chatHistoryVisible=!0}hideChatHistory(){this._chatHistoryVisible=!1}toggleChatHistory(){this._chatHistoryVisible=!this._chatHistoryVisible}showUserSettings(){this._userSettingsVisible=!0}hideUserSettings(){this._userSettingsVisible=!1}toggleUserSettings(){this._userSettingsVisible=!this._userSettingsVisible}toggleUserContextVisible(){this._userContextVisible=!this._userContextVisible}get avatarEditorVisible(){return this._avatarEditorVisible}get navigatorVisible(){return this._navigatorVisible}get catalogVisible(){return this._catalogVisible}get inventoryVisible(){return this._inventoryVisible}get friendListVisible(){return this._friendlistVisible}get userProfileVisible(){return this._userProfileVisible}get achievementsVisible(){return this._achievementsVisible}get meMenuVisible(){return this._meMenuVisible}get chatHistoryVisible(){return this._chatHistoryVisible}get userSettingsVisible(){return this._userSettingsVisible}get userContextVisible(){return this._userContextVisible}set isReady(t){this._isReady=t}get isReady(){return this._isReady}set floorPlanVisible(t){this._ngZone.run(()=>this._floorPlanVisible=t)}get floorPlanVisible(){return this._floorPlanVisible}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var u=U(8583),F=U(7238);let ve=(()=>{class i extends s._dI{constructor(t,n){super(t),this._requestId=n}get requestId(){return this._requestId}}return i.ACCEPTED="FRE_ACCEPTED",i.DECLINED="FRE_DECLINED",i})();class Q extends s._dI{constructor(o){super(o)}}let xt=(()=>{class i extends Q{constructor(t,n){super(t),this._roomId=0,this._roomId=n}get roomId(){return this._roomId}}return i.RWREUE_GAME_MODE="RWREUE_GAME_MODE",i.RWREUE_NORMAL_MODE="RWREUE_NORMAL_MODE",i})(),T=(()=>{class i extends Q{constructor(t,n,r,a){super(t),this._id=n,this._category=r,this._roomId=a}get id(){return this._id}get category(){return this._category}get roomId(){return this._roomId}}return i.OBJECT_SELECTED="RWROUE_OBJECT_SELECTED",i.OBJECT_DESELECTED="RWROUE_OBJECT_DESELECTED",i.USER_REMOVED="RWROUE_USER_REMOVED",i.FURNI_REMOVED="RWROUE_FURNI_REMOVED",i.FURNI_ADDED="RWROUE_FURNI_ADDED",i.USER_ADDED="RWROUE_USER_ADDED",i.OBJECT_ROLL_OVER="RWROUE_OBJECT_ROLL_OVER",i.OBJECT_ROLL_OUT="RWROUE_OBJECT_ROLL_OUT",i})(),Te=(()=>{class i extends Q{constructor(t,n=null,r=null,a=0){super(t),this._roomViewRectangle=n,this._positionDelta=r,this._scale=a}get roomViewRectangle(){return this._roomViewRectangle?this._roomViewRectangle.clone():null}get positionDelta(){return this._positionDelta?this._positionDelta.clone():null}get scale(){return this._scale}}return i.SIZE_CHANGED="RWRVUE_ROOM_VIEW_SIZE_CHANGED",i.SCALE_CHANGED="RWRVUE_ROOM_VIEW_SCALE_CHANGED",i.POSITION_CHANGED="RWRVUE_ROOM_VIEW_POSITION_CHANGED",i})(),xn=(()=>{class i extends Q{constructor(t,n,r,a,c){super(i.RWAIE_AVATAR_INFO),this._userId=t,this._userName=n,this._Str_3021=r,this._Str_2775=a,this._Str_3947=c}get userId(){return this._userId}get userName(){return this._userName}get _Str_2908(){return this._Str_3021}get _Str_2707(){return this._Str_2775}get _Str_4330(){return this._Str_3947}}return i.RWAIE_AVATAR_INFO="RWAIE_AVATAR_INFO",i})(),Zn=(()=>{class i extends Q{constructor(){super(i.RWUDUE_USER_DATA_UPDATED)}}return i.RWUDUE_USER_DATA_UPDATED="rwudue_user_data_updated",i})();class X{constructor(o){this._type=o}get type(){return this._type}}let en=(()=>{class i extends X{constructor(t){super(i.RWCM_MESSAGE_AVATAR_EXPRESSION),this._animation=t}get animation(){return this._animation}}return i.RWCM_MESSAGE_AVATAR_EXPRESSION="RWCM_MESSAGE_AVATAR_EXPRESSION",i})(),tn=(()=>{class i extends X{constructor(t){super(i.RWCPM_MESSAGE_CHANGE_POSTURE),this._posture=t}get posture(){return this._posture}}return i.RWCPM_MESSAGE_CHANGE_POSTURE="RWCPM_MESSAGE_CHANGE_POSTURE",i._Str_1553=0,i._Str_2016=1,i})(),dn=(()=>{class i extends X{constructor(t){super(i.RWCM_MESSAGE_DANCE),this._style=0,this._style=t}get style(){return this._style}}return i.RWCM_MESSAGE_DANCE="RWCM_MESSAGE_DANCE",i._Str_13814=0,i._Str_17699=[2,3,4],i})(),_e=(()=>{class i extends X{constructor(t,n,r){super(t),this._id=n,this._category=r}get id(){return this._id}get category(){return this._category}}return i.GET_OBJECT_INFO="RWROM_GET_OBJECT_INFO",i.GET_OBJECT_NAME="RWROM_GET_OBJECT_NAME",i.SELECT_OBJECT="RWROM_SELECT_OBJECT",i.GET_OWN_CHARACTER_INFO="RWROM_GET_OWN_CHARACTER_INFO",i.GET_AVATAR_LIST="RWROM_GET_AVATAR_LIST",i})(),p=(()=>{class i extends X{constructor(t,n=0){super(t),this._userId=n}get userId(){return this._userId}}return i.RWUAM_WHISPER_USER="RWUAM_WHISPER_USER",i.RWUAM_IGNORE_USER="RWUAM_IGNORE_USER",i.RWUAM_IGNORE_USER_BUBBLE="RWUAM_IGNORE_USER_BUBBLE",i.RWUAM_UNIGNORE_USER="RWUAM_UNIGNORE_USER",i.RWUAM_KICK_USER="RWUAM_KICK_USER",i.RWUAM_BAN_USER_HOUR="RWUAM_BAN_USER_HOUR",i.RWUAM_BAN_USER_DAY="RWUAM_BAN_USER_DAY",i.RWUAM_BAN_USER_PERM="RWUAM_BAN_USER_PERM",i.MUTE_USER_2MIN="RWUAM_MUTE_USER_2MIN",i.MUTE_USER_5MIN="RWUAM_MUTE_USER_5MIN",i.MUTE_USER_10MIN="RWUAM_MUTE_USER_10MIN",i.RWUAM_SEND_FRIEND_REQUEST="RWUAM_SEND_FRIEND_REQUEST",i.RWUAM_RESPECT_USER="RWUAM_RESPECT_USER",i.RWUAM_GIVE_RIGHTS="RWUAM_GIVE_RIGHTS",i.RWUAM_TAKE_RIGHTS="RWUAM_TAKE_RIGHTS",i.RWUAM_START_TRADING="RWUAM_START_TRADING",i.RWUAM_OPEN_HOME_PAGE="RWUAM_OPEN_HOME_PAGE",i.RWUAM_REPORT="RWUAM_REPORT",i.RWUAM_PICKUP_PET="RWUAM_PICKUP_PET",i.RWUAM_MOUNT_PET="RWUAM_MOUNT_PET",i.RWUAM_TOGGLE_PET_RIDING_PERMISSION="RWUAM_TOGGLE_PET_RIDING_PERMISSION",i.RWUAM_TOGGLE_PET_BREEDING_PERMISSION="RWUAM_TOGGLE_PET_BREEDING_PERMISSION",i.RWUAM_DISMOUNT_PET="RWUAM_DISMOUNT_PET",i.RWUAM_SADDLE_OFF="RWUAM_SADDLE_OFF",i.RWUAM_TRAIN_PET="RWUAM_TRAIN_PET",i.RWUAM_RESPECT_PET=" RWUAM_RESPECT_PET",i.RWUAM_TREAT_PET="RWUAM_TREAT_PET",i.RWUAM_REQUEST_PET_UPDATE="RWUAM_REQUEST_PET_UPDATE",i.RWUAM_START_NAME_CHANGE="RWUAM_START_NAME_CHANGE",i.RWUAM_PASS_CARRY_ITEM="RWUAM_PASS_CARRY_ITEM",i.RWUAM_DROP_CARRY_ITEM="RWUAM_DROP_CARRY_ITEM",i.RWUAM_GIVE_CARRY_ITEM_TO_PET="RWUAM_GIVE_CARRY_ITEM_TO_PET",i.RWUAM_GIVE_WATER_TO_PET="RWUAM_GIVE_WATER_TO_PET",i.RWUAM_GIVE_LIGHT_TO_PET="RWUAM_GIVE_LIGHT_TO_PET",i.RWUAM_REQUEST_BREED_PET="RWUAM_REQUEST_BREED_PET",i.RWUAM_HARVEST_PET="RWUAM_HARVEST_PET",i.RWUAM_REVIVE_PET="RWUAM_REVIVE_PET",i.RWUAM_COMPOST_PLANT="RWUAM_COMPOST_PLANT",i.RWUAM_GET_BOT_INFO="RWUAM_GET_BOT_INFO",i.RWUAM_REPORT_CFH_OTHER="RWUAM_REPORT_CFH_OTHER",i.RWUAM_AMBASSADOR_ALERT_USER="RWUAM_AMBASSADOR_ALERT_USER",i.RWUAM_AMBASSADOR_KICK_USER="RWUAM_AMBASSADOR_KICK_USER",i.AMBASSADOR_MUTE_USER_2MIN="RWUAM_AMBASSADOR_MUTE_2MIN",i.AMBASSADOR_MUTE_USER_10MIN="RWUAM_AMBASSADOR_MUTE_10MIN",i.AMBASSADOR_MUTE_USER_60MIN="RWUAM_AMBASSADOR_MUTE_60MIN",i.AMBASSADOR_MUTE_USER_18HOUR="RWUAM_AMBASSADOR_MUTE_18HOUR",i})();class Ho{constructor(){this._container=null,this._container=null,this._widget=null,this._disposed=!1,this.onUserNameUpdateEvent=this.onUserNameUpdateEvent.bind(this),this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(o){if(!o)return null;switch(o.type){case _e.GET_OWN_CHARACTER_INFO:this.getOwnCharacterInfo();break;case p.RWUAM_REQUEST_PET_UPDATE:this._widget.handlePetInfo=!1;break;case dn.RWCM_MESSAGE_DANCE:{const n=o;this._container&&this._container.roomSession&&this._container.roomSession.sendDanceMessage(n.style);break}case en.RWCM_MESSAGE_AVATAR_EXPRESSION:{const n=o;this._container&&this._container.roomSession&&this._container.roomSession.sendExpressionMessage(n.animation.ordinal);break}case tn.RWCPM_MESSAGE_CHANGE_POSTURE:{const n=o;this._container&&this._container.roomSession&&this._container.roomSession.sendPostureMessage(n.posture);break}}return null}processEvent(o){if(o)switch(o.type){case s.zQ.USER_DATA_UPDATED:return void this._container.events.dispatchEvent(new Zn);case s.LTL.RSDE_DANCE:{const t=o;if(this._widget&&this._container&&this._container.roomSession&&this._container.roomSession.userDataManager){const n=this._container.roomSession.userDataManager.getUserData(this._container.sessionDataManager.userId);n&&n.roomIndex===t.roomIndex&&(this.widget.isDancing=0!==t.danceId)}return}}}getOwnCharacterInfo(){const o=this._container.sessionDataManager.userId,t=this._container.sessionDataManager.userName,r=this._container.roomSession.userDataManager.getUserData(o);r&&this._container.events.dispatchEvent(new xn(o,t,r.type,r.roomIndex,!1))}getObjectFurnitureData(o){if(!o)return null;const t=o.model.getValue(s.fql.FURNITURE_TYPE_ID);return this._container.sessionDataManager.getFloorItemData(t)}getPetUserData(o){const t=this._container.roomSession.roomId,n=this._container.roomEngine.getTotalObjectsForManager(t,s.YGE.UNIT);let r=0;for(;r<n;){const a=this._container.roomEngine.getRoomObjectByIndex(t,r,s.YGE.UNIT),c=this._container.roomSession.userDataManager.getUserDataByIndex(a.id);if(c&&c.type===s.OOj.PET&&c.webID===o)return c;r++}return null}onUserNameUpdateEvent(o){this.widget.close()}onNitroToolbarEvent(o){switch(o.type){case s.BOM.SELECT_OWN_AVATAR:return void this.getOwnCharacterInfo()}}get type(){return s.z5f.AVATAR_INFO}get messageTypes(){return[_e.GET_OWN_CHARACTER_INFO,dn.RWCM_MESSAGE_DANCE,en.RWCM_MESSAGE_AVATAR_EXPRESSION,tn.RWCPM_MESSAGE_CHANGE_POSTURE,p.RWUAM_REQUEST_PET_UPDATE]}get eventTypes(){return[s.zQ.USER_DATA_UPDATED,s.LTL.RSDE_DANCE]}get container(){return this._container}set container(o){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.removeEventListener(s.JU8.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.removeEventListener(s.BOM.SELECT_OWN_AVATAR,this.onNitroToolbarEvent)),this._container=o,o&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.sessionDataManager.events.addEventListener(s.JU8.UNUE_NAME_UPDATED,this.onUserNameUpdateEvent),this._container.roomEngine.events.addEventListener(s.BOM.SELECT_OWN_AVATAR,this.onNitroToolbarEvent))}get widget(){return this._widget}set widget(o){this._widget=o}get roomEngine(){return this._container&&this._container.roomEngine||null}get roomSession(){return this._container&&this._container.roomSession||null}get disposed(){return this._disposed}}let $n=(()=>{class i extends Q{constructor(t){super(i.RWFCE_FLOOD_CONTROL),this._seconds=0,this._seconds=t}get seconds(){return this._seconds}}return i.RWFCE_FLOOD_CONTROL="RWFCE_FLOOD_CONTROL",i})(),ke=(()=>{class i extends X{constructor(t,n,r,a,c){super(t),this._text=n,this._chatType=r,this._recipientName=a,this._styleId=c}get text(){return this._text}get chatType(){return this._chatType}get recipientName(){return this._recipientName}get styleId(){return this._styleId}}return i.MESSAGE_CHAT="RWCM_MESSAGE_CHAT",i.CHAT_DEFAULT=0,i.CHAT_WHISPER=1,i.CHAT_SHOUT=2,i})(),yi=(()=>{class i extends X{constructor(t,n,r,a){super(t),this._objectId=n,this._userName=r,this._roomId=a}get objectId(){return this._objectId}get userName(){return this._userName}get roomId(){return this._roomId}}return i.MESSAGE_SELECT_AVATAR="RWCSAM_MESSAGE_SELECT_AVATAR",i})(),ei=(()=>{class i extends X{constructor(t){super(i.TYPING_STATUS),this._isTyping=t}get isTyping(){return this._isTyping}}return i.TYPING_STATUS="RWCTM_TYPING_STATUS",i})(),Fe=(()=>{class i extends X{constructor(t){super(t)}}return i.RWRWM_USER_CHOOSER="RWRWM_USER_CHOOSER",i.RWRWM_FURNI_CHOOSER="RWRWM_FURNI_CHOOSER",i.RWRWM_ME_MENU="RWRWM_ME_MENU",i.RWRWM_EFFECTS="RWRWM_EFFECTS",i})();class Wo{constructor(){this._container=null,this._widget=null,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){}processWidgetMessage(o){if(!o||this.disposed)return null;let t=null;switch(o.type){case ei.TYPING_STATUS:this._container.roomSession.sendChatTypingMessage(o.isTyping);break;case ke.MESSAGE_CHAT:{const n=o;if(""===n.text)return null;let r=n.text;const a=n.text.split(" ");if(a.length>0){const l=a[0];let g="";if(a.length>1&&(g=a[1]),":"===l.charAt(0)&&"x"===g){const d=this._container.roomEngine.selectedAvatarId;if(d>-1){const h=this._container.roomSession.userDataManager.getUserDataByIndex(d);h&&(g=h.name,r=n.text.replace(" x"," "+h.name))}}switch(l.toLowerCase()){case":d":case";d":this._container.sessionDataManager.clubLevel===s.xJA.VIP&&this._container.roomSession.sendExpressionMessage(s.jYX.LAUGH.ordinal);break;case"o/":case"_o/":return this._container.roomSession.sendExpressionMessage(s.jYX.WAVE.ordinal),null;case":kiss":if(this._container.sessionDataManager.clubLevel==s.xJA.VIP)return this._container.roomSession.sendExpressionMessage(s.jYX.BLOW.ordinal),null;break;case":jump":if(this._container.sessionDataManager.clubLevel==s.xJA.VIP)return this._container.roomSession.sendExpressionMessage(s.jYX.JUMP.ordinal),null;break;case":idle":return this._container.roomSession.sendExpressionMessage(s.jYX.IDLE.ordinal),null;case"_b":return this._container.roomSession.sendExpressionMessage(s.jYX.RESPECT.ordinal),null;case":sign":return this._container.roomSession.sendSignMessage(parseInt(g)),null;case":iddqd":return this._container.roomEngine.events.dispatchEvent(new s.JwU(this._container.roomEngine.activeRoomId,-1,!0)),null;case":zoom":return this._container.roomEngine.events.dispatchEvent(new s.JwU(this._container.roomEngine.activeRoomId,parseInt(g),!1)),null;case":screenshot":{const d=this._container.roomEngine.createTextureFromRoom(this._container.roomSession.roomId,this._container.getFirstCanvasId());return window.open("").document.write(s.Oau.generateImageUrl(d)),null}case":pickall":return this._container.notificationService.alertWithConfirm("${room.confirm.pick_all}","${generic.alert.title}",()=>{this._container.sessionDataManager.sendSpecialCommandMessage(":pickall")}),null;case":furni":return this._container.processWidgetMessage(new Fe(Fe.RWRWM_FURNI_CHOOSER)),null;case":chooser":return this._container.processWidgetMessage(new Fe(Fe.RWRWM_USER_CHOOSER)),null;case":floor":case":bcfloor":return this._container.roomSession.controllerLevel>=s.A5x.ROOM_OWNER&&(this._container.settingsService.floorPlanVisible=!0),null;case":client":case":nitro":case":billsonnn":return this._container.notificationService.alertWithScrollableMessages(['<div class="d-flex flex-column justify-content-center align-items-center"><div class="nitro-info-box"></div><b>Renderer Version: '+s.D6b.RENDERER_VERSION+"</b><br /><b>UI Version: "+s.D6b.UI_VERSION+'</b><br />This client is powered by Nitro HTML5<br /><br /><div class="d-flex"><a class="btn btn-primary" href="https://discord.gg/66UR68FPgy" target="_blank">Discord</a><a class="btn btn-primary" href="https://git.krews.org/nitro" target="_blank">Git</a></div><br /></div>'],"Nitro HTML5"),null;case":settings":return(this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator)&&s.wjX.instance.communication.connection.send(new s.OPC(this._container.roomSession.roomId)),null}}const c=n.styleId;if(this._container&&this._container.roomSession)switch(n.chatType){case ke.CHAT_DEFAULT:this._container.roomSession.sendChatMessage(r,c);break;case ke.CHAT_SHOUT:this._container.roomSession.sendShoutMessage(r,c);break;case ke.CHAT_WHISPER:this._container.roomSession.sendWhisperMessage(n.recipientName,r,c)}break}case yi.MESSAGE_SELECT_AVATAR:t=o}return null}processEvent(o){if(o&&!this._disposed)switch(o.type){case s.JTx.FLOOD_EVENT:{const n=parseInt(o.message);return void this._container.events.dispatchEvent(new $n(n))}}}get type(){return s.z5f.CHAT_INPUT_WIDGET}get messageTypes(){return[ei.TYPING_STATUS,ke.MESSAGE_CHAT,yi.MESSAGE_SELECT_AVATAR]}get eventTypes(){return[s.JTx.FLOOD_EVENT]}get container(){return this._container}set container(o){this._container=o}get widget(){return this._widget}set widget(o){this._widget=o}get disposed(){return this._disposed}}let Ri=(()=>{class i{constructor(){this._id=++i.ITEM_COUNTER,this._senderId=-1,this._senderName="",this._senderColor=0,this._senderImageUrl=null,this._content="",this._chatType=0,this._chatStyle=0,this._date=new Date}get id(){return this._id}get senderId(){return this._senderId}set senderId(t){this._senderId=t}get senderName(){return this._senderName}set senderName(t){this._senderName=t}get senderColorString(){return this._senderColor&&"#"+this._senderColor.toString(16).padStart(6,"0")||null}set senderColor(t){this._senderColor=t}get senderImageUrl(){return this._senderImageUrl}set senderImageUrl(t){this._senderImageUrl=t}get content(){return this._content}set content(t){this._content=t}get chatType(){return this._chatType}set chatType(t){this._chatType=t}get chatStyle(){return this._chatStyle}set chatStyle(t){this._chatStyle=t}get date(){return this._date}}return i.ITEM_COUNTER=0,i})(),mn=(()=>{class i extends Q{constructor(t,n,r,a,c,l,g,d,h,f,E,k,H=0,x=0,ue=null){super(t),this._userId=n,this._text=r,this._chatType=H,this._userName=a,this._userCategory=c,this._userType=l,this._petType=g,this._links=ue,this._userX=d,this._userY=h,this._userImage=f,this._userColor=E,this._roomId=k,this._styleId=x}get userId(){return this._userId}get text(){return this._text}get chatType(){return this._chatType}get userName(){return this._userName}get userCategory(){return this._userCategory}get userType(){return this._userType}get petType(){return this._petType}get links(){return this._links}get userX(){return this._userX}get userY(){return this._userY}get userImage(){return this._userImage}get userColor(){return this._userColor}get roomId(){return this._roomId}get styleId(){return this._styleId}}return i.RWCUE_EVENT_CHAT="RWCUE_EVENT_CHAT",i.CHAT_TYPE_SPEAK=0,i.CHAT_TYPE_WHISPER=1,i.CHAT_TYPE_SHOUT=2,i.CHAT_TYPE_RESPECT=3,i.CHAT_TYPE_PETRESPECT=4,i.CHAT_TYPE_NOTIFY=5,i.CHAT_TYPE_PETTREAT=6,i.CHAT_TYPE_PETREVIVE=7,i.CHAT_TYPE_PET_REBREED_FERTILIZE=8,i.CHAT_TYPE_PET_SPEED_FERTILIZE=9,i.CHAT_TYPE_BOT_SPEAK=10,i.CHAT_TYPE_BOT_SHOUT=11,i.CHAT_TYPE_BOT_WHISPER=12,i})();class Qo{constructor(o){this._chatHistoryService=o,this._container=null,this._widget=null,this._connection=null,this._avatarColorCache=new Map,this._avatarImageCache=new Map,this._petImageCache=new Map,this._primaryCanvasScale=0,this._primaryCanvasOriginPos=null,this._tempScreenPosVector=new s.UJ,this._disposed=!1}dispose(){this._disposed||(this._container=null,this._widget=null,this._disposed=!0)}update(){this._Str_20006()}_Str_20006(){if(!(this._container&&this._container.roomSession&&this._container.roomEngine&&this._container.events))return;const o=this._container.getFirstCanvasId(),t=this._container.roomSession.roomId,n=this._container.roomEngine.getRoomInstanceRenderingCanvas(t,o);if(!n)return;const r=n.geometry;if(!r)return;let c=1;this._primaryCanvasScale>0&&(c=r.scale/this._primaryCanvasScale),this._primaryCanvasOriginPos||(this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0,this._primaryCanvasOriginPos=r.getScreenPoint(this._tempScreenPosVector),this._primaryCanvasScale=r.scale-10);let l="",g=null;this._tempScreenPosVector.x=0,this._tempScreenPosVector.y=0,this._tempScreenPosVector.z=0;const d=r.getScreenPoint(this._tempScreenPosVector);if(d){const h=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(t,o);if(h&&d.set(d.x+h.x,d.y+h.y),d.x!=this._primaryCanvasOriginPos.x||d.y!=this._primaryCanvasOriginPos.y){const f=s.QCL.sub(d,s.QCL.mul(this._primaryCanvasOriginPos,c));(0!=f.x||0!=f.y)&&(l=Te.POSITION_CHANGED,g=new Te(l,null,f),this._container.events.dispatchEvent(g)),this._primaryCanvasOriginPos=d}}r.scale!==this._primaryCanvasScale&&(l=Te.SCALE_CHANGED,g=new Te(l,null,null,r.scale),this._container.events.dispatchEvent(g),this._primaryCanvasScale=r.scale)}getBubbleLocation(o,t){const n=this._container.roomEngine.getRoomInstanceGeometry(o,this._container.getFirstCanvasId()),r=this._container.roomEngine.getRoomInstanceRenderingCanvasScale(o,this._container.getFirstCanvasId());let a=document.body.offsetWidth*r/2,c=document.body.offsetHeight*r/2;if(n&&t){const l=n.getScreenPoint(t);if(l){a+=l.x*r,c+=l.y*r;const g=this._container.roomEngine.getRoomInstanceRenderingCanvasOffset(o,this._container.getFirstCanvasId());g&&(a+=g.x,c+=g.y)}}return new s.TSu(a,c)}processWidgetMessage(o){return null}processEvent(o){if(o&&!this._disposed)switch(o.type){case s.JTx.CHAT_EVENT:{const t=o,n=this._container.roomEngine.getRoomObject(t.session.roomId,t.objectId,s.YGE.UNIT);if(n&&this._container.roomEngine.getRoomInstanceGeometry(t.session.roomId,this._container.getFirstCanvasId())){this._Str_20006();const a=n.getLocation(),c=this.getBubbleLocation(t.session.roomId,a),l=this._container.roomSession.userDataManager.getUserDataByIndex(t.objectId);let g="",d=0,h=null;const f=t.chatType;let E=t.style,k=0,H=-1;if(l){k=l.type;const qt=l.figure;switch(k){case s.OOj.PET:h=this.getPetImage(qt,2,!0,64,n.model.getValue(s.fql.FIGURE_POSTURE)),H=new s.OVR(qt).typeId;break;case s.OOj.USER:h=this.getUserImage(qt);break;case s.OOj.RENTABLE_BOT:case s.OOj.BOT:E=s.PWi.BOT}d=this._avatarColorCache.get(qt),g=l.name}let x=t.message;switch(f){case s.JTx.CHAT_TYPE_RESPECT:x=s.wjX.instance.getLocalizationWithParameter("widgets.chatbubble.respect","username",g);break;case s.JTx.CHAT_TYPE_PETRESPECT:x=s.wjX.instance.getLocalizationWithParameter("widget.chatbubble.petrespect","petname",g);break;case s.JTx.CHAT_TYPE_PETTREAT:x=s.wjX.instance.getLocalizationWithParameter("widget.chatbubble.pettreat","petname",g);break;case s.JTx.CHAT_TYPE_HAND_ITEM_RECEIVED:x=s.wjX.instance.getLocalizationWithParameters("widget.chatbubble.handitem",["username","handitem"],[g,s.wjX.instance.getLocalization("handitem"+t.extraParam)]);break;case s.JTx.CHAT_TYPE_MUTE_REMAINING:{const qt=(t.extraParam>0?Math.floor(t.extraParam/3600):0).toString(),$t=(t.extraParam>0?Math.floor(t.extraParam%3600/60):0).toString(),z=(t.extraParam%60).toString();x=s.wjX.instance.getLocalizationWithParameters("widget.chatbubble.mutetime",["hours","minutes","seconds"],[qt,$t,z]);break}}const ue=new Ri;ue.senderId=t.objectId,ue.senderName=l.name+":",ue.senderColor=d,h&&h.src&&(ue.senderImageUrl=h.src),ue.content=x,ue.chatType=f,ue.chatStyle=E,this._chatHistoryService.addItem(t.session.roomId,ue),this._container&&this._container.events&&this._container.events.dispatchEvent(new mn(mn.RWCUE_EVENT_CHAT,l.roomIndex,x,g,s.YGE.UNIT,k,H,c.x,c.y,h,d,t.session.roomId,f,E,[]))}return}}}getUserImage(o){let t=this._avatarImageCache.get(o);return t||(t=this.setFigureImage(o)),t}setFigureImage(o){const t=this._container.avatarRenderManager.createAvatarImage(o,s.bLn.LARGE,null,this);if(!t)return;const n=t.getCroppedImage(s.GXC.HEAD),r=t.getPartColor(s.Bnr.CHEST);return this._avatarColorCache.set(o,r&&r.rgb||16777215),t.dispose(),this._avatarImageCache.set(o,n),n}getPetImage(o,t,n,r=64,a=null){let c=this._petImageCache.get(o+a);if(c)return c;const l=new s.OVR(o),d=this._container.roomEngine.getRoomObjectPetImage(l.typeId,l.paletteId,l.color,new s.UJ(45*t),r,null,!1,0,l.customParts,a);return d&&(c=s.Oau.generateImage(d.data),this._petImageCache.set(o+a,c)),c}resetFigure(o){this.setFigureImage(o)}get type(){return s.z5f.CHAT_WIDGET}get messageTypes(){return[]}get eventTypes(){return[s.JTx.CHAT_EVENT]}get container(){return this._container}set container(o){this._container=o}get widget(){return this._widget}set widget(o){this._widget=o}get connection(){return this._connection}set connection(o){this._connection=o}get disposed(){return this._disposed}}let De=(()=>{class i extends Q{constructor(t,n){super(t),this._userName="",this._userName=n}get userName(){return this._userName}}return i.RWDE_RINGING="RWDE_RINGING",i.REJECTED="RWDE_REJECTED",i.RWDE_ACCEPTED="RWDE_ACCEPTED",i})(),In=(()=>{class i extends X{constructor(t,n){super(i.RWLUIM_LET_USER_IN),this._userName=t,this._canEnter=n}get userName(){return this._userName}get _Str_23117(){return this._canEnter}}return i.RWLUIM_LET_USER_IN="RWLUIM_LET_USER_IN",i})();class Xo{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(o){return o&&this._container?(!o||o.type!=In.RWLUIM_LET_USER_IN||this._container.roomSession.sendDoorbellApprovalMessage(o.userName,o._Str_23117),null):null}processEvent(o){if(!o)return;const t=o;if(t)switch(o.type){case s._LU.RSDE_REJECTED:return void this._container.events.dispatchEvent(new De(De.REJECTED,t.userName));case s._LU.DOORBELL:return void this._container.events.dispatchEvent(new De(De.RWDE_RINGING,t.userName));case s._LU.RSDE_ACCEPTED:return void this._container.events.dispatchEvent(new De(De.RWDE_ACCEPTED,t.userName))}}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.DOORBELL}set container(o){this._container=o}get messageTypes(){return[In.RWLUIM_LET_USER_IN]}get eventTypes(){return[s._LU.DOORBELL,s._LU.RSDE_REJECTED,s._LU.RSDE_ACCEPTED]}}class Yo{constructor(){this._container=null,this._disposed=!1,this._roomId=0,this._roomId=Math.floor(11*Math.random()),this.onLoveLockFurniFinishedEvent=this.onLoveLockFurniFinishedEvent.bind(this),this.onLoveLockFurniFriendConfirmedEvent=this.onLoveLockFurniFriendConfirmedEvent.bind(this),this.onLoveLockFurniStartEvent=this.onLoveLockFurniStartEvent.bind(this)}dispose(){for(const o of this._messages)this._container.connection.removeMessageEvent(o);this._messages=[],this._container=null,this._disposed=!0}processEvent(o){}processWidgetMessage(o){return null}_Str_17138(o,t){null==this._container||this._disposed||this._container.connection.send(new s.Nwy(o,t))}update(){}get disposed(){return this._disposed}get type(){return""}get container(){return this._container}set container(o){if(this._container=o,this._container){this._messages=[new s.t5X(this.onLoveLockFurniStartEvent),new s.N4P(this.onLoveLockFurniFriendConfirmedEvent),new s.kjq(this.onLoveLockFurniFinishedEvent)];for(const t of this._messages)o.connection.addMessageEvent(t)}}onLoveLockFurniStartEvent(o){if(!this._widget||!o||!o.getParser())return;const t=o.getParser();this._widget.open(t.furniId,t.start)}onLoveLockFurniFinishedEvent(o){this._widget&&o&&o.getParser()&&o.getParser()}onLoveLockFurniFriendConfirmedEvent(o){}sendStart(o,t){this._container.connection.send(new s.Nwy(o,t))}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(o){this._widget=o}}class zo{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}get disposed(){return this._isDisposed}get type(){return s.z5f.FRIEND_FURNI_ENGRAVING}get container(){return this._container}set container(o){this._container=o}set widget(o){this._widget=o}dispose(){this._container=null,this._widget=null,this._isDisposed=!0}processEvent(o){if(this.disposed||null==o)return;let t=null;switch(o.type){case s.L4R.REQUEST_FRIEND_FURNITURE_ENGRAVING:if(t=o,t&&this._container.roomEngine&&this._widget){const n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n){const r=n.model;if(r){const a=new s.riO;a.initializeFromRoomObjectModel(r),this._widget.open(n.id,r.getValue(s.fql.FURNITURE_FRIENDFURNI_ENGRAVING),a)}}}return}}processWidgetMessage(o){return null}get eventTypes(){return[s.L4R.REQUEST_FRIEND_FURNITURE_ENGRAVING]}get messageTypes(){return[]}update(){}}let Zt=(()=>{class i extends Q{constructor(t,n,r=0,a=null){super(t),this._requestId=n,this._userId=r,this._userName=a}get requestId(){return this._requestId}get userId(){return this._userId}get userName(){return this._userName}}return i.RWFRUE_SHOW_FRIEND_REQUEST="RWFRUE_SHOW_FRIEND_REQUEST",i.RWFRUE_HIDE_FRIEND_REQUEST="RWFRUE_HIDE_FRIEND_REQUEST",i})(),Ft=(()=>{class i extends X{constructor(t,n=0){super(t),this._requestId=0,this._requestId=n}get _Str_2951(){return this._requestId}}return i.RWFRM_ACCEPT="RWFRM_ACCEPT",i.RWFRM_DECLINE="RWFRM_DECLINE",i})();class Ko{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(o){if(!o)return null;switch(o.type){case Ft.RWFRM_ACCEPT:if(!this._container.friendService)return null;this._container.friendService.acceptFriendRequestById(o._Str_2951);break;case Ft.RWFRM_DECLINE:if(!this._container.friendService)return null;this._container.friendService.removeFriendRequestById(o._Str_2951)}return null}processEvent(o){if(o)switch(o.type){case s.MZ1.RSFRE_FRIEND_REQUEST:return void this._container.events.dispatchEvent(new Zt(Zt.RWFRUE_SHOW_FRIEND_REQUEST,o.requestId,o.userId,o.userName));case ve.ACCEPTED:case ve.DECLINED:return void this._container.events.dispatchEvent(new Zt(Zt.RWFRUE_HIDE_FRIEND_REQUEST,o.requestId))}}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.FRIEND_REQUEST}set container(o){this._container=o}get messageTypes(){return[Ft.RWFRM_ACCEPT,Ft.RWFRM_DECLINE]}get eventTypes(){return[s.MZ1.RSFRE_FRIEND_REQUEST,ve.ACCEPTED,ve.DECLINED]}}function Mi(i){let o=1;return"-"===i[0]&&(o=-1,i=i.substr(1)),function(t,n){return(t[i]<n[i]?-1:t[i]>n[i]?1:0)*o}}class ti{constructor(o,t,n){this._id=o,this._category=t,this._name=n}get id(){return this._id}get category(){return this._category}get name(){return this._name}}let Dt=(()=>{class i extends Q{constructor(t,n,r=!1){super(t),this._items=n.slice(),this._Str_10043=r}get items(){return this._items}get _Str_2799(){return this._Str_10043}}return i.RWCCE_USER_CHOOSER_CONTENT="RWCCE_USER_CHOOSER_CONTENT",i.RWCCE_FURNI_CHOOSER_CONTENT="RWCCE_FURNI_CHOOSER_CONTENT",i})();class $o{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(o){if(!o)return null;switch(o.type){case Fe.RWRWM_FURNI_CHOOSER:this.processFurniChooser();break;case _e.SELECT_OBJECT:this.selectFurni(o)}return null}selectFurni(o){null!=o&&(o.category==s.YGE.WALL||o.category==s.YGE.FLOOR)&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,o.id,o.category)}processFurniChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const o=this._container.roomSession.roomId,t=[];this.processFloorFurni(o,t),this.processWallFurni(o,t),t.sort(Mi("name")),this._container.events.dispatchEvent(new Dt(Dt.RWCCE_FURNI_CHOOSER_CONTENT,t,!1))}processWallFurni(o,t){const n=this._container.roomEngine.getRoomObjectCount(o,s.YGE.WALL);for(let r=0;r<n;r++){const a=this._container.roomEngine.getRoomObjectByIndex(o,r,s.YGE.WALL);if(null==a)continue;const c=a.type;let l=null;if(c.startsWith("poster")){const g=Number.parseInt(c.replace("poster",""));l=s.wjX.instance.localization.getValue("poster_"+g+"_name")}else{const g=Number.parseInt(a.model.getValue(s.fql.FURNITURE_TYPE_ID)),d=this._container.sessionDataManager.getWallItemData(g);l=null!=d&&d.name.length>0?d.name:c}t.push(new ti(a.id,s.YGE.WALL,l))}}processFloorFurni(o,t){const n=this._container.roomEngine.getRoomObjectCount(o,s.YGE.FLOOR);for(let r=0;r<n;r++){const a=this._container.roomEngine.getRoomObjectByIndex(o,r,s.YGE.FLOOR);if(null==a)continue;const c=Number.parseInt(a.model.getValue(s.fql.FURNITURE_TYPE_ID)),l=this._container.sessionDataManager.getFloorItemData(c);t.push(new ti(a.id,s.YGE.FLOOR,null!=l?l.name:a.type))}}processEvent(o){}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.FURNI_CHOOSER}set container(o){this._container=o}get messageTypes(){return[Fe.RWRWM_FURNI_CHOOSER,_e.SELECT_OBJECT]}get eventTypes(){return[]}}class er{constructor(){this._isDisposed=!1,this._container=null,this._widget=null}dispose(){this._isDisposed=!0,this._container=null,this._widget=null}processWidgetMessage(o){return null}processEvent(o){switch(o.type){case s.L4R.REQUEST_BACKGROUND_COLOR:{if(!this.canOpenBackgroundToner())return;const n=this._container.roomEngine.getRoomObject(o.roomId,o.objectId,o.category),r=n.model,a=Number.parseInt(r.getValue(s.fql.FURNITURE_ROOM_BACKGROUND_COLOR_HUE)),c=Number.parseInt(r.getValue(s.fql.FURNITURE_ROOM_BACKGROUND_COLOR_SATURATION)),l=Number.parseInt(r.getValue(s.fql.FURNITURE_ROOM_BACKGROUND_COLOR_LIGHTNESS));this._widget.open(n.id,a,c,l)}}}canOpenBackgroundToner(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=s.A5x.GUEST||this._container.sessionDataManager.isGodMode}set widget(o){this._widget=o}get widget(){return this._widget}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.ROOM_BACKGROUND_COLOR}set container(o){this._container=o}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[s.L4R.REQUEST_BACKGROUND_COLOR]}}let tr=(()=>{class i extends X{constructor(t,n,r=-1){super(t),this._roomObjectId=0,this._petId=-1,this._roomObjectId=n,this._petId=r}get _Str_2713(){return this._roomObjectId}get _Str_2508(){return this._petId}}return i.RWUPM_PET_PRODUCT="RWUPM_PET_PRODUCT",i.MONSTERPLANT_SEED="RWUPM_MONSTERPLANT_SEED",i})();class nr{constructor(){this._container=null,this._isDisposed=!1,this.handleMonsterSeedPlant=this.handleMonsterSeedPlant.bind(this),this.handlePurchasableClothing=this.handlePurchasableClothing.bind(this),this.handleMysterybox=this.handleMysterybox.bind(this),this.handleEffectBox=this.handleEffectBox.bind(this),this.handleMysteryTrophy=this.handleMysteryTrophy.bind(this)}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(o){return null}processEvent(o){}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.FURNI_STICKIE_WIDGET}set container(o){this._container&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.removeEventListener(s.L4R.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.removeEventListener(s.L4R.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.removeEventListener(s.L4R.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.removeEventListener(s.L4R.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.removeEventListener(s.L4R.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy)),this._container=o,o&&this._container.sessionDataManager&&this._container.sessionDataManager.events&&(this._container.roomEngine.events.addEventListener(s.L4R.REQUEST_MONSTERPLANT_SEED_PLANT_CONFIRMATION_DIALOG,this.handleMonsterSeedPlant),this._container.roomEngine.events.addEventListener(s.L4R.REQUEST_PURCHASABLE_CLOTHING_CONFIRMATION_DIALOG,this.handlePurchasableClothing),this._container.roomEngine.events.addEventListener(s.L4R.REQUEST_MYSTERYBOX_OPEN_DIALOG,this.handleMysterybox),this._container.roomEngine.events.addEventListener(s.L4R.REQUEST_EFFECTBOX_OPEN_DIALOG,this.handleEffectBox),this._container.roomEngine.events.addEventListener(s.L4R.REQUEST_MYSTERYTROPHY_OPEN_DIALOG,this.handleMysteryTrophy))}get container(){return this._container}getRoomObject(o){return this._container?this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,o,s.YGE.FLOOR):null}getFurniData(o){if(!o)return null;const t=Number.parseInt(o.model.getValue(s.fql.FURNITURE_TYPE_ID));return this._container.sessionDataManager.getFloorItemData(t)}handlePurchasableClothing(o){if(!this._widget)return;const t=this.getRoomObject(o.objectId);!t||!this._container.isOwnerOfFurniture(t)||this._widget._Str_24748(t)}handleMonsterSeedPlant(o){}handleMysterybox(o){}handleEffectBox(o){}handleMysteryTrophy(o){}get widget(){return this._widget}set widget(o){this._widget=o}get messageTypes(){return[tr.MONSTERPLANT_SEED]}get eventTypes(){return[s.L4R.OPEN_FURNI_CONTEXT_MENU,s.L4R.CLOSE_FURNI_CONTEXT_MENU]}}let yn=(()=>{class i extends Q{constructor(t,n,r,a){super(t),this._value=a,this._objectId=r,this._furniType=n}get value(){return this._value}get objectId(){return this._objectId}get furniType(){return this._furniType}}return i.RWCFUE_CREDIT_FURNI_UPDATE="RWCFUE_CREDIT_FURNI_UPDATE",i})(),Rn=(()=>{class i extends X{constructor(t,n){super(t),this._objectId=n}get objectId(){return this._objectId}}return i.RWFCRM_REDEEM="RWFCRM_REDEEM",i})(),re=(()=>{class i extends X{constructor(t,n,r,a){super(t),this._objectId=n,this._category=r,this._roomId=a}get objectId(){return this._objectId}get category(){return this._category}get roomId(){return this._roomId}}return i.REQUEST_CREDITFURNI="RWFWM_MESSAGE_REQUEST_CREDITFURNI",i.REQUEST_STICKIE="RWFWM_MESSAGE_REQUEST_STICKIE",i.REQUEST_PRESENT="RWFWM_MESSAGE_REQUEST_PRESENT",i.REQUEST_TROPHY="RWFWM_MESSAGE_REQUEST_TROPHY",i.REQUEST_TEASER="RWFWM_MESSAGE_REQUEST_TEASER",i.REQUEST_ECOTRONBOX="RWFWM_MESSAGE_REQUEST_ECOTRONBOX",i.REQUEST_DIMMER="RWFWM_MESSAGE_REQUEST_DIMMER",i.REQUEST_PLACEHOLDER="RWFWM_MESSAGE_REQUEST_PLACEHOLDER",i.REQUEST_CLOTHING_CHANGE="RWFWM_MESSAGE_REQUEST_CLOTHING_CHANGE",i.REQUEST_PLAYLIST_EDITOR="RWFWM_MESSAGE_REQUEST_PLAYLIST_EDITOR",i.REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_ENGRAVING",i.REQUEST_ACHIEVEMENT_RESOLUTION_FAILED="RWFWM_WIDGET_MESSAGE_REQUEST_ACHIEVEMENT_RESOLUTION_FAILED",i.REQUEST_BADGE_DISPLAY_ENGRAVING="RWFWM_WIDGET_MESSAGE_REQUEST_BADGE_DISPLAY_ENGRAVING",i})();class ir{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(o){if(!o||!this.container)return null;switch(o.type){case re.REQUEST_CREDITFURNI:{const t=o,n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n&&this._container.isOwnerOfFurniture(n)){const r=n.model.getValue(s.fql.FURNITURE_CREDIT_VALUE);this._container.events.dispatchEvent(new yn(yn.RWCFUE_CREDIT_FURNI_UPDATE,n.model.getValue(s.fql.FURNITURE_TYPE_ID)+"_"+t.type+"_"+t.objectId,t.objectId,r))}break}case Rn.RWFCRM_REDEEM:{const t=o;this.container.roomSession&&this.container.roomSession.connection.send(new s.rVx(t.objectId));break}}return null}processEvent(o){}update(){}get disposed(){return!!this._container}get type(){return s.z5f.FURNI_CREDIT_WIDGET}get container(){return this._container}set container(o){this._container=o}get messageTypes(){return[re.REQUEST_CREDITFURNI,Rn.RWFCRM_REDEEM]}get eventTypes(){return[]}}class or{constructor(){this._container=null,this._widget=null,this._lastFurniId=-1,this._messages=[]}dispose(){this.container=null,this._widget=null}processWidgetMessage(o){return null}processEvent(o){if(!o)return;let t=null;switch(o.type){case s.L4R.OPEN_WIDGET:if(t=o,t&&this._container.roomEngine&&this._widget){this._lastFurniId=t.objectId;const n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);n&&this.canManipulateRoomObject(n)&&this._widget.open(this._lastFurniId,n.getLocation().z)}return;case s.L4R.CLOSE_WIDGET:return t=o,void(t&&this._container.roomEngine&&this._widget&&this._lastFurniId===t.objectId&&this._widget.hide())}}update(){}get disposed(){return!!this._container}get type(){return s.z5f.CUSTOM_STACK_HEIGHT}get container(){return this._container}set container(o){if(o!==this._container&&this._container){for(const t of this._messages)this._container.connection.removeMessageEvent(t);this._messages=[]}if(this._container=o,this._container){this._messages=[new s.ozr(this.onFurnitureStackHeightEvent.bind(this))];for(const t of this._messages)o.connection.addMessageEvent(t)}}get messageTypes(){return[]}get eventTypes(){return[]}get widget(){return this._widget}set widget(o){this._widget=o}onFurnitureStackHeightEvent(o){if(!o)return;const t=o.getParser();!t||this._widget&&this.canManipulateRoomObject()&&this._widget.update(t.furniId,t.height)}canManipulateRoomObject(o=null){const t=this._container.roomSession.isRoomOwner,n=this._container.roomSession.controllerLevel>=s.A5x.GUEST,r=this._container.sessionDataManager.isModerator,a=o&&this._container.isOwnerOfFurniture(o);return t||r||n||a}}let ni=(()=>{class i extends Q{constructor(t,n,r,a,c){super(i.RWDSUE_DIMMER_STATE),this._state=t,this._presetId=n,this._effectId=r,this._color=a,this._brightness=c}get state(){return this._state}get _Str_14686(){return this._presetId}get _Str_6815(){return this._effectId}get color(){return this._color}get _Str_5123(){return this._brightness}}return i.RWDSUE_DIMMER_STATE="RWDSUE_DIMMER_STATE",i})();class rr{constructor(o,t,n,r){this._id=0,this._type=0,this._color=0,this._intensity=0,this._id=o,this._type=t,this._color=n,this._intensity=r}get id(){return this._id}get type(){return this._type}get color(){return this._color}get _Str_4272(){return this._intensity}}let nn=(()=>{class i extends Q{constructor(t){super(t),this._selectedPresetId=0,this._presets=[]}get _Str_10888(){return this._presets.length}get presets(){return this._presets}get selectedPresetId(){return this._selectedPresetId}set selectedPresetId(t){this._selectedPresetId=t}setPresetValues(t,n,r,a){const c=new rr(t,n,r,a);this._presets[t-1]=c}getPresetNumber(t){return t<0||t>=this._presets.length?null:this._presets[t]}}return i.RWDUE_PRESETS="RWDUE_PRESETS",i.RWDUE_HIDE="RWDUE_HIDE",i})(),ii=(()=>{class i extends X{constructor(){super(i.RWCDSM_CHANGE_STATE)}}return i.RWCDSM_CHANGE_STATE="RWCDSM_CHANGE_STATE",i})(),Mn=(()=>{class i extends X{constructor(t,n,r){super(i.RWDPM_PREVIEW_DIMMER_PRESET),this._color=t,this._brightness=n,this._bgOnly=r}get color(){return this._color}get _Str_5123(){return this._brightness}get _Str_11464(){return this._bgOnly}}return i.RWDPM_PREVIEW_DIMMER_PRESET="RWDPM_PREVIEW_DIMMER_PRESET",i})(),oi=(()=>{class i extends X{constructor(t,n,r,a,c){super(i.RWSDPM_SAVE_PRESET),this._presetNumber=t,this._effectTypeId=n,this._color=r,this._brightness=a,this._apply=c}get _Str_25037(){return this._presetNumber}get _Str_24446(){return this._effectTypeId}get color(){return this._color}get _Str_5123(){return this._brightness}get apply(){return this._apply}}return i.RWSDPM_SAVE_PRESET="RWSDPM_SAVE_PRESET",i})();class sr{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(o){switch(o.type){case re.REQUEST_DIMMER:this.canOpenWidget()&&this._container.roomSession.requestMoodlightSettings();break;case oi.RWSDPM_SAVE_PRESET:this.canOpenWidget()&&this._container.roomSession.updateMoodlightData(o._Str_25037,o._Str_24446,o.color,o._Str_5123,o.apply);break;case ii.RWCDSM_CHANGE_STATE:this.canOpenWidget()&&this._container.roomSession.toggleMoodlightState();break;case Mn.RWDPM_PREVIEW_DIMMER_PRESET:if(!o||!this._container.roomEngine)return null;this._container.roomEngine.updateObjectRoomColor(this._container.roomSession.roomId,o.color,o._Str_5123,o._Str_11464)}return null}processEvent(o){switch(o.type){case s.BKf.ROOM_DIMMER_PRESETS:{const t=o,n=new nn(nn.RWDUE_PRESETS);n.selectedPresetId=t.selectedPresetId;let r=0;for(;r<t.presetCount;){const a=t.getPreset(r);a&&n.setPresetValues(a.id,a.type,a.color,a.light),r++}return void this._container.events.dispatchEvent(n)}case s.G53.ROOM_COLOR:return void this._container.events.dispatchEvent(new ni(o.state,o.presetId,o.effectId,o.color,o.brightness));case s.L4R.REMOVE_DIMMER:return void this._container.events.dispatchEvent(new nn(nn.RWDUE_HIDE))}}update(){}canOpenWidget(){return this._container.roomSession.isRoomOwner||this._container.roomSession.controllerLevel>=s.A5x.GUEST||this._container.sessionDataManager.isModerator}get disposed(){return this._isDisposed}get type(){return s.z5f.ROOM_DIMMER}set container(o){this._container=o}get messageTypes(){return[re.REQUEST_DIMMER,oi.RWSDPM_SAVE_PRESET,ii.RWCDSM_CHANGE_STATE,Mn.RWDPM_PREVIEW_DIMMER_PRESET]}get eventTypes(){return[s.BKf.ROOM_DIMMER_PRESETS,s.G53.ROOM_COLOR,s.L4R.REMOVE_DIMMER]}}class ar{constructor(){this._container=null,this._widget=null,this._cachedRequest=null,this._isDisposed=!1}dispose(){this._isDisposed=!0,this._container=null,this._widget=null,this._cachedRequest=null}processWidgetMessage(o){return null}processEvent(o){if(!o||this.disposed)return;const t=o;switch(o.type){case s.L4R.REQUEST_HIGH_SCORE_DISPLAY:{const n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n){const r=new s.HzV;r.initializeFromRoomObjectModel(n.model),this._widget.open(t.objectId,t.roomId,r),this._cachedRequest=t}return}case s.L4R.REQUEST_HIDE_HIGH_SCORE_DISPLAY:return void(t.roomId===this._widget.roomId&&t.objectId===this._widget.objectId&&(this._widget.hide(),this._cachedRequest=null))}}update(){if(!this._cachedRequest||!this.widget.visible||this._widget.roomId!==this._cachedRequest.roomId||this._widget.objectId!==this._cachedRequest.objectId)return;const o=this._container.roomEngine.getRoomObjectScreenLocation(this._cachedRequest.roomId,this._cachedRequest.objectId,this._cachedRequest.category);!o||this._widget.updatePoint(o.x,o.y)}get disposed(){return this._isDisposed}get type(){return s.z5f.HIGH_SCORE_DISPLAY}set container(o){this._container=o}get messageTypes(){return[]}get eventTypes(){return[s.L4R.REQUEST_HIGH_SCORE_DISPLAY,s.L4R.REQUEST_HIDE_HIGH_SCORE_DISPLAY]}get widget(){return this._widget}set widget(o){this._widget=o}}let cr=(()=>{class i{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(t){return null}processEvent(t){if(!t)return;let n=null;switch(t.type){case s.L4R.REQUEST_INTERNAL_LINK:if(n=t,n&&this._container.roomEngine){const r=this._container.roomEngine.getRoomObject(n.roomId,n.objectId,n.category);if(r&&r.model){let a=r.model.getValue(s.fql.FURNITURE_DATA)[i.INTERNALLINK];if((!a||""===a||0===a.length)&&(a=r.model.getValue(s.fql.FURNITURE_INTERNAL_LINK)),!a||0===a.length)return;s.wjX.instance.createLinkEvent(a)}}return}}update(){}get disposed(){return!!this._container}get type(){return s.z5f.INTERNAL_LINK}get container(){return this._container}set container(t){this._container=t}get messageTypes(){return[]}get eventTypes(){return[s.L4R.REQUEST_INTERNAL_LINK]}}return i.INTERNALLINK="internalLink",i})();class lr{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this._container=null}processWidgetMessage(o){return null}processEvent(o){switch(o.type){case s.L4R.REQUEST_MANNEQUIN:{const n=this._container.roomEngine.getRoomObject(o.roomId,o.objectId,o.category);if(!n)return;const r=n.model,a=r.getValue(s.fql.FURNITURE_MANNEQUIN_FIGURE),c=r.getValue(s.fql.FURNITURE_MANNEQUIN_GENDER),l=r.getValue(s.fql.FURNITURE_MANNEQUIN_NAME);return void(a&&c&&this._widget.open(n.id,a,c,l))}}}update(){}get widget(){return this._widget}set widget(o){this._widget=o}get disposed(){return this._isDisposed}get type(){return s.z5f.MANNEQUIN}set container(o){this._container=o}get container(){return this._container}get messageTypes(){return[]}get eventTypes(){return[s.L4R.REQUEST_MANNEQUIN]}}let j=(()=>{class i{}return i.WALL="i",i.FLOOR="s",i.EFFECT="e",i.HABBO_CLUB="h",i.BADGE="b",i.GAME_TOKEN="GAME_TOKEN",i.PET="p",i.ROBOT="r",i})(),N=(()=>{class i extends Q{constructor(t,n,r,a=!1,c=null,l=null,g=null){super(t),this._objectId=-1,this._classId=0,this._itemType="",this._giftMessage="",this._extra=null,this._placedItemId=-1,this._placedItemType="",this._objectId=n,this._giftMessage=r,this._extra=c,this._isController=a,this._purchaserName=l,this._purchaserFigure=g}get objectId(){return this._objectId}get classId(){return this._classId}set classId(t){this._classId=t}get itemType(){return this._itemType}set itemType(t){this._itemType=t}get giftMessage(){return this._giftMessage}get extra(){return this._extra}get isController(){return this._isController}get purchaserName(){return this._purchaserName}get purchaserFigure(){return this._purchaserFigure}get placedItemId(){return this._placedItemId}set placedItemId(t){this._placedItemId=t}get placedInRoom(){return this._placedInRoom}set placedInRoom(t){this._placedInRoom=t}get placedItemType(){return this._placedItemType}set placedItemType(t){this._placedItemType=t}}return i.RWPDUE_PACKAGEINFO="RWPDUE_PACKAGEINFO",i.RWPDUE_CONTENTS="RWPDUE_CONTENTS",i.RWPDUE_CONTENTS_CLUB="RWPDUE_CONTENTS_CLUB",i.RWPDUE_CONTENTS_FLOOR="RWPDUE_CONTENTS_FLOOR",i.RWPDUE_CONTENTS_LANDSCAPE="RWPDUE_CONTENTS_LANDSCAPE",i.RWPDUE_CONTENTS_WALLPAPER="RWPDUE_CONTENTS_WALLPAPER",i.RWPDUE_CONTENTS_IMAGE="RWPDUE_CONTENTS_IMAGE",i})(),On=(()=>{class i extends X{constructor(t,n){super(t),this._objectId=n}get objectId(){return this._objectId}}return i.RWPOM_OPEN_PRESENT="RWPOM_OPEN_PRESENT",i})(),ur=(()=>{class i{constructor(){this._name=null,this._objectId=-1,this._isDisposed=!1,this._container=null}dispose(){this._name=null,this._objectId=-1,this._container=null,this._isDisposed=!0}processWidgetMessage(t){if(!t)return null;switch(t.type){case re.REQUEST_PRESENT:{const n=t,r=this._container.roomEngine.getRoomObject(n.roomId,n.objectId,n.category);if(!r)return null;this._objectId=n.objectId;const a=r.model.getValue(s.fql.FURNITURE_DATA)||"",c=r.model.getValue(s.fql.FURNITURE_PURCHASER_NAME),l=r.model.getValue(s.fql.FURNITURE_PURCHASER_FIGURE),d=(r.model.getValue(s.fql.FURNITURE_TYPE_ID),r.model.getValue(s.fql.FURNITURE_EXTRAS));this._container.events.dispatchEvent(new N(N.RWPDUE_PACKAGEINFO,n.objectId,a,this._container.isOwnerOfFurniture(r),d,c,l));break}case On.RWPOM_OPEN_PRESENT:{const n=t;if(n.objectId!==this._objectId)return null;this._container&&(this._container.roomSession.openGift(n.objectId),this._container.roomEngine.changeObjectModelData(this._container.roomEngine.activeRoomId,n.objectId,s.YGE.FLOOR,s.fql.FURNITURE_DISABLE_PICKING_ANIMATION,1));break}}return null}processEvent(t){if(t&&this._container&&this._container.events)switch(t.type){case s.J8G.RSPE_PRESENT_OPENED:{const n=t;let r=null;n.itemType===j.FLOOR?r=this._container.sessionDataManager.getFloorItemData(n.classId):n.itemType===j.WALL&&(r=this._container.sessionDataManager.getWallItemData(n.classId));let a=!1;if(n.placedInRoom){const l=this._container.roomEngine.getRoomObject(this._container.roomSession.roomId,n.placedItemId,s.YGE.FLOOR);l&&(a=this._container.isOwnerOfFurniture(l))}let c=null;switch(n.itemType){case j.WALL:if(r)switch(r.className){case i.LANDSCAPE:c=new N(N.RWPDUE_CONTENTS_LANDSCAPE,0,s.wjX.instance.localization.getValue("inventory.furni.item.landscape.name"),a);break;case i.WALLPAPER:c=new N(N.RWPDUE_CONTENTS_WALLPAPER,0,s.wjX.instance.localization.getValue("inventory.furni.item.wallpaper.name"),a);break;case i.POSTER:{const l=n.productCode;let g=null;0===l.indexOf("poster")&&(g=l.replace("poster",""));const d=this._container.sessionDataManager.getProductData(l);let h="";d?h=d.name:r&&(h=r.name),c=new N(N.RWPDUE_CONTENTS,0,h,a,g);break}default:c=new N(N.RWPDUE_CONTENTS,0,r.name||"",a)}break;case j.HABBO_CLUB:c=new N(N.RWPDUE_CONTENTS_CLUB,0,s.wjX.instance.localization.getValue("widget.furni.present.hc"),!1);break;default:{const l=this._container.sessionDataManager.getFloorItemData(n.classId);let g="";l?g=l.name:r&&(g=r.name),c=new N(N.RWPDUE_CONTENTS,0,g,a);break}}c&&(c.classId=n.classId,c.itemType=n.itemType,c.placedItemId=n.placedItemId,c.placedInRoom=n.placedInRoom,c.placedItemType=n.placedItemType,this._container.events.dispatchEvent(c));break}}}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.FURNI_PRESENT_WIDGET}set container(t){this._container=t}get messageTypes(){return[re.REQUEST_PRESENT,On.RWPOM_OPEN_PRESENT]}get eventTypes(){return[s.J8G.RSPE_PRESENT_OPENED]}imageFailed(t){}imageReady(t,n,r){}}return i.FLOOR="floor",i.WALLPAPER="wallpaper",i.LANDSCAPE="landscape",i.POSTER="poster",i})(),_r=(()=>{class i{constructor(){this._container=null,this._messages=[],this._link=null,this._roomIdToEnter=0,this._confirmDialog=null}dispose(){this.container=null,this._link=null,this._roomIdToEnter=0,this.closeConfirmDialog()}processWidgetMessage(t){return null}processEvent(t){if(!t)return;let n=null;switch(t.type){case s.L4R.REQUEST_ROOM_LINK:if(n=t,n&&this._container.roomEngine){const r=this._container.roomEngine.getRoomObject(n.roomId,n.objectId,n.category);if(r&&r.model){let a=r.model.getValue(s.fql.FURNITURE_DATA)[i.INTERNALLINK];if((!a||""===a||0===a.length)&&(a=r.model.getValue(s.fql.FURNITURE_INTERNAL_LINK)),!a||0===a.length)return;this.closeConfirmDialog(),this._link=a,this._roomIdToEnter=parseInt(a,10),this._container&&this._container.connection&&this._container.connection.send(new s.YeH(this._roomIdToEnter,!1,!1))}}return}}onRoomInfoEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.data;if(!r||r.roomId!==this._roomIdToEnter)return;this._roomIdToEnter=0;const a=r.roomName,c=r.ownerName;let l=s.wjX.instance.getLocalization("room.link.confirmation.message");l&&l.indexOf("%%room_name%%")>-1&&(l=l.replace("%%room_name%%",a)),l&&l.indexOf("%%owner_name%%")>-1&&(l=l.replace("%%owner_name%%",c)),this.closeConfirmDialog(),this._container&&this._container.notificationService&&(this._confirmDialog=this._container.notificationService.alertWithConfirm(l,null,()=>{s.wjX.instance.createLinkEvent("navigator/goto/"+this._link)}))}closeConfirmDialog(){!this._confirmDialog||(this._confirmDialog.close(),this._confirmDialog=null)}update(){}get disposed(){return!!this._container}get type(){return s.z5f.ROOM_LINK}get container(){return this._container}set container(t){if(t!==this._container&&this._container){for(const n of this._messages)this._container.connection.removeMessageEvent(n);this._messages=[]}if(this._container=t,this._container){this._messages=[new s.hVP(this.onRoomInfoEvent.bind(this))];for(const n of this._messages)t.connection.addMessageEvent(n)}}get messageTypes(){return[]}get eventTypes(){return[s.L4R.REQUEST_ROOM_LINK]}}return i.INTERNALLINK="internalLink",i})(),Un=(()=>{class i extends Q{constructor(t,n,r,a,c,l){super(t),this._Str_2319=-1,this._Str_2319=n,this._Str_3796=r,this._text=a,this._Str_3062=c,this._controller=l}get _Str_1577(){return this._Str_2319}get _Str_1723(){return this._Str_3796}get text(){return this._text}get _Str_10471(){return this._Str_3062}get controller(){return this._controller}}return i.RWSDUE_STICKIE_DATA="RWSDUE_STICKIE_DATA",i})(),Pt=(()=>{class i extends X{constructor(t,n,r="",a=""){super(t),this._objectId=n,this._text=r,this._colorHex=a}get objectId(){return this._objectId}get text(){return this._text}get colorHex(){return this._colorHex}}return i.SEND_UPDATE="RWSUM_STICKIE_SEND_UPDATE",i.SEND_DELETE="RWSUM_STICKIE_SEND_DELETE",i})();class gr{constructor(){this._container=null,this._isDisposed=!1}dispose(){this._container=null,this._isDisposed=!0}processWidgetMessage(o){if(!o)return null;switch(o.type){case re.REQUEST_STICKIE:{const t=o,n=this._container.roomEngine.getRoomObject(t.roomId,t.objectId,t.category);if(n){const r=n.model.getValue(s.fql.FURNITURE_ITEMDATA);if(r.length<6)return null;let a=null,c=null;r.indexOf(" ")>0?(a=r.slice(0,r.indexOf(" ")),c=r.slice(r.indexOf(" ")+1,r.length)):a=r,this._container.events.dispatchEvent(new Un(Un.RWSDUE_STICKIE_DATA,t.objectId,n.type,c,a,this._container.roomSession.isRoomOwner||this._container.sessionDataManager.isModerator))}break}case Pt.SEND_UPDATE:this._container.roomEngine.modifyRoomObjectData(o.objectId,s.YGE.WALL,o.colorHex,o.text);break;case Pt.SEND_DELETE:this._container.roomEngine.deleteRoomObject(o.objectId,s.YGE.WALL)}return null}processEvent(o){}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.FURNI_STICKIE_WIDGET}set container(o){this._container=o}get messageTypes(){return[re.REQUEST_STICKIE,Pt.SEND_DELETE,Pt.SEND_UPDATE]}get eventTypes(){return[]}}let Nn=(()=>{class i extends Q{constructor(t,n,r,a,c,l){super(t),this._name=n,this._date=r,this._message=a,this._color=c,this._viewType=l}get name(){return this._name}get date(){return this._date}get message(){return this._message}get color(){return this._color}get viewType(){return this._viewType}}return i.TROPHY_DATA="RWTDUE_TROPHY_DATA",i})();class dr{constructor(){this._container=null}dispose(){this._container=null}processWidgetMessage(o){if(!o||!this.container)return null;switch(o.type){case re.REQUEST_TROPHY:{const n=this._container.roomEngine.getRoomObject(o.roomId,o.objectId,o.category);if(n){let r=n.model.getValue(s.fql.FURNITURE_DATA),a=n.model.getValue(s.fql.FURNITURE_EXTRAS);a||(a="0");const c=n.model.getValue(s.fql.FURNITURE_COLOR),l=r.substring(0,r.indexOf("\t"));r=r.substring(l.length+1,r.length);const g=r.substring(0,r.indexOf("\t")),d=r.substr(g.length+1,r.length);this._container.events.dispatchEvent(new Nn(Nn.TROPHY_DATA,l,g,d,parseInt(c),parseInt(a)))}break}}return null}processEvent(o){}update(){}get disposed(){return!!this._container}get type(){return s.z5f.FURNI_TROPHY_WIDGET}get container(){return this._container}set container(o){this._container=o}get messageTypes(){return[re.REQUEST_TROPHY]}get eventTypes(){return[]}}let qn=(()=>{class i extends Q{constructor(t,n,r,a,c){super(i.RWONE_TYPE),this._userId=t,this._category=n,this._userName=r,this._userType=a,this._roomIndex=c}get userId(){return this._userId}get category(){return this._category}get userName(){return this._userName}get userType(){return this._userType}get roomIndex(){return this._roomIndex}}return i.RWONE_TYPE="RWONE_TYPE",i})(),on=(()=>{class i extends Q{constructor(t,n){super(i.RWWCIDE_CHAT_INPUT_CONTENT),this._Str_21134="",this._userName="",this._Str_21134=t,this._userName=n}get _Str_23621(){return this._Str_21134}get userName(){return this._userName}}return i.RWWCIDE_CHAT_INPUT_CONTENT="RWWCIDE_CHAT_INPUT_CONTENT",i.WHISPER="whisper",i.SHOUT="shout",i})(),Jt=(()=>{class i extends Q{constructor(t){super(t),this._id=0,this._category=0,this._name="",this._description="",this._image=null,this._isWallItem=!1,this._isStickie=!1,this._isRoomOwner=!1,this._roomControllerLevel=0,this._isAnyRoomController=!1,this._expiration=-1,this._purchaseCatalogPageId=-1,this._purchaseOfferId=-1,this._extraParam="",this._isOwner=!1,this._stuffData=null,this._groupId=0,this._ownerId=0,this._ownerName="",this._usagePolicy=0,this._rentCatalogPageId=-1,this._rentOfferId=-1,this._purchaseCouldBeUsedForBuyout=!1,this._rentCouldBeUsedForBuyout=!1,this._availableForBuildersClub=!1}set id(t){this._id=t}get id(){return this._id}set category(t){this._category=t}get category(){return this._category}set name(t){this._name=t}get name(){return this._name}set description(t){this._description=t}get description(){return this._description}set image(t){this._image=t}get image(){return this._image}set isWallItem(t){this._isWallItem=t}get isWallItem(){return this._isWallItem}set isStickie(t){this._isStickie=t}get isStickie(){return this._isStickie}set isRoomOwner(t){this._isRoomOwner=t}get isRoomOwner(){return this._isRoomOwner}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isAnyRoomOwner(t){this._isAnyRoomController=t}get isAnyRoomOwner(){return this._isAnyRoomController}set expiration(t){this._expiration=t}get expiration(){return this._expiration}set purchaseOfferId(t){this._purchaseOfferId=t}get purchaseOfferId(){return this._purchaseOfferId}set extraParam(t){this._extraParam=t}get extraParam(){return this._extraParam}set isOwner(t){this._isOwner=t}get isOwner(){return this._isOwner}set stuffData(t){this._stuffData=t}get stuffData(){return this._stuffData}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set ownerId(t){this._ownerId=t}get ownerId(){return this._ownerId}set ownerName(t){this._ownerName=t}get ownerName(){return this._ownerName}set usagePolicy(t){this._usagePolicy=t}get usagePolicy(){return this._usagePolicy}set rentOfferId(t){this._rentOfferId=t}get rentOfferId(){return this._rentOfferId}get purchaseCouldBeUsedForBuyout(){return this._purchaseCouldBeUsedForBuyout}set purchaseCouldBeUsedForBuyout(t){this._purchaseCouldBeUsedForBuyout=t}get rentCouldBeUsedForBuyout(){return this._rentCouldBeUsedForBuyout}set rentCouldBeUsedForBuyout(t){this._rentCouldBeUsedForBuyout=t}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(t){this._availableForBuildersClub=t}}return i.FURNI="RWFIUE_FURNI",i})(),Ht=(()=>{class i extends Q{constructor(t,n,r,a,c,l,g,d,h,f){super(i.PET_INFO),this._Str_6689=t,this._Str_20932=n,this._name=r,this._id=a,this._petFigureData=c,this._Str_10121=l,this._ownerId=g,this._ownerName=d,this._Str_2775=h,this._unknownRarityLevel=f}get name(){return this._name}get petFigureData(){return this._petFigureData}get id(){return this._id}get _Str_4355(){return this._Str_6689}get _Str_14767(){return this._Str_20932}get _Str_5175(){return this._Str_10121}get ownerId(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_2707(){return this._Str_2775}get unknownRarityLevel(){return this._unknownRarityLevel}get level(){return this._level}set level(t){this._level=t}get maximumLevel(){return this._maximumLevel}set maximumLevel(t){this._maximumLevel=t}get experience(){return this._experience}set experience(t){this._experience=t}get levelExperienceGoal(){return this._levelExperienceGoal}set levelExperienceGoal(t){this._levelExperienceGoal=t}get energy(){return this._energy}set energy(t){this._energy=t}get maximumEnergy(){return this._maximumEnergy}set maximumEnergy(t){this._maximumEnergy=t}get happyness(){return this._happyness}set happyness(t){this._happyness=t}get maximumHappyness(){return this._maximumHappyness}set maximumHappyness(t){this._maximumHappyness=t}get _Str_2985(){return this._Str_3973}set _Str_2985(t){this._Str_3973=t}get _Str_5114(){return this._Str_11149}set _Str_5114(t){this._Str_11149=t}get respect(){return this._respect}set respect(t){this._respect=t}get age(){return this._age}set age(t){this._age=t}get saddle(){return this._saddle}set saddle(t){this._saddle=t}get rider(){return this._rider}set rider(t){this._rider=t}get breedable(){return this._breedable}set breedable(t){this._breedable=t}get _Str_3307(){return this._Str_4460}set _Str_3307(t){this._Str_4460=t}get publiclyRideable(){return this._publiclyRideable}set publiclyRideable(t){this._publiclyRideable=t}get fullyGrown(){return this._fullyGrown}set fullyGrown(t){this._fullyGrown=t}get dead(){return this._dead}set dead(t){this._dead=t}get rarityLevel(){return this._rarityLevel}set rarityLevel(t){this._rarityLevel=t}get maximumTimeToLive(){return this._maximumTimeToLive}set maximumTimeToLive(t){this._maximumTimeToLive=t}get remainingTimeToLive(){return this._remainingTimeToLive}set remainingTimeToLive(t){this._remainingTimeToLive=t}get remainingGrowTime(){return this._remainingGrowTime}set remainingGrowTime(t){this._remainingGrowTime=t}get publiclyBreedable(){return this._publiclyBreedable}set publiclyBreedable(t){this._publiclyBreedable=t}}return i.PET_INFO="RWPIUE_PET_INFO",i})(),Wt=(()=>{class i extends Q{constructor(){super(i.RENTABLE_BOT),this._name="",this._motto="",this._Str_4900=0,this._figure="",this._caryId=0,this._Str_5131=0,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set id(t){this._Str_4900=t}get id(){return this._Str_4900}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}get ownerId(){return this._ownerId}set ownerId(t){this._ownerId=t}get ownerName(){return this._ownerName}set ownerName(t){this._ownerName=t}set _Str_3246(t){this._Str_4026=t}get _Str_3246(){return this._Str_4026}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set _Str_3529(t){this._Str_4028=t}get _Str_3529(){return this._Str_4028}set carryId(t){this._caryId=t}get carryId(){return this._caryId}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}get botSkills(){return this._Str_3986}set botSkills(t){this._Str_3986=t}}return i.RENTABLE_BOT="RWRBIUE_RENTABLE_BOT",i._Str_7492="RENTABLE_BOT",i})(),I=(()=>{class i extends Q{constructor(t){super(t),this._name="",this._motto="",this._Str_4900=0,this._xp=0,this._figure="",this._groupId=0,this._groupName="",this._Str_11289="",this._Str_5228=0,this._Str_5131=0,this._Str_8522=!1,this._realName="",this._Str_3947=!1,this._Str_4026=!1,this._Str_4028=!1,this._roomControllerLevel=0,this._canBeAskedForAFriend=!1,this._Str_9070=!1,this._Str_8457=!1,this._Str_8831=!1,this._Str_3437=0,this._Str_6028=!1,this._Str_6139=!1,this._Str_8973=!1,this._Str_8910=0,this._Str_8858=0,this._isFriend=!1,this._Str_4890=!1,this._badges=[]}set name(t){this._name=t}get name(){return this._name}set motto(t){this._motto=t}get motto(){return this._motto}set activityPoints(t){this._activityPoints=t}get activityPoints(){return this._activityPoints}set webID(t){this._Str_4900=t}get webID(){return this._Str_4900}set xp(t){this._xp=t}get xp(){return this._xp}set userType(t){this._Str_3021=t}get userType(){return this._Str_3021}set figure(t){this._figure=t}get figure(){return this._figure}set badges(t){this._badges=t}get badges(){return this._badges}set groupId(t){this._groupId=t}get groupId(){return this._groupId}set groupName(t){this._groupName=t}get groupName(){return this._groupName}set groupBadgeId(t){this._Str_11289=t}get groupBadgeId(){return this._Str_11289}set canBeAskedForAFriend(t){this._canBeAskedForAFriend=t}get canBeAskedForAFriend(){return this._canBeAskedForAFriend}set respectLeft(t){this._Str_3437=t}get respectLeft(){return this._Str_3437}set isIgnored(t){this._Str_6028=t}get isIgnored(){return this._Str_6028}set isRoomOwner(t){this._Str_4026=t}get isRoomOwner(){return this._Str_4026}set isGuildRoom(t){this._Str_6139=t}get isGuildRoom(){return this._Str_6139}set roomControllerLevel(t){this._roomControllerLevel=t}get roomControllerLevel(){return this._roomControllerLevel}set isModerator(t){this._Str_4028=t}get isModerator(){return this._Str_4028}set canTrade(t){this._Str_8973=t}get canTrade(){return this._Str_8973}set _Str_6622(t){this._Str_8910=t}get _Str_6622(){return this._Str_8910}set _Str_5990(t){this._Str_9070=t}get _Str_5990(){return this._Str_9070}set _Str_6701(t){this._Str_8457=t}get _Str_6701(){return this._Str_8457}get _Str_6394(){return this._Str_8831}set _Str_6394(t){this._Str_8831=t}set flatControl(t){this._Str_8858=t}get flatControl(){return this._Str_8858}set carryId(t){this._Str_5228=t}get carryId(){return this._Str_5228}set roomIndex(t){this._Str_5131=t}get roomIndex(){return this._Str_5131}set isSpectator(t){this._Str_8522=t}get isSpectator(){return this._Str_8522}set realName(t){this._realName=t}get realName(){return this._realName}set _Str_4330(t){this._Str_3947=t}get _Str_4330(){return this._Str_3947}get isFriend(){return this._isFriend}set isFriend(t){this._isFriend=t}get isAmbassador(){return this._Str_4890}set isAmbassador(t){this._Str_4890=t}}return i.OWN_USER="RWUIUE_OWN_USER",i.BOT="RWUIUE_BOT",i.PEER="RWUIUE_PEER",i._Str_18400=0,i._Str_14161=2,i._Str_13798=3,i._Str_7492="BOT",i})(),ri=(()=>{class i extends X{constructor(t){super(i.RWVM_CHANGE_MOTTO_MESSAGE),this._motto=t}get motto(){return this._motto}}return i.RWVM_CHANGE_MOTTO_MESSAGE="RWVM_CHANGE_MOTTO_MESSAGE",i})(),se=(()=>{class i extends X{constructor(t,n,r,a=-1,c=null){super(t),this._furniId=n,this._furniCategory=r,this._offerId=a,this._objectData=c}get furniId(){return this._furniId}get furniCategory(){return this._furniCategory}get objectData(){return this._objectData}get _Str_2451(){return this._offerId}}return i.RWFUAM_ROTATE="RWFUAM_ROTATE",i.RWFAM_MOVE="RWFAM_MOVE",i.RWFAM_PICKUP="RWFAM_PICKUP",i.RWFAM_EJECT="RWFAM_EJECT",i.RWFAM_USE="RWFAM_USE",i.RWFAM_OPEN_WELCOME_GIFT="RWFAM_OPEN_WELCOME_GIFT",i.RWFAM_SAVE_STUFF_DATA="RWFAM_SAVE_STUFF_DATA",i})(),mr=(()=>{class i{constructor(){this.container=null,this._widget=null,this._disposed=!1,this.onRoomSessionPetInfoUpdateEvent=this.onRoomSessionPetInfoUpdateEvent.bind(this)}dispose(){this.disposed||(this.container=null,this._disposed=!0)}update(){}processWidgetMessage(t){if(!t||!this._container)return null;let n=0,r=null;if(t instanceof p&&(n=t.userId,r=[p.RWUAM_REQUEST_PET_UPDATE,p.RWUAM_RESPECT_PET,p.RWUAM_PICKUP_PET,p.RWUAM_MOUNT_PET,p.RWUAM_TOGGLE_PET_RIDING_PERMISSION,p.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,p.RWUAM_DISMOUNT_PET,p.RWUAM_SADDLE_OFF,p.RWUAM_GIVE_CARRY_ITEM_TO_PET,p.RWUAM_GIVE_WATER_TO_PET,p.RWUAM_GIVE_LIGHT_TO_PET,p.RWUAM_TREAT_PET].indexOf(t.type)>=0?this._container.roomSession.userDataManager.getPetData(n):this._container.roomSession.userDataManager.getUserData(n),!r))return null;let a=0,c=0;switch(t instanceof se&&(a=t.furniId,c=t.furniCategory),t.type){case _e.GET_OBJECT_INFO:return this.processObjectInfoMessage(t);case _e.GET_OBJECT_NAME:return this.processObjectNameMessage(t);case p.RWUAM_SEND_FRIEND_REQUEST:this._container.friendService.sendFriendRequest(n,r.name);break;case p.RWUAM_RESPECT_USER:this._container.sessionDataManager.giveRespect(n);break;case p.RWUAM_RESPECT_PET:this._container.sessionDataManager.givePetRespect(n);break;case p.RWUAM_WHISPER_USER:this._container.events.dispatchEvent(new on(on.WHISPER,r.name));break;case p.RWUAM_IGNORE_USER:this._container.sessionDataManager.ignoreUser(r.name);break;case p.RWUAM_UNIGNORE_USER:this._container.sessionDataManager.unignoreUser(r.name);break;case p.RWUAM_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case p.RWUAM_BAN_USER_DAY:case p.RWUAM_BAN_USER_HOUR:case p.RWUAM_BAN_USER_PERM:this._container.roomSession.sendBanMessage(t.userId,t.type);break;case p.MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case p.MUTE_USER_5MIN:this._container.roomSession.sendMuteMessage(t.userId,5);break;case p.MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case p.RWUAM_GIVE_RIGHTS:this._container.roomSession.sendGiveRightsMessage(t.userId);break;case p.RWUAM_TAKE_RIGHTS:this._container.roomSession.sendTakeRightsMessage(t.userId);break;case p.RWUAM_START_TRADING:r&&this._widget.inventoryTrading.startTrade(r.roomIndex,r.name);break;case p.RWUAM_PASS_CARRY_ITEM:this._container.connection.send(new s.AUM(n));break;case p.RWUAM_GIVE_CARRY_ITEM_TO_PET:case p.RWUAM_GIVE_WATER_TO_PET:case p.RWUAM_GIVE_LIGHT_TO_PET:case p.RWUAM_TREAT_PET:break;case p.RWUAM_DROP_CARRY_ITEM:this._container.connection.send(new s.UPg);break;case se.RWFUAM_ROTATE:this._container.roomEngine.processRoomObjectOperation(a,c,s.HNf.OBJECT_ROTATE_POSITIVE);break;case se.RWFAM_MOVE:this._container.roomEngine.processRoomObjectOperation(a,c,s.HNf.OBJECT_MOVE);break;case se.RWFAM_PICKUP:this._container.roomEngine.processRoomObjectOperation(a,c,s.HNf.OBJECT_PICKUP);break;case se.RWFAM_EJECT:this._container.roomEngine.processRoomObjectOperation(a,c,s.HNf.OBJECT_EJECT);break;case se.RWFAM_USE:this._container.roomEngine.useRoomObject(a,c);break;case ri.RWVM_CHANGE_MOTTO_MESSAGE:return void this._container.roomSession.sendMottoMessage(t.motto);case se.RWFAM_SAVE_STUFF_DATA:{const l=t.objectData;if(l){const g=new Map,d=l.split("\t");if(d)for(const h of d){const f=h.split("=",2);f&&2===f.length&&g.set(f[0],f[1])}this._container.roomEngine.processRoomObjectWallOperation(a,c,s.HNf.OBJECT_SAVE_STUFF_DATA,g),this._Str_23922(g),g.clear()}break}case p.RWUAM_REQUEST_PET_UPDATE:this._container.roomSession&&this._container.roomSession.userDataManager&&this._container.roomSession.userDataManager.requestPetInfo(n);break;case p.RWUAM_REPORT:case p.RWUAM_REPORT_CFH_OTHER:break;case p.RWUAM_AMBASSADOR_ALERT_USER:this._container.roomSession.sendAmbassadorAlertMessage(t.userId);break;case p.RWUAM_AMBASSADOR_KICK_USER:this._container.roomSession.sendKickMessage(t.userId);break;case p.AMBASSADOR_MUTE_USER_2MIN:this._container.roomSession.sendMuteMessage(t.userId,2);break;case p.AMBASSADOR_MUTE_USER_10MIN:this._container.roomSession.sendMuteMessage(t.userId,10);break;case p.AMBASSADOR_MUTE_USER_60MIN:this._container.roomSession.sendMuteMessage(t.userId,60);break;case p.AMBASSADOR_MUTE_USER_18HOUR:this._container.roomSession.sendMuteMessage(t.userId,1080)}return null}processEvent(t){if(event)switch(t.type){case s.mUG.RSUBE_BADGES:return void this.widget.updateUserBadges(t.userId,t.badges)}}processObjectInfoMessage(t){const n=this._container.roomSession.roomId;switch(t.category){case s.YGE.FLOOR:case s.YGE.WALL:this._Str_23142(t,n);break;case s.YGE.UNIT:{if(!(this._container.roomSession&&this._container.sessionDataManager&&this._container.events&&this._container.roomEngine))return null;const r=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!r)return null;switch(r.type){case s.OOj.PET:this.selectPet(r.webID);break;case s.OOj.USER:this._Str_22722(n,t.id,t.category,r);break;case s.OOj.BOT:this._Str_22312(n,t.id,t.category,r);break;case s.OOj.RENTABLE_BOT:this._Str_23115(n,t.id,t.category,r)}break}}return null}processObjectNameMessage(t){const n=this._container.roomSession.roomId;let r=0,a=null,c=0,l=0;switch(t.category){case s.YGE.FLOOR:case s.YGE.WALL:{if(!this._container.events||!this._container.roomEngine)return null;const g=this._container.roomEngine.getRoomObject(n,t.id,t.category),d=g.type;if(0===d.indexOf("poster"))r=-1,a="${poster_"+parseInt(d.replace("poster",""))+"_name}",l=g.id;else{let h=null;const f=g.model.getValue(s.fql.FURNITURE_TYPE_ID);if(t.category===s.YGE.FLOOR?h=this._container.sessionDataManager.getFloorItemData(f):t.category===s.YGE.WALL&&(h=this._container.sessionDataManager.getWallItemData(f)),!h)return null;r=h.id,a=h.name,l=g.id}break}case s.YGE.UNIT:{if(!this._container.roomSession||!this._container.roomSession.userDataManager)return null;const g=this._container.roomSession.userDataManager.getUserDataByIndex(t.id);if(!g)return null;r=g.webID,a=g.name,c=g.type,l=g.roomIndex;break}}return a&&this._container.events.dispatchEvent(new qn(r,t.category,a,c,l)),null}_Str_23142(t,n){if(!this._container||!this._container.events||!this._container.roomEngine||t.id<0)return;const r=new Jt(Jt.FURNI);r.id=t.id,r.category=t.category;const a=this._container.roomEngine.getRoomObject(n,t.id,t.category);if(!a)return;const c=a.model;c.getValue(s.f0R.INFOSTAND_EXTRA_PARAM)&&(r.extraParam=c.getValue(s.f0R.INFOSTAND_EXTRA_PARAM));const l=c.getValue(s.fql.FURNITURE_DATA_FORMAT),g=s.lw6.getData(l);g.initializeFromRoomObjectModel(c),r.stuffData=g;const d=a.type;if(0===d.indexOf("poster")){const H=parseInt(d.replace("poster",""));r.name="${poster_"+H+"_name}",r.description="${poster_"+H+"_desc}"}else{const H=c.getValue(s.fql.FURNITURE_TYPE_ID);let x=null;t.category===s.YGE.FLOOR?x=this._container.sessionDataManager.getFloorItemData(H):t.category==s.YGE.WALL&&(x=this._container.sessionDataManager.getWallItemData(H)),x&&(r.name=x.name,r.description=x.description,r.purchaseOfferId=x.purchaseOfferId,r.purchaseCouldBeUsedForBuyout=x.purchaseCouldBeUsedForBuyout,r.rentOfferId=x.rentOfferId,r.rentCouldBeUsedForBuyout=x.rentCouldBeUsedForBuyout,r.availableForBuildersClub=x.availableForBuildersClub,this._container.wiredService&&t.category===s.YGE.FLOOR&&this._container.wiredService.selectFurniture(a.id,x.name))}d.indexOf("post_it")>-1&&(r.isStickie=!0);const h=c.getValue(s.fql.FURNITURE_EXPIRY_TIME),f=c.getValue(s.fql.FURNITURE_EXPIRTY_TIMESTAMP);r.expiration=h<0?h:Math.max(0,h-(s.wjX.instance.time-f)/1e3);let E=this._container.roomEngine.getRoomObjectImage(n,t.id,t.category,new s.UJ(180),64,null);if((!E.data||E.data.width>140||E.data.height>200)&&(E=this._container.roomEngine.getRoomObjectImage(n,t.id,t.category,new s.UJ(180),1,null)),E&&E.data){const H=s.Oau.generateImage(E.data);H&&(r.image=H)}r.isWallItem=t.category===s.YGE.WALL,r.isRoomOwner=this._container.roomSession.isRoomOwner,r.roomControllerLevel=this._container.roomSession.controllerLevel,r.isAnyRoomOwner=this._container.sessionDataManager.isModerator,r.ownerId=c.getValue(s.fql.FURNITURE_OWNER_ID),r.ownerName=c.getValue(s.fql.FURNITURE_OWNER_NAME),r.usagePolicy=c.getValue(s.fql.FURNITURE_USAGE_POLICY);const k=c.getValue(s.fql.FURNITURE_GUILD_CUSTOMIZED_GUILD_ID);0!==k&&(r.groupId=k),this._container.isOwnerOfFurniture(a)&&(r.isOwner=!0),this._container.events.dispatchEvent(r)}selectPet(t){this._container.roomSession.userDataManager.requestPetInfo(t)}_Str_22722(t,n,r,a){let c=I.OWN_USER;a.webID!==this._container.sessionDataManager.userId&&(c=I.PEER);const l=new I(c);l.isSpectator=this._container.roomSession.isSpectator,l.name=a.name,l.motto=a.custom,i.ACTIVITY_POINTS_DISPLAY_ENABLED&&(l.activityPoints=a.activityPoints),l.webID=a.webID,l.roomIndex=n,l.userType=s.OOj.USER;const g=this._container.roomEngine.getRoomObject(t,n,r);if(g&&(l.carryId=g.model.getValue(s.fql.FIGURE_CARRY_OBJECT)),c==I.OWN_USER&&(l.realName=this._container.sessionDataManager.realName,l._Str_4330=this._container.sessionDataManager.canChangeName),l.isRoomOwner=this._container.roomSession.isRoomOwner,l.isGuildRoom=this._container.roomSession.isGuildRoom,l.roomControllerLevel=this._container.roomSession.controllerLevel,l.isModerator=this._container.sessionDataManager.isModerator,l.isAmbassador=this._container.sessionDataManager.isAmbassador,c===I.PEER){l.canBeAskedForAFriend=this._container.friendService.canBeAskedForAFriend(a.webID);const d=this._container.friendService.getFriend(a.webID);if(d&&(l.realName=d.realName,l.isFriend=!0),g){const E=g.model.getValue(s.fql.FIGURE_FLAT_CONTROL);null!==E&&(l.flatControl=E),l._Str_6394=this._Str_23100(l),l._Str_5990=this._Str_22729(l),l._Str_6701=this._Str_23573(l)}l.isIgnored=this._container.sessionDataManager.isUserIgnored(a.name),l.respectLeft=this._container.sessionDataManager.respectsLeft;const h=this._container.sessionDataManager.isSystemShutdown,f=this._container.roomSession.tradeMode;if(h)l.canTrade=!1;else switch(f){case s.$fl.ROOM_CONTROLLER_REQUIRED:{const k=l.flatControl!==s.A5x.NONE&&l.flatControl!==s.A5x.GUILD_MEMBER;l.canTrade=l.roomControllerLevel!==s.A5x.NONE&&l.roomControllerLevel!==s.A5x.GUILD_MEMBER||k;break}case s.$fl.FREE_TRADING:l.canTrade=!0;break;default:l.canTrade=!1}l._Str_6622=I._Str_18400,h&&(l._Str_6622=I._Str_14161),f!==s.$fl.FREE_TRADING&&(l._Str_6622=I._Str_13798)}l.groupId=parseInt(a.guildId),l.groupName=a.groupName,l.badges=this._container.roomSession.userDataManager.getUserBadges(a.webID),l.figure=a.figure,this._container.events.dispatchEvent(l)}_Str_22312(t,n,r,a){const c=new I(I.BOT);c.name=a.name,c.motto=a.custom,c.webID=a.webID,c.roomIndex=n,c.userType=a.type;const l=this._container.roomEngine.getRoomObject(t,n,r);l&&(c.carryId=l.model.getValue(s.fql.FIGURE_CARRY_OBJECT)),c.isRoomOwner=this._container.roomSession.isRoomOwner,c.isGuildRoom=this._container.roomSession.isGuildRoom,c.roomControllerLevel=this._container.roomSession.controllerLevel,c.isModerator=this._container.sessionDataManager.isModerator,c._Str_5990=this._container.roomSession.isRoomOwner,c.badges=[I._Str_7492],c.figure=a.figure,this._container.events.dispatchEvent(c)}_Str_23115(t,n,r,a){const c=new Wt;c.name=a.name,c.motto=a.custom,c.id=a.webID,c.roomIndex=n,c.ownerId=a.ownerId,c.ownerName=a.ownerName,c.botSkills=a.botSkills;const l=this._container.roomEngine.getRoomObject(t,n,r);l&&(c.carryId=l.model.getValue(s.fql.FIGURE_CARRY_OBJECT)),c._Str_3246=this._container.roomSession.isRoomOwner,c.roomControllerLevel=this._container.roomSession.controllerLevel,c._Str_3529=this._container.sessionDataManager.isModerator,c.badges=[I._Str_7492],c.figure=a.figure,this._container.events.dispatchEvent(c)}_Str_9213(t){return t.isGuildRoom?t.roomControllerLevel>=s.A5x.GUILD_ADMIN:t.roomControllerLevel>=s.A5x.GUEST}_Str_23100(t){const n=function(r,a){switch(a.allowMute){case s.pJZ.MODERATION_LEVEL_USER_WITH_RIGHTS:return this._Str_9213(r);default:return r.roomControllerLevel>=s.A5x.ROOM_OWNER}}.bind(this);return this._Str_18027(t,n)}_Str_22729(t){const n=function(r,a){switch(a.allowKick){case s.pJZ.MODERATION_LEVEL_ALL:return!0;case s.pJZ.MODERATION_LEVEL_USER_WITH_RIGHTS:return this._Str_9213(r);default:return r.roomControllerLevel>=s.A5x.ROOM_OWNER}}.bind(this);return this._Str_18027(t,n)}_Str_23573(t){const n=function(r,a){switch(a.allowBan){case s.pJZ.MODERATION_LEVEL_USER_WITH_RIGHTS:return this._Str_9213(r);default:return r.roomControllerLevel>=s.A5x.ROOM_OWNER}}.bind(this);return this._Str_18027(t,n)}_Str_18027(t,n){if(!this._container.roomSession._Str_7411)return!1;const r=this._container.roomSession.moderationSettings;let a=!1;return r&&(a=n(t,r)),a&&t.flatControl<s.A5x.ROOM_OWNER}_Str_23922(t){!this._widget||this._container.sessionDataManager.hasSecurity(5)&&this._container.connection.send(new s.Q1R(this._widget.furniData.id,t))}onRoomSessionPetInfoUpdateEvent(t){if(!t||!this._container||!this._container.events)return;const n=t.petInfo;if(!n)return;const r=this._container.roomSession.userDataManager.getPetData(n.id);if(!r)return;const a=r.figure,c=new s.OVR(a),l=this.getPetType(a),g=this.getPetBreed(a);let d=null;const h=n.ownerId===this._container.sessionDataManager.userId,f=new Ht(l,g,r.name,n.id,c,h,n.ownerId,n.ownerName,r.roomIndex,n.rarityLevel);f.level=n.level,f.maximumLevel=n.maximumLevel,f.experience=n.experience,f.levelExperienceGoal=n.levelExperienceGoal,f.energy=n.energy,f.maximumEnergy=n.maximumEnergy,f.happyness=n.happyness,f.maximumHappyness=n.maximumHappyness,f.respect=n.respect,f._Str_2985=this._container.sessionDataManager.respectsPetLeft,f.age=n.age,f.saddle=n.saddle,f.rider=n.rider,f.breedable=n.breedable,f.fullyGrown=n.fullyGrown,f.dead=n.dead,f.rarityLevel=n.rarityLevel,f._Str_3307=n.skillTresholds,f._Str_5114=!1,f.publiclyRideable=n.publiclyRideable,f.maximumTimeToLive=n.maximumTimeToLive,f.remainingTimeToLive=n.remainingTimeToLive,f.remainingGrowTime=n.remainingGrowTime,f.publiclyBreedable=n.publiclyBreedable;const E=this._container.roomSession;(h||E.isRoomOwner||this._container.sessionDataManager.isModerator||E.controllerLevel>=s.A5x.GUEST)&&(f._Str_5114=!0),this._container.events.dispatchEvent(f)}getPetType(t){return this.getPetFigurePart(t,0)}getPetBreed(t){return this.getPetFigurePart(t,1)}getPetFigurePart(t,n){if(!t||!t.length)return-1;const r=t.split(" ");return r.length>0?parseInt(r[n]):-1}get type(){return s.z5f.INFOSTAND}get messageTypes(){return[_e.GET_OBJECT_INFO,_e.GET_OBJECT_NAME,p.RWUAM_SEND_FRIEND_REQUEST,p.RWUAM_RESPECT_USER,p.RWUAM_WHISPER_USER,p.RWUAM_IGNORE_USER,p.RWUAM_UNIGNORE_USER,p.RWUAM_KICK_USER,p.RWUAM_BAN_USER_DAY,p.RWUAM_BAN_USER_HOUR,p.RWUAM_BAN_USER_PERM,p.MUTE_USER_2MIN,p.MUTE_USER_5MIN,p.MUTE_USER_10MIN,p.RWUAM_GIVE_RIGHTS,p.RWUAM_TAKE_RIGHTS,p.RWUAM_START_TRADING,p.RWUAM_OPEN_HOME_PAGE,p.RWUAM_PASS_CARRY_ITEM,p.RWUAM_GIVE_CARRY_ITEM_TO_PET,p.RWUAM_DROP_CARRY_ITEM,se.RWFAM_MOVE,se.RWFUAM_ROTATE,se.RWFAM_EJECT,se.RWFAM_PICKUP,se.RWFAM_USE,se.RWFAM_SAVE_STUFF_DATA,p.RWUAM_REPORT,p.RWUAM_PICKUP_PET,p.RWUAM_MOUNT_PET,p.RWUAM_TOGGLE_PET_RIDING_PERMISSION,p.RWUAM_TOGGLE_PET_BREEDING_PERMISSION,p.RWUAM_DISMOUNT_PET,p.RWUAM_SADDLE_OFF,p.RWUAM_TRAIN_PET,p.RWUAM_RESPECT_PET,p.RWUAM_REQUEST_PET_UPDATE,ri.RWVM_CHANGE_MOTTO_MESSAGE,p.RWUAM_GIVE_LIGHT_TO_PET,p.RWUAM_GIVE_WATER_TO_PET,p.RWUAM_TREAT_PET,p.RWUAM_REPORT_CFH_OTHER,p.RWUAM_AMBASSADOR_ALERT_USER,p.RWUAM_AMBASSADOR_KICK_USER,p.AMBASSADOR_MUTE_USER_2MIN,p.AMBASSADOR_MUTE_USER_10MIN,p.AMBASSADOR_MUTE_USER_60MIN,p.AMBASSADOR_MUTE_USER_18HOUR]}get eventTypes(){return[s.mUG.RSUBE_BADGES]}get container(){return this._container}set container(t){this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.removeEventListener(s.VjT.PET_INFO,this.onRoomSessionPetInfoUpdateEvent),this._container=t,this._container&&this._container.roomSessionManager&&this._container.roomSessionManager.events.addEventListener(s.VjT.PET_INFO,this.onRoomSessionPetInfoUpdateEvent)}get widget(){return this._widget}set widget(t){this._widget=t}get disposed(){return this._disposed}}return i.ACTIVITY_POINTS_DISPLAY_ENABLED=!0,i})(),pr=(()=>{class i extends Q{constructor(t,n,r){super(i.RWULUE_USER_LOCATION_UPDATE),this._userId=t,this._rectangle=n,this._Str_20775=r}get userId(){return this._userId}get rectangle(){return this._rectangle}get _Str_9337(){return this._Str_20775}}return i.RWULUE_USER_LOCATION_UPDATE="RWULUE_USER_LOCATION_UPDATE",i})(),Pe=(()=>{class i extends X{constructor(t,n,r){super(t),this._objectId=n,this._objectType=r}get _Str_1577(){return this._objectId}get _Str_1723(){return this._objectType}}return i.RWGOI_MESSAGE_GET_OBJECT_LOCATION="RWGOI_MESSAGE_GET_OBJECT_LOCATION",i.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION="RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION",i})();class hr{constructor(){this._disposed=!1,this._container=null}dispose(){this._disposed=!0,this._container=null}get disposed(){return this._disposed}get type(){return null}set container(o){this._container=o}get messageTypes(){return[Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION,Pe.RWGOI_MESSAGE_GET_GAME_OBJECT_LOCATION]}processWidgetMessage(o){if(!(o&&this._container&&o instanceof Pe))return null;const t=this._container.roomSession;switch(o.type){case Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION:{if(!t||!t.userDataManager)return null;const n=t.userDataManager.getDataByType(o._Str_1577,o._Str_1723);let r=null,a=null;if(n){r=this._container.roomEngine.getRoomObjectBoundingRectangle(t.roomId,n.roomIndex,s.YGE.UNIT,this._container.getFirstCanvasId()),a=this._container.roomEngine.getRoomObjectScreenLocation(t.roomId,n.roomIndex,s.YGE.UNIT,this._container.getFirstCanvasId());const c=this._container.getRoomViewRect();r&&a&&c&&(r.x+=c.x,r.y+=c.y,a.x+=c.x,a.y+=c.y)}return new pr(o._Str_1577,r,a)}}return null}get eventTypes(){return[]}processEvent(o){}update(){}}let Oi=(()=>{class i extends X{constructor(){super(i.RWZTM_ZOOM_TOGGLE)}}return i.RWZTM_ZOOM_TOGGLE="RWZTM_ZOOM_TOGGLE",i})();class fr{constructor(){this._zoomed=!1,this._communicationManager=s.wjX.instance.communication,this._container=null,this._widget=null,this._messages=[],this._disposed=!1,this.onRoomInfoEvent=this.onRoomInfoEvent.bind(this)}dispose(){if(!this._disposed){this._communicationManager=null,this._widget=null;for(const o of this._messages)this._container.connection.removeMessageEvent(o);this._container=null,this._messages=[],this._disposed=!0}}update(){}processWidgetMessage(o){return o instanceof Oi&&(this._container.roomEngine.events.dispatchEvent(new s.JwU(this._container.roomEngine.activeRoomId,this._zoomed?1:0,!1)),this._zoomed=!this._zoomed),null}processEvent(o){}onRoomInfoEvent(o){if(!o)return;const t=o.getParser();if(!t)return;const n=t.data;if(n&&t.roomEnter){this._widget.updateRoomInfo(n);const r=n.showOwner?s.wjX.instance.getLocalization("room.tool.room.owner.prefix")+" "+n.ownerName:s.wjX.instance.getLocalization("room.tool.public.room");this._widget.updateRoomTools(n.roomName,r,n.tags),this._widget.addVisitedRoom(n),this._widget.updateRoomCurrentIndex(n.roomId)}}rateRoom(){!this._container||this._container.connection.send(new s.h2R(1))}get disposed(){return this._disposed}get type(){return s.z5f.ROOM_TOOLS}get widget(){return this._widget}set widget(o){this._widget=o}get container(){return this._container}set container(o){if(this._container=o,this._container){this._messages=[new s.hVP(this.onRoomInfoEvent)];for(const t of this._messages)o.connection.addMessageEvent(t)}}get messageTypes(){return[]}get eventTypes(){return[]}}class vr{constructor(){this._isDisposed=!1,this._container=null}dispose(){this._isDisposed=!0,this.container=null}processWidgetMessage(o){if(!o)return null;switch(o.type){case Fe.RWRWM_USER_CHOOSER:this.processUserChooser();break;case _e.SELECT_OBJECT:this.selectUnit(o)}return null}selectUnit(o){null!=o&&o.category==s.YGE.UNIT&&this._container.roomEngine.selectRoomObject(this._container.roomSession.roomId,o.id,o.category)}processUserChooser(){if(null==this._container||null==this._container.roomSession||null==this._container.roomEngine||null==this._container.roomSession.userDataManager)return;const o=this._container.roomSession.roomId,t=s.YGE.UNIT,n=[],r=this._container.roomEngine.getRoomObjectCount(o,t);for(let a=0;a<r;a++){const c=this._container.roomEngine.getRoomObjectByIndex(o,a,t);if(null==c)continue;const l=this._container.roomSession.userDataManager.getUserDataByIndex(c.id);null!=l&&n.push(new ti(l.roomIndex,t,l.name))}n.sort(Mi("name")),this._container.events.dispatchEvent(new Dt(Dt.RWCCE_USER_CHOOSER_CONTENT,n))}processEvent(o){}update(){}get disposed(){return this._isDisposed}get type(){return s.z5f.USER_CHOOSER}set container(o){this._container=o}get messageTypes(){return[Fe.RWRWM_USER_CHOOSER,_e.SELECT_OBJECT]}get eventTypes(){return[]}}let R=(()=>{class i{constructor(t){this._ngZone=t,this._alertCenter=null,this._notificationCenter=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new s.hyu(this.onHabboBroadcastMessageEvent.bind(this)),new s.R7Z(this.onModeratorMessageEvent.bind(this)),new s.fMJ(this.onMOTDNotificationEvent.bind(this)),new s.Fnp(this.onNotificationDialogMessageEvent.bind(this)),new s.ceA(this.onHotelWillShutdownEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onHabboBroadcastMessageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.alert(n.message))}onNotificationDialogMessageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.displayNotification(n.type,n.parameters))}onModeratorMessageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.alertWithLink(n.message,n.link))}onMOTDNotificationEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.alertWithScrollableMessages(n.messages))}onHotelWillShutdownEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=s.wjX.instance.localization.getValueWithParameter("opening.hours.shutdown","m",n.minutes.toString());this._ngZone.run(()=>this.alert(r))}alert(t,n=null){return this._alertCenter?this._alertCenter.alert(t,n):null}alertWithLink(t,n,r=null){return this._alertCenter?this._alertCenter.alertWithLink(t,n,r):null}alertWithConfirm(t,n=null,r=null){return this._alertCenter?this._alertCenter.alertWithConfirm(t,n,r):null}alertWithChoices(t,n,r=null){return this._alertCenter?this._alertCenter.alertWithChoices(t,n,r):null}alertWithScrollableMessages(t,n=null){return this._alertCenter?this._alertCenter.alertWithScrollableMessages(t,n):null}displayNotification(t,n){return this._notificationCenter?this._notificationCenter.displayNotification(t,n):null}closeAlert(t){!t||!this._alertCenter||this._alertCenter.closeAlert(t)}closeNotification(t){!t||!this._notificationCenter||this._notificationCenter.closeNotification(t)}closeAll(){!this._alertCenter||(this._alertCenter.closeAllAlerts(),this._notificationCenter.closeAllNotifications())}get alertCenter(){return this._alertCenter}set alertCenter(t){this._alertCenter=t}get notificationCenter(){return this._notificationCenter}set notificationCenter(t){this._notificationCenter=t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),pn=(()=>{class i{constructor(t,n){this._settingsService=t,this._ngZone=n,this._messages=[],this._component=null,this._roomSession=null,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.CREATED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.ENDED,this.onRoomSessionEvent),this._messages=[new s.gvp(this.onWiredFurniActionEvent.bind(this)),new s.k2U(this.onWiredFurniConditionEvent.bind(this)),new s.i4y(this.onWiredFurniTriggerEvent.bind(this)),new s.XcK(this.onWiredOpenEvent.bind(this)),new s.n9p(this.onWiredRewardResultMessageEvent.bind(this)),new s.all(this.onWiredSaveSuccessEvent.bind(this)),new s.QcW(this.onWiredValidationErrorEvent.bind(this)),new s.Chh(this.onDesktopViewEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.CREATED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.ENDED,this.onRoomSessionEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case s.SeR.CREATED:case s.SeR.STARTED:return void(this._roomSession=t.session);case s.SeR.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this._component&&this._component.close())}}onWiredFurniActionEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._component.setupTrigger(n.definition))}onWiredFurniConditionEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._component.setupTrigger(n.definition))}onWiredFurniTriggerEvent(t){if(!t||!this._component)return;const n=t.getParser();!n||this._ngZone.run(()=>this._component.setupTrigger(n.definition))}onWiredOpenEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onWiredRewardResultMessageEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onWiredSaveSuccessEvent(t){!t||!t.getParser()||this._ngZone.run(()=>this._component&&this._component.close())}onWiredValidationErrorEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onDesktopViewEvent(t){!t||this._ngZone.run(()=>this._component&&this._component.close())}selectFurniture(t,n){const r=s.wjX.instance.roomEngine,a=r.getSelectedRoomObjectData(this.roomId);a&&a.id===-t?r.setPlacedRoomObjectData(this.roomId,null):this._component&&this._component.toggleFurniSelected(t,n)}get component(){return this._component}set component(t){this._component=t}get roomId(){return this._roomSession?this._roomSession.roomId:0}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),si=(()=>{class i{}return i.CALL_FOR_HELP="call_for_help",i.CATALOG_PURCHASE="catalog_purchase",i.CATALOG_DUCKETS="catalog_duckets",i.MESSAGE_SENT="console_message_sent",i.MESSAGE_RECEIVED="console_new_message",i.GUIDE_INVITATION="guide_received_invitation",i.GUIDE_REQUEST="guide_help_requested",i.CAMERA_SHUTTER="camera_shutter",i})(),Ui=(()=>{class i{constructor(t,n,r=0,a=null,c=0){this._type=c,this._senderId=t,this._message=n,this._secondsSinceSent=r,this._extraData=a,this._date=new Date}get type(){return this._type}get senderId(){return this._senderId}get message(){return this._message}get secondsSinceSent(){return this._secondsSinceSent}get extraData(){return this._extraData}get date(){return this._date}}return i.CHAT=0,i.ROOM_INVITE=1,i.STATUS_NOTIFICATION=2,i})();class Tr{constructor(){this._id=-1,this._name=null,this._gender=0,this._online=!1,this._followingAllowed=!1,this._figure=null,this._categoryId=0,this._motto=null,this._realName=null,this._lastAccess=null,this._persistedMessageUser=!1,this._vipMember=!1,this._pocketHabboUser=!1,this._relationshipStatus=-1,this._unread=0}populate(o){return!!o&&(this._id=o.id,this._name=o.name,this._gender=o.gender,this._online=o.online,this._followingAllowed=o.followingAllowed,this._figure=o.figure,this._categoryId=o.categoryId,this._motto=o.motto,this._realName=o.realName,this._lastAccess=o.lastAccess,this._persistedMessageUser=o.persistedMessageUser,this._vipMember=o.vipMember,this._pocketHabboUser=o.pocketHabboUser,this._relationshipStatus=o.relationshipStatus,!0)}get id(){return this._id}set id(o){this._id=o}get name(){return this._name}set name(o){this._name=o}get gender(){return this._gender}set gender(o){this._gender=o}get online(){return this._online}set online(o){this._online=o}get followingAllowed(){return this._followingAllowed}set followingAllowed(o){this._followingAllowed=o}get figure(){return this._figure}set figure(o){this._figure=o}get categoryId(){return this._categoryId}set categoryId(o){this._categoryId=o}get motto(){return this._motto}set motto(o){this._motto=o}get lastAccess(){return this._lastAccess}set lastAccess(o){this._lastAccess=o}get realName(){return this._realName}set realName(o){this._realName=o}get persistedMessageUser(){return this._persistedMessageUser}set persistedMessageUser(o){this._persistedMessageUser=o}get vipMember(){return this._vipMember}set vipMember(o){this._vipMember=o}get pocketHabboUser(){return this._pocketHabboUser}set pocketHabboUser(o){this._pocketHabboUser=o}get relationshipStatus(){return this._relationshipStatus}set relationshipStatus(o){this._relationshipStatus=o}get unread(){return this._unread}set unread(o){this._unread=o}}class br{populate(o){return!!o&&(this._requestId=o.requestId,this._requesterName=o.requesterName,this._figureString=o.figureString,this._requesterUserId=o.requesterUserId,!0)}get requestId(){return this._requestId}get requesterName(){return this._requesterName}get requesterUserId(){return this._requesterUserId}get figureString(){return this._figureString}}let Ni=(()=>{class i{constructor(t){this._participant=t,this._chats=[],this._lastUpdated=new Date,this._unread=!1,this._emitter=new e.vpe}insertChat(t,n,r=0,a=null,c=0){const l=new Ui(t,n,r,a,c);return this._chats.push(l),this._lastUpdated=new Date,this._unread=!0,this._emitter.emit(i.MESSAGE_RECEIVED),l}setRead(){this._unread=!1}get participant(){return this._participant}get chats(){return this._chats}get lastUpdated(){return this._lastUpdated}get unread(){return this._unread}get emitter(){return this._emitter}}return i.MESSAGE_RECEIVED="MT_MESSAGE_RECEIVED",i})();class Cr{constructor(){this._sentRequests=new Map}getResult(o){for(const t of this._friends)if(t.avatarId===o)return t;for(const t of this._others)if(t.avatarId===o)return t;return null}searchReceived(o,t){this._friends=o,this._others=t}setFriendRequestSent(o){this._sentRequests[o]=!0}isRequestFriend(o){return this._sentRequests[o]}get friends(){return this._friends}get others(){return this._others}}let ai=(()=>{class i{constructor(t){this._ngZone=t,this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._internalSamples=new s.lzS,this._externalSamples=new s.lzS,this._furniSoundObjects=new s.lzS,this.onRoomEngineSamplePlaybackEvent=this.onRoomEngineSamplePlaybackEvent.bind(this),this.onRoomEngineObjectRemovedEvent=this.onRoomEngineObjectRemovedEvent.bind(this),this.onRoomEngineDisposedEvent=this.onRoomEngineDisposedEvent.bind(this),this.onNitroSettingsEvent=this.onNitroSettingsEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.addEventListener(s.Y2W.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.REMOVED,this.onRoomEngineObjectRemovedEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.DISPOSED,this.onRoomEngineDisposedEvent),s.wjX.instance.events.addEventListener(s.B$z.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.removeEventListener(s.Y2W.PLAY_SAMPLE,this.onRoomEngineSamplePlaybackEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.REMOVED,this.onRoomEngineObjectRemovedEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.DISPOSED,this.onRoomEngineDisposedEvent),s.wjX.instance.events.removeEventListener(s.B$z.SETTINGS_UPDATED,this.onNitroSettingsEvent)})}onRoomEngineSamplePlaybackEvent(t){!t||this.playFurniSample(t.objectId,t.sampleId,this._volumeFurni,t.pitch)}onRoomEngineObjectRemovedEvent(t){!t||this.killFurniAudio(t.objectId)}onRoomEngineDisposedEvent(t){!t||this._furniSoundObjects.getKeys().forEach(n=>{this.killFurniAudio(n)})}onNitroSettingsEvent(t){if(!t)return;const n=t.volumeFurni!==this._volumeFurni;this._volumeSystem=t.volumeSystem,this._volumeFurni=t.volumeFurni,this._volumeTrax=t.volumeTrax,n&&this.updateFurniSoundObjectsVolume()}playInternalSample(t){this._internalSamples.hasKey(t)||this._internalSamples.add(t,new Audio("assets/sounds/"+t+".mp3")),this.generateAudio(this._internalSamples.getValue(t),this._volumeSystem).play()}playFurniSample(t,n,r,a=1){if(!this._externalSamples.hasKey(n)){const l=s.wjX.instance.getConfiguration("external.samples.url");this._externalSamples.add(n,new Audio(l.replace("%sample%",n.toString())))}this.killFurniAudio(t);const c=this.generateAudio(this._externalSamples.getValue(n),r,a);this._furniSoundObjects.add(t,c),c.play()}generateAudio(t,n,r=1){const a=t.cloneNode();return a.volume=n,a}killFurniAudio(t){this._furniSoundObjects.hasKey(t)&&(this._furniSoundObjects.getValue(t).pause(),this._furniSoundObjects.remove(t))}updateFurniSoundObjectsVolume(){this._furniSoundObjects.getKeys().forEach(t=>{this._furniSoundObjects.getValue(t).volume=this._volumeFurni})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Je=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._soundService=n,this._ngZone=r,this._friendListReady=!1,this._component=null,this._events=new s.pBf,this._friends=new Map,this._requests=new Map,this._threads=new Map,this._userFriendLimit=0,this._normalFriendLimit=0,this._extendedFriendLimit=0,this._avatarSearchResults=new Cr,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages&&this.unregisterMessages(),this._messages=[new s.hun(this.onAcceptFriendResultEvent.bind(this)),new s.RAg(this.onFindFriendsProcessResultEvent.bind(this)),new s.EqA(this.onFollowFriendFailedEvent.bind(this)),new s.RPS(this.onFriendListFragmentEvent.bind(this)),new s.ytE(this.onFriendListUpdateEvent.bind(this)),new s.Vpe(this.onFriendNotificationEvent.bind(this)),new s.jdh(this.onFriendRequestsEvent.bind(this)),new s.AOV(this.onHabboSearchResultEvent.bind(this)),new s._d5(this.onInstantMessageErrorEvent.bind(this)),new s.hf3(this.onMessageErrorEvent.bind(this)),new s.EMz(this.onMessengerInitEvent.bind(this)),new s.MZO(this.onMiniMailNewMessageEvent.bind(this)),new s.oOd(this.onMiniMailUnreadCountEvent.bind(this)),new s.pIi(this.onNewConsoleMessageEvent.bind(this)),new s.XMo(this.onNewFriendRequestEvent.bind(this)),new s.TZ6(this.onRoomInviteErrorEvent.bind(this)),new s.chC(this.onRoomInviteEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length)for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=null})}onAcceptFriendResultEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onFindFriendsProcessResultEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onFollowFriendFailedEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onFriendListFragmentEvent(t){if(!t)return;const n=t.getParser();!n||(this._friendListReady=!1,this._ngZone.run(()=>{for(const r of n.fragment)this.updateFriend(r);n.fragmentNumber+1===n.totalFragments&&(this._friendListReady=!0)}))}onFriendListUpdateEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{for(const r of n.addedFriends)this.updateFriend(r);for(const r of n.updatedFriends)this.updateFriend(r);for(const r of n.removedFriendIds)this.removeFriend(r)})}onFriendNotificationEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onFriendRequestsEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{for(const r of n.requests)this.updateFriendRequest(r)})}onHabboSearchResultEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._avatarSearchResults.searchReceived(n.friends,n.others)})}onInstantMessageErrorEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onMessageErrorEvent(t){if(!t)return;const n=t.getParser();if(!n)return;let r="";switch(n.errorCode){case 1:r="${friendlist.error.friendlistownlimit}";break;case 2:r="${friendlist.error.friendlistlimitofrequester}";break;case 3:r="${friendlist.error.friend_requests_disabled}";break;case 4:r="${friendlist.error.requestnotfound}";break;default:r=`Received messenger error: msg: ${n.clientMessageId}, errorCode: ${n.errorCode}`}this._ngZone.run(()=>this._notificationService.alert(r,"${friendlist.alert.title}"))}onMessengerInitEvent(t){if(!t)return;const n=t.getParser();!n||(this._ngZone.run(()=>{this._userFriendLimit=n.userFriendLimit,this._normalFriendLimit=n.normalFriendLimit,this._extendedFriendLimit=n.extendedFriendLimit}),this.requestFriendRequests())}onMiniMailNewMessageEvent(t){t&&t.getParser()}onMiniMailUnreadCountEvent(t){t&&t.getParser()}onNewConsoleMessageEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=this.getMessageThread(n.senderId);!r||(this._ngZone.run(()=>{r.insertChat(n.senderId,n.messageText,n.secondsSinceSent,n.extraData),this._component&&this._component.currentThread===r&&r.setRead()}),this._soundService.playInternalSample(si.MESSAGE_RECEIVED))}onNewFriendRequestEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.updateFriendRequest(n.request))}onRoomInviteErrorEvent(t){if(!t)return;const n=t.getParser();!n||console.log(n)}onRoomInviteEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=this.getMessageThread(n.senderId);!r||this._ngZone.run(()=>{r.insertChat(n.senderId,n.messageText,0,null,Ui.ROOM_INVITE),this._component&&this._component.currentThread===r&&r.setRead()})}getFriend(t){return this._friends.get(t)||null}updateFriend(t){if(!t)return;let n=this._friends.get(t.id);n||(n=new Tr,this._friends.set(t.id,n)),n.populate(t)}removeFriend(t){this._friends.delete(t)}updateFriendRequest(t){if(!t)return;let n=this._requests.get(t.requestId);n||(n=new br,this._requests.set(t.requestId,n)),n.populate(t)}acceptFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new ve(ve.ACCEPTED,t.requestId)),s.wjX.instance.communication.connection.send(new s.RsD(t.requestId))}acceptFriendRequestById(t){this.acceptFriendRequest(this._requests.get(t))}removeFriendRequest(t){this._requests.delete(t.requestId),this._events.dispatchEvent(new ve(ve.DECLINED,t.requestId)),s.wjX.instance.communication.connection.send(new s.J7P(!1,t.requestId))}removeFriendRequestById(t){this.removeFriendRequest(this._requests.get(t))}removeAllFriendRequests(){for(const t of this._requests.values())t&&this._events.dispatchEvent(new ve(ve.DECLINED,t.requestId));this._requests.clear(),s.wjX.instance.communication.connection.send(new s.J7P(!0))}getMessageThread(t){let n=this._threads.get(t);if(!n){const r=this.getFriend(t);if(!r)return;n=new Ni(r),this._threads.set(t,n),this._soundService.playInternalSample(si.MESSAGE_SENT)}return n}requestFriendRequests(){s.wjX.instance.communication.connection.send(new s.EAE)}canBeAskedForAFriend(t){return!this._friends.get(t)}sendFriendRequest(t,n){this._friends.get(t)||s.wjX.instance.communication.connection.send(new s.tqI(n))}getFriendNames(){const t=[];for(const n of this._friends.values())t.push(n.name);return t}get events(){return this._events}get component(){return this._component}set component(t){this._component=t}get friends(){return this._friends}get requests(){return this._requests}get threads(){return this._threads}get unreadCount(){let t=0;for(const n of this._threads.values())n&&n.unread&&t++;return t}get notificationCount(){return this.requests.size+this.unreadCount}get avatarSearchResults(){return this._avatarSearchResults}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(ai),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ci=(()=>{class i{constructor(t){this._ngZone=t,this._lastRoomId=-1,this._maxHistoryItems=100,this._historyItems=[],this._maxHistoryItems=s.wjX.instance.getConfiguration("chat.history.max.items",100),this._queuedItems=new s.lzS,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new s.hVP(this.onRoomInfoEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomInfoEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.data;this._lastRoomId!==r.roomId&&this._ngZone.run(()=>{this._lastRoomId=r.roomId;const a=new Ri;a.content=n.data.roomName+"",this.addItem(this._lastRoomId,a),this.processQueue(this._lastRoomId)})}addItem(t,n){!n||this._ngZone.run(()=>{if(t===this._lastRoomId)this._historyItems.length>=this._maxHistoryItems&&this._historyItems.shift(),this._historyItems.push(n);else{const r=this.getQueuedSet(t);r&&r.push(n)}})}getQueuedSet(t){let n=this._queuedItems.getValue(t);return n||(n=[],this._queuedItems.add(t,n)),n}processQueue(t){const n=this._queuedItems.getValue(t);if(n){for(const r of n)r&&this.addItem(t,r);this._queuedItems.remove(t)}}get historyItems(){return this._historyItems}}return i.MESSAGE_RECEIVED="CHS_MESSAGE_RECEIVED",i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();class qi{constructor(o,t,n=null,r=null){this._id=o,this._username=t,this._figure=n,this._gender=r}get id(){return this._id}get username(){return this._username}get figure(){return this._figure}get gender(){return this._gender}}let je=(()=>{class i{constructor(t,n){this._notificationService=t,this._ngZone=n,this._users=[],this._currentSelectedUser=null,this._showModActionOnUser=!1,this._showVisitedRoomsForUser=!1,this._showSendUserMessage=!1,this._showSendUserChatlogs=!1,this._showRoomTools=!1,this._showRoomChatLogs=!1,this._Str_20687=null,this._component=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new s.$dl(this.onRoomInfoEvent.bind(this)),new s.muo(this.onUserInfoEvent.bind(this)),new s.bxT(this.onModtoolUserChatlogEvent.bind(this)),new s.gk8(this.onModtoolRoomChatlogEvent.bind(this)),new s.dZo(this.onModToolsCFHCategoriesEvent.bind(this)),new s.bUh(this.onModtoolsMainEvent.bind(this)),new s.ylN(this.onRoomsReceivedForUserEvent.bind(this)),new s.hrQ(this.onRoomInfoOwnerEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t)}get component(){return this._component}set component(t){this._component=t}onModtoolsMainEvent(t){if(!t)return;const n=t.getParser();!n||(this._Str_20687=n.data)}onRoomInfoOwnerEvent(t){if(!t)return;const n=t.getParser();!n||(this._currentRoomInfo=n)}onRoomsReceivedForUserEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._userRoomVisitedData=n.data)}onModToolsCFHCategoriesEvent(t){if(!t)return;const n=t.getParser();!n||(this._callForHelpCategories=n.callForHelpCategories)}onRoomInfoEvent(t){if(!s.wjX.instance.sessionDataManager.isModerator||!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._modToolRoomInfo=n})}onUserInfoEvent(t){const n=t.getParser().userInfo;this._ngZone.run(()=>{this._users.push(new qi(n.userId,n.username))})}onModtoolUserChatlogEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._roomVisits=n.roomVisits})}onModtoolRoomChatlogEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._userChatlogs=n.chatlogs})}openRoomTool(t=null){!this._currentRoomInfo||(this._modToolRoomInfo=null,s.wjX.instance.communication.connection.send(new s.IJp(t||this._currentRoomInfo.roomId)),this._showRoomTools=!0)}openChatlogTool(){this._modToolRoomInfo=null,s.wjX.instance.communication.connection.send(new s.IJp(this._currentRoomInfo.roomId)),s.wjX.instance.communication.connection.send(new s.fKc(this._currentRoomInfo.roomId)),this.showRoomChatLogs=!0}closeUserTool(){!this._component||(this._component.userToolVisible=!1)}closeRoomVisitedTool(){this._showVisitedRoomsForUser=!1}get users(){return this._users}get roomVisits(){return this._roomVisits}get userChatlogs(){return this._userChatlogs}selectUser(t,n,r=null,a=null){this._currentSelectedUser=new qi(t,n,r,a)}get selectedUser(){return this._currentSelectedUser}get showModActionOnUser(){return this._showModActionOnUser}set showModActionOnUser(t){this._showModActionOnUser=t}get showVisitedRoomsForUser(){return this._showVisitedRoomsForUser}set showVisitedRoomsForUser(t){this._showVisitedRoomsForUser=t}get showSendUserMessage(){return this._showSendUserMessage}set showSendUserMessage(t){this._showSendUserMessage=t}get showSendUserChatlogs(){return this._showSendUserChatlogs}set showSendUserChatlogs(t){this._showSendUserChatlogs=t}get showRoomTools(){return this._showRoomTools}set showRoomTools(t){this._showRoomTools=t}get showRoomChatLogs(){return this._showRoomChatLogs}set showRoomChatLogs(t){this._showRoomChatLogs=t}get callForHelpCategories(){return this._callForHelpCategories}get _Str_3325(){return this._Str_20687}get roomUserVisitedData(){return this._userRoomVisitedData}get currentRoom(){return this._currentRoomInfo}get currentRoomModData(){return this._modToolRoomInfo}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();var Li=U(7709),ki=U(4395),Fi=U(7519);class Di{constructor(){this.heightMap=[],this.heightMapString=null,this.doorX=0,this.doorY=0,this.doorDirection=0,this.thicknessWall=0,this.thicknessFloor=0}}class li{constructor(o,t){this.height=o,this.blocked=t}}let ui=(()=>{class i{constructor(t,n){this._ngZone=t,this._settingsService=n,this._maxFloorLength=64,this._tileSize=32,this._colorMap={x:"0x101010",0:"0x0065ff",1:"0x0091ff",2:"0x00bcff",3:"0x00e8ff",4:"0x00ffea",5:"0x00ffbf",6:"0x00ff93",7:"0x00ff68",8:"0x00ff3d",9:"0x19ff00",a:"0x44ff00",b:"0x70ff00",c:"0x9bff00",d:"0xf2ff00",e:"0xffe000",f:"0xffb500",g:"0xff8900",h:"0xff5e00",i:"0xff3200",j:"0xff0700",k:"0xff0023",l:"0xff007a",m:"0xff00a5",n:"0xff00d1",o:"0xff00fc",p:"0xd600ff",q:"0xaa00ff"},this._heightScheme="x0123456789abcdefghijklmnopq",this._updates=0,this._showImportExport=!1,this._lastUsedTile={x:-1,y:-1},this.preveiwerUpdate=new Li.xQ,this.component=null,this._messages=[],this._model=null,this._doorX=0,this._doorY=0,this._doorDirection=0,this._blockedTilesMap=[],this._thicknessWall=0,this._thicknessFloor=0,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1,this._RoomThicknessReceived=!1,this._changesMade=!1,this.registerMessages(),this.loader=new s.q5A,this.loader.add("atlas","assets/images/floorplaneditor/tiles.json"),this.loader.load(),this.preveiwerUpdate.pipe((0,ki.b)(500),(0,Fi.x)()).subscribe(r=>{this._updatePreviewer()})}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new s.dYf(this.onRoomModelEvent.bind(this)),new s.gEG(this.onRoomDoorEvent.bind(this)),new s.MVd(this.onRoomBlockedTilesEvent.bind(this)),new s.H71(this.onRoomThicknessEvent.bind(this)),new s.kcw(this.onRoomRightsEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomRightsEvent(t){if(!(this._settingsService.floorPlanVisible&&t instanceof s.kcw))return;const n=t.getParser();!n||this._ngZone.run(()=>{this._settingsService.floorPlanVisible=n.controllerLevel>=s.A5x.ROOM_OWNER})}onRoomModelEvent(t){if(!t)return;const n=t.getParser();!n||(this._model=n.model,this._wallHeight=n.wallHeight+1,s.wjX.instance.communication.connection.send(new s.$Lo),s.wjX.instance.communication.connection.send(new s.yEC),this.tryEmit())}onRoomDoorEvent(t){if(!t)return;const n=t.getParser();!n||(this._doorX=n.x,this._doorY=n.y,this._doorDirection=n.direction,this._doorSettingsReceived=!0,this.tryEmit())}onRoomBlockedTilesEvent(t){if(!t)return;const n=t.getParser();!n||(this._blockedTilesMap=n.blockedTilesMap,this._blockedTilesMapReceived=!0,this.tryEmit())}onRoomThicknessEvent(t){if(!t)return;const n=t.getParser();!n||(this._thicknessFloor=this.convertSettingnToNumber(n.thicknessFloor),this._thicknessWall=this.convertSettingnToNumber(n.thicknessWall),this._RoomThicknessReceived=!0,this.tryEmit())}onRoomEngineDisposedEvent(t){!t||!this.component||this.component.close()}reset(){this._model=null,this._doorSettingsReceived=!1,this._blockedTilesMapReceived=!1}tryEmit(){this.component&&this.component.visible&&this._model&&this._doorSettingsReceived&&this._blockedTilesMapReceived&&this._ngZone.run(()=>this.component.init(this._model,this._blockedTilesMap,this._doorX,this._doorY,this._doorDirection,this._thicknessWall,this._thicknessFloor))}render(){this.tryEmit()}save(t){s.wjX.instance.communication.connection.send(new s.Lfb(t.heightMapString,t.doorX,t.doorY,t.doorDirection,this.convertNumbersForSaving(t.thicknessWall),this.convertNumbersForSaving(t.thicknessFloor),this._wallHeight-1)),this.reset()}convertNumbersForSaving(t){switch(t=parseInt(t.toString())){case 0:return-2;case 1:return-1;case 3:return 1;default:return 0}}clear(){this._floorMapSettings=new Di,this.__originalFloorMapSettings=new Di,this._highestX=0,this._highestY=0,this._coloredTilesCount=0,this._isHolding=!1,this._blockedTilesMap=[],this._changesMade=!1,this._currentAction="set",this._currentHeight=this._heightScheme[1]}generateTileMapString(){if("x"===this.floorMapSettings.heightMap[this._highestY][this._highestX].height){this._highestX=-1,this._highestY=-1;for(let r=this._maxFloorLength-1;r>=0;r--)if(this.floorMapSettings.heightMap[r])for(let a=this._maxFloorLength-1;a>=0;a--)this.floorMapSettings.heightMap[r][a]&&"x"!==this.floorMapSettings.heightMap[r][a].height&&(a>this._highestX&&(this._highestX=a),r>this._highestY&&(this._highestY=r))}const n=[];for(let r=0;r<=this._highestY;r++){const a=[];for(let c=0;c<=this._highestX;c++)a[c]=this.floorMapSettings.heightMap[r][c].height;n[r]=a.join("")}return n.join("\r")}readTileMapString(t){let n=t.split("\r");const r=[];let a=0,c=0;for(;a<n.length;){if(0===n[a].length){a--,n=n.splice(a,1);continue}const l=n[a].split("");for(r[a]=[],c=0;c<l.length;)r[a][c]=new li(l[c],this._blockedTilesMap[a]&&this._blockedTilesMap[a][c]),c++;for(;c<this._maxFloorLength;)r[a][c]=new li("x",!1),c++;a++}for(;a<this._maxFloorLength;){for(r[a]=[],c=0;c<this._maxFloorLength;)r[a][c]=new li("x",!1),c++;a++}return this._highestY=n.length-1,this._highestX=n[this._highestY].length-1,r}convertSettingnToNumber(t){switch(t){case.25:return 0;case.5:return 1;case 2:return 3;default:return 2}}renderTileMap(){this.component.tileMap.clear();let t=0;for(let n=0;n<this.floorMapSettings.heightMap.length;n++)for(let r=0;r<this.floorMapSettings.heightMap[n].length;r++){const a=this.floorMapSettings.heightMap[n][r];let c=!1;r===this.floorMapSettings.doorX&&n===this.floorMapSettings.doorY&&(c=!0);let l=a.height;a.blocked&&(l=i.TILE_BLOCKED),c&&(l=i.TILE_DOOR),"x"!==l&&t++;const g=r*this._tileSize/2-n*this._tileSize/2,d=r*this._tileSize/4+n*this._tileSize/4;this._ngZone.runOutsideAngular(()=>{this.component.tileMap.addFrame(l+".png",g+1024,d,null,null,null,null,1,n,r)})}this._ngZone.run(()=>this._coloredTilesCount=t),this._updates++,this.preveiwerUpdate.next(this._updates.toString())}_updatePreviewer(){this._ngZone.run(()=>this.floorMapSettings.heightMapString=this.generateTileMapString())}_handleTileClick(t,n){const r=this.floorMapSettings.heightMap[n][t],a=this._heightScheme.indexOf(r.height);let c=0;switch(this._currentAction){case"door":return void("x"!=r.height&&(this.floorMapSettings.doorX=t,this.floorMapSettings.doorY=n,this._changesMade=!0,this.renderTileMap()));case"up":c=a+1;break;case"down":c=a-1;break;case"set":c=this._heightScheme.indexOf(this._currentHeight);break;case"unset":c=0}if(-1===c||a===c)return;c>0&&(t>this.highestX&&(this.highestX=t),n>this.highestY&&(this.highestY=n));const l=this._heightScheme[c];!l||r.blocked||(this.floorMapSettings.heightMap[n][t].height=l,this._changesMade=!0,this.renderTileMap())}revertChanges(){this._ngZone.runOutsideAngular(()=>{this._floorMapSettings=JSON.parse(JSON.stringify(this.__originalFloorMapSettings)),this.renderTileMap()}),this._changesMade=!1}set floorMapSettings(t){this._floorMapSettings=t}get floorMapSettings(){return this._floorMapSettings}set originalMapSettings(t){this.__originalFloorMapSettings=JSON.parse(JSON.stringify(t))}get originalMapSettings(){return this.__originalFloorMapSettings}get highestY(){return this._highestY}set highestY(t){this._highestY=t}get highestX(){return this._highestX}set highestX(t){this._highestX=t}get maxTilesCount(){return this._maxFloorLength*this._maxFloorLength}decrementDoorDirection(){0===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=7:this.floorMapSettings.doorDirection--}incrementDoorDirection(){7===this.floorMapSettings.doorDirection?this.floorMapSettings.doorDirection=0:this.floorMapSettings.doorDirection++}decrementWallheight(){1===this.wallHeight?this.wallHeight=16:this.wallHeight--}incrementWallheight(){16===this.wallHeight?this.wallHeight=1:this.wallHeight++}get coloredTilesCount(){return this._coloredTilesCount}get tileSize(){return this._tileSize}get currentAction(){return this._currentAction}set currentAction(t){this._currentAction=t}get currentHeight(){return this._currentHeight}set currentHeight(t){this._currentHeight=t}get colorMap(){return this._colorMap}get blockedTilesMap(){return this._blockedTilesMap}set blockedTilesMap(t){this._blockedTilesMap=t}decrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);1!==t&&this.selectHeight(this._heightScheme[t-1])}selectHeight(t){this.currentHeight=t,this.currentAction="set"}incrementHeight(){const t=this._heightScheme.indexOf(this.currentHeight);t!==this._heightScheme.length-1&&this.selectHeight(this._heightScheme[t+1])}get changesMade(){return this._changesMade}get wallHeight(){return this._wallHeight}set wallHeight(t){this._wallHeight=t}detectPoints(){const t=this.component.tileMap,n=new s.TSu;t.containsPoint=r=>(t.worldTransform.applyInverse(r,n),this.tileHitDettection(t,n,!1)),t.on("pointerup",()=>{this._isHolding=!1}),t.on("pointerout",()=>{this._isHolding=!1}),t.on("pointerdown",r=>{r.data.originalEvent instanceof PointerEvent&&2!==r.data.originalEvent.button&&this.tileHitDettection(t,r.data.global,!0)}),t.on("click",r=>{r.data.originalEvent instanceof PointerEvent&&2!==r.data.originalEvent.button&&this.tileHitDettection(t,r.data.global,!0,!0)})}tileHitDettection(t,n,r,a=!1){const c=t.children[0].pointsBuf,l=s.W5P,g=c.length;r&&(this._isHolding=!0);for(let d=0;d<g;d+=l){const f=c.slice(d,d+l),E=f[4],k=f[5],H=Math.floor(n.x),x=Math.floor(n.y),z=f[3]+k/2;if(Math.abs(H-(f[2]+E/2)-2)/(.5*E)+Math.abs(x-z-2)/(.5*k)<=1){if(this._isHolding){const gn=f[13],Kn=f[14];a?this._handleTileClick(Kn,gn):(this._lastUsedTile.x!=Kn||this._lastUsedTile.y!=gn)&&(this._lastUsedTile={x:Kn,y:gn},this._handleTileClick(Kn,gn))}return!0}}return!1}get showImportExport(){return this._showImportExport}set showImportExport(t){this._showImportExport=t}}return i.TILE_BLOCKED="r_blocked",i.TILE_DOOR="r_door",i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(w))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),hn=(()=>{class i{constructor(t){this._ngZone=t,this._userId=-1,this._userName=null,this._figure=null,this._gender=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.muo(this.onUserInfoEvent.bind(this)),new s.dLZ(this.onUserFigureEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserInfoEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.userInfo;this._ngZone.run(()=>{this._userId=r.userId,this._userName=r.username,this._figure=r.figure,this._gender=r.gender})}onUserFigureEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._figure=n.figure,this._gender=n.gender})}get userId(){return this._userId}get userName(){return this._userName}get figure(){return this._figure}get gender(){return this._gender}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Er=["floorplanElement"],Sr=["floorplanPreviewer"],Ar=function(i){return{selected:i}},wr=function(i){return{backgroundColor:i}};function xr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectHeight(a.key)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Ar,n.currentHeight===t.key))("ngStyle",e.VKq(4,wr,n.getColor(t.value)))}}function Zr(i,o){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"div",41,42),e._UZ(3,"div",43),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("roomPreviewer",t.roomPreviewer)("width",1e3)("height",1e3)("modelScale",!1)("model",t.currentModel)("wallHeight",t.wallHeight)}}const fn=function(i){return{active:i}},Ir=function(i,o){return{"col-7":i,"col-12":o}};function yr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"h6",4),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e._UZ(6,"i",6),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeAction("set")}),e._UZ(15,"i",13),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeAction("unset")}),e._UZ(17,"i",14),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeAction("up")}),e._UZ(19,"i",15),e.qZA(),e.TgZ(20,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeAction("down")}),e._UZ(21,"i",16),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeAction("door")}),e._UZ(23,"i",17),e.qZA(),e.qZA(),e.TgZ(24,"div",10),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"div",11),e.TgZ(28,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().decrementHeight()}),e._UZ(29,"i",19),e.qZA(),e.YNc(30,xr,1,6,"button",20),e.ALo(31,"keyvalue"),e.TgZ(32,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().incrementHeight()}),e._UZ(33,"i",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",22),e.TgZ(35,"div",23),e.TgZ(36,"div",24),e.TgZ(37,"div",10),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"div",25),e.TgZ(41,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().decrementDoorDirection()}),e._UZ(42,"i",19),e.qZA(),e._UZ(43,"button",26),e.TgZ(44,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().incrementDoorDirection()}),e._UZ(45,"i",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",24),e.TgZ(47,"div",10),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",25),e.TgZ(51,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().decrementWallheight()}),e._UZ(52,"i",19),e.qZA(),e.TgZ(53,"button",27),e._uU(54),e.qZA(),e.TgZ(55,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().incrementWallheight()}),e._UZ(56,"i",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",10),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"div",23),e.TgZ(61,"div",24),e.TgZ(62,"select",28),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().thicknessWall=r}),e.TgZ(63,"option",29),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"option",29),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"option",29),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"option",29),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",24),e.TgZ(76,"select",28),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().thicknessFloor=r}),e.TgZ(77,"option",29),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"option",29),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"option",29),e._uU(84),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"option",29),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(89,"div",23),e.TgZ(90,"div",30),e.TgZ(91,"div",31),e._uU(92),e.qZA(),e._UZ(93,"div",32,33),e.qZA(),e.YNc(95,Zr,4,6,"div",34),e.qZA(),e.TgZ(96,"div",35),e.TgZ(97,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().revertChanges()}),e._uU(98),e.ALo(99,"translate"),e.qZA(),e.TgZ(100,"div",37),e.TgZ(101,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().togglePreviewer()}),e._uU(102),e.qZA(),e.TgZ(103,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().openImportExport()}),e._uU(104),e.ALo(105,"translate"),e.qZA(),e.TgZ(106,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e._uU(107),e.ALo(108,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,45,"floor.plan.editor.title")),e.xp6(8),e.Oqu(e.lcZ(12,47,"floor.plan.editor.draw.mode")),e.xp6(3),e.Q6J("ngClass",e.VKq(81,fn,"set"===t.currentAction)),e.xp6(2),e.Q6J("ngClass",e.VKq(83,fn,"unset"===t.currentAction)),e.xp6(2),e.Q6J("ngClass",e.VKq(85,fn,"up"===t.currentAction)),e.xp6(2),e.Q6J("ngClass",e.VKq(87,fn,"down"===t.currentAction)),e.xp6(2),e.Q6J("ngClass",e.VKq(89,fn,"door"===t.currentAction)),e.xp6(3),e.Oqu(e.lcZ(26,49,"floor.plan.editor.tile.height")),e.xp6(5),e.Q6J("ngForOf",e.lcZ(31,51,t.colorMap)),e.xp6(8),e.Oqu(e.lcZ(39,53,"floor.plan.editor.enter.direction")),e.xp6(5),e.Q6J("headOnly",!0)("scale",4)("asBackground",!0)("figure",t.currentAvatarFigure)("direction",t.doorDirection),e.xp6(5),e.Oqu(e.lcZ(49,55,"floor.editor.wall.height")),e.xp6(6),e.Oqu(t.wallHeight),e.xp6(4),e.Oqu(e.lcZ(59,57,"floor.plan.editor.room.options")),e.xp6(4),e.Q6J("ngModel",t.thicknessWall),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(e.lcZ(65,59,"navigator.roomsettings.wall_thickness.thinnest")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Oqu(e.lcZ(68,61,"navigator.roomsettings.wall_thickness.thin")),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.Oqu(e.lcZ(71,63,"navigator.roomsettings.wall_thickness.normal")),e.xp6(2),e.Q6J("value",3),e.xp6(1),e.Oqu(e.lcZ(74,65,"navigator.roomsettings.wall_thickness.thick")),e.xp6(3),e.Q6J("ngModel",t.thicknessFloor),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(e.lcZ(79,67,"navigator.roomsettings.floor_thickness.thinnest")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Oqu(e.lcZ(82,69,"navigator.roomsettings.floor_thickness.thin")),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.Oqu(e.lcZ(85,71,"navigator.roomsettings.floor_thickness.normal")),e.xp6(2),e.Q6J("value",3),e.xp6(1),e.Oqu(e.lcZ(88,73,"navigator.roomsettings.floor_thickness.thick")),e.xp6(3),e.Q6J("ngClass",e.WLB(91,Ir,t.showPreviewer,!t.showPreviewer)),e.xp6(2),e.AsE(" ",t.coloredTilesCount," / ",t.maxTilesCount," "),e.xp6(3),e.Q6J("ngIf",t.showPreviewer),e.xp6(2),e.Q6J("disabled",!t.ableToRevertChanges),e.xp6(1),e.Oqu(e.lcZ(99,75,"floor.plan.editor.reload")),e.xp6(4),e.Oqu(t.togglePreviewButton),e.xp6(2),e.Oqu(e.lcZ(105,77,"floor.plan.editor.import.export")),e.xp6(3),e.Oqu(e.lcZ(108,79,"floor.plan.editor.save"))}}function Rr(i,o){if(1&i&&e._UZ(0,"nitro-floorplan-import-export-component",44),2&i){const t=e.oxw();e.Q6J("map",t.heightMap)}}let Pi=(()=>{class i{constructor(t,n,r,a){this._ngZone=t,this.floorPlanService=n,this._settingsService=r,this._sessionService=a,this.visible=!1,this.showPreviewer=!1,this._previewerEventsSet=!1,this.floorPlanService.component=this,this._clear()}ngOnInit(){this._roomPreviewer=new s.L4r(s.wjX.instance.roomEngine,++s.L4r.PREVIEW_COUNTER),this._roomPreviewer.zoomOut(),this._roomPreviewer.zoomOut()}ngOnChanges(t){t.visible.currentValue?(s.wjX.instance.communication.connection.send(new s.$Lo),s.wjX.instance.communication.connection.send(new s.yEC)):this._clear()}ngOnDestroy(){this._roomPreviewer&&(this._roomPreviewer.dispose(),this._roomPreviewer=null)}_clear(){this.floorPlanService.clear(),this._ngZone.runOutsideAngular(()=>{this._app&&(this._app.destroy(!0),this._app=null,this._tileMap.destroy(),this._tileMap=null)})}close(){this._settingsService.floorPlanVisible=!1,this.floorPlanService.showImportExport=!1}preview(t){const{doorX:n,doorY:r,doorDirection:a,thicknessWall:c,thicknessFloor:l}=this.floorPlanService.floorMapSettings;this.init(t,this.floorPlanService.blockedTilesMap,n,r,a,c,l)}render(){this._app&&this._app.stage.removeChildren(),this._ngZone.runOutsideAngular(()=>{}),this.floorPlanService.render()}init(t,n,r,a,c,l,g){this._clear(),this.floorPlanService.floorMapSettings.heightMapString=t,this.floorPlanService.floorMapSettings.doorX=r,this.floorPlanService.floorMapSettings.doorY=a,this.floorPlanService.floorMapSettings.doorDirection=c,this.floorPlanService.blockedTilesMap=n,this.floorPlanService.floorMapSettings.thicknessWall=l,this.floorPlanService.floorMapSettings.thicknessFloor=g,this._ngZone.run(()=>{this.floorPlanService.floorMapSettings.doorDirection=c}),this.floorPlanService.floorMapSettings.heightMap=this.floorPlanService.readTileMapString(t);const d=this.floorPlanService.tileSize,h=d*this.floorPlanService.floorMapSettings.heightMap.length+20,f=d*this.floorPlanService.floorMapSettings.heightMap.length/2+100;this.floorPlanService.originalMapSettings=this.floorPlanService.floorMapSettings,this._ngZone.runOutsideAngular(()=>{this._buildApp(h,f),this.floorPlanService.renderTileMap()})}_buildApp(t,n){if(!this._app){this._app=new s.Yv1({width:t,height:n,backgroundColor:2829099,antialias:!0,autoDensity:!0,resolution:1}),this._tileMap=new s._OL,this._tileMap.interactive=!0,this._ngZone.runOutsideAngular(()=>this.floorPlanService.detectPoints()),this._app.stage.addChild(this._tileMap),this.floorplanElement.nativeElement.appendChild(this._app.view);let r={top:0,left:0,x:0,y:0};const a=this.floorplanElement.nativeElement,c=function(d){2===d.button&&(a.style.cursor="grabbing",a.style.userSelect="none",r={left:a.scrollLeft,top:a.scrollTop,x:d.clientX,y:d.clientY},a.addEventListener("mousemove",l),a.addEventListener("mouseup",g))},l=function(d){const h=d.clientX-r.x;a.scrollTop=r.top-(d.clientY-r.y),a.scrollLeft=r.left-h},g=function(){a.style.cursor="default",a.removeEventListener("mousemove",l),a.removeEventListener("mouseup",g)};a.addEventListener("mousedown",c),a.oncontextmenu=function(){return!1},this.setPreviewerEvents(),this.floorplanElement.nativeElement.scrollTo(t/3,0)}}setPreviewerEvents(){if(!this.showPreviewer||this._previewerEventsSet)return;const t=this.floorplanPreviewer.nativeElement;let n={top:0,left:0,x:0,y:0};const a=function(l){const g=l.clientX-n.x;t.scrollTop=n.top-(l.clientY-n.y),t.scrollLeft=n.left-g},c=function(){t.style.cursor="default",t.removeEventListener("mousemove",a),t.removeEventListener("mouseup",c)};t.addEventListener("mousedown",function(l){t.style.cursor="grabbing",t.style.userSelect="none",n={left:t.scrollLeft,top:t.scrollTop,x:l.clientX,y:l.clientY},t.addEventListener("mousemove",a),t.addEventListener("mouseup",c)}),t.oncontextmenu=function(){return!1},t.scrollTo(250,250),this._previewerEventsSet=!0}changeAction(t){this.floorPlanService.currentAction=t}selectHeight(t){this.floorPlanService.currentHeight=t,this.changeAction("set")}getColor(t){return t.replace("0x","#")}save(){this.floorPlanService.floorMapSettings.heightMapString=this.floorPlanService.generateTileMapString(),this.floorPlanService.save(this.floorPlanService.floorMapSettings)}decrementHeight(){this.floorPlanService.decrementHeight()}incrementHeight(){this.floorPlanService.incrementHeight()}decrementDoorDirection(){this.floorPlanService.decrementDoorDirection()}incrementDoorDirection(){this.floorPlanService.incrementDoorDirection()}decrementWallheight(){this.floorPlanService.decrementWallheight()}incrementWallheight(){this.floorPlanService.incrementWallheight()}openImportExport(){this.floorPlanService.showImportExport=!0}revertChanges(){this.floorPlanService.revertChanges()}toggleEditor(){this.minimize=!this.minimize}togglePreviewer(){this.showPreviewer=!this.showPreviewer,this.showPreviewer||(this._previewerEventsSet=!1),setTimeout(()=>{this.setPreviewerEvents()},200)}get colorMap(){return Object.keys(this.floorPlanService.colorMap).filter(t=>"x"!==t).reduce((t,n)=>(t[n]=this.floorPlanService.colorMap[n],t),{})}get currentAction(){return this.floorPlanService.currentAction}get currentHeight(){return this.floorPlanService.currentHeight}get coloredTilesCount(){return this.floorPlanService.coloredTilesCount}get maxTilesCount(){return this.floorPlanService.maxTilesCount}get roomPreviewer(){return this._roomPreviewer}get currentModel(){return this.floorPlanService.floorMapSettings.heightMapString}get doorDirection(){return this.floorPlanService.floorMapSettings.doorDirection}get wallHeight(){return 0==this.floorPlanService.wallHeight&&(this.floorPlanService.wallHeight=1),this.floorPlanService.wallHeight}get thicknessWall(){return this.floorPlanService.floorMapSettings.thicknessWall}set thicknessWall(t){this.floorPlanService.floorMapSettings.thicknessWall=t}get thicknessFloor(){return this.floorPlanService.floorMapSettings.thicknessFloor}set thicknessFloor(t){this.floorPlanService.floorMapSettings.thicknessFloor=t}get ableToRevertChanges(){return this.floorPlanService.changesMade}get tileMap(){return this._tileMap}get showImportExport(){return this.floorPlanService.showImportExport}get togglePreviewButton(){const n=this.showPreviewer?"Hide Preview":"Show Preview",r=s.wjX.instance.localization.getValue(this.showPreviewer?"nitro.floorplan.previewer.hide":"nitro.floorplan.previewer.show");return r==r?n:r}get currentAvatarFigure(){return this._sessionService.figure}get heightMap(){return this.floorPlanService.floorMapSettings.heightMapString}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(ui),e.Y36(w),e.Y36(hn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-floorplan-main-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Er,5),e.Gf(Sr,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.floorplanElement=r.first),e.iGM(r=e.CRH())&&(n.floorplanPreviewer=r.first)}},inputs:{visible:"visible"},features:[e.TTD],decls:2,vars:2,consts:[["class","card nitro-floorplan-editor-component",3,"bringToTop","draggable",4,"ngIf"],[3,"map",4,"ngIf"],[1,"card","nitro-floorplan-editor-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-7"],[1,"mb-1"],[1,"btn-group","w-100","mb-3"],[1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"icon","icon-floorplaneditor-tile-set"],[1,"icon","icon-floorplaneditor-tile-unset"],[1,"icon","icon-floorplaneditor-tile-up"],[1,"icon","icon-floorplaneditor-tile-down"],[1,"icon","icon-floorplaneditor-door"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-left"],["class","btn btn-sm btn-primary floorplan-height-option",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"col-5"],[1,"row","mb-3"],[1,"col-6"],[1,"btn-group","w-100",2,"height","50px"],["avatar-image","",1,"btn","btn-primary","btn-sm","w-100","floorplan-door-button",3,"headOnly","scale","asBackground","figure","direction"],[1,"btn","btn-primary","btn-sm","w-100"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"ngClass"],[1,"text-right"],[1,"editor-area"],["floorplanElement",""],["class","col-5",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-sm","btn-primary","floorplan-height-option",3,"ngClass","ngStyle","click"],[1,"editor-area",2,"text-align","center"],["floorplanPreviewer",""],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height","modelScale","model","wallHeight"],[3,"map"]],template:function(t,n){1&t&&(e.YNc(0,yr,109,94,"div",0),e.YNc(1,Rr,1,1,"nitro-floorplan-import-export-component",1)),2&t&&(e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.showImportExport))},encapsulation:2}),i})();const Mr=["roomCanvas"],Or=["widgetContainer"];function Ur(i,o){}class Ve{constructor(o,t,n,r,a,c,l,g){this._notificationService=o,this._wiredService=t,this._friendService=n,this._chatHistoryService=r,this._componentFactoryResolver=a,this._modToolsService=c,this._settingsService=l,this._ngZone=g,this._events=new s.pBf,this._handlers=[],this._widgets=new Map,this._widgetHandlerMessageMap=new Map,this._widgetHandlerEventMap=new Map,this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,this._resizeTimer=null,this._didMouseMove=!1,this._lastClick=0,this._clickCount=0,this._lastMouseMove=0,this._isMouseMove=!1,this._scrollCount=0,this._lastScrollTime=0,this.processEvent=this.processEvent.bind(this)}ngOnDestroy(){this.endRoom(),this._events.dispose()}get floorPlanVisible(){return this._settingsService.floorPlanVisible}prepareRoom(o){if(!o)return;const t=this.getFirstCanvasId(),c=s.wjX.instance.roomEngine.getRoomInstanceDisplay(o.roomId,t,s.wjX.instance.width,s.wjX.instance.height,s.vkt.SCALE_ZOOMED_IN);if(!c)return;const l=s.wjX.instance.roomEngine.getRoomInstanceGeometry(o.roomId,t);if(l){let k=((s.wjX.instance.roomEngine.getRoomInstanceVariable(o.roomId,s.aKG.ROOM_MIN_X)||0)+(s.wjX.instance.roomEngine.getRoomInstanceVariable(o.roomId,s.aKG.ROOM_MAX_X)||0))/2,H=((s.wjX.instance.roomEngine.getRoomInstanceVariable(o.roomId,s.aKG.ROOM_MIN_Y)||0)+(s.wjX.instance.roomEngine.getRoomInstanceVariable(o.roomId,s.aKG.ROOM_MAX_Y)||0))/2;const x=20;k+=x-1,H+=x-1;const ue=Math.sqrt(x*x+x*x)*Math.tan(30/180*Math.PI);l.location=new s.UJ(k,H,ue)}const g=s.wjX.instance.stage;!g||(g.addChild(c),this._roomSession=o,this.insertCanvas(),this.onWindowResizeEvent(null),s.wjX.instance.ticker.add(this.update,this),this._friendService.events.addEventListener(ve.ACCEPTED,this.processEvent),this._friendService.events.addEventListener(ve.DECLINED,this.processEvent))}endRoom(){if(this._roomSession){this._friendService.events.removeEventListener(ve.ACCEPTED,this.processEvent),this._friendService.events.removeEventListener(ve.DECLINED,this.processEvent),s.wjX.instance.ticker.remove(this.update,this),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=null);for(const o of this._widgets.values())!o||(o.instance&&o.instance.dispose(),this._ngZone.run(()=>o.destroy()));for(const o of this._handlers)o&&o.dispose();this._roomColorAdjustor=null,this._roomBackground=null,this._roomBackgroundColor=0,this._roomColorizerColor=0,this._roomScale=1,Ve.COLOR_ADJUSTMENT.red=1,Ve.COLOR_ADJUSTMENT.green=1,Ve.COLOR_ADJUSTMENT.blue=1,this._handlers=[],this._widgets.clear(),this._widgetHandlerMessageMap.clear(),this._widgetHandlerEventMap.clear(),this._events.removeAllListeners(),this._roomSession=null,this.removeCanvas(),s.XQ4.call("logDebug","Navigator: exiting room")}}insertCanvas(){const o=s.wjX.instance.renderer.view;!o||(o.onclick=this.onMouseEvent.bind(this),o.onmousemove=this.onMouseEvent.bind(this),o.onmousedown=this.onMouseEvent.bind(this),o.onmouseup=this.onMouseEvent.bind(this),o.ontouchstart=this.onTouchEvent.bind(this),o.ontouchmove=this.onTouchEvent.bind(this),o.ontouchend=this.onTouchEvent.bind(this),o.ontouchcancel=this.onTouchEvent.bind(this),window.onresize=this.onWindowResizeEvent.bind(this),window.onmousewheel=this.onWindowMouseWheelEvent.bind(this),this.roomCanvasReference.nativeElement.appendChild(o))}removeCanvas(){const o=s.wjX.instance.renderer.view;!o||(o.onclick=null,o.onmousemove=null,o.onmousedown=null,o.onmouseup=null,o.ontouchstart=null,o.ontouchmove=null,o.ontouchend=null,o.ontouchcancel=null,window.onresize=null,window.onmousewheel=null,o.parentElement&&o.parentElement.removeChild(o))}onMouseEvent(o){if(!o||!this._roomSession)return;const t=o.clientX,n=o.clientY;let r=o.type;switch(r===s.k8U.MOUSE_CLICK&&(this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(this._didMouseMove||(r=s.k8U.DOUBLE_CLICK),this._clickCount=0,this._lastClick=null)),r){case s.k8U.MOUSE_CLICK:case s.k8U.DOUBLE_CLICK:break;case s.k8U.MOUSE_MOVE:this._didMouseMove=!0;break;case s.k8U.MOUSE_DOWN:this._didMouseMove=!1;break;case s.k8U.MOUSE_UP:break;default:return}s.wjX.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),s.wjX.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),t,n,r,o.altKey,o.ctrlKey||o.metaKey,o.shiftKey,!1)}onTouchEvent(o){if(!o||!this._roomSession)return;let t=o.type;switch(t===s.R1y.TOUCH_END&&!this._didMouseMove&&(t=s.k8U.MOUSE_CLICK,this._lastClick&&(this._clickCount=1,this._lastClick>=Date.now()-300&&this._clickCount++),this._lastClick=Date.now(),2===this._clickCount&&(t=s.k8U.DOUBLE_CLICK,this._clickCount=0,this._lastClick=null)),t){case s.k8U.MOUSE_CLICK:case s.k8U.DOUBLE_CLICK:break;case s.R1y.TOUCH_START:t=s.k8U.MOUSE_DOWN,this._didMouseMove=!1;break;case s.R1y.TOUCH_MOVE:t=s.k8U.MOUSE_MOVE,this._didMouseMove=!0;break;default:return}let n=0,r=0;o.touches[0]?(n=o.touches[0].clientX,r=o.touches[0].clientY):o.changedTouches[0]&&(n=o.changedTouches[0].clientX,r=o.changedTouches[0].clientY),s.wjX.instance.roomEngine.setActiveRoomId(this._roomSession.roomId),s.wjX.instance.roomEngine.dispatchMouseEvent(this.getFirstCanvasId(),n,r,t,o.altKey,o.ctrlKey||o.metaKey,o.shiftKey,!1)}onWindowResizeEvent(o){!this._roomSession||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>{s.wjX.instance.renderer.resize(window.innerWidth,window.innerHeight),s.wjX.instance.roomEngine.initializeRoomInstanceRenderingCanvas(this._roomSession.roomId,this.getFirstCanvasId(),s.wjX.instance.width,s.wjX.instance.height),this._events.dispatchEvent(new Te(Te.SIZE_CHANGED,this.getRoomViewRect())),this.setRoomBackground(),s.wjX.instance.render()},1))}onWindowMouseWheelEvent(o){if(!o||!this._roomSession||o.target!==s.wjX.instance.renderer.view)return;const n=-1/40*(o.wheelDeltaY||o.deltaY)<0?1:-1;if(this._lastScrollTime&&(this._lastScrollTime<Date.now()-300&&(this._scrollCount=0),this._scrollCount++),this._lastScrollTime=Date.now(),15!==this._scrollCount)return;this._scrollCount=0,this._lastScrollTime=null;let r=this._roomScale;switch(n){case 1:r>=.5&&(r+=.5);break;case-1:r<=1?r=.5:r-=.5}this._roomScale=r,s.wjX.instance.roomEngine.events.dispatchEvent(new s.JwU(this._roomSession.roomId,r,!1))}update(){for(const o of this._widgets.values())o.instance.widgetHandler&&o.instance.widgetHandler.update()}createWidget(o,t){if(this._widgets.get(o))return;let r=null,a=!1;switch(o){case s.z5f.CHAT_WIDGET:{a=!0;const c=new Qo(this._chatHistoryService);c.connection=s.wjX.instance.communication.connection,r=c;break}case s.z5f.CHAT_INPUT_WIDGET:a=!0,r=new Wo;break;case s.z5f.AVATAR_INFO:r=new Ho;break;case s.z5f.INFOSTAND:r=new mr;break;case s.z5f.LOCATION_WIDGET:r=new hr;break;case s.z5f.INTERNAL_LINK:r=new cr;break;case s.z5f.ROOM_LINK:r=new _r;break;case s.z5f.ROOM_DIMMER:r=new sr;break;case s.z5f.CUSTOM_STACK_HEIGHT:r=new or;break;case s.z5f.FURNI_CHOOSER:r=new $o;break;case s.z5f.USER_CHOOSER:r=new vr;break;case s.z5f.FURNI_STICKIE_WIDGET:r=new gr;break;case s.z5f.DOORBELL:r=new Xo;break;case s.z5f.FURNI_TROPHY_WIDGET:r=new dr;break;case s.z5f.FURNI_CREDIT_WIDGET:r=new ir;break;case s.z5f.FURNITURE_CONTEXT_MENU:r=new nr;break;case s.z5f.MANNEQUIN:r=new lr;break;case s.z5f.ROOM_BACKGROUND_COLOR:r=new er;break;case s.z5f.FRIEND_FURNI_CONFIRM:r=new Yo;break;case s.z5f.FRIEND_FURNI_ENGRAVING:r=new zo;break;case s.z5f.ROOM_TOOLS:r=new fr;break;case s.z5f.FURNI_PRESENT_WIDGET:r=new ur;break;case s.z5f.FRIEND_REQUEST:r=new Ko;break;case s.z5f.HIGH_SCORE_DISPLAY:r=new ar}if(r){const c=r.messageTypes;if(c&&c.length)for(const g of c){if(!g)continue;let d=this._widgetHandlerMessageMap.get(g);d||(d=[],this._widgetHandlerMessageMap.set(g,d)),d.push(r)}const l=r.eventTypes;if(l.push(s.L4R.OPEN_WIDGET,s.L4R.CLOSE_WIDGET),l&&l.length)for(const g of l){if(!g)continue;let d=this._widgetHandlerEventMap.get(g);d||(d=[],this._widgetHandlerEventMap.set(g,d)),d.push(r)}if(this._handlers.push(r),t){let g=null,d=null;if(this._ngZone.run(()=>{const h=this._componentFactoryResolver.resolveComponentFactory(t);g=this.widgetContainer.createComponent(h),d=g.instance}),!d)return;d.widgetHandler=r,d.messageListener=this,d.registerUpdateEvents(this._events),this._widgets.set(o,g)}r.container=this}a&&this._events.dispatchEvent(new Te(Te.SIZE_CHANGED,this.getRoomViewRect()))}processEvent(o){if(!o||!this._widgetHandlerEventMap)return;const t=this._widgetHandlerEventMap.get(o.type);if(!t)return;let n=!1;for(const r of t)!r||(n=!0,(o.type===s.L4R.OPEN_WIDGET||o.type===s.L4R.CLOSE_WIDGET)&&o instanceof s.L4R&&(n=r.type===o.widget),n&&r.processEvent(o))}processWidgetMessage(o){if(!o||!o.type)return null;const t=this._widgetHandlerMessageMap.get(o.type);if(!t||!t.length)return null;for(const n of t){if(!n)continue;const r=n.processWidgetMessage(o);if(r)return r}return null}onRoomEngineEvent(o){if(o)switch(o.type){case s._Z0.NORMAL_MODE:return void this._events.dispatchEvent(new xt(xt.RWREUE_NORMAL_MODE,o.roomId));case s._Z0.GAME_MODE:return void this._events.dispatchEvent(new xt(xt.RWREUE_GAME_MODE,o.roomId))}}onRoomEngineObjectEvent(o){if(!o)return;const t=o.objectId,n=o.category;let r=null;switch(o.type){case s.MCw.SELECTED:if(this.isFurnitureSelectionDisabled(o)||(r=new T(T.OBJECT_SELECTED,t,n,o.roomId)),n==s.YGE.UNIT){const a=this._roomSession.userDataManager.getUserDataByIndex(t);a&&a.type==s.OOj.USER&&this._modToolsService.selectUser(a.webID,a.name)}break;case s.MCw.DESELECTED:r=new T(T.OBJECT_DESELECTED,t,n,o.roomId);break;case s.MCw.ADDED:{let a=null;switch(n){case s.YGE.FLOOR:case s.YGE.WALL:a=T.FURNI_ADDED;break;case s.YGE.UNIT:a=T.USER_ADDED}a&&(r=new T(a,t,n,o.roomId));break}case s.MCw.REMOVED:{let a=null;switch(n){case s.YGE.FLOOR:case s.YGE.WALL:a=T.FURNI_REMOVED;break;case s.YGE.UNIT:a=T.USER_REMOVED}a&&(r=new T(a,t,n,o.roomId));break}case s.MCw.MOUSE_ENTER:r=new T(T.OBJECT_ROLL_OVER,t,n,o.roomId);break;case s.MCw.MOUSE_LEAVE:r=new T(T.OBJECT_ROLL_OUT,t,n,o.roomId);break;case s.MCw.REQUEST_MOVE:this.checkFurniManipulationRights(o.roomId,t,n)&&s.wjX.instance.roomEngine.processRoomObjectOperation(t,n,s.HNf.OBJECT_MOVE);break;case s.MCw.REQUEST_ROTATE:this.checkFurniManipulationRights(o.roomId,t,n)&&s.wjX.instance.roomEngine.processRoomObjectOperation(t,n,s.HNf.OBJECT_ROTATE_POSITIVE);break;case s.L4R.REQUEST_STICKIE:this.processWidgetMessage(new re(re.REQUEST_STICKIE,t,n,o.roomId));break;case s.L4R.REQUEST_TROPHY:this.processWidgetMessage(new re(re.REQUEST_TROPHY,t,n,o.roomId));break;case s.L4R.REQUEST_CREDITFURNI:this.processWidgetMessage(new re(re.REQUEST_CREDITFURNI,t,n,o.roomId));break;case s.L4R.REQUEST_DIMMER:this.processWidgetMessage(new re(re.REQUEST_DIMMER,t,n,o.roomId));break;case s.L4R.REQUEST_PRESENT:this.processWidgetMessage(new re(re.REQUEST_PRESENT,t,n,o.roomId));break;case s.L4R.OPEN_WIDGET:case s.L4R.CLOSE_WIDGET:case s.L4R.OPEN_FURNI_CONTEXT_MENU:case s.L4R.CLOSE_FURNI_CONTEXT_MENU:case s.L4R.REMOVE_DIMMER:case s.L4R.REQUEST_MANNEQUIN:case s.L4R.REQUEST_BACKGROUND_COLOR:case s.L4R.REQUEST_FRIEND_FURNITURE_ENGRAVING:case s.L4R.REQUEST_HIGH_SCORE_DISPLAY:case s.L4R.REQUEST_HIDE_HIGH_SCORE_DISPLAY:case s.L4R.REQUEST_INTERNAL_LINK:case s.L4R.REQUEST_ROOM_LINK:this.processEvent(o)}if(r){let a=!0;r instanceof T&&(a=!s.Rz.isRoomPreviewerId(r.roomId)),a&&this._events.dispatchEvent(r)}}isFurnitureSelectionDisabled(o){let t=!1;const n=s.wjX.instance.roomEngine.getRoomObject(o.roomId,o.objectId,o.category);return n&&1===n.model.getValue(s.fql.FURNITURE_SELECTION_DISABLED)&&(t=!0,s.wjX.instance.sessionDataManager.isModerator&&(t=!1)),t}checkFurniManipulationRights(o,t,n){return this._roomSession.controllerLevel>=s.A5x.GUEST||s.wjX.instance.sessionDataManager.isModerator||this.isOwnerOfFurniture(s.wjX.instance.roomEngine.getRoomObject(o,t,n))}isOwnerOfFurniture(o){return!(!o||!o.model)&&s.wjX.instance.sessionDataManager.userId===o.model.getValue(s.fql.FURNITURE_OWNER_ID)}_Str_2485(o){if(!o||!this._widgetHandlerEventMap)return;const t=this._widgetHandlerEventMap.get(o.type);if(t&&t.length){let n=!0;for(const r of t)(o.type===s.L4R.OPEN_WIDGET||s.L4R.CLOSE_WIDGET)&&o instanceof s.L4R&&(n=r.type===o.widget),n&&r.processEvent(o)}}getRoomBackground(){if(this._roomBackground)return this._roomBackground;const o=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!o)return null;const t=o.master,n=new s.L_v(s.D$7.WHITE);return t.addChildAt(n,0),this._roomBackground=n,this._roomBackground}getRoomColorizer(){if(this._roomColorAdjustor)return this._roomColorAdjustor;const o=this.roomEngine.getRoomInstanceRenderingCanvas(this.roomSession.roomId,this.getFirstCanvasId());if(!o)return null;const t=o.master;return t?(this._roomColorAdjustor=Ve.COLOR_ADJUSTMENT,t.filters=[this._roomColorAdjustor],this._roomColorAdjustor):null}setRoomBackgroundColor(o,t,n){this._roomBackgroundColor=s.No6.hslToRGB(((255&o)<<16)+((255&t)<<8)+(255&n));const r=this.getRoomBackground();!r||(o||t||n?(r.visible=!0,this.setRoomBackground()):r.visible=!1)}setRoomColorizerColor(o,t){this._roomColorizerColor=s.No6.hslToRGB((16776960&s.No6.rgbToHSL(o))+t),this.setRoomColorizer()}setRoomBackground(){const o=this.getRoomBackground();!o||(o.tint=this._roomBackgroundColor,o.width=s.wjX.instance.width,o.height=s.wjX.instance.height)}setRoomColorizer(){const o=this.getRoomColorizer();if(!o)return;const n=this._roomColorizerColor>>8&255,r=255&this._roomColorizerColor;o.red=(this._roomColorizerColor>>16&255)/255,o.green=n/255,o.blue=r/255}getFirstCanvasId(){return 1}getRoomViewRect(){const o=this.roomCanvasReference.nativeElement.getBoundingClientRect();return new s.c6J(o.x||0,o.y||0,o.width||0,o.height||0)}get events(){return this._events}get connection(){return s.wjX.instance.communication.connection}get roomEngine(){return s.wjX.instance.roomEngine}get avatarRenderManager(){return s.wjX.instance.avatar}get roomSessionManager(){return s.wjX.instance.roomSessionManager}get sessionDataManager(){return s.wjX.instance.sessionDataManager}get roomSession(){return this._roomSession}get notificationService(){return this._notificationService}get wiredService(){return this._wiredService}get friendService(){return this._friendService}get settingsService(){return this._settingsService}}Ve.COLOR_ADJUSTMENT=new s.Pld,Ve.\u0275fac=function(o){return new(o||Ve)(e.Y36(R),e.Y36(pn),e.Y36(Je),e.Y36(ci),e.Y36(e._Vd),e.Y36(je),e.Y36(w),e.Y36(e.R0b))},Ve.\u0275cmp=e.Xpm({type:Ve,selectors:[["nitro-room-component"]],viewQuery:function(o,t){if(1&o&&(e.Gf(Mr,5),e.Gf(Or,5,e.s_b)),2&o){let n;e.iGM(n=e.CRH())&&(t.roomCanvasReference=n.first),e.iGM(n=e.CRH())&&(t.widgetContainer=n.first)}},decls:6,vars:1,consts:[[1,"nitro-room-component"],[3,"visible"],[1,"room-view"],["roomCanvas",""],["widgetContainer",""]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"nitro-floorplan-main-component",1),e._UZ(2,"div",2,3),e.YNc(4,Ur,0,0,"ng-template",null,4,e.W1O),e.qZA()),2&o&&(e.xp6(1),e.Q6J("visible",t.floorPlanVisible))},directives:[Pi],encapsulation:2});class ae{constructor(){this._widgetHandler=null,this._messageListener=null,this._events=null,this._disposed=!1}initialize(o=0){}dispose(){this.disposed||(this._messageListener=null,this._events&&!this._events.disposed&&this.unregisterUpdateEvents(this._events),this._widgetHandler&&(this._widgetHandler.dispose(),this._widgetHandler=null),this._events=null,this._disposed=!0)}registerUpdateEvents(o){this._events=o}unregisterUpdateEvents(o){this._events=null}get disposed(){return this._disposed}get widgetHandler(){return this._widgetHandler}set widgetHandler(o){this._widgetHandler=o,this._widgetHandler.widget||(this._widgetHandler.widget=this)}get messageListener(){return this._messageListener}set messageListener(o){this._messageListener=o}}class Nr{constructor(){this._isIgnored=!1,this._canTrade=!1,this._canTradeReason=0,this._canBeKicked=!1,this._canBeBanned=!1,this._canBeMuted=!1,this._canBeAskedAsFriend=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._respectLeft=0,this._isOwnUser=!1,this._allowNameChange=!1,this._isGuildRoom=!1,this._carryItemType=0,this._myRoomControllerLevel=0,this._targetRoomControllerLevel=0,this._isFriend=!1,this._isAmbassador=!1}get _Str_3655(){return this._isIgnored}set _Str_3655(o){this._isIgnored=o}get _Str_5751(){return this._canTrade}set _Str_5751(o){this._canTrade=o}get _Str_6622(){return this._canTradeReason}set _Str_6622(o){this._canTradeReason=o}get _Str_5990(){return this._canBeKicked}set _Str_5990(o){this._canBeKicked=o}get _Str_6701(){return this._canBeBanned}set _Str_6701(o){this._canBeBanned=o}get _Str_6394(){return this._canBeMuted}set _Str_6394(o){this._canBeMuted=o}get canBeAskedForAFriend(){return this._canBeAskedAsFriend}set canBeAskedForAFriend(o){this._canBeAskedAsFriend=o}get _Str_3246(){return this._amIOwner}set _Str_3246(o){this._amIOwner=o}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(o){this._amIAnyRoomController=o}get _Str_3577(){return this._respectLeft}set _Str_3577(o){this._respectLeft=o}get _Str_11453(){return this._isOwnUser}set _Str_11453(o){this._isOwnUser=o}get allowNameChange(){return this._allowNameChange}set allowNameChange(o){this._allowNameChange=o}get _Str_3672(){return this._isGuildRoom}set _Str_3672(o){this._isGuildRoom=o}get _Str_8826(){return this._carryItemType}set _Str_8826(o){this._carryItemType=o}get roomControllerLevel(){return this._myRoomControllerLevel}set roomControllerLevel(o){this._myRoomControllerLevel=o}get _Str_5599(){return this._targetRoomControllerLevel}set _Str_5599(o){this._targetRoomControllerLevel=o}get isFriend(){return this._isFriend}get _Str_4050(){return this._isAmbassador}populate(o){this._amIAnyRoomController=o.isModerator,this._myRoomControllerLevel=o.roomControllerLevel,this._amIOwner=o.isRoomOwner,this._canBeAskedAsFriend=o.canBeAskedForAFriend,this._canBeKicked=o._Str_5990,this._canBeBanned=o._Str_6701,this._canBeMuted=o._Str_6394,this._canTrade=o.canTrade,this._canTradeReason=o._Str_6622,this._isIgnored=o.isIgnored,this._respectLeft=o.respectLeft,this._isOwnUser=o.type===I.OWN_USER,this._allowNameChange=o._Str_4330,this._isGuildRoom=o.isGuildRoom,this._targetRoomControllerLevel=o.flatControl,this._carryItemType=o.carryId,this._isFriend=o.isFriend,this._isAmbassador=o.isAmbassador}}class qr{constructor(){this.age=0,this.rarityLevel=0,this._Str_5114=!1,this.energy=0,this.maximumEnergy=0,this.experience=0,this.levelExperienceGoal=0,this.id=0,this._Str_5175=!1,this.level=0,this.maximumLevel=0,this.name="",this.happyness=0,this.maximumHappyness=0,this.ownerId=0,this.ownerName="",this._Str_14767=0,this.respect=0,this._Str_2985=0,this._Str_4355=0,this.saddle=!1,this.rider=!1,this.breedable=!1,this.fullyGrown=!1,this.dead=!1,this.publiclyRideable=0,this.maximumTimeToLive=0,this.remainingTimeToLive=0,this.remainingGrowTime=0,this.publiclyBreedable=!1,this._Str_3307=[]}populate(o){this.age=o.age,this.rarityLevel=o.rarityLevel,this._Str_5114=o._Str_5114,this.energy=o.energy,this.maximumEnergy=o.maximumEnergy,this.experience=o.experience,this.levelExperienceGoal=o.levelExperienceGoal,this.id=o.id,this._Str_5175=o._Str_5175,this.level=o.level,this.maximumLevel=o.maximumLevel,this.name=o.name,this.happyness=o.happyness,this.maximumHappyness=o.maximumHappyness,this.ownerId=o.ownerId,this.ownerName=o.ownerName,this._Str_14767=o._Str_14767,this.respect=o.respect,this._Str_2985=o._Str_2985,this._Str_4355=o._Str_4355,this.saddle=o.saddle,this.rider=o.rider,this.breedable=o.breedable,this.dead=o.dead,this.fullyGrown=o.fullyGrown,this._Str_3307=o._Str_3307,this.publiclyRideable=o.publiclyRideable,this.maximumTimeToLive=o.maximumTimeToLive,this.remainingTimeToLive=o.remainingTimeToLive,this.remainingGrowTime=o.remainingGrowTime,this.publiclyBreedable=o.publiclyBreedable}}class Ji{constructor(){this._id=-1,this._isIgnored=!1,this._amIOwner=!1,this._amIAnyRoomController=!1,this._carryItemType=0}get id(){return this._id}set id(o){this._id=o}get _Str_2707(){return this._roomIndex}set _Str_2707(o){this._roomIndex=o}get _Str_3655(){return this._isIgnored}set _Str_3655(o){this._isIgnored=o}get _Str_3246(){return this._amIOwner}set _Str_3246(o){this._amIOwner=o}get _Str_3529(){return this._amIAnyRoomController}set _Str_3529(o){this._amIAnyRoomController=o}get _Str_8826(){return this._carryItemType}set _Str_8826(o){this._carryItemType=o}get _Str_2899(){return this._botSkills}set _Str_2899(o){this._botSkills=o}get _Str_10833(){return this._botSkillsWithCommands}set _Str_10833(o){this._botSkillsWithCommands=o}get name(){return this._name}populate(o){o.id!=this.id&&(this._botSkillsWithCommands=new Array(0)),this.id=o.id,this._Str_2707=o.roomIndex,this._Str_3246=o._Str_3246,this._Str_3529=o._Str_3529,this._Str_8826=o.carryId,this._Str_2899=o.botSkills,this._name=o.name}_Str_19891(o){this._botSkills=[];for(const t of o)this._Str_2899.push(t);this._botSkillsWithCommands=o.concat()}}let Ln=(()=>{class i{constructor(){this.parent=null,this.componentRef=null,this.activeView=null,this.stack=new s.xq9(i.LOCATION_STACK_SIZE),this.opacity=0,this.currentDeltaY=-1e6,this.willFade=!1,this.firstFadeStarted=!1,this.fadeAfterDelay=!0,this.fadeLength=500,this.fadeTime=0,this.fadeStartDelay=3e3,this.fadingOut=!1,this.fadeStartTimer=null}completeSetup(){this.firstFadeStarted=!1,this.fadeLength=75,this.fadingOut=!1,this.opacity=1,this.onTimerComplete=this.onTimerComplete.bind(this),this.fadeAfterDelay&&this.willFade&&(this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay))}ngOnDestroy(){this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null)}update(t,n,r){if(!t)return;if(this.fadingOut?(this.fadeTime=this.fadeTime+r,this.opacity=(1-this.fadeTime/this.fadeLength)*this.maximumOpacity):this.opacity=this.maximumOpacity,this.opacity<=0)return void this.parent.removeView(this.componentRef,!1);const a=this.getOffset(t);this.stack.addValue(n.y-t.top);let l=this.stack.getMax();l<this.currentDeltaY-i.BUBBLE_DROP_SPEED&&(l=this.currentDeltaY-i.BUBBLE_DROP_SPEED);const g=n.y-l;this.currentDeltaY=l;let d=Math.round(n.x-this.activeViewElement.offsetWidth/2),h=Math.round(g+a)-5;h<=0&&(h=i.SPACE_AROUND_EDGES),h>=s.wjX.instance.height-this.activeViewElement.offsetHeight&&(h=s.wjX.instance.height-this.activeViewElement.offsetHeight-i.SPACE_AROUND_EDGES),d>=s.wjX.instance.width-this.activeViewElement.offsetWidth&&(d=s.wjX.instance.width-this.activeViewElement.offsetWidth-i.SPACE_AROUND_EDGES),d<0&&(d=0+i.BUBBLE_DROP_SPEED),this.activeViewElement.style.left=d+"px",this.activeViewElement.style.top=h+"px",this.activeViewElement.style.opacity=this.opacity.toString()}hide(t){!this.activeView||(!this.firstFadeStarted&&t?(this.firstFadeStarted=!0,this.fadeStartTimer&&(clearTimeout(this.fadeStartTimer),this.fadeStartTimer=null),this.fadeStartTimer=setTimeout(this.onTimerComplete,this.fadeStartDelay)):this.parent.removeView(this.componentRef,!1))}onTimerComplete(){this.fadingOut=!0,this.hide(!0)}getOffset(t){let n=-this.activeViewElement.offsetHeight;return n-=4,n}get maximumOpacity(){return 1}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return i.LOCATION_STACK_SIZE=25,i.BUBBLE_DROP_SPEED=3,i.SPACE_AROUND_EDGES=5,i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=e.lG2({type:i}),i})();class be extends Ln{constructor(){super(...arguments),this.userId=-1,this.userName="",this.userType=-1,this.roomIndex=-1}static extendedSetup(o,t,n,r,a){o.userId=t,o.userName=n,o.userType=r,o.roomIndex=a,o.completeSetup()}getOffset(o){let t=-this.activeViewElement.offsetHeight;return this.userType===s.OOj.USER||this.userType===s.OOj.BOT||this.userType===s.OOj.RENTABLE_BOT?t+=o.height>50?25:0:t-=4,t}}let m=(()=>{class i{transform(t,n=null,r=null){return n&&Array.isArray(n)&&r&&Array.isArray(r)&&n.length===r.length?s.wjX.instance.getLocalizationWithParameters(t,n,r):n&&r?s.wjX.instance.getLocalizationWithParameter(t,n,r):s.wjX.instance.getLocalization(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"translate",type:i,pure:!0}),i})();const Lr=["activeView"];function kr(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userName)}}function Fr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.Oqu(e.Dn7(2,1,t.localization,"count",n.avatarData._Str_3577))}}function Dr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.localization))}}function Pr(i,o){if(1&i&&(e.ynx(0,12),e.YNc(1,Fr,3,5,"li",13),e.YNc(2,Dr,3,3,"li",14),e.BQk()),2&i){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","respect")}}function Jr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Pr,3,2,"ng-container",11),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}function jr(i,o){if(1&i&&(e.TgZ(0,"ul",10),e.YNc(1,Jr,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.items)}}function Vr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,jr,2,1,"ul",9),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.mode===t.mode)}}function Br(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Vr,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.menu)}}let Rt=(()=>{class i extends be{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,n,r,a,c,l){t.avatarData=l,be.extendedSetup(t,n,r,a,c),t.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,r=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,s.YGE.UNIT);if(r){const a=r.model.getValue(s.fql.FIGURE_CARRY_OBJECT);a>0&&a<999999&&(t=!0)}this.menu=[{mode:i.MODE_NORMAL,items:[{name:"friend",localization:"infostand.button.friend",visible:this.avatarData.canBeAskedForAFriend},{name:"trade",localization:"infostand.button.trade",visible:!0},{name:"whisper",localization:"infostand.button.whisper",visible:!0},{name:"respect",localization:"infostand.button.respect",visible:this.avatarData._Str_3577>0},{name:"ignore",localization:"infostand.button.ignore",visible:!this.avatarData._Str_3655},{name:"unignore",localization:"infostand.button.unignore",visible:this.avatarData._Str_3655},{name:"report",localization:"infostand.button.report",visible:!0},{name:"moderate",localization:"infostand.link.moderate",visible:this.moderateMenuHasContent()},{name:"ambassador",localization:"infostand.link.ambassador",visible:this.ambassadorMenuHasContent()},{name:"pass_handitem",localization:"avatar.widget.pass_hand_item",visible:t}]},{mode:i.MODE_MODERATE,items:[{name:"kick",localization:"infostand.button.kick",visible:!0},{name:"mute",localization:"infostand.button.mute",visible:!0},{name:"ban",localization:"infostand.button.ban",visible:!0},{name:"give_rights",localization:"infostand.button.giverights",visible:this.isShowGiveRights()},{name:"remove_rights",localization:"infostand.button.removerights",visible:this.isShowRemoveRights()},{name:"back",localization:"generic.back",visible:!0}]},{mode:i.MODE_MODERATE_BAN,items:[{name:"ban_hour",localization:"infostand.button.ban_hour",visible:!0},{name:"ban_day",localization:"infostand.button.ban_day",visible:!0},{name:"ban_perm",localization:"infostand.button.ban_perm",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:i.MODE_MODERATE_MUTE,items:[{name:"mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"mute_5min",localization:"infostand.button.mute_5min",visible:!0},{name:"mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"back_moderate",localization:"generic.back",visible:!0}]},{mode:i.MODE_AMBASSADOR,items:[{name:"ambassador_alert",localization:"infostand.button.alert",visible:!0},{name:"ambassador_kick",localization:"infostand.button.kick",visible:!0},{name:"ambassador_mute",localization:"infostand.button.mute",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:i.MODE_AMBASSADOR_MUTE,items:[{name:"ambassador_mute_2min",localization:"infostand.button.mute_2min",visible:!0},{name:"ambassador_mute_10min",localization:"infostand.button.mute_10min",visible:!0},{name:"ambassador_mute_60min",localization:"infostand.button.mute_60min",visible:!0},{name:"ambassador_mute_18hr",localization:"infostand.button.mute_18hr",visible:!0},{name:"back_ambassador",localization:"generic.back",visible:!0}]}]}processAction(t){let n=null,r=null,a=!0;if(t){switch(t){case"moderate":a=!1,this.setMode(i.MODE_MODERATE);break;case"ban":a=!1,this.setMode(i.MODE_MODERATE_BAN);break;case"mute":a=!1,this.setMode(i.MODE_MODERATE_MUTE);break;case"ambassador":a=!1,this.setMode(i.MODE_AMBASSADOR);break;case"ambassador_mute":a=!1,this.setMode(i.MODE_AMBASSADOR_MUTE);break;case"back_moderate":a=!1,this.setMode(i.MODE_MODERATE);break;case"back_ambassador":a=!1,this.setMode(i.MODE_AMBASSADOR);break;case"back":a=!1,this.setMode(i.MODE_NORMAL);break;case"whisper":n=p.RWUAM_WHISPER_USER;break;case"friend":this.avatarData.canBeAskedForAFriend=!1,n=p.RWUAM_SEND_FRIEND_REQUEST;break;case"respect":this.avatarData._Str_3577--,n=p.RWUAM_RESPECT_USER,this.avatarData._Str_3577>0&&(a=!1);break;case"ignore":this.avatarData._Str_3655=!0,n=p.RWUAM_IGNORE_USER;break;case"unignore":this.avatarData._Str_3655=!1,n=p.RWUAM_UNIGNORE_USER;break;case"kick":n=p.RWUAM_KICK_USER;break;case"ban_hour":n=p.RWUAM_BAN_USER_HOUR;break;case"ban_day":n=p.RWUAM_BAN_USER_DAY;break;case"perm_ban":n=p.RWUAM_BAN_USER_PERM;break;case"mute_2min":n=p.MUTE_USER_2MIN;break;case"mute_5min":n=p.MUTE_USER_5MIN;break;case"mute_10min":n=p.MUTE_USER_10MIN;break;case"give_rights":this.avatarData.roomControllerLevel=s.A5x.GUEST,n=p.RWUAM_GIVE_RIGHTS;break;case"remove_rights":this.avatarData.roomControllerLevel=s.A5x.NONE,n=p.RWUAM_TAKE_RIGHTS;break;case"trade":n=p.RWUAM_START_TRADING;break;case"report":n=p.RWUAM_REPORT_CFH_OTHER;break;case"pass_handitem":n=p.RWUAM_PASS_CARRY_ITEM;break;case"ambassador_alert":n=p.RWUAM_AMBASSADOR_ALERT_USER;break;case"ambassador_kick":n=p.RWUAM_AMBASSADOR_KICK_USER;break;case"ambassador_mute_2min":n=p.AMBASSADOR_MUTE_USER_2MIN;break;case"ambassador_mute_10min":n=p.AMBASSADOR_MUTE_USER_10MIN;break;case"ambassador_mute_60min":n=p.AMBASSADOR_MUTE_USER_60MIN;break;case"ambassador_mute_18hour":n=p.AMBASSADOR_MUTE_USER_18HOUR}n&&(r=new p(n,this.userId)),r&&this.parent.messageListener.processWidgetMessage(r)}a&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}ambassadorMenuHasContent(){return this.avatarData._Str_4050}moderateMenuHasContent(){return this.avatarData._Str_5990||this.avatarData._Str_6701||this.avatarData._Str_6394||this.isShowGiveRights()||this.isShowRemoveRights()}isShowGiveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599<s.A5x.GUEST&&!this.avatarData._Str_3672}isShowRemoveRights(){return this.avatarData._Str_3246&&this.avatarData._Str_5599===s.A5x.GUEST&&!this.avatarData._Str_3672}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return i.MODE_NORMAL=0,i.MODE_MODERATE=1,i.MODE_MODERATE_BAN=2,i.MODE_MODERATE_MUTE=3,i.MODE_AMBASSADOR=4,i.MODE_AMBASSADOR_MUTE=5,i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-avatarinfo-avatar-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Lr,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,kr,3,1,"div",2),e.YNc(3,Br,2,1,"div",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return n.toggleVisibility()}),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngClass",n.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[u.O5,u.mk,u.sg,u.RF,u.n9,u.ED],pipes:[m],encapsulation:2}),i})();const Gr=["activeView"];let ji=(()=>{class i extends be{static setup(t,n,r,a,c){t.willFade=!1,be.extendedSetup(t,n,r,a,c)}stopDecorating(){this.widget.isDecorating=!1}get widget(){return this.parent}get maximumOpacity(){return.8}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-avatarinfo-decorate-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Gr,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:7,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],[1,"d-flex","flex-column","w-100","py-1"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"ul",3),e.TgZ(4,"li",4),e.NdJ("click",function(){return n.stopDecorating()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"widget.avatar.stop_decorating")))},pipes:[m],encapsulation:2}),i})();const Hr=["activeView"],Wr=function(){return["bg-success"]};let rn=(()=>{class i extends be{constructor(){super(...arguments),this.isFriend=!1}static setup(t,n,r,a,c,l=!1){t.willFade=l,be.extendedSetup(t,n,r,a,c)}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-avatarinfo-name-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Hr,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"p",3),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",n.isFriend&&e.DdM(2,Wr)),e.xp6(4),e.Oqu(n.userName))},directives:[u.mk],encapsulation:2}),i})(),Vi=(()=>{class i{constructor(t){this._sanitizer=t}transform(t){return this._sanitizer.bypassSecurityTrustHtml(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.H7,16))},i.\u0275pipe=e.Yjl({name:"keepHtml",type:i,pure:!1}),i})();const Qr=["activeView"];function Xr(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userName)}}function Yr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(4).processAction(r.name)}),e.ALo(1,"keepHtml"),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("innerHTML","11"===t.name||"12"===t.name||"13"===t.name||"14"===t.name||"15"===t.name?e.lcZ(1,1,t.localization):e.lcZ(2,3,t.localization),e.oJD)}}function zr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Yr,3,5,"li",12),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}const Kr=function(i){return{"columns-3":i}};function $r(i,o){if(1&i&&(e.TgZ(0,"ul",11),e.YNc(1,zr,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw().$implicit;e.Q6J("ngClass",e.VKq(2,Kr,4===t.mode)),e.xp6(1),e.Q6J("ngForOf",t.items)}}function es(i,o){if(1&i&&(e.ynx(0),e.YNc(1,$r,2,4,"ul",10),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.mode===t.mode)}}function ts(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"ul",14),e.TgZ(1,"li",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("back")}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"generic.back")))}function ns(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,es,2,1,"ng-container",8),e.YNc(2,ts,4,3,"ul",9),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.menu),e.xp6(1),e.Q6J("ngIf",4===t.mode)}}let Mt=(()=>{class i extends be{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,n,r,a,c,l){t.avatarData=l,t.widget.isDancing&&t.widget.hasClub&&(t.mode=i.MODE_CLUB_DANCES),be.extendedSetup(t,n,r,a,c),t.setupButtons()}setupButtons(){const t=this.widget._Str_25831;this.menu=[{mode:i.MODE_NORMAL,items:[{name:"decorate",localization:"widget.avatar.decorate",visible:this.widget.hasClub&&this.avatarData.roomControllerLevel>=s.A5x.GUEST||this.avatarData._Str_3246},{name:"change_looks",localization:"widget.memenu.myclothes",visible:!0},{name:"dance_menu",localization:"widget.memenu.dance",visible:this.widget.hasClub&&!t},{name:"dance",localization:"widget.memenu.dance",visible:!this.widget.isDancing&&!this.widget.hasClub&&!t},{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing&&!this.widget.hasClub&&!t},{name:"expressions",localization:"infostand.link.expressions",visible:!0},{name:"signs",localization:"infostand.show.signs",visible:!0},{name:"drop_hand_item",localization:"avatar.widget.drop_hand_item",visible:this.avatarData._Str_8826>0&&this.avatarData._Str_8826<999999}]},{mode:i.MODE_CLUB_DANCES,items:[{name:"dance_stop",localization:"widget.memenu.dance.stop",visible:this.widget.isDancing},{name:"dance_1",localization:"widget.memenu.dance1",visible:!0},{name:"dance_2",localization:"widget.memenu.dance2",visible:!0},{name:"dance_3",localization:"widget.memenu.dance3",visible:!0},{name:"dance_4",localization:"widget.memenu.dance4",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:i.MODE_EXPRESSIONS,items:[{name:"sit",localization:"widget.memenu.sit",visible:this.widget.getOwnPosture===s.BvR.POSTURE_STAND},{name:"stand",localization:"widget.memenu.stand",visible:this.widget.getCanStandUp},{name:"wave",localization:"widget.memenu.wave",visible:!this.widget._Str_12708},{name:"laugh",localization:"widget.memenu.laugh",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"blow",localization:"widget.memenu.blow",visible:!this.widget._Str_12708&&this.widget.hasVip},{name:"idle",localization:"widget.memenu.idle",visible:!0},{name:"back",localization:"generic.back",visible:!0}]},{mode:i.MODE_SIGNS,items:[{name:"sign_1",localization:"1",visible:!0},{name:"sign_4",localization:"4",visible:!0},{name:"sign_7",localization:"7",visible:!0},{name:"sign_10",localization:"10",visible:!0},{name:"sign_0",localization:"0",visible:!0},{name:"sign_14",localization:'<i class="icon icon-sign-soccer"></i>',visible:!0},{name:"sign_2",localization:"2",visible:!0},{name:"sign_5",localization:"5",visible:!0},{name:"sign_8",localization:"8",visible:!0},{name:"sign_11",localization:'<i class="icon icon-sign-heart"></i>',visible:!0},{name:"sign_13",localization:'<i class="icon icon-sign-exclamation"></i>',visible:!0},{name:"sign_17",localization:'<i class="icon icon-sign-yellow"></i>',visible:!0},{name:"sign_3",localization:"3",visible:!0},{name:"sign_6",localization:"6",visible:!0},{name:"sign_9",localization:"9",visible:!0},{name:"sign_12",localization:'<i class="icon icon-sign-skull"></i>',visible:!0},{name:"sign_15",localization:'<i class="icon icon-sign-smile"></i>',visible:!0},{name:"sign_16",localization:'<i class="icon icon-sign-red"></i>',visible:!0}]}]}processAction(t){let n=null,r=!0;if(t){if(t.startsWith("sign_")){const a=parseInt(t.split("_")[1]);this.widget.useSign(a)}else switch(t){case"decorate":this.widget.hasClub&&(this.widget.isDecorating=!0);break;case"change_looks":this.widget.openAvatarEditor();break;case"expressions":r=!1,this.setMode(i.MODE_EXPRESSIONS);break;case"sit":n=new tn(tn._Str_2016);break;case"stand":n=new tn(tn._Str_1553);break;case"wave":n=new en(s.jYX.WAVE);break;case"blow":n=new en(s.jYX.BLOW);break;case"laugh":n=new en(s.jYX.LAUGH);break;case"idle":n=new en(s.jYX.IDLE);break;case"dance_menu":r=!1,this.setMode(i.MODE_CLUB_DANCES);break;case"dance":n=new dn(1);break;case"dance_stop":n=new dn(0);break;case"dance_1":case"dance_2":case"dance_3":case"dance_4":n=new dn(parseInt(t.charAt(t.length-1)));break;case"signs":r=!1,this.setMode(i.MODE_SIGNS);break;case"back":case"more":r=!1,this.setMode(i.MODE_NORMAL);break;case"drop_hand_item":n=new p(p.RWUAM_DROP_CARRY_ITEM,this.userId)}n&&this.parent.messageListener.processWidgetMessage(n)}r&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return i.MODE_NORMAL=0,i.MODE_CLUB_DANCES=1,i.MODE_NAME_CHANGE=2,i.MODE_EXPRESSIONS=3,i.MODE_SIGNS=4,i.MODE_CHANGE_LOOKS=5,i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-avatarinfo-ownavatar-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Qr,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:4,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center",3,"ngClass"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0","text-truncate"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],["class","list-group list-group-flush",3,"ngClass",4,"ngIf"],[1,"list-group","list-group-flush",3,"ngClass"],["class","list-group-item",3,"innerHTML","click",4,"ngIf"],[1,"list-group-item",3,"innerHTML","click"],[1,"list-group","list-group-flush"],[1,"list-group-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Xr,3,1,"div",2),e.YNc(3,ns,3,2,"div",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return n.toggleVisibility()}),e.qZA(),e.qZA()),2&t&&(e.Q6J("ngClass",n.visible?"":"has-hidden"),e.xp6(2),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngClass",n.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[u.mk,u.O5,u.sg],pipes:[Vi,m],encapsulation:2}),i})();const is=["activeView"];function os(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userName)}}function rs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.Oqu(e.Dn7(2,1,t.localization,"count",n.avatarData._Str_3577))}}function ss(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.localization))}}function as(i,o){if(1&i&&(e.ynx(0,12),e.YNc(1,rs,3,5,"li",13),e.YNc(2,ss,3,3,"li",14),e.BQk()),2&i){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","respect")}}function cs(i,o){if(1&i&&(e.ynx(0),e.YNc(1,as,3,2,"ng-container",11),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}function ls(i,o){if(1&i&&(e.TgZ(0,"ul",10),e.YNc(1,cs,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.items)}}function us(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ls,2,1,"ul",9),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.mode===t.mode)}}function _s(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,us,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.menu)}}let Qt=(()=>{class i extends be{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,n,r,a,c,l){t.avatarData=l,be.extendedSetup(t,n,r,a,c),t.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,r=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,s.YGE.UNIT);if(r){const a=r.model.getValue(s.fql.FIGURE_CARRY_OBJECT);a>0&&a<999999&&(t=!0)}this.menu=[{mode:i.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let a=!0;if(t)switch(t){case"moderate":a=!1}a&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return i.MODE_NORMAL=0,i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(is,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,os,3,1,"div",2),e.YNc(3,_s,2,1,"div",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return n.toggleVisibility()}),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngClass",n.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[u.O5,u.mk,u.sg,u.RF,u.n9,u.ED],pipes:[m],encapsulation:2}),i})();const gs=["activeView"];function ds(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userName)}}function ms(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.Oqu(e.Dn7(2,1,t.localization,"count",n.avatarData._Str_3577))}}function ps(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.localization))}}function hs(i,o){if(1&i&&(e.ynx(0,12),e.YNc(1,ms,3,5,"li",13),e.YNc(2,ps,3,3,"li",14),e.BQk()),2&i){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","respect")}}function fs(i,o){if(1&i&&(e.ynx(0),e.YNc(1,hs,3,2,"ng-container",11),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}function vs(i,o){if(1&i&&(e.TgZ(0,"ul",10),e.YNc(1,fs,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.items)}}function Ts(i,o){if(1&i&&(e.ynx(0),e.YNc(1,vs,2,1,"ul",9),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.mode===t.mode)}}function bs(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Ts,2,1,"ng-container",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.menu)}}let vn=(()=>{class i extends be{constructor(t){super(),this._settingsService=t,this.avatarData=null,this.mode=0,this.menu=[]}static setup(t,n,r,a,c,l){t.avatarData=l,be.extendedSetup(t,n,r,a,c),t.setupButtons()}setupButtons(){let t=!1;const n=this.widget.handler,r=n.container.roomEngine.getRoomObject(n.roomSession.roomId,n.container.roomSession.ownRoomIndex,s.YGE.UNIT);if(r){const a=r.model.getValue(s.fql.FIGURE_CARRY_OBJECT);a>0&&a<999999&&(t=!0)}this.menu=[{mode:i.MODE_NORMAL,items:[{name:"test",localization:"infostand.button.test",visible:!0}]}]}processAction(t){let a=!0;if(t)switch(t){case"moderate":a=!1}a&&this.parent.removeView(this.componentRef,!1)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return i.MODE_NORMAL=0,i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(gs,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[4,"ngFor","ngForOf"],["class","list-group list-group-flush",4,"ngIf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,ds,3,1,"div",2),e.YNc(3,bs,2,1,"div",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return n.toggleVisibility()}),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngClass",n.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[u.O5,u.mk,u.sg,u.RF,u.n9,u.ED],pipes:[m],encapsulation:2}),i})(),Y=(()=>{class i{}return i._Str_19584=0,i.DRESS_UP=1,i.SETUP_CHAT=2,i.RANDOM_WALK=3,i.DANCE=4,i.CHANGE_BOT_NAME=5,i._Str_20280=6,i._Str_18934=7,i._Str_14917=8,i.CHANGE_BOT_MOTTO=9,i.NUX_TAKE_TOUR=10,i._Str_17261=12,i._Str_18173=14,i.DONATE_TO_USER=24,i.DONATE_TO_ALL=25,i})();var _=U(665);const Cs=["activeView"];function Es(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"p",6),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userName)}}function Ss(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.Oqu(e.Dn7(2,1,t.localization,"count",n.avatarData._Str_3577))}}function As(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(4).processAction(r.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.localization))}}function ws(i,o){if(1&i&&(e.ynx(0,8),e.YNc(1,Ss,3,5,"li",13),e.YNc(2,As,3,3,"li",14),e.BQk()),2&i){const t=e.oxw().$implicit;e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","respect")}}function xs(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ws,3,2,"ng-container",12),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}function Zs(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"ul",11),e.YNc(2,xs,2,1,"ng-container",10),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngForOf",t.items)}}function Is(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Zs,3,1,"ng-container",10),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.menu)}}function ys(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16),e.TgZ(2,"p",17),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",18),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).newName=r}),e.qZA(),e.TgZ(6,"div",19),e.TgZ(7,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("")}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("save_bot_name")}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"bot.skill.name.configuration.new.name")),e.xp6(2),e.Q6J("ngModel",t.newName),e.xp6(3),e.Oqu(e.lcZ(9,6,"cancel")),e.xp6(3),e.Oqu(e.lcZ(12,8,"save"))}}function Rs(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16),e.TgZ(2,"p",17),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",18),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).newMotto=r}),e.qZA(),e.TgZ(6,"div",19),e.TgZ(7,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("")}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("save_bot_motto")}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"bot.skill.name.configuration.new.motto")),e.xp6(2),e.Q6J("ngModel",t.newMotto),e.xp6(3),e.Oqu(e.lcZ(9,6,"cancel")),e.xp6(3),e.Oqu(e.lcZ(12,8,"save"))}}function Ms(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16),e.TgZ(2,"div",22),e.TgZ(3,"p",17),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"textarea",23),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).newText=r}),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",24),e.TgZ(9,"p",25),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",26),e.TgZ(13,"input",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.automaticChat=!r.automaticChat}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",24),e.TgZ(15,"p",25),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",26),e.TgZ(19,"input",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.mixSentences=!r.mixSentences}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",24),e.TgZ(21,"p",25),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"div",26),e.TgZ(25,"input",28),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).chatDelay=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",29),e.TgZ(27,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("")}),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("save_bot_motto")}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,11,"bot.skill.chatter.configuration.chat.text")),e.xp6(2),e.Q6J("placeholder",e.lcZ(7,13,"bot.skill.chatter.configuration.text.placeholder"))("ngModel",t.newText),e.xp6(4),e.Oqu(e.lcZ(11,15,"bot.skill.chatter.configuration.automatic.chat")),e.xp6(3),e.Q6J("checked",t.automaticChat),e.xp6(3),e.Oqu(e.lcZ(17,17,"bot.skill.chatter.configuration.markov")),e.xp6(3),e.Q6J("checked",t.mixSentences),e.xp6(3),e.Oqu(e.lcZ(23,19,"bot.skill.chatter.configuration.chat.delay")),e.xp6(3),e.Q6J("ngModel",t.chatDelay),e.xp6(3),e.Oqu(e.lcZ(29,21,"cancel")),e.xp6(3),e.Oqu(e.lcZ(32,23,"save"))}}function Os(i,o){if(1&i&&(e.TgZ(0,"div",7),e.ynx(1,8),e.YNc(2,Is,2,1,"ng-container",9),e.YNc(3,ys,13,10,"ng-container",9),e.YNc(4,Rs,13,10,"ng-container",9),e.YNc(5,Ms,33,25,"ng-container",9),e.BQk(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngSwitch",t.mode),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}let jt=(()=>{class i extends be{constructor(t,n){super(),this._settingsService=t,this._ngZone=n,this._messageListener=null,this.avatarData=null,this.mode=0,this.menu=[],this.newName="",this.newMotto="",this.newText="",this.automaticChat=!1,this.mixSentences=!1,this.chatDelay=5}static setup(t,n,r,a,c,l){t.avatarData=l,be.extendedSetup(t,n,r,a,c),t.setupButtons()}ngOnDestroy(){this._messageListener&&(s.wjX.instance.communication.connection.removeMessageEvent(this._messageListener),this._messageListener=null)}requestBotCommandConfiguration(t){this._messageListener||(this._messageListener=new s._MC(this.onBotCommandConfigurationEvent.bind(this)),s.wjX.instance.communication.connection.addMessageEvent(this._messageListener)),s.wjX.instance.communication.connection.send(new s.sgi(this.userId,t))}onBotCommandConfigurationEvent(t){if(!t)return;const n=t.getParser();!n||n.botId===this.userId&&this._ngZone.run(()=>{switch(n.commandId){case Y.CHANGE_BOT_NAME:return void(this.newName=n.data);case Y.CHANGE_BOT_MOTTO:return void(this.newMotto=n.data);case Y.SETUP_CHAT:{const r=n.data,a=r.split(-1===r.indexOf(";#;")?";":";#;");return void((3===a.length||4===a.length)&&(this.newText=a[0],this.automaticChat="true"===a[1].toLowerCase()||"1"===a[1],this.chatDelay=parseInt(a[2]),this.mixSentences=!!a[3]&&("true"===a[3].toLowerCase()||"1"===a[3])))}}})}setupButtons(){const t=this.avatarData._Str_3246||this.avatarData._Str_3529;this.menu=[{mode:i.MODE_NORMAL,items:[{name:"donate_to_all",localization:"avatar.widget.donate_to_all",visible:this.avatarData._Str_2899.indexOf(Y.DONATE_TO_ALL)>=0&&t},{name:"donate_to_user",localization:"avatar.widget.donate_to_user",visible:this.avatarData._Str_2899.indexOf(Y.DONATE_TO_USER)>=0&&t},{name:"change_bot_name",localization:"avatar.widget.change_bot_name",visible:this.avatarData._Str_2899.indexOf(Y.CHANGE_BOT_NAME)>=0&&t},{name:"change_bot_motto",localization:"avatar.widget.change_bot_motto",visible:this.avatarData._Str_2899.indexOf(Y.CHANGE_BOT_MOTTO)>=0&&t},{name:"dress_up",localization:"avatar.widget.dress_up",visible:this.avatarData._Str_2899.indexOf(Y.DRESS_UP)>=0&&t},{name:"random_walk",localization:"avatar.widget.random_walk",visible:this.avatarData._Str_2899.indexOf(Y.RANDOM_WALK)>=0&&t},{name:"setup_chat",localization:"avatar.widget.setup_chat",visible:this.avatarData._Str_2899.indexOf(Y.SETUP_CHAT)>=0&&t},{name:"dance",localization:"avatar.widget.dance",visible:this.avatarData._Str_2899.indexOf(Y.DANCE)>=0&&t},{name:"pick",localization:"avatar.widget.pick_up",visible:-1===this.avatarData._Str_2899.indexOf(Y._Str_17261)&&t}]}]}processAction(t){let n=!0;if(t)switch(t){case"donate_to_all":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.DONATE_TO_ALL,""));break;case"donate_to_user":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.DONATE_TO_USER,""));break;case"change_bot_name":this.requestBotCommandConfiguration(Y.CHANGE_BOT_NAME),n=!1,this.setMode(i.MODE_CHANGE_NAME);break;case"save_bot_name":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.CHANGE_BOT_NAME,this.newName));break;case"change_bot_motto":this.requestBotCommandConfiguration(Y.CHANGE_BOT_MOTTO),n=!1,this.setMode(i.MODE_CHANGE_MOTTO);break;case"save_bot_motto":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.CHANGE_BOT_MOTTO,this.newMotto));break;case"dress_up":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.DRESS_UP,""));break;case"random_walk":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.RANDOM_WALK,""));break;case"setup_chat":this.requestBotCommandConfiguration(Y.SETUP_CHAT),n=!1,this.setMode(i.MODE_CHANGE_SPEECH);break;case"dance":this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.DANCE,""));break;case"nux_take_tour":s.wjX.instance.createLinkEvent("help/tour"),this.widget.handler.container.connection.send(new s.BNe(this.avatarData.id,Y.NUX_TAKE_TOUR,""));break;case"pick":this.widget.handler.container.connection.send(new s.AYH(this.avatarData.id))}n&&this.parent.removeView(this.componentRef,!1)}setMode(t){t!==this.mode&&(this.mode=t)}toggleVisibility(){this._settingsService.toggleUserContextVisible()}get visible(){return this._settingsService.userContextVisible}get widget(){return this.parent}}return i.MODE_NORMAL=0,i.MODE_CHANGE_NAME=1,i.MODE_CHANGE_MOTTO=2,i.MODE_CHANGE_SPEECH=3,i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Cs,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},features:[e.qOj],decls:5,vars:3,consts:[[1,"nitro-room-avatarinfo-component","context-menu","card","align-items-center"],["activeView",""],["class","drag-handler d-flex justify-content-center align-items-center p-1 px-2 w-100",4,"ngIf"],["class","d-flex flex-column mb-1 w-100",4,"ngIf"],[1,"fas","small","visibility-toggle","mb-1","w-100","text-center",3,"ngClass","click"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","p-1","px-2","w-100"],[1,"m-0"],[1,"d-flex","flex-column","mb-1","w-100"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[3,"ngSwitch",4,"ngIf"],["class","list-group-item",3,"click",4,"ngSwitchCase"],["class","list-group-item",3,"click",4,"ngSwitchDefault"],[1,"list-group-item",3,"click"],[1,"px-2"],[1,"mb-1"],["type","text",1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"d-flex","flex-column"],[1,"form-control","form-control-sm","mb-2",3,"placeholder","ngModel","ngModelChange"],[1,"d-flex","flex-row"],[1,"col","m-0","p-0"],[1,"col-3","m-0","p-0"],["type","checkbox",1,"form-check-input","m-0",3,"checked","click"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","mt-1"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Es,3,1,"div",2),e.YNc(3,Os,6,5,"div",3),e.TgZ(4,"i",4),e.NdJ("click",function(){return n.toggleVisibility()}),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngClass",n.visible?"fa-chevron-down":"fa-chevron-up m-2"))},directives:[u.O5,u.mk,u.RF,u.n9,u.sg,u.ED,_.Fj,_.JJ,_.On],pipes:[m],encapsulation:2}),i})(),sn=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._settingsService=n,this._ngZone=r,this._component=null,this._wardrobeComponent=null,this._messages=[],this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.TQy(this.onUserWardrobePageEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onUserWardrobePageEvent(t){if(!this._wardrobeComponent||!t)return;const n=t.getParser();!n||n.looks.forEach((r,a)=>{this._ngZone.run(()=>{this._wardrobeComponent.setLook(a,r[0],r[1])})})}loadOwnAvatarInEditor(){if(!this._component)return;const t=s.wjX.instance.sessionDataManager;this._component.loadAvatarInEditor(t.figure,t.gender,t.clubLevel)}loadAvatarInEditor(t,n){this._component&&this._component.loadAvatarInEditor(t,n,s.wjX.instance.sessionDataManager.clubLevel)}requestWardrobePage(t){s.wjX.instance.communication.connection.send(new s.l3Q(t))}setWardrobeSlot(t){s.wjX.instance.communication.connection.send(new s.lyl(t,this.currentEditorLook,this.currentEditorGender))}get component(){return this._component}set component(t){this._component=t}set wardrobeComponent(t){this._wardrobeComponent=t}get currentEditorLook(){return this._component.figureData.view.figureString}get currentEditorGender(){return this._component.figureData.gender}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(w),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Us=["contextsContainer"];function Ns(i,o){}let qs=(()=>{class i extends ae{constructor(t,n,r,a,c){super(),this._avatarEditorService=t,this._settingsService=n,this._friendListService=r,this._componentFactoryResolver=a,this._ngZone=c,this.view=null,this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedDecorateModeView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,this.cachedNameBubbles=new Map,this.lastRollOverId=-1,this.userInfoData=new Nr,this.petInfoData=new qr,this.rentableBotInfoData=new Ji,this.isDancing=!1,this.handlePetInfo=!0,this._isInitialized=!1,this._isRoomEnteredOwnAvatarHighlight=!1,this._isGameMode=!1,this._isUpdating=!1,this._Str_2557=this._Str_2557.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this)}ngOnDestroy(){s.wjX.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){!t||(s.wjX.instance.roomEngine.events.addEventListener(s.MCw.ADDED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.REMOVED,this.onRoomEngineObjectEvent),t.addEventListener(xn.RWAIE_AVATAR_INFO,this._Str_2557),t.addEventListener(qn.RWONE_TYPE,this._Str_2557),t.addEventListener(I.OWN_USER,this._Str_2557),t.addEventListener(I.PEER,this._Str_2557),t.addEventListener(Zn.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.addEventListener(T.USER_REMOVED,this._Str_2557),t.addEventListener(Jt.FURNI,this._Str_2557),t.addEventListener(I.BOT,this._Str_2557),t.addEventListener(Wt.RENTABLE_BOT,this._Str_2557),t.addEventListener(Ht.PET_INFO,this._Str_2557),t.addEventListener(T.OBJECT_SELECTED,this._Str_2557),t.addEventListener(T.OBJECT_DESELECTED,this._Str_2557),t.addEventListener(T.OBJECT_ROLL_OVER,this._Str_2557),t.addEventListener(T.OBJECT_ROLL_OUT,this._Str_2557),t.addEventListener(xt.RWREUE_NORMAL_MODE,this._Str_2557),t.addEventListener(xt.RWREUE_GAME_MODE,this._Str_2557),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.ADDED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.REMOVED,this.onRoomEngineObjectEvent),t.removeEventListener(xn.RWAIE_AVATAR_INFO,this._Str_2557),t.removeEventListener(qn.RWONE_TYPE,this._Str_2557),t.removeEventListener(I.OWN_USER,this._Str_2557),t.removeEventListener(I.PEER,this._Str_2557),t.removeEventListener(Zn.RWUDUE_USER_DATA_UPDATED,this._Str_2557),t.removeEventListener(T.USER_REMOVED,this._Str_2557),t.removeEventListener(Jt.FURNI,this._Str_2557),t.removeEventListener(I.BOT,this._Str_2557),t.removeEventListener(Wt.RENTABLE_BOT,this._Str_2557),t.removeEventListener(Ht.PET_INFO,this._Str_2557),t.removeEventListener(T.OBJECT_SELECTED,this._Str_2557),t.removeEventListener(T.OBJECT_DESELECTED,this._Str_2557),t.removeEventListener(T.OBJECT_ROLL_OVER,this._Str_2557),t.removeEventListener(T.OBJECT_ROLL_OUT,this._Str_2557),t.removeEventListener(xt.RWREUE_NORMAL_MODE,this._Str_2557),t.removeEventListener(xt.RWREUE_GAME_MODE,this._Str_2557),super.unregisterUpdateEvents(t))}onRoomEngineObjectEvent(t){switch(t.type){case s.MCw.ADDED:{if(t.category!==s.YGE.UNIT)return;const n=this.handler.roomSession.userDataManager.getUserDataByIndex(t.objectId);if(!n||-1==this._friendListService.getFriendNames().indexOf(n.name))return;return void this.showFriendNameBubble(n,t.objectId)}case s.MCw.REMOVED:if(t.category===s.YGE.UNIT)for(const n of this.cachedNameBubbles.values())n.instance.roomIndex===t.objectId&&this.removeView(n,!1);return}}showFriendNameBubble(t,n){if(!t||this.cachedNameBubbles.has(t.name))return;const r=this.createView(rn);r.instance.isFriend=!0,this._ngZone.run(()=>rn.setup(r.instance,t.webID,t.name,s.OOj.USER,n,!0)),this.cachedNameBubbles.set(t.name,r),this.toggleUpdateReceiver()}_Str_2557(t){const n=this.view&&this.view.instance||null;switch(t.type){case xn.RWAIE_AVATAR_INFO:{const r=t;this._isRoomEnteredOwnAvatarHighlight=!this._isInitialized&&this.handler.container.roomSession&&r._Str_2707===this.handler.container.roomSession.ownRoomIndex,this._Str_12674(r.userId,r.userName,r._Str_2908,r._Str_2707,r._Str_4330,null),this._isInitialized=!0;break}case qn.RWONE_TYPE:{const r=t;r.category===s.YGE.UNIT&&this._Str_12674(r.userId,r.userName,r.userType,r.roomIndex,!1,null);break}case I.OWN_USER:case I.PEER:{const r=t;this.userInfoData.populate(r),this._Str_12674(r.webID,r.name,r.userType,r.roomIndex,!1,r.isSpectator?null:this.userInfoData);break}case Ht.PET_INFO:if(this.handlePetInfo){const r=t;this.petInfoData.populate(r),this._Str_24751(r.id,r.name,r._Str_2707,this.petInfoData)}break;case Wt.RENTABLE_BOT:{const r=t;this.rentableBotInfoData||(this.rentableBotInfoData=new Ji),this.rentableBotInfoData.populate(r);const a=this.handler.container.roomSessionManager.getSession(0);if(!a)return;const c=a.userDataManager.getRentableBotData(r.id);if(!c)return;this.rentableBotInfoData&&c.botSkills&&this.rentableBotInfoData._Str_19891(c.botSkills),this._Str_16991(r.id,r.name,r.roomIndex,this.rentableBotInfoData);break}case Zn.RWUDUE_USER_DATA_UPDATED:this._isInitialized||this._Str_25716();break;case T.USER_REMOVED:{const r=t;n&&n.roomIndex===r.id&&this.removeView(this.view,!1);for(const a of this.cachedNameBubbles.values())if(a.instance.roomIndex==r.id){this.removeView(a,!1);break}break}case Jt.FURNI:this.view&&this.removeView(this.view,!1);break;case T.OBJECT_SELECTED:t.category===s.YGE.UNIT&&(this.handlePetInfo=!0);break;case T.OBJECT_DESELECTED:this.view&&this.removeView(this.view,!1);break;case T.OBJECT_ROLL_OVER:{if(this._isRoomEnteredOwnAvatarHighlight)return;const r=t;(!n||!(n instanceof Rt||n instanceof Mt||n instanceof jt||n instanceof Qt))&&(this.lastRollOverId=r.id,this.messageListener.processWidgetMessage(new _e(_e.GET_OBJECT_NAME,r.id,r.category)));break}case T.OBJECT_ROLL_OUT:{if(this._isRoomEnteredOwnAvatarHighlight)return;const r=t;(!n||!(n instanceof Rt||n instanceof Mt||n instanceof jt||n instanceof Qt))&&r.id===this.lastRollOverId&&(this.removeView(this.view,!1),this.lastRollOverId=-1);break}case xt.RWREUE_NORMAL_MODE:this._isGameMode=!1;break;case xt.RWREUE_GAME_MODE:this._isGameMode=!0}this.toggleUpdateReceiver()}_Str_12674(t,n,r,a,c,l){const g=!!l;let d=this.view&&this.view.instance;if(g&&d&&(d instanceof Rt||d instanceof Mt||d instanceof vn||d instanceof Qt||d instanceof jt||(this.removeView(this.view,!1),d=null)),d&&d.userId===t&&d.userName===n&&d.userType===r&&d.roomIndex===a)d&&(d instanceof Rt||d instanceof Mt)&&d.userId===t&&this.removeView(this.view,!1);else if(this.view&&this.removeView(this.view,!1),!this._isGameMode)if(g)if(l._Str_11453){if(this.isDecorating||s.eQj.isRunning())return;this.cachedOwnAvatarMenuView||(this.cachedOwnAvatarMenuView=this.createView(Mt)),this.view=this.cachedOwnAvatarMenuView,this._ngZone.run(()=>Mt.setup(this.view.instance,t,n,r,a,l))}else{this.cachedAvatarMenuView||(this.cachedAvatarMenuView=this.createView(Rt)),this.view=this.cachedAvatarMenuView,this._ngZone.run(()=>Rt.setup(this.view.instance,t,n,r,a,l));for(const h of this.cachedNameBubbles.values())if(h.instance.userId===t){this.removeView(h,!1);break}}else this.handler.roomEngine.isDecorating||(this.cachedNameView||(this.cachedNameView=this.createView(rn)),this.view=this.cachedNameView,this._ngZone.run(()=>{this._ngZone.run(this.handler.container.sessionDataManager.userId===t?()=>rn.setup(this.view.instance,t,n,r,a):()=>rn.setup(this.view.instance,t,n,r,a,!0))}))}_Str_16991(t,n,r,a){const c=!!a;let l=this.view&&this.view.instance;c&&l&&(l instanceof Rt||l instanceof Mt||l instanceof jt||l instanceof vn||l instanceof Qt||(this.removeView(this.view,!1),l=null)),l&&l.userId===t&&l.userName===n&&l.userType===s.OOj.RENTABLE_BOT&&l.roomIndex===r?l&&l instanceof jt&&l.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||c&&(this.cachedRentableBotMenuView||(this.cachedRentableBotMenuView=this.createView(jt)),this.view=this.cachedRentableBotMenuView,this._ngZone.run(()=>jt.setup(this.view.instance,t,n,s.OOj.RENTABLE_BOT,r,a))))}_Str_24751(t,n,r,a){const c=!!a;let l=this.view&&this.view.instance;c&&l&&(l instanceof Rt||l instanceof Mt||l instanceof vn||l instanceof Qt||l instanceof jt||(this.removeView(this.view,!1),l=null)),l&&l.userId===t&&l.userName===n&&l.userType===s.OOj.PET&&l.roomIndex===r?l&&(l instanceof Rt||l instanceof Mt)&&l.userId===t&&this.removeView(this.view,!1):(this.view&&this.removeView(this.view,!1),this._isGameMode||c&&(a._Str_5175?(this.cachedOwnPetMenuView||(this.cachedOwnPetMenuView=this.createView(Qt)),this.view=this.cachedOwnPetMenuView,this._ngZone.run(()=>Qt.setup(this.view.instance,t,n,s.OOj.PET,r,a))):(this.cachedPetMenuView||(this.cachedPetMenuView=this.createView(vn)),this.view=this.cachedPetMenuView,this._ngZone.run(()=>vn.setup(this.view.instance,t,n,s.OOj.PET,r,a)))))}createView(t){if(!t)return null;let n=null,r=null;return this._ngZone.run(()=>{const a=this._componentFactoryResolver.resolveComponentFactory(t);n=this.contextsContainer.createComponent(a),r=n.instance}),r&&n?(r.parent=this,r.componentRef=n,n):null}close(){this.removeView(this.view,!1)}removeView(t,n){if(this._isRoomEnteredOwnAvatarHighlight=!1,!t)return;const r=this.contextsContainer.indexOf(t.hostView);-1!==r&&(this.cachedNameView=null,this.cachedOwnAvatarMenuView=null,this.cachedAvatarMenuView=null,this.cachedRentableBotMenuView=null,this.cachedPetMenuView=null,this.cachedOwnPetMenuView=null,t===this.view&&(this.view=null),t instanceof rn&&(this.cachedNameBubbles.delete(t.instance.userName),this.toggleUpdateReceiver()),this._ngZone.run(()=>this.contextsContainer.remove(r)))}toggleUpdateReceiver(){if(this.view||this.cachedNameBubbles.size>0||this.cachedDecorateModeView){if(this._isUpdating)return;s.wjX.instance.ticker.add(this.update,this),this._isUpdating=!0}else s.wjX.instance.ticker.remove(this.update,this),this._isUpdating=!1}update(t){if(this.view){const n=this.view.instance,r=this.messageListener.processWidgetMessage(new Pe(Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION,n.userId,n.userType));r&&n.update(r.rectangle,r._Str_9337,t)}if(this.cachedDecorateModeView){const n=this.cachedDecorateModeView.instance,r=this.messageListener.processWidgetMessage(new Pe(Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION,n.userId,n.userType));r&&n.update(r.rectangle,r._Str_9337,t)}for(const n of this.cachedNameBubbles.values()){if(!n)continue;const r=n.instance,a=this.messageListener.processWidgetMessage(new Pe(Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION,r.userId,r.userType));a&&r.update(a.rectangle,a._Str_9337,t)}}getOwnRoomObject(){const t=this.handler.container.sessionDataManager.userId,n=this.handler.roomEngine.activeRoomId,r=s.YGE.UNIT,a=this.handler.roomEngine.getTotalObjectsForManager(n,r);let c=0;for(;c<a;){const l=this.handler.roomEngine.getRoomObjectByIndex(n,c,r);if(l){const g=this.handler.roomSession.userDataManager.getUserDataByIndex(l.id);if(g&&g.webID===t)return l}c++}return null}_Str_25716(){this.messageListener.processWidgetMessage(new _e(_e.GET_OWN_CHARACTER_INFO,0,0))}openAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this._settingsService.showAvatarEditor()}useSign(t){this.widgetHandler.container.roomSession.sendSignMessage(t)}get getOwnPosture(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n)return n.getValue(s.fql.FIGURE_POSTURE)}return s.BvR.POSTURE_STAND}get getCanStandUp(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n)return n.getValue(s.fql.FIGURE_CAN_STAND_UP)}return!1}get _Str_12708(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n){const r=n.getValue(s.fql.FIGURE_EFFECT);return r===i._Str_18968||r===i._Str_16970||r===i._Str_18857}}return!1}get _Str_25831(){const t=this.getOwnRoomObject();if(t){const n=t.model;if(n)return n.getValue(s.fql.FIGURE_EFFECT)===i._Str_17951}return!1}get handler(){return this.widgetHandler}get isDecorating(){return this.handler.roomSession.isDecorating}set isDecorating(t){if(this.handler.roomSession.isDecorating=t,t){this.cachedDecorateModeView||(this.cachedDecorateModeView=this.createView(ji));const a=this.handler.roomSession.ownRoomIndex;ji.setup(this.cachedDecorateModeView.instance,this.handler.container.sessionDataManager.userId,this.handler.container.sessionDataManager.userName,s.Yo0.getTypeNumber(s.Yo0.USER),a)}else this.cachedDecorateModeView&&(this.removeView(this.cachedDecorateModeView,!1),this.cachedDecorateModeView=null)}get hasClub(){return this.handler.container.sessionDataManager.clubLevel>=s.xJA.CLUB}get hasVip(){return this.handler.container.sessionDataManager.clubLevel>=s.xJA.VIP}}return i._Str_17951=77,i._Str_18968=29,i._Str_16970=30,i._Str_18857=185,i._Str_18641=5e3,i.\u0275fac=function(t){return new(t||i)(e.Y36(sn),e.Y36(w),e.Y36(Je),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-avatarinfo-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Us,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.contextsContainer=r.first)}},features:[e.qOj],decls:3,vars:0,consts:[[1,"nitro-room-avatarinfo-component"],["contextsContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ns,0,0,"ng-template",null,1,e.W1O),e.qZA())},encapsulation:2}),i})(),b=(()=>{class i{constructor(t,n){this.elementRef=t,this.ngZone=n,this.target=null,this.bringToFront=this.bringToFront.bind(this)}ngAfterViewInit(){const t=this.elementRef.nativeElement;!t||(this.target=t,this.addTarget(),this.registerEvents(),this.bringToFront())}ngOnDestroy(){this.unregisterEvents(),this.removeTarget(),this.bringToFront()}addTarget(){!this.target||i.TOP_TARGETS.indexOf(this.target)>=0||i.TOP_TARGETS.push(this.target)}removeTarget(){if(!this.target)return;const t=i.TOP_TARGETS.indexOf(this.target);-1!==t&&i.TOP_TARGETS.splice(t,1)}registerEvents(){this.ngZone.runOutsideAngular(()=>{!this.target||this.target.addEventListener("mousedown",this.bringToFront)})}unregisterEvents(){this.ngZone.runOutsideAngular(()=>{!this.target||this.target.removeEventListener("mousedown",this.bringToFront)})}bringToFront(t=null){this.moveTarget();let n=i.Z_INDEX_START;for(const r of i.TOP_TARGETS)!r||(n+=i.Z_INDEX_INCREASE,r.style.zIndex=n.toString())}moveTarget(){const t=i.TOP_TARGETS.indexOf(this.target);if(-1===t)return;const n=i.TOP_TARGETS.splice(t,1);i.TOP_TARGETS.push(...n)}isTopTarget(){if(!this.target)return!1;const t=i.TOP_TARGETS.indexOf(this.target);return!(-1===t||t<i.TOP_TARGETS.length-1)}}return i.TOP_TARGETS=[],i.Z_INDEX_START=400,i.Z_INDEX_INCREASE=1,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","bringToTop",""]],inputs:{bringToTop:"bringToTop"}}),i})();const Ls=function(i){return[i]};function ks(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.TgZ(3,"div",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectStyle(a)}),e._uU(4,"\xa0"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Ls,n.lastSelectedId===t?"bg-primary":"bg-secondary")),e.xp6(2),e.Gre("chat-bubble bubble-",t," w-100")}}const Fs=function(i){return{active:i}};let Ds=(()=>{class i{constructor(t,n){this.changeDetector=t,this.ngZone=n,this.styleSelected=new e.vpe,this.showStyles=!1,this.lastSelectedId=0,this.styleIds=[]}ngOnInit(){this.lastSelectedId=s.wjX.instance.sessionDataManager.chatStyle;const t=s.wjX.instance.getConfiguration("chat.styles");for(const n of t)if(n){if(n.minRank>0){s.wjX.instance.sessionDataManager.hasSecurity(n.minRank)&&this.styleIds.push(n.styleId);continue}if(n.isSystemStyle&&s.wjX.instance.sessionDataManager.hasSecurity(s.A5x.MODERATOR)){this.styleIds.push(n.styleId);continue}if(!(s.wjX.instance.getConfiguration("chat.styles.disabled").indexOf(n.styleId)>=0)){if(n.isHcOnly&&s.wjX.instance.sessionDataManager.clubLevel>=s.xJA.CLUB){this.styleIds.push(n.styleId);continue}if(n.isAmbassadorOnly&&s.wjX.instance.sessionDataManager.isAmbassador){this.styleIds.push(n.styleId);continue}!n.isHcOnly&&!n.isAmbassadorOnly&&this.styleIds.push(n.styleId)}}}ngOnDestroy(){this.hideSelector()}showSelector(){this.showStyles=!0}hideSelector(){this.showStyles=!1}toggleSelector(){this.showStyles?this.hideSelector():this.showSelector()}selectStyle(t){this.lastSelectedId=t,this.styleSelected.emit(t),this.hideSelector()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chatinput-styleselector-component"]],outputs:{styleSelected:"styleSelected"},decls:6,vars:4,consts:[[1,"nitro-room-chatinput-styleselector-component"],[1,"icon","chatstyles-icon",3,"click"],[1,"nitro-chatstyle-selector","card","p-3",3,"bringToTop","ngClass"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center"],[1,"d-flex","detail-info","rounded","justify-content-center","align-items-center",3,"ngClass"],[1,"bubble-container"],[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"i",1),e.NdJ("click",function(){return n.toggleSelector()}),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.YNc(5,ks,5,6,"div",5),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(2,Fs,n.showStyles)),e.xp6(3),e.Q6J("ngForOf",n.styleIds))},directives:[b,u.mk,u.sg],encapsulation:2}),i})();const Ps=["chatInputView"];let Js=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this.selectedUsername="",this.floodBlocked=!1,this.floodBlockedSeconds=0,this.lastContent="",this.isTyping=!1,this.typingStartedSent=!1,this.typingTimer=null,this.idleTimer=null,this.floodTimer=null,this.floodInterval=null,this.currentStyle=-1,this.needsStyleUpdate=!1,this._chatModeIdWhisper=null,this._chatModeIdShout=null,this._chatModeIdSpeak=null,this._maxChatLength=0,this.onKeyDownEvent=this.onKeyDownEvent.bind(this),this.onInputMouseDownEvent=this.onInputMouseDownEvent.bind(this),this.onInputChangeEvent=this.onInputChangeEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this),this.onRoomWidgetUpdateInfostandUserEvent=this.onRoomWidgetUpdateInfostandUserEvent.bind(this),this.onRoomWidgetChatInputContentUpdateEvent=this.onRoomWidgetChatInputContentUpdateEvent.bind(this),this.onRoomWidgetFloodControlEvent=this.onRoomWidgetFloodControlEvent.bind(this)}ngOnInit(){this._chatModeIdWhisper=s.wjX.instance.getLocalization("widgets.chatinput.mode.whisper"),this._chatModeIdShout=s.wjX.instance.getLocalization("widgets.chatinput.mode.shout"),this._chatModeIdSpeak=s.wjX.instance.getLocalization("widgets.chatinput.mode.speak"),this._maxChatLength=s.wjX.instance.getConfiguration("chat.input.maxlength",100),this.currentStyle=s.wjX.instance.sessionDataManager.chatStyle}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{document.body.addEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.addEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.addEventListener("input",this.onInputChangeEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{document.body.removeEventListener("keydown",this.onKeyDownEvent),this.inputView&&(this.inputView.removeEventListener("mousedown",this.onInputMouseDownEvent),this.inputView.removeEventListener("input",this.onInputChangeEvent))}),this.resetTypingTimer(),this.resetIdleTimer(),this.resetFloodInterval()}registerUpdateEvents(t){!t||(t.addEventListener(T.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(I.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.addEventListener(on.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.addEventListener($n.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(T.OBJECT_DESELECTED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(I.PEER,this.onRoomWidgetUpdateInfostandUserEvent),t.removeEventListener(on.RWWCIDE_CHAT_INPUT_CONTENT,this.onRoomWidgetChatInputContentUpdateEvent),t.removeEventListener($n.RWFCE_FLOOD_CONTROL,this.onRoomWidgetFloodControlEvent))}onRoomWidgetRoomObjectUpdateEvent(t){this.selectedUsername=""}onRoomWidgetUpdateInfostandUserEvent(t){!t||(this.selectedUsername=t.name)}onRoomWidgetChatInputContentUpdateEvent(t){if(t)switch(t._Str_23621){case on.WHISPER:{const n=s.wjX.instance.getLocalization("widgets.chatinput.mode.whisper");return void this.changeInputValue(n+" "+t.userName+" ")}case on.SHOUT:return}}onRoomWidgetFloodControlEvent(t){!t||this._ngZone.run(()=>{this.floodBlocked=!0,this.floodBlockedSeconds=t.seconds,this.changeInputValue(s.wjX.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString())),this.startFloodInterval()})}decreaseFloodBlockSeconds(){if(!this.floodBlockedSeconds)return this.resetFloodInterval(),this.floodBlocked=!1,void this.changeInputValue("");this.floodBlockedSeconds=this.floodBlockedSeconds-1,this.changeInputValue(s.wjX.instance.getLocalizationWithParameter("chat.input.alert.flood","time",this.floodBlockedSeconds.toString()))}sendChat(t,n,r="",a=0){this.floodBlocked||!this.messageListener||(this.changeInputValue(""),this.messageListener.processWidgetMessage(new ke(ke.MESSAGE_CHAT,t,n,r,a)))}changeInputValue(t){const n=this.chatInputView&&this.chatInputView.nativeElement||null;!n||(n.parentElement.dataset.value=n.value=t)}onKeyDownEvent(t){if(!t||this.anotherInputHasFocus())return;document.activeElement!==(this.chatInputView&&this.chatInputView.nativeElement)&&this.setInputFocus();const a=t.shiftKey;switch(t.keyCode){case 32:return void this.checkSpecialKeywordForInput();case 13:return void this.sendChatFromInputField(a);case 8:if(this.inputView){const l=this.inputView.value.split(" ");l[0]===this._chatModeIdWhisper&&3===l.length&&""===l[2]&&(this.changeInputValue(""),this.lastContent="")}return;default:return}}onInputMouseDownEvent(t){this.setInputFocus()}onInputChangeEvent(t){const n=t.target;if(!n)return;const r=n.value;r.length?(this.lastContent=r,this.isTyping||(this.isTyping=!0,this.startTypingTimer()),this.startIdleTimer()):(this.isTyping=!1,this.startTypingTimer())}onStyleSelected(t){t!==this.currentStyle&&(this.currentStyle=t,this.needsStyleUpdate=!0)}sendChatFromInputField(t=!1){if(!this.inputView||""===this.inputView.value)return;let n=t?ke.CHAT_SHOUT:ke.CHAT_DEFAULT,r=this.inputView.value;const a=r.split(" ");let c="",l="";switch(a[0]){case this._chatModeIdWhisper:n=ke.CHAT_WHISPER,c=a[1],l=this._chatModeIdWhisper+" "+c+" ",a.shift(),a.shift();break;case this._chatModeIdShout:n=ke.CHAT_SHOUT,a.shift();break;case this._chatModeIdSpeak:n=ke.CHAT_DEFAULT,a.shift()}r=a.join(" "),this.typingTimer&&this.resetTypingTimer(),this.idleTimer&&this.resetIdleTimer(),r.length<=this._maxChatLength&&(this.needsStyleUpdate&&(s.wjX.instance.sessionDataManager.sendChatStyleUpdate(this.currentStyle),this.needsStyleUpdate=!1),this.sendChat(r,n,c,this.currentStyle)),this.isTyping=!1,this.typingStartedSent&&this.sendTypingMessage(),this.typingStartedSent=!1,this.changeInputValue(l),this.lastContent=l}sendTypingMessage(){this.floodBlocked||!this.messageListener||this.messageListener.processWidgetMessage(new ei(this.isTyping))}anotherInputHasFocus(){const t=document.activeElement;return!(!t||this.chatInputView&&this.chatInputView.nativeElement&&this.chatInputView.nativeElement===t||!(t instanceof HTMLInputElement)&&!(t instanceof HTMLTextAreaElement))}setInputFocus(){const t=this.chatInputView&&this.chatInputView.nativeElement;!t||(t.focus(),t.setSelectionRange(2*t.value.length,2*t.value.length))}checkSpecialKeywordForInput(){const t=this.chatInputView&&this.chatInputView.nativeElement||null;t&&""!==t.value&&(t.value!==this._chatModeIdWhisper||0===this.selectedUsername.length||this.changeInputValue(`${t.value} ${this.selectedUsername}`))}startIdleTimer(){this.resetIdleTimer(),this.idleTimer=setTimeout(this.onIdleTimerComplete.bind(this),1e4)}resetIdleTimer(){this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}onIdleTimerComplete(){this.isTyping&&(this.typingStartedSent=!1),this.isTyping=!1,this.sendTypingMessage()}startTypingTimer(){this.resetTypingTimer(),this.typingTimer=setTimeout(this.onTypingTimerComplete.bind(this),1e3)}resetTypingTimer(){this.typingTimer&&(clearTimeout(this.typingTimer),this.typingTimer=null)}onTypingTimerComplete(){this.isTyping&&(this.typingStartedSent=!0),this.sendTypingMessage()}startFloodInterval(){this.resetFloodInterval(),this.floodInterval=setInterval(this.decreaseFloodBlockSeconds.bind(this),1e3)}resetFloodInterval(){this.floodInterval&&(clearInterval(this.floodInterval),this.floodInterval=null)}get inputMaxLength(){return this._maxChatLength}get inputView(){return this.chatInputView&&this.chatInputView.nativeElement||null}get handler(){return this.widgetHandler}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chatinput-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ps,5),2&t){let r;e.iGM(r=e.CRH())&&(n.chatInputView=r.first)}},features:[e.qOj],decls:7,vars:5,consts:[[1,"nitro-room-chatinput-component"],[1,"chatinput-container"],[1,"input-sizer"],["type","text",1,"chat-input",3,"placeholder","disabled","maxLength","input"],["chatInputView",""],[3,"styleSelected"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"input",3,4),e.NdJ("input",function(){e.CHM(r);const c=e.MAs(4);return c.parentElement.dataset.value=c.value}),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"nitro-room-chatinput-styleselector-component",5),e.NdJ("styleSelected",function(c){return n.onStyleSelected(c)}),e.qZA(),e.qZA()}2&t&&(e.xp6(3),e.s9C("placeholder",e.lcZ(5,3,"widgets.chatinput.default")),e.Q6J("disabled",n.floodBlocked)("maxLength",n.inputMaxLength))},directives:[Ds],pipes:[m],encapsulation:2}),i})();var _i=U(2759),js=U(3190),Vs=U(8002),gi=U(6782);class v{constructor(o,t,n){this._viewContainerRef=o,this._elementRef=t,this._ngZone=n,this.dragHandle=".drag-handler",this.center=!1,this.topCenter=!0,this.noMemory=!1,this._name=null,this._target=null,this._handle=null,this._isDragging=!1,this._delta={x:0,y:0},this._offset={x:0,y:0},this._destroy=new Li.xQ}ngAfterViewInit(){this._name=this._viewContainerRef._hostTNode.classesWithoutHost;const o=this._elementRef.nativeElement;if(!o)return;this._handle=this.dragHandle?o.querySelector(this.dragHandle):o,this._target=this.dragTarget?o.querySelector(this.dragTarget):o,this._handle&&(this._handle.classList.add("header-draggable"),this._handle.parentElement.classList.add("header-draggable")),this.topCenter&&(o.style.top="50px",o.style.left=`calc(50vw - ${o.offsetWidth/2}px)`),this.center&&(o.style.top=`calc(50vh - ${o.offsetHeight/2}px)`,o.style.left=`calc(50vw - ${o.offsetWidth/2}px)`);const t=v.POS_MEMORY.get(this._name);t&&(this._offset.x=t.offset.x,this._offset.y=t.offset.y,this.translate()),this.setupEvents()}ngOnDestroy(){this._destroy.next(),this._handle&&(this._handle.classList.remove("header-draggable"),this._handle.parentElement.classList.remove("header-draggable"))}setupEvents(){this._ngZone.runOutsideAngular(()=>{const o=(0,_i.R)(this._handle,"mousedown"),t=(0,_i.R)(document,"mousemove"),n=(0,_i.R)(document,"mouseup");o.pipe((0,js.w)(a=>{const c=a.clientX,l=a.clientY;return t.pipe((0,Vs.U)(g=>{g.preventDefault(),this._delta={x:g.clientX-c,y:g.clientY-l}}),(0,gi.R)(n))}),(0,gi.R)(this._destroy)).subscribe(()=>{this._isDragging=!0,(0!==this._delta.x||0!==this._delta.y)&&this.translate()}),n.pipe((0,gi.R)(this._destroy)),n.subscribe(()=>{if(!this._isDragging)return;this._isDragging=!1,this._offset.x+=this._delta.x,this._offset.y+=this._delta.y,this._delta={x:0,y:0};const a=this._target.offsetLeft+this._offset.x,c=this._target.offsetTop+this._offset.y;c<v.BOUNDS_THRESHOLD_TOP?this._offset.y=-this._target.offsetTop:c+this._handle.offsetHeight>=document.body.offsetHeight-v.BOUNDS_THRESHOLD_TOP&&(this._offset.y=document.body.offsetHeight-this._target.offsetHeight-this._target.offsetTop),a+this._target.offsetWidth<v.BOUNDS_THRESHOLD_LEFT?this._offset.x=-this._target.offsetLeft:a>=document.body.offsetWidth-v.BOUNDS_THRESHOLD_LEFT&&(this._offset.x=document.body.offsetWidth-this._target.offsetWidth-this._target.offsetLeft),this.translate(),this.noMemory||v.POS_MEMORY.set(this._name,{offset:{x:this._offset.x+0,y:this._offset.y+0}})})})}translate(){this._target.style.transform=`translate(${this._offset.x+this._delta.x}px, ${this._offset.y+this._delta.y}px)`}}v.POS_MEMORY=new Map,v.BOUNDS_THRESHOLD_TOP=0,v.BOUNDS_THRESHOLD_LEFT=0,v.\u0275fac=function(o){return new(o||v)(e.Y36(e.s_b),e.Y36(e.SBq),e.Y36(e.R0b))},v.\u0275dir=e.lG2({type:v,selectors:[["","draggable",""]],inputs:{dragHandle:"dragHandle",dragTarget:"dragTarget",center:"center",topCenter:"topCenter",noMemory:"noMemory"}});var C=U(3356);let di=(()=>{class i{transform(t,n){return t?n?t.filter(r=>r.name.toLocaleLowerCase().includes(n.toLocaleLowerCase())):t:[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"roomObjectItemSearch",type:i,pure:!0}),i})();function Bs(i,o){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.id)}}function Gs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",12),e.NdJ("click",function(){const r=e.CHM(t),a=r.$implicit,c=r.index;return e.oxw(2).selectItem(a,c)}),e.TgZ(1,"p",13),e._uU(2),e.qZA(),e.YNc(3,Bs,2,1,"p",14),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw(2);e.Q6J("ngClass",r.selectedItemIndex==n?"selected":""),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf","widget.chooser.furni.title"===r.title)}}function Hs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().searchValue=r}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"perfect-scrollbar",9),e.TgZ(12,"ul",10),e.YNc(13,Gs,4,3,"li",11),e.ALo(14,"roomObjectItemSearch"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,t.title)),e.xp6(5),e.s9C("placeholder",e.lcZ(9,6,"generic.search")),e.Q6J("ngModel",t.searchValue),e.xp6(5),e.Q6J("ngForOf",e.xi3(14,8,t.items,t.searchValue))}}let Bi=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._items=[],this._title=null,this._timeout=null,this._selectedItemIndex=-1}ngOnDestroy(){this.clearTimeout()}hide(){this._visible=!1}selectItem(t,n){!t||!this.items||!this.items.length||(this._selectedItemIndex=n,this._ngZone.runOutsideAngular(()=>this.messageListener.processWidgetMessage(new _e(_e.SELECT_OBJECT,t.id,t.category))))}clearTimeout(){!this._timeout||(clearTimeout(this._timeout),this._timeout=null)}get visible(){return this._visible}set visible(t){this._visible=t}get title(){return this._title}set title(t){this._title=t}get items(){return this._items}set items(t){this._items=t}get selectedItemIndex(){return this._selectedItemIndex}get searchValue(){return this._searchValue}set searchValue(t){this._selectedItemIndex=-1,this._searchValue=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chooser-base-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,Hs,15,11,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,_.Fj,_.JJ,_.On,C.Vv,u.sg,u.mk],pipes:[m,di],encapsulation:2}),i})();function Ws(i,o){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.id)}}function Qs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",12),e.NdJ("click",function(){const r=e.CHM(t),a=r.$implicit,c=r.index;return e.oxw(2).selectItem(a,c)}),e.TgZ(1,"p",13),e._uU(2),e.qZA(),e.YNc(3,Ws,2,1,"p",14),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw(2);e.Q6J("ngClass",r.selectedItemIndex==n?"selected":""),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf","widget.chooser.furni.title"===r.title)}}function Xs(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().searchValue=r}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"perfect-scrollbar",9),e.TgZ(12,"ul",10),e.YNc(13,Qs,4,3,"li",11),e.ALo(14,"roomObjectItemSearch"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,t.title)),e.xp6(5),e.s9C("placeholder",e.lcZ(9,6,"generic.search")),e.Q6J("ngModel",t.searchValue),e.xp6(5),e.Q6J("ngForOf",e.xi3(14,8,t.items,t.searchValue))}}let Ys=(()=>{class i extends Bi{constructor(t){super(t),this._ngZone=t,this._title="widget.chooser.furni.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(Dt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(T.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.addEventListener(T.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(Dt.RWCCE_FURNI_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(T.FURNI_ADDED,this.onRoomWidgetRoomObjectUpdateEvent),t.removeEventListener(T.FURNI_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){!t||this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){!t||!this.visible||(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new Fe(Fe.RWRWM_FURNI_CHOOSER))},100))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chooser-furni"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,Xs,15,11,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,_.Fj,_.JJ,_.On,C.Vv,u.sg,u.mk],pipes:[m,di],encapsulation:2}),i})();function zs(i,o){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.id)}}function Ks(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",12),e.NdJ("click",function(){const r=e.CHM(t),a=r.$implicit,c=r.index;return e.oxw(2).selectItem(a,c)}),e.TgZ(1,"p",13),e._uU(2),e.qZA(),e.YNc(3,zs,2,1,"p",14),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw(2);e.Q6J("ngClass",r.selectedItemIndex==n?"selected":""),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf","widget.chooser.furni.title"===r.title)}}function $s(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().searchValue=r}),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"div",8),e.TgZ(11,"perfect-scrollbar",9),e.TgZ(12,"ul",10),e.YNc(13,Ks,4,3,"li",11),e.ALo(14,"roomObjectItemSearch"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,t.title)),e.xp6(5),e.s9C("placeholder",e.lcZ(9,6,"generic.search")),e.Q6J("ngModel",t.searchValue),e.xp6(5),e.Q6J("ngForOf",e.xi3(14,8,t.items,t.searchValue))}}let ea=(()=>{class i extends Bi{constructor(t){super(t),this._ngZone=t,this.title="widget.chooser.user.title",this.onRoomWidgetChooserContentEvent=this.onRoomWidgetChooserContentEvent.bind(this),this.onRoomWidgetRoomObjectUpdateEvent=this.onRoomWidgetRoomObjectUpdateEvent.bind(this)}registerUpdateEvents(t){null!=t&&(t.addEventListener(Dt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.addEventListener(T.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.addEventListener(T.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){null!=t&&(t.removeEventListener(Dt.RWCCE_USER_CHOOSER_CONTENT,this.onRoomWidgetChooserContentEvent),t.removeEventListener(T.USER_REMOVED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),t.removeEventListener(T.USER_ADDED,this.onRoomWidgetRoomObjectUpdateEvent.bind(this)),super.unregisterUpdateEvents(t))}onRoomWidgetChooserContentEvent(t){!t||this._ngZone.run(()=>{this._items=t.items,this.visible=!0})}onRoomWidgetRoomObjectUpdateEvent(t){!this.visible||(this.clearTimeout(),this._timeout=setTimeout(()=>{this.messageListener.processWidgetMessage(new Fe(Fe.RWRWM_USER_CHOOSER))},100))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chooser-user"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-chooser-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-chooser-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3","input-group"],["type","text",1,"form-control","form-control-sm","chooser-search",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","p-3"],[2,"min-height","180px","max-height","180px","height","180px"],[1,"list-group"],["class","d-flex justify-content-between align-items-center bg-secondary rounded mb-1 px-2 py-1 chooser-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","mb-1","px-2","py-1","chooser-item",3,"ngClass","click"],[1,"mb-0"],["class","mb-0",4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,$s,15,11,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,_.Fj,_.JJ,_.On,C.Vv,u.sg,u.mk],pipes:[m,di],encapsulation:2}),i})();const ta=["activeView"];let na=(()=>{class i{constructor(){this.parent=null,this.requestId=0,this.userId=0,this.userName=""}update(t,n){if(!t)return void this.hide();let r=Math.round(t.left+t.width/2-this.activeViewElement.offsetWidth/2),a=Math.round(t.top-this.activeViewElement.offsetHeight+10);a<=0&&(a=Ln.SPACE_AROUND_EDGES),a>=s.wjX.instance.height-this.activeViewElement.offsetHeight&&(a=s.wjX.instance.height-this.activeViewElement.offsetHeight-Ln.SPACE_AROUND_EDGES),r>=s.wjX.instance.width-this.activeViewElement.offsetWidth&&(r=s.wjX.instance.width-this.activeViewElement.offsetWidth-Ln.SPACE_AROUND_EDGES),this.activeViewElement.style.left=r+"px",this.activeViewElement.style.top=a+"px"}hide(){!this.parent||this.parent.removeFriendRequest(this.requestId)}acceptFriendRequest(){!this.parent||this.parent.acceptFriendRequest(this.requestId)}declineFriendRequest(){!this.parent||this.parent.declineFriendRequest(this.requestId)}get activeViewElement(){return this.activeView&&this.activeView.nativeElement||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(ta,5),2&t){let r;e.iGM(r=e.CRH())&&(n.activeView=r.first)}},decls:15,vars:11,consts:[[1,"nitro-widget-friendrequest-dialog","context-menu","card","align-items-center","p-2"],["activeView",""],[1,"drag-handler","d-flex","justify-content-between","align-items-center","mb-1","w-100",2,"font-size","14px"],[1,"m-0","text-wrap","w-100",2,"max-width","95%"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","justify-content-between","align-items-center","w-100"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"p",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.hide()}),e._UZ(7,"i",5),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.declineFriendRequest()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return n.acceptFriendRequest()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.Dn7(5,3,"widget.friendrequest.from","username",n.userName)),e.xp6(6),e.Oqu(e.lcZ(11,7,"widget.friendrequest.decline")),e.xp6(3),e.Oqu(e.lcZ(14,9,"widget.friendrequest.accept")))},pipes:[m],encapsulation:2}),i})();const ia=["contextsContainer"];function oa(i,o){}let ra=(()=>{class i extends ae{constructor(t,n){super(),this._componentFactoryResolver=t,this._ngZone=n,this.cachedFriendRequestDialogs=new Map,this.onRoomWidgetFriendRequestUpdateEvent=this.onRoomWidgetFriendRequestUpdateEvent.bind(this)}ngOnDestroy(){s.wjX.instance.ticker.remove(this.update,this)}registerUpdateEvents(t){!t||(t.addEventListener(Zt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.addEventListener(Zt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(Zt.RWFRUE_SHOW_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),t.removeEventListener(Zt.RWFRUE_HIDE_FRIEND_REQUEST,this.onRoomWidgetFriendRequestUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetFriendRequestUpdateEvent(t){if(t){switch(t.type){case Zt.RWFRUE_SHOW_FRIEND_REQUEST:this.createFriendRequest(t.requestId,t.userId,t.userName);break;case Zt.RWFRUE_HIDE_FRIEND_REQUEST:this.removeFriendRequest(t.requestId)}this.toggleUpdateReceiver()}}createFriendRequest(t,n,r){const a=this.createView(na);!a||(a.instance.requestId=t,a.instance.userId=n,a.instance.userName=r,this.cachedFriendRequestDialogs.set(a.instance,a))}removeFriendRequest(t){for(const n of this.cachedFriendRequestDialogs.values()){if(!n)continue;const r=n.instance;if(r&&r.requestId===t)return void this.removeView(n)}}toggleUpdateReceiver(){this.cachedFriendRequestDialogs&&this.cachedFriendRequestDialogs.size?s.wjX.instance.ticker.add(this.update,this):s.wjX.instance.ticker.remove(this.update,this)}createView(t){if(!t)return null;let n=null,r=null;return this._ngZone.run(()=>{const a=this._componentFactoryResolver.resolveComponentFactory(t);n=this.contextsContainer.createComponent(a),r=n.instance}),r&&n?(r.parent=this,n):null}removeView(t){if(!t)return;const n=this.contextsContainer.indexOf(t.hostView);-1!==n&&(this.cachedFriendRequestDialogs.delete(t.instance),this.toggleUpdateReceiver(),this._ngZone.run(()=>this.contextsContainer.remove(n)))}update(t){for(const n of this.cachedFriendRequestDialogs.values()){if(!n)continue;const r=n.instance,a=this.messageListener.processWidgetMessage(new Pe(Pe.RWGOI_MESSAGE_GET_OBJECT_LOCATION,r.userId,s.OOj.USER));a&&r.update(a.rectangle,a._Str_9337)}}acceptFriendRequest(t){!this.messageListener||(this.messageListener.processWidgetMessage(new Ft(Ft.RWFRM_ACCEPT,t)),this.removeFriendRequest(t))}declineFriendRequest(t){!this.messageListener||(this.messageListener.processWidgetMessage(new Ft(Ft.RWFRM_DECLINE,t)),this.removeFriendRequest(t))}get handler(){return this.widgetHandler}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-friendrequest-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(ia,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.contextsContainer=r.first)}},features:[e.qOj],decls:3,vars:0,consts:[[1,"nitro-widget-friendrequest"],["contextsContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,oa,0,0,"ng-template",null,1,e.W1O),e.qZA())},encapsulation:2}),i})();var mi=U(1210);function sa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"color-chrome",8),e.NdJ("onChangeComplete",function(r){return e.CHM(t),e.oxw().handleChangeComplete(r)}),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("apply")}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("on_off")}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"widget.backgroundcolor.title")),e.xp6(6),e.Q6J("color",t.hsl)("disableAlpha",!0),e.xp6(3),e.Oqu(e.lcZ(13,7,"widget.backgroundcolor.button.apply")),e.xp6(3),e.Oqu(e.lcZ(16,9,"widget.backgroundcolor.button.on"))}}let aa=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._furniId=-1,this._visible=!1,this.saturation=0,this.hue=0,this.lightness=0,this.hsl={h:0,s:0,l:0}}open(t,n,r,a){this._ngZone.run(()=>{this._furniId=t,this._visible=!0,this.hue=Math.max(n,0),this.saturation=Math.max(r,0),this.lightness=Math.max(a,0),this.hsl={h:this.hue/255*360,s:this.saturation/255,l:this.lightness/255}})}hide(){this._visible=!1,this._furniId=-1}handleChangeComplete(t){if(!t)return;const n=s.No6.rgbToHSL(parseInt(t.color.hex.replace("#",""),16));this.hue=n>>16&255,this.saturation=n>>8&255,this.lightness=255&n}handleButton(t){switch(t){case"apply":this.handler.container.connection.send(new s.wHz(this._furniId,this.hue,this.saturation,this.lightness));break;case"on_off":this.handler.container.connection.send(new s.xcK(this._furniId))}}get handler(){return this.widgetHandler}get visible(){return this._visible}get delaySliderOptions(){return{floor:0,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-backgroundcolor-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","justify-content-center","align-items-center"],[3,"color","disableAlpha","onChangeComplete"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,n){1&t&&e.YNc(0,sa,17,11,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,mi.KC],pipes:[m],encapsulation:2}),i})(),Gi=(()=>{class i{}return i.DEFAULT=1,i.WALL_PAPER=2,i.FLOOR=3,i.LANDSCAPE=4,i.POST_IT=5,i.POSTER=6,i.SOUND_SET=7,i.TRAX_SONG=8,i.PRESENT=9,i.ECOTRON_BOX=10,i.TROPHY=11,i.CREDIT_FURNI=12,i.PET_SHAMPOO=13,i.PET_CUSTOM_PART=14,i.PET_CUSTOM_PART_SHAMPOO=15,i.PET_SADDLE=16,i.GUILD_FURNI=17,i.GAME_FURNI=18,i.MONSTERPLANT_SEED=19,i.MONSTERPLANT_REVIVAL=20,i.MONSTERPLANT_REBREED=21,i.MONSTERPLANT_FERTILIZE=22,i.FIGURE_PURCHASABLE_SET=23,i})(),le=(()=>{class i{constructor(t){this.elementRef=t}ngOnInit(){const t=this.elementRef.nativeElement;!t||(t.onerror=()=>{t.src="",t.onerror=null})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","image-placeholder",""]]}),i})();const ca=["nitro-avatar-image",""];function la(i,o){if(1&i&&e._UZ(0,"img",1),2&i){const t=e.oxw();e.Gre("avatar-image scale-",t.scale,""),e.Q6J("src",t.avatarUrl,e.LSH)}}let He=(()=>{class i{constructor(t){this._ngZone=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this._avatarImageCache=new s.lzS,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnDestroy(){this.dispose()}ngOnChanges(t){const n=t.figure;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const r=t.gender;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0);const a=t.headOnly;a&&a.previousValue!==a.currentValue&&(this.needsUpdate=!0);const c=t.direction;c&&c.previousValue!==c.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;const t=this.getUserImageUrl();t&&this._ngZone.run(()=>this.avatarUrl=t)})}getUserImageUrl(){const t=this.getAvatarBuildString();let n=this._avatarImageCache.getValue(t);if(!n){const r=s.wjX.instance.avatar.createAvatarImage(this.figure,s.bLn.LARGE,this.gender,this,null);if(r){let a=s.GXC.FULL;this.headOnly&&(a=s.GXC.HEAD),r.setDirection(a,this.direction);const c=r.getCroppedImage(a);c&&(n=c.src),r.dispose()}n&&this.putInCache(t,n)}return n}putInCache(t,n){this._avatarImageCache.length===i.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(t,n)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return i.MAX_CACHE_SIZE=10,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale"},features:[e.TTD],attrs:ca,decls:1,vars:1,consts:[["image-placeholder","",3,"class","src",4,"ngIf"],["image-placeholder","",3,"src"]],template:function(t,n){1&t&&e.YNc(0,la,1,4,"img",0),2&t&&e.Q6J("ngIf",n.avatarUrl)},directives:[u.O5,le],encapsulation:2}),i})();function ua(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"div",8),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("cancel")}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("use")}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"useproduct.widget.title.bind_clothing")),e.xp6(6),e.Q6J("figure",t.newFigureString)("direction",2),e.xp6(3),e.Oqu(e.lcZ(13,9,"useproduct.widget.text.bind_clothing")),e.xp6(3),e.Oqu(e.lcZ(16,11,"useproduct.widget.info.bind_clothing")),e.xp6(4),e.Oqu(e.lcZ(20,13,"useproduct.widget.cancel")),e.xp6(3),e.Oqu(e.lcZ(23,15,"useproduct.widget.bind_clothing"))}}let _a=(()=>{class i{constructor(){this.contextWidget=null,this.objectId=null,this.visible=!1,this._furniData=null,this._requestObjectId=-1,this.caption=null}hide(){!this.contextWidget||this.contextWidget.closeClothing()}open(t){if(!this.contextWidget)return;const r=this.contextWidget.handler.container.roomEngine.getRoomObject(this.contextWidget.handler.container.roomSession.roomId,t,s.YGE.FLOOR);if(!r)return;this._furniData=this.contextWidget.handler.getFurniData(r),this._requestObjectId=r.id;let a=-1;const c=[],l=this.contextWidget.handler.container.sessionDataManager.gender;switch(this._furniData.specialType){case Gi.FIGURE_PURCHASABLE_SET:{a=0;const d=this._furniData.customParams.split(",");for(let h=0;h<d.length;h++){const f=Number.parseInt(d[h]);this.contextWidget.handler.container.avatarRenderManager.isValidFigureSetForGender(f,l)&&c.push(f)}}}this.newFigureString=this.contextWidget.handler.container.avatarRenderManager.getFigureStringWithFigureIds(this.contextWidget.handler.container.sessionDataManager.figure,l,c),this.contextWidget.inventoryService.hasBoundFigureSetFurniture(this.newFigureString)?this.contextWidget.handler.container.connection.send(new s.hXe(l,this.newFigureString)):this.showWindow(a)}handleButton(t){switch(t){case"cancel":this.hide();break;case"use":{const n=this.contextWidget.handler.container.sessionDataManager.gender;this.contextWidget.handler.container.connection.send(new s.ofz(this._requestObjectId)),this.contextWidget.handler.container.connection.send(new s.hXe(n,this.newFigureString)),this.hide()}}}showWindow(t){this.caption=s.wjX.instance.localization.getValueWithParameter("useproduct.widget.text.bind_clothing","productName",this._furniData.name),this.visible=!0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],inputs:{contextWidget:"contextWidget",objectId:"objectId"},decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","align-items-center","justify-content-center"],["nitro-avatar-image","",1,"bg-secondary","rounded",3,"figure","direction"],[1,"col-8","d-flex","flex-column","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&e.YNc(0,ua,24,17,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,He],pipes:[m],encapsulation:2}),i})();class y{}y.FURNI=1,y.RENTABLE=2,y.PET=3,y.BADGE=4,y.BOT=5,y.GAMES=6,y._Str_12463=[y.FURNI,y.RENTABLE,y.PET,y.BADGE,y.BOT];class ga{constructor(o,t){this._communication=o,this._inventoryService=t,this._unseenItems=[],this._messages=[],this.registerMessages()}dispose(){this.unregisterMessages(),this._communication=null,this._unseenItems=null}registerMessages(){this.unregisterMessages(),this._messages=[new s.hq9(this.onUnseenItemsEvent.bind(this))];for(const o of this._messages)this._communication.registerMessageEvent(o)}unregisterMessages(){for(const o of this._messages)this._communication.removeMessageEvent(o);this._messages=[]}_Str_8813(o){return!!this._Str_5621(o)&&(delete this._unseenItems[o],this._Str_20981(o),!0)}_Str_18075(o,t){if(!this._Str_5621(o))return!1;const n=this._unseenItems[o];for(const r of t)n.splice(n.indexOf(r),1);return this._Str_23994(o,t),!0}_Str_17159(o){return!this._Str_5621(o)&&(delete this._unseenItems[o],this._Str_20981(o),!0)}_Str_3613(o,t){return!!this._unseenItems[o]&&this._unseenItems[o].indexOf(t)>=0}_Str_16745(o,t){if(!this._unseenItems[o])return!1;const n=this._unseenItems[o],r=n.indexOf(t);return-1!==r&&(n.splice(r,1),!0)}_Str_11239(o){return this._unseenItems?this._unseenItems[o]:[]}_Str_5621(o){return this._unseenItems[o]?this._unseenItems[o].length:0}onUnseenItemsEvent(o){if(!o)return;const t=o.getParser();if(t){for(const n of t.categories){const r=t.getItemsByCategory(n);this._Str_18112(n,r)}this._inventoryService.updateUnseenCount()}}_Str_18112(o,t){if(!t)return;let n=this._unseenItems[o];n||(n=[],this._unseenItems[o]=n);for(const r of t)-1===n.indexOf(r)&&n.push(r)}_Str_20981(o){}_Str_23994(o,t){}}let ge=(()=>{class i{constructor(t,n){this._settingsService=t,this._ngZone=n,this._messages=[],this._events=null,this._botsController=null,this._badgesController=null,this._furniController=null,this._controller=null,this._petsController=null,this._tradeController=null,this._roomSession=null,this._unseenCount=0,this._botsVisible=!1,this._furnitureVisible=!0,this._badgesVisible=!1,this._petsVisible=!1,this._tradingVisible=!1,this._marketPlaceOfferVisible=!1,this._figureSetIds=[],this._boundFurnitureNames=[],this._events=new e.vpe,this._unseenTracker=new ga(s.wjX.instance.communication,this),this._unseenCounts=new Map,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._unseenTracker&&(this._unseenTracker.dispose(),this._unseenTracker=null)}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.ENDED,this.onRoomSessionEvent),this._messages=[new s.XnP(this.onFigureSetIdsMessageEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.ENDED,this.onRoomSessionEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case s.SeR.STARTED:return void(this._roomSession=t.session);case s.SeR.ENDED:return this._roomSession=null,void this._ngZone.run(()=>this.hideWindow())}}onFigureSetIdsMessageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._figureSetIds=n.figureSetIds,this._boundFurnitureNames=n.boundsFurnitureNames})}updateUnseenCount(){setTimeout(()=>{this._ngZone.run(()=>{let t=0;const n=this._unseenTracker._Str_5621(y.FURNI);t+=n;const r=this._unseenTracker._Str_5621(y.BOT);t+=r;const a=this._unseenTracker._Str_5621(y.PET);t+=a;const c=this._unseenTracker._Str_5621(y.BADGE);t+=c,this._unseenCounts.set(y.FURNI,n),this._unseenCounts.set(y.BOT,r),this._unseenCounts.set(y.BADGE,c),this._unseenCounts.set(y.PET,a),this._unseenCount=t})},1)}updateItemLocking(){!this.controller||this.controller.updateItemLocking()}showWindow(){this._settingsService.showInventory()}hideWindow(){this.furniController&&(this.furniController.mouseDown=!1),this._settingsService.hideInventory()}hasFigureSetId(t){return this._figureSetIds.indexOf(t)>-1}hasBoundFigureSetFurniture(t){return this._boundFurnitureNames.indexOf(t)>-1}hideAllControllers(){this.furnitureVisible=!1,this.botsVisible=!1,this.petsVisible=!1,this.badgesVisible=!1}get events(){return this._events}get botsController(){return this._botsController}set botsController(t){this._botsController=t}set badgesController(t){this._badgesController=t}get furniController(){return this._furniController}set furniController(t){this._furniController=t}get controller(){return this._controller}set controller(t){this._controller=t}get petsController(){return this._petsController}set petsController(t){this._petsController=t}get tradeController(){return this._tradeController}set tradeController(t){this._tradeController=t}get unseenTracker(){return this._unseenTracker}get roomSession(){return this._roomSession}get furniUnseenCount(){return this._unseenCounts.get(y.FURNI)}get botUnseenCount(){return this._unseenCounts.get(y.BOT)}get petUnseenCount(){return this._unseenCounts.get(y.PET)}get badgeUnseenCount(){return this._unseenCounts.get(y.BADGE)}get unseenCount(){return this._unseenCount}get botsVisible(){return this._botsVisible}set botsVisible(t){this._botsVisible=t}get furnitureVisible(){return this._furnitureVisible}set furnitureVisible(t){this._furnitureVisible=t}get badgesVisible(){return this._badgesVisible}set badgesVisible(t){this._badgesVisible=t}get petsVisible(){return this._petsVisible}set petsVisible(t){this._petsVisible=t}get tradingVisible(){return this._tradingVisible}set tradingVisible(t){this._tradingVisible=t}get marketPlaceOfferVisible(){return this._marketPlaceOfferVisible}set marketPlaceOfferVisible(t){this._marketPlaceOfferVisible=t}get figureSetIds(){return this._figureSetIds}get boundFurnitureNames(){return this._boundFurnitureNames}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const da=["purchaseClothing"];let ma=(()=>{class i extends ae{constructor(t,n,r){super(),this._ngZone=t,this._resolver=n,this.inventoryService=r,this._visible=!1,this._selectedObject=null}registerUpdateEvents(t){!t||super.registerUpdateEvents(t)}unregisterUpdateEvents(t){!t||super.unregisterUpdateEvents(t)}_Str_24748(t){this._selectedObject=t,this._ngZone.run(()=>{this.purchaseClothingContainer.clear();const n=this._resolver.resolveComponentFactory(_a);this._purchaseClothingContainerRef=this.purchaseClothingContainer.createComponent(n),this._purchaseClothingContainerRef.instance.contextWidget=this,this._purchaseClothingContainerRef.instance.open(t.id)})}closeClothing(){this._ngZone.run(()=>this.purchaseClothingContainer.clear())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(e._Vd),e.Y36(ge))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-context-menu-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(da,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.purchaseClothingContainer=r.first)}},features:[e.qOj],decls:2,vars:0,consts:[["purchaseClothing",""]],template:function(t,n){1&t&&e._UZ(0,"template",null,0)},encapsulation:2}),i})();function pa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().sendRedeem()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"catalog.redeem.dialog.title")),e.xp6(6),e.Oqu(e.Dn7(10,6,"widgets.furniture.credit.redeem.value","value",t.value)),e.xp6(4),e.Oqu(e.lcZ(14,10,"generic.cancel")),e.xp6(3),e.Oqu(e.lcZ(17,12,"catalog.redeem.dialog.button.exchange"))}}let ha=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._objectId=-1,this._value="0",this._visible=!1,this.onRoomWidgetCreditFurniUpdateEvent=this.onRoomWidgetCreditFurniUpdateEvent.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(yn.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(yn.RWCFUE_CREDIT_FURNI_UPDATE,this.onRoomWidgetCreditFurniUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetCreditFurniUpdateEvent(t){!t||(this._objectId=t.objectId,this._ngZone.run(()=>{this._value=t.value.toString(),this._visible=!0}))}sendRedeem(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Rn(Rn.RWFCRM_REDEEM,this._objectId)),this.hide())}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get value(){return this._value}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-credit-compontent"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-credit card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-credit","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&e.YNc(0,pa,18,14,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v],pipes:[m],encapsulation:2}),i})();function fa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"p",7),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"input",9),e.NdJ("input",function(r){return e.CHM(t),e.oxw().slideToHeight(r.target.value)}),e.qZA(),e.TgZ(13,"input",10),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().height=r}),e.qZA(),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().placeAboveStack()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().placeAtFloor()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,10,"widget.custom.stack.height.title")),e.xp6(6),e.Oqu(e.lcZ(10,12,"widget.custom.stack.height.text")),e.xp6(3),e.s9C("value",t.height),e.Q6J("min",t.minHeight)("max",t.maxHeight),e.xp6(1),e.Q6J("ngModel",t.height)("min",t.minHeight)("max",t.maxHeight),e.xp6(3),e.Oqu(e.lcZ(17,14,"furniture.above.stack")),e.xp6(3),e.Oqu(e.lcZ(20,16,"furniture.floor.level"))}}let va=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1,this._height=0,this._saveTimeout=null}open(t,n){this._ngZone.run(()=>{this._furniId=t,this._height=n,this._visible=!0,this.setHeight(n,!0)})}update(t,n){this._ngZone.run(()=>this._furniId===t&&this.setHeight(n,!0))}hide(){this._visible=!1,this._furniId=-1,this._height=0}setHeight(t,n=!1){t=Math.abs(t),n||t>i.MAX_HEIGHT&&(t=i.MAX_HEIGHT),this._height=parseFloat(t.toFixed(2)),n||this.scheduleUpdate(100*this._height)}scheduleUpdate(t){this._saveTimeout&&(clearTimeout(this._saveTimeout),this._saveTimeout=null),this._saveTimeout=setTimeout(()=>this.sendUpdate(t),5)}sendUpdate(t){this.widgetHandler.container.connection.send(new s.CFz(this._furniId,~~t))}placeAboveStack(){this.sendUpdate(-100)}placeAtFloor(){this.sendUpdate(0)}slideToHeight(t){this.height=t}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get furniId(){return this._furniId}get height(){return this._height}set height(t){this.setHeight(t,!1)}get minHeight(){return 0}get maxHeight(){return i.MAX_HEIGHT}}return i.MAX_HEIGHT=40,i.MAX_RANGE_HEIGHT=10,i.STEP_VALUE=.01,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-customstackheight-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-customstackheight card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-customstackheight","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"text-justify","mb-2"],[1,"d-flex","justify-content-center","align-items-center","mb-2"],["type","range",1,"custom-range","ml-1",3,"value","min","max","input"],["name","heightInput","type","number",1,"form-control","form-control-sm",3,"ngModel","min","max","ngModelChange"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,n){1&t&&e.YNc(0,fa,21,18,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,_.wV,_.qQ,_.Fd,_.Fj,_.JJ,_.On],pipes:[m],encapsulation:2}),i})();var he=U(4555);function Ta(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw(3).selectPreset(a+1)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.index;e.xp6(1),e.Oqu(e.lcZ(2,1,"widget.dimmer.tab."+(t+1)))}}const ba=function(i){return{"color-selected":i}},Ca=function(i){return{"background-color":i}};function Ea(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).selectColor(a)}),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,r=e.oxw(3);e.Q6J("ngClass",e.VKq(2,ba,r.getSelectedPreset().color==t))("ngStyle",e.VKq(4,Ca,r.htmlColors[n]))}}function Sa(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.YNc(2,Ta,3,3,"button",10),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",12),e.YNc(5,Ea,1,6,"button",13),e.qZA(),e.TgZ(6,"div",14),e.TgZ(7,"ngx-slider",15),e.NdJ("valueChange",function(){return e.CHM(t),e.oxw(2).onSliderChange()})("valueChange",function(r){return e.CHM(t),e.oxw(2).getSelectedPreset().intensity=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",16),e.TgZ(9,"div",17),e.TgZ(10,"input",18),e.NdJ("change",function(r){return e.CHM(t),e.oxw(2).changeCheckbox(r)}),e.qZA(),e.TgZ(11,"label",19),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.TgZ(15,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("on_off")}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("apply")}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.presets),e.xp6(3),e.Q6J("ngForOf",t.availableColors),e.xp6(2),e.Q6J("options",t.delaySliderOptions)("value",t.getSelectedPreset().intensity),e.xp6(3),e.Q6J("ngModel",t.getSelectedPreset().backgroundOnly),e.xp6(2),e.Oqu(e.lcZ(13,8,"widget.dimmer.type.checkbox")),e.xp6(4),e.Oqu(e.lcZ(17,10,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on")),e.xp6(3),e.Oqu(e.lcZ(20,12,"widget.dimmer.button.apply"))}}function Aa(i,o){if(1&i){const t=e.EpF();e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("on_off")}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,2,"widget.dimmer.info.off")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,t.isOn?"widget.dimmer.button.off":"widget.dimmer.button.on"))}}function wa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.YNc(9,Sa,21,14,"ng-container",8),e.YNc(10,Aa,6,6,"ng-container",8),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"widget.dimmer.title")),e.xp6(6),e.Q6J("ngIf",t.isOn),e.xp6(1),e.Q6J("ngIf",!t.isOn)}}let xa=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._dimmerState=0,this._effectId=0,this._color=16777215,this._brightness=255,this.presets=[],this.selectedPresetId=0,this.isOn=!1,this.availableColors=[7665141,21495,15161822,15353138,15923281,8581961,0],this.htmlColors=["#74F5F5","#0053F7","#E759DE","#EA4532","#F2F851","#82F349","#000000"],this.onDimmerPresetsEvent=this.onDimmerPresetsEvent.bind(this),this.onDimmerStateEvent=this.onDimmerStateEvent.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(nn.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.addEventListener(ni.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(nn.RWDUE_PRESETS,this.onDimmerPresetsEvent),t.removeEventListener(ni.RWDSUE_DIMMER_STATE,this.onDimmerStateEvent),super.unregisterUpdateEvents(t))}getSelectedPreset(){return this.presets[this.selectedPresetId-1]}selectPreset(t){this.selectedPresetId=t}selectColor(t){this.getSelectedPreset().color=t,this.previewSettings()}onDimmerPresetsEvent(t){this.presets=t.presets.map(n=>({color:n.color,id:n.id,intensity:n._Str_4272,backgroundOnly:2==n.type})),this.selectedPresetId=t.selectedPresetId,this._ngZone.run(()=>{this._visible=!0})}onDimmerStateEvent(t){this._ngZone.run(()=>{this.isOn=1==t.state,this._effectId=t._Str_6815,this._color=t.color,this._brightness=t._Str_5123}),this.messageListener.processWidgetMessage(new Mn(this._color,this._brightness,2===this._effectId))}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible&&this.selectedPresetId>0&&this.presets.length>0}set visible(t){this._visible=t}onSliderChange(){this.previewSettings()}changeCheckbox(t){this.getSelectedPreset().backgroundOnly=t.target.checked,this.previewSettings()}previewSettings(){if(!this.messageListener)return;const t=this.getSelectedPreset();this.messageListener.processWidgetMessage(new Mn(t.color,t.intensity,t.backgroundOnly))}handleButton(t){switch(t){case"on_off":this.toggleState();break;case"apply":this.apply()}}toggleState(){!this.messageListener||this.messageListener.processWidgetMessage(new ii)}apply(){if(!this.isOn||!this.messageListener||null==this.presets||0==this.presets.length)return;const t=this.getSelectedPreset();!t||this.messageListener.processWidgetMessage(new oi(t.id,t.backgroundOnly?2:1,t.color,t.intensity,!0))}get delaySliderOptions(){return{floor:75,ceil:255,step:1,hidePointerLabels:!0,hideLimitLabels:!0}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-dimmer-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-dimmer card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-dimmer","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"dimmer-inner","bg-secondary","p-2"],[4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["type","button","class","btn btn-sm btn-primary w-100",3,"click",4,"ngFor","ngForOf"],[1,"py-2"],[1,"d-flex","flex-row","dimmer-colour-list"],["type","button","class","btn btn-sm dimmer-colour py-3",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"custom-slider"],[3,"options","value","valueChange"],[1,"d-block","mb-1"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","change"],[1,"form-check-label"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["type","button",1,"btn","btn-sm","dimmer-colour","py-3",3,"ngClass","ngStyle","click"],["type","button",1,"btn","btn-primary","btn-sm","w-100",3,"click"]],template:function(t,n){1&t&&e.YNc(0,wa,11,5,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.sg,he.w5,_.Wl,_.JJ,_.On,u.mk,u.PC],pipes:[m],encapsulation:2}),i})();function Za(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"p"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("cancel")}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("confirm")}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"friend.furniture.confirm.lock.caption")),e.xp6(7),e.Oqu(e.lcZ(11,6,"friend.furniture.confirm.lock.subtitle")),e.xp6(4),e.Oqu(e.lcZ(15,8,"friend.furniture.confirm.lock.button.cancel")),e.xp6(3),e.Oqu(e.lcZ(18,10,"friend.furniture.confirm.lock.button.confirm")))}let Ia=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._furniId=-1}open(t,n){this._visible&&-1!=this._furniId&&this.sendStart(this._furniId,!1),this._ngZone.run(()=>{this._furniId=t,this._visible=!0})}handleButton(t){switch(t){case"confirm":this.sendStart(this._furniId,!0),this.hide();break;case"cancel":this.sendStart(this._furniId,!1),this.hide()}}sendStart(t,n){s.wjX.instance.communication.connection.send(new s.Nwy(t,n))}hide(){this._visible=!1,this._furniId=-1}get visible(){return this._visible}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-purchasable-clothing card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-purchasable-clothing","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-6"],[1,"col-4","d-flex","align-items-center","justify-content-center"],[1,"d-flex","justify-content-between","align-items-center","p-3"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&e.YNc(0,Za,19,12,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v],pipes:[m],encapsulation:2}),i})();const ya=function(i){return{backgroundImage:i}};function Ra(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e.qZA(),e.TgZ(3,"div",4),e.TgZ(4,"div",5),e._UZ(5,"div",6),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"div",6),e.qZA(),e.qZA(),e.TgZ(8,"p",7),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"p",8),e._uU(12),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(11,ya,"url("+t.image+")")),e.xp6(5),e.Q6J("figure",t.firstFigure)("direction",2),e.xp6(2),e.Q6J("figure",t.secondFigure)("direction",4),e.xp6(2),e.Oqu(e.lcZ(10,9,"lovelock.engraving.caption")),e.xp6(3),e.lnq("",t.firstName," | ",t.secondName," | ",t.engravedDate,"")}}let Ma=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this.engravingView=null,this.visible=!1,this.firstFigure=null,this.firstName=null,this.secondFigure=null,this.secondName=null,this.engravedDate=null}open(t,n,r){switch(n){case s.uls.LOVE_LOCK:this.engravingView="engraving";break;case s.uls.CARVE_A_TREE:case s.uls.FRIENDS_PORTRAIT:break;case s.uls.WILD_WEST_WANTED:this.engravingView="wildwest";break;case s.uls.HABBOWEEN:this.engravingView="hween14"}this.engravingView&&this._ngZone.run(()=>{this.firstName=r.getValue(1),this.secondName=r.getValue(2),this.firstFigure=r.getValue(3),this.secondFigure=r.getValue(4),this.engravedDate=r.getValue(5),this.visible=!0})}hide(){this.visible=!1}get image(){return s.wjX.instance.getConfiguration("furni.extras.url").toString().replace("%image%",`loveLock_${this.engravingView}`)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-friends-engraving",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","flex-column","small","h-100"],[1,"friend-close","position-absolute",3,"click"],[1,"row","justify-content-center"],[1,"col-2","d-flex","justify-content-center"],["nitro-avatar-image","",3,"figure","direction"],[1,"w-100","text-center"],[1,"w-100","text-center","mt-auto"]],template:function(t,n){1&t&&e.YNc(0,Ra,13,13,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.PC,He],pipes:[m],encapsulation:2}),i})(),M=(()=>{class i{}return i.DEFAULT=1,i._Str_3639=2,i._Str_3683=3,i._Str_3432=4,i._Str_12351=5,i._Str_5186=6,i._Str_21911=7,i._Str_9125=8,i._Str_5922=9,i._Str_18231=10,i._Str_4255=11,i._Str_19933=12,i._Str_7696=13,i._Str_7297=14,i._Str_7954=15,i._Str_6096=16,i._Str_12454=17,i._Str_19144=18,i.MONSTERPLANT_SEED=19,i._Str_6915=20,i._Str_8726=21,i._Str_9449=22,i._Str_12534=23,i})(),We=(()=>{class i{constructor(t,n){this._ngZone=t,this._notificationService=n,this._totalOffersFound=0,this._creditsWaiting=0,this._lastSearchRequest=null,this._activeOfferToBuy=null,this._messages=[],this.registerMessages(),this._lastOwnOffers=new s.lzS}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.P$e(this.onMarketplaceOwnItemsEvent.bind(this)),new s.m2g(this.onMarketplaceCancelItemEvent.bind(this)),new s.gwI(this.onMarketplaceOffersReceivedEvent.bind(this)),new s.XhH(this.onMarketplaceAfterOrderStatusEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}ngOnDestroy(){this.unregisterMessages()}onMarketplaceOwnItemsEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._creditsWaiting=n.creditsWaiting;for(const r of n.offers){const a=new s.uNS(r.offerId,r.furniId,r.furniType,r.extraData,r.stuffData,r.price,r.status,r.averagePrice);a.timeLeftMinutes=r.timeLeftMinutes,this._lastOwnOffers.add(r.offerId,a)}})}onMarketplaceAfterOrderStatusEvent(t){if(!t)return;const n=t.getParser();if(n){if(1==n.result&&this._lastSearchRequest)return void this.requestOffers(this._lastSearchRequest);if(2==n.result){const r=n.requestedOfferId,a=[];for(const c of this._offerOnMarket)c.offerId!=r&&a.push(c);return this._ngZone.run(()=>this._offerOnMarket=a),void this._notificationService.alert(s.wjX.instance.localization.getValue("catalog.marketplace.not_available_header"),s.wjX.instance.localization.getValue("catalog.marketplace.not_available_title"))}if(3==n.result&&this._lastSearchRequest)return void this.requestOffers(this._lastSearchRequest);if(4==n.result)return void this._notificationService.alert(s.wjX.instance.localization.getValue("catalog.alert.notenough.credits.description"),s.wjX.instance.localization.getValue("catalog.alert.notenough.title"))}}onMarketplaceOffersReceivedEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._totalOffersFound=n.totalItemsFound,this._offerOnMarket=n.offers})}onMarketplaceCancelItemEvent(t){if(!t)return;const n=t.getParser();if(n){if(!n.success)return void this._notificationService.alert(s.wjX.instance.localization.getValue("catalog.marketplace.cancel_failed"),s.wjX.instance.localization.getValue("catalog.marketplace.operation_failed.topic"));this._ngZone.run(()=>{this._lastOwnOffers.remove(n.offerId)})}}requestOwnItem(){s.wjX.instance.communication.connection.send(new s.CO1)}get lastOwnOffers(){return this._lastOwnOffers}get publicOffers(){return this._offerOnMarket}get totalOffersFound(){return this._totalOffersFound}get creditsWaiting(){return this._creditsWaiting}redeemExpiredMarketPlaceOffer(t){s.wjX.instance.communication.connection.send(new s.QD6(t))}redeemCredits(){const t=[];for(const n of this._lastOwnOffers.getValues())n.status===i._Str_8295&&t.push(n.offerId);for(const n of t)this._lastOwnOffers.remove(n);s.wjX.instance.communication.connection.send(new s.wVN)}requestOffers(t){this._lastSearchRequest=t,s.wjX.instance.communication.connection.send(new s.C_8(t.minPrice,t.maxPrice,t.query,t.type))}buyOffer(t){this._activeOfferToBuy=t}get currentMarketplaceOfferToBuy(){return this._activeOfferToBuy}buyMarketplaceOffer(t){this._activeOfferToBuy=null,s.wjX.instance.communication.connection.send(new s.uAi(t))}}return i._Str_20923=1,i._Str_15376=1,i._Str_8295=2,i._Str_6495=3,i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(R))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ce=(()=>{class i{constructor(t,n,r){this._catalogService=t,this._marketService=n,this._ngZone=r,this.activePage=null,this.roomPreviewerVisible=!0}getText(t=0){let n=this.activePage.localization.texts[t]||"";return n&&n.length&&(n=n.replace(/\r\n|\r|\n/g,"<br />")),n||""}getImage(t=0){const n=this.activePage.localization.images&&this.activePage.localization.images[t];if(!n||!n.length)return null;let r=s.wjX.instance.getConfiguration("catalog.asset.image.url");return r=r.replace("%name%",n),r}getCurrencyUrl(t){return s.wjX.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const n=t.products[0];if(!n)return"";switch(n.productType.toUpperCase()){case s.Sbr.BADGE:return s.wjX.instance.sessionDataManager.getBadgeUrl(n.extraParam);case s.Sbr.FLOOR:return s.wjX.instance.roomEngine.getFurnitureFloorIconUrl(n.furniClassId);case s.Sbr.WALL:return s.wjX.instance.roomEngine.getFurnitureWallIconUrl(n.furniClassId,n.extraParam)}return""}hasMultipleProducts(t){return t.products.length>1}offerName(t){const n=this._catalogService.getProductDataForLocalization(t.localizationId);return n?n.name:t.localizationId}getFirstProduct(t){return t&&t.products[0]||null}get headerText(){return this._catalogService.catalogRoot.localization||null}get offers(){return this._catalogService.activePage.offers}get activeOffer(){return this._catalogService.component&&this._catalogService.component.activeOffer||null}get roomPreviewer(){return this._catalogService.component&&this._catalogService.component.roomPreviewer||null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(We),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i}),i})();function Oa(i,o){if(1&i&&e._UZ(0,"img",9),2&i){const t=e.oxw(2);e.Q6J("src",t.getImage(1),e.LSH)}}function Ua(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Oa,1,1,"img",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getImage(1))}}function Na(i,o){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"div"),e._UZ(2,"div",16),e.ALo(3,"uniqueNumber"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div"),e._UZ(7,"div",16),e.ALo(8,"uniqueNumber"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHtml",e.lcZ(3,4,t.activeOffer.products[0].uniqueLimitedItemsLeft),e.oJD),e.xp6(2),e.hij(" ",e.lcZ(5,6,"unique.items.left")," "),e.xp6(3),e.Q6J("innerHtml",e.lcZ(8,8,t.activeOffer.products[0].uniqueLimitedSeriesSize),e.oJD),e.xp6(2),e.hij(" ",e.lcZ(10,10,"unique.items.number.sold")," ")}}function qa(i,o){if(1&i&&e._UZ(0,"div",17),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)("width",366)("height",180)}}function La(i,o){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"img",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.offerImage(t.activeOffer),e.LSH)}}function ka(i,o){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._uU(2),e.qZA(),e.YNc(3,Na,11,12,"div",12),e.YNc(4,qa,1,3,"div",13),e.YNc(5,La,2,1,"div",14),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.offerName(t.activeOffer)),e.xp6(1),e.Q6J("ngIf",t.activeOffer.products[0].uniqueLimitedItem),e.xp6(1),e.Q6J("ngIf",t.roomPreviewerVisible),e.xp6(1),e.Q6J("ngIf",!t.roomPreviewerVisible)}}function Fa(i,o){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.offerCount(t))}}function Da(i,o){if(1&i&&(e._UZ(0,"div",26),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw(2).$implicit;e.Q6J("innerHtml",e.lcZ(1,1,t.products[0].uniqueLimitedSeriesSize),e.oJD)}}const Pa=function(i,o,t){return{active:i,unique:o,"sold-out":t}},Ja=function(i){return{"background-image":i}};function ja(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().selectOffer(r)}),e.TgZ(1,"button",21),e._UZ(2,"div",22),e.YNc(3,Fa,2,1,"div",23),e.YNc(4,Da,2,3,"div",24),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.kEZ(4,Pa,n.activeOffer===t,t.products[0].uniqueLimitedItem,t.products[0].uniqueLimitedItem&&!t.products[0].uniqueLimitedItemsLeft)),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,Ja,"url("+n.offerImage(t)+")")),e.xp6(1),e.Q6J("ngIf",n.offerCount(t)>1),e.xp6(1),e.Q6J("ngIf",t.products[0].uniqueLimitedItem)}}function Va(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ja,5,10,"div",19),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.products[0])}}function Ba(i,o){if(1&i&&e._UZ(0,"div",27),2&i){const t=e.oxw();e.Q6J("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let an=(()=>{class i extends Ce{selectOffer(t){if(!t)return;const n=t.products[0];n&&(this.roomPreviewerVisible=-1==[j.BADGE].indexOf(n.productType),this._catalogService.component&&this._catalogService.component.selectOffer(t))}offerCount(t){if(!this.hasMultipleProducts(t)){const n=this.getFirstProduct(t);if(n)return n.productCount}return 1}}return i.CODE="default_3x3",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],[4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","unique-counter-complete position-absolute","style","z-index:1;",4,"ngIf"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],[1,"unique-counter-complete","position-absolute",2,"z-index","1"],[3,"innerHtml"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ua,2,1,"div",1),e.YNc(2,ka,6,4,"div",2),e.TgZ(3,"perfect-scrollbar",3),e.TgZ(4,"div",4),e.YNc(5,Va,2,1,"ng-container",5),e.qZA(),e.qZA(),e.YNc(6,Ba,1,3,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.activeOffer),e.xp6(1),e.Q6J("ngIf",n.activeOffer&&n.activeOffer.products[0]),e.xp6(3),e.Q6J("ngForOf",n.offers),e.xp6(1),e.Q6J("ngIf",n.activeOffer))},encapsulation:2}),i})();function Ga(i,o){if(1&i&&e._UZ(0,"img",9),2&i){const t=e.oxw(2);e.Q6J("src",t.getImage(1),e.LSH)}}function Ha(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Ga,1,1,"img",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getImage(1))}}function Wa(i,o){if(1&i&&e._UZ(0,"div",14),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)("width",364)("height",182)}}function Qa(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"img",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.offerImage(t.activeOffer),e.LSH)}}function Xa(i,o){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._uU(2),e.qZA(),e.YNc(3,Wa,1,3,"div",12),e.YNc(4,Qa,2,1,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.offerName(t.activeOffer)),e.xp6(1),e.Q6J("ngIf",t.roomPreviewerVisible),e.xp6(1),e.Q6J("ngIf",!t.roomPreviewerVisible)}}const Ya=function(i){return{"background-image":i}};function za(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().requestOfferData(a)}),e._UZ(1,"button",17),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngStyle",e.VKq(1,Ya,"url("+n.searchItemImage(t)+")"))}}function Ka(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw();e.Q6J("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let Tn=(()=>{class i extends an{requestOfferData(t){this._catalogService.requestOfferData(t.purchaseOfferId)}searchItemImage(t){return t?this._catalogService.getFurnitureDataIconUrl(t):null}get searchItems(){return this._catalogService.activePage instanceof kn?this._catalogService.activePage.furni:[]}}return i.CODE="search_results",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngStyle"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ha,2,1,"div",1),e.YNc(2,Xa,5,3,"div",2),e.TgZ(3,"perfect-scrollbar",3),e.TgZ(4,"div",4),e.YNc(5,za,2,3,"div",5),e.qZA(),e.qZA(),e.YNc(6,Ka,1,3,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.activeOffer),e.xp6(1),e.Q6J("ngIf",n.activeOffer),e.xp6(3),e.Q6J("ngForOf",n.searchItems),e.xp6(1),e.Q6J("ngIf",n.activeOffer))},encapsulation:2}),i})();class kn{constructor(o){this._furni=null,this._offer=null,this._furni=o}get searchOffer(){return this._offer}selectSearchResult(o,t){t&&(this._offer=t.offer)}get acceptSeasonCurrencyAsCredits(){return!1}get catalogType(){return Tn.CODE}get frontPageItems(){return[]}get layoutCode(){return Tn.CODE}get localization(){return{images:[],texts:[]}}get offerId(){return null}get offers(){return[]}get furni(){return this._furni}get pageId(){return-1}}class $a{constructor(o){if(this._isEnabled=!1,this._price=null,this._stuffTypes=null,this._boxTypes=null,this._ribbonTypes=null,this._defaultStuffTypes=null,!o)return;const t=o.getParser();!t||(this._isEnabled=t.isEnabled,this._price=t.price,this._boxTypes=t.boxTypes,this._ribbonTypes=t.ribbonTypes,this._stuffTypes=t.giftWrappers,this._defaultStuffTypes=t.giftFurnis)}get isEnabled(){return this._isEnabled}get price(){return this._price}get stuffTypes(){return this._stuffTypes}get boxTypes(){return this._boxTypes}get ribbonTypes(){return this._ribbonTypes}get defaultStuffTypes(){return this._defaultStuffTypes}}class ec{}let de=(()=>{class i{constructor(t,n,r,a){this._settingsService=t,this._notificationService=n,this._soundService=r,this._ngZone=a,this._messages=[],this._component=null,this._giftConfiguratorComponent=null,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._clubGiftsParser=null,this._activePageData=null,this._manuallyCollapsed=[],this._isLoading=!1,this._purse=new ec,this._clubOffers=[],this._vipTemplate=null,this._groupFurniTemplate=null,this._loaded=!1,this._giftWrappingConfiguration=null,this._offersToRoots=null,this.registerMessages()}ngOnDestroy(){this.unregisterMessages(),this._vipTemplate=null,this._groupFurniTemplate=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.Vwr(this.onCatalogClubEvent.bind(this)),new s.SGI(this.onCatalogModeEvent.bind(this)),new s.Agt(this.onCatalogPageEvent.bind(this)),new s.ndO(this.onCatalogPagesEvent.bind(this)),new s.dP_(this.onCatalogPurchaseEvent.bind(this)),new s.Ujm(this.onCatalogPurchaseFailedEvent.bind(this)),new s.OpY(this.onCatalogPurchaseUnavailableEvent.bind(this)),new s.zp3(this.onCatalogSearchEvent.bind(this)),new s._JF(this.onCatalogSoldOutEvent.bind(this)),new s.Ahi(this.onCatalogUpdatedEvent.bind(this)),new s.Uw1(this.onCatalogGroupsEvent.bind(this)),new s.gE4(this.onUserSubscriptionEvent.bind(this)),new s.gE4(this.onUserSubscriptionEvent.bind(this)),new s.PEQ(this.onGiftConfigurationEvent.bind(this)),new s.Ds3(this.onGiftUsernameUnavailableEvent.bind(this)),new s.GTw(this.onCatalogClubGiftsEvent.bind(this)),new s.ts7(this.onCatalogRedeemVoucherError.bind(this)),new s.Euc(this.onCatalogRedeemVoucherOk.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t);s.wjX.instance.communication.connection.send(new s.Q7_)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onCatalogClubEvent(t){if(!t||!t.getParser()||!this._vipTemplate)return;const n=t.getParser().offers;this._clubOffers=n,this._vipTemplate.setOffers(n)}onCatalogClubGiftsEvent(t){if(!t)return;const n=t.getParser();!n||(this._clubGiftsParser=n)}registerVipBuyTemplate(t){this._vipTemplate=t}registerGroupFurniTemplate(t){this._groupFurniTemplate=t}onGiftConfigurationEvent(t){this._giftWrappingConfiguration=new $a(t)}onGiftUsernameUnavailableEvent(t){this._giftConfiguratorComponent&&this._giftConfiguratorComponent.showUsernameNotFoundDialog()}onCatalogModeEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._catalogMode=n.mode)}onCatalogPageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._activePage=n,this._component&&this._component.setupLayout(),this._isLoading=!1})}onCatalogPagesEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._catalogRoot=n.root,this.setOffersToNodes(this._catalogRoot),this._isLoading=!1,this._component&&this._component.selectFirstTab()})}onCatalogPurchaseEvent(t){!t||!t.getParser()||(this._ngZone.run(()=>this._component&&this._component.hidePurchaseConfirmation()),this._soundService.playInternalSample(si.CATALOG_PURCHASE))}onCatalogPurchaseFailedEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.purchaseerror.description."+n.code+"}","${catalog.alert.purchaseerror.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogPurchaseUnavailableEvent(t){t&&t.getParser()}onCatalogSearchEvent(t){if(!(this._activePage instanceof kn&&t))return;const n=t.getParser();!n||!n.offer||this._ngZone.run(()=>this._component&&this._component.selectOffer(n.offer))}onCatalogSoldOutEvent(t){!t||!t.getParser()||this._ngZone.run(()=>{this._notificationService.alert("${catalog.alert.limited_edition_sold_out.message}","${catalog.alert.limited_edition_sold_out.title}"),this._component&&this._component.hidePurchaseConfirmation()})}onCatalogGroupsEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._groupFurniTemplate.groups=n.groups})}onUserSubscriptionEvent(t){if(!t)return;const n=t.getParser();!n||(this._purse.clubDays=Math.max(0,n.daysToPeriodEnd),this._purse.clubPeriods=Math.max(0,n.memberPeriods),this._purse.isVip=n.isVip,this._purse.pastClubDays=n.pastClubDays,this._purse.Str_14389=n.responseType==s.DtR.RESPONSE_TYPE_LOGIN,this._purse.minutesUntilExpiration=n.minutesUntilExpiration)}onCatalogUpdatedEvent(t){!t||!t.getParser()||this._ngZone.run(()=>{this._isLoading=!1,this._catalogMode=-1,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),this._settingsService.catalogVisible&&(this._component.hide(),this._notificationService.alert("${catalog.alert.published.description}","${catalog.alert.published.title}"))})}onCatalogRedeemVoucherError(t){if(!t)return;const n=t.getParser();!n||this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.error.description."+n.errorCode+"}","${catalog.alert.voucherredeem.error.title}")}onCatalogRedeemVoucherOk(t){if(!t)return;t.getParser()&&this._settingsService.catalogVisible&&this._notificationService.alert("${catalog.alert.voucherredeem.ok.description}","${catalog.alert.voucherredeem.ok.title}")}setupCatalog(t){!t||(this._isLoading=!0,this._catalogRoot=null,this._activePage=null,this._activePageData=null,this._component&&this._component.reset(),s.wjX.instance.communication.connection.send(new s.i_x(t)))}requestGroups(){s.wjX.instance.communication.connection.send(new s.gx5)}requestPage(t){!t||!this.canSelectPage(t)||(this._activePageData=t,-1!==t.pageId&&(this._isLoading=!0,this.requestPageData(t.pageId,-1,i.MODE_NORMAL)))}requestPageData(t,n,r){s.wjX.instance.communication.connection.send(new s.tD(t,n,r))}isDescendant(t,n){if(!t||!n)return!1;if(t===n)return!0;if(t.children.length)for(const r of t.children)if(r&&(r===n||this.isDescendant(r,n)))return!0;return!1}getFurnitureDataForProductOffer(t){if(!t)return null;let n=null;switch(t.productType.toUpperCase()){case s.Sbr.FLOOR:n=s.wjX.instance.sessionDataManager.getFloorItemData(t.furniClassId);break;case s.Sbr.WALL:n=s.wjX.instance.sessionDataManager.getWallItemData(t.furniClassId)}return n}getProductDataForLocalization(t){return t?s.wjX.instance.sessionDataManager.getProductData(t):null}getFurnitureDataIconUrl(t){if(!t)return null;const n=s.wjX.instance.roomEngine.roomContentLoader.getAssetUrls(t.className,t.colorIndex.toString(),!0);return n&&n[0]||null}purchase(t,n,r,a=null){!t||!n||!r||this.purchaseById(t.pageId,n.offerId,r,a)}purchaseGiftOffer(t,n,r,a,c,l,g,d,h){s.wjX.instance.communication.connection.send(new s.bMk(t.pageId,n.offerId,r,a,c,l,g,d,h))}purchaseById(t,n,r,a=null){!t||!n||!r||s.wjX.instance.communication.connection.send(new s.BX4(t,n,a,r))}requestOffers(t){s.wjX.instance.communication.connection.send(new s.z$U(t))}requestClubGifts(){s.wjX.instance.communication.connection.send(new s.dX5)}redeemVoucher(t){!t||0===t.trim().length||s.wjX.instance.communication.connection.send(new s.XH$(t))}manuallyCollapsePage(t){const n=this._manuallyCollapsed.indexOf(t);-1===n?this._manuallyCollapsed.push(t):this._manuallyCollapsed.splice(n,1)}canSelectPage(t){return!(!t||!t.visible)}get component(){return this._component}set component(t){this._component=t}set giftConfiguratorComponent(t){this._giftConfiguratorComponent=t}get catalogMode(){return this._catalogMode}get catalogRoot(){return this._catalogRoot}get activePage(){return this._activePage}get activePageData(){return this._activePageData}get manuallyCollapsed(){return this._manuallyCollapsed}get purse(){return this._purse}get vipOffers(){return this._clubOffers}get giftWrapperConfiguration(){return this._giftWrappingConfiguration}getOfferPages(t){if(!this._catalogRoot||!this._offersToRoots)return null;const n=this._offersToRoots.getValue(t);if(!n||!n.length)return null;const r=[];for(const a of n)!a||!a.visible||r.push(a);return r.length?r:null}setOffersToNodes(t){if(t){if(this._offersToRoots||(this._offersToRoots=new s.lzS),t.offerIds&&t.offerIds.length)for(const n of t.offerIds){let r=this._offersToRoots.getValue(n);r||(r=[],this._offersToRoots.add(n,r)),!(r.indexOf(t)>=0)&&r.push(t)}if(t.children&&t.children.length)for(const n of t.children)n&&this.setOffersToNodes(n)}}setSearchPage(t){const n=new s.lzS;for(const r of t){const l=[this.getOfferPages(r.purchaseOfferId),this.getOfferPages(r.rentOfferId)];for(const g of l)if(g&&g.length>0)for(const d of g)n.hasKey(d.pageId)||n.add(d.pageId,d)}this._searchResultsPages=new s.n3O(n.getValues()),this._activePage=new kn(t)}requestOfferData(t){s.wjX.instance.communication.connection.send(new s.BXL(t))}get clubGiftsParser(){return this._clubGiftsParser}hasClubDays(){return!!this._purse&&this._purse.clubDays>0}get searchResults(){return this._searchResultsPages}clearSearchResults(){this._searchResultsPages=null,this.component&&this.component.reselectCurrentTab()}}return i.MODE_NORMAL="NORMAL",i.\u0275fac=function(t){return new(t||i)(e.LFG(w),e.LFG(R),e.LFG(ai),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const tc=["nitro-furniture-image",""];function nc(i,o){if(1&i&&e._UZ(0,"img",1),2&i){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}let Hi=(()=>{class i{constructor(t){this._ngZone=t,this.type="s",this.spriteId=-1,this.direction=0,this.extras="",this.imageUrl=null,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const n=t.type;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const r=t.spriteId;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0);const a=t.direction;a&&a.previousValue!==a.currentValue&&(this.needsUpdate=!0);const c=t.extras;c&&c.previousValue!==c.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}buildImage(){this._ngZone.runOutsideAngular(()=>{this.needsUpdate=!1;let t=null;switch(this.type.toLocaleLowerCase()){case j.FLOOR:t=s.wjX.instance.roomEngine.getFurnitureFloorImage(this.spriteId,new s.UJ(this.direction),64,this,0,this.extras);break;case j.WALL:t=s.wjX.instance.roomEngine.getFurnitureWallImage(this.spriteId,new s.UJ(this.direction),64,this,0,this.extras)}if(t){const r=t.getImage();r&&this._ngZone.run(()=>this.imageUrl=r.src)}})}imageReady(t,n,r){if(n){if(r)return void this._ngZone.run(()=>this.imageUrl=r.src);if(n){const a=s.Oau.generateImageUrl(n);a&&this._ngZone.run(()=>this.imageUrl=a)}}}imageFailed(t){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-furniture-image",""]],inputs:{type:"type",spriteId:"spriteId",direction:"direction",extras:"extras"},features:[e.TTD],attrs:tc,decls:1,vars:1,consts:[["class","d-block","image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",1,"d-block",3,"src"]],template:function(t,n){1&t&&e.YNc(0,nc,1,1,"img",0),2&t&&e.Q6J("ngIf",n.imageUrl)},directives:[u.O5,le],encapsulation:2}),i})();function ic(i,o){if(1&i&&e._UZ(0,"div",17),2&i){const t=e.oxw(3);e.Q6J("headOnly",!0)("figure",t.figure)("direction",2)}}function oc(i,o){1&i&&e._UZ(0,"div",18)}function rc(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.YNc(3,ic,1,3,"div",11),e.YNc(4,oc,1,0,"div",12),e.qZA(),e.TgZ(5,"div",13),e.TgZ(6,"p",14),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",15),e.TgZ(9,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("accept")}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.isAnonymousGift),e.xp6(1),e.Q6J("ngIf",t.isAnonymousGift),e.xp6(3),e.Oqu(t.text),e.xp6(3),e.Oqu(e.lcZ(11,4,"widget.furni.present.open_gift"))}}function sc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).handleButton("furni_place_in_room")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"widget.furni.present.place_in_room")))}function ac(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._UZ(3,"div",19),e.qZA(),e.TgZ(4,"div",13),e.TgZ(5,"p",14),e._uU(6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",15),e.YNc(8,sc,3,3,"button",20),e.TgZ(9,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("furni_place_in_inventory")}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("type",t.type)("spriteId",t.spriteId)("extras",t.extras),e.xp6(3),e.Oqu(t.text),e.xp6(2),e.Q6J("ngIf",!t.isWallItem),e.xp6(2),e.Oqu(e.lcZ(11,6,"widget.furni.present.put_in_inventory"))}}function cc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.ynx(8,7),e.YNc(9,rc,12,6,"ng-container",8),e.YNc(10,ac,12,8,"ng-container",8),e.BQk(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.Dn7(4,4,t.getGiftTitle(),"name",t.senderName)),e.xp6(5),e.Q6J("ngSwitch",t.currentView),e.xp6(1),e.Q6J("ngSwitchCase","open_present"),e.xp6(1),e.Q6J("ngSwitchCase","present_opened")}}let lc=(()=>{class i extends ae{constructor(t,n,r){super(),this._ngZone=t,this._catalogService=n,this._inventoryService=r,this._lastEvent=null,this._needsOpen=!1,this._currentView="",this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._visible=!1,this.onObjectUpdate=this.onObjectUpdate.bind(this),this.onFurniRemoved=this.onFurniRemoved.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(N.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.addEventListener(N.RWPDUE_CONTENTS,this.onObjectUpdate),t.addEventListener(N.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.addEventListener(N.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.addEventListener(N.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.addEventListener(T.FURNI_REMOVED,this.onFurniRemoved),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(N.RWPDUE_PACKAGEINFO,this.onObjectUpdate),t.removeEventListener(N.RWPDUE_CONTENTS,this.onObjectUpdate),t.removeEventListener(N.RWPDUE_CONTENTS_FLOOR,this.onObjectUpdate),t.removeEventListener(N.RWPDUE_CONTENTS_LANDSCAPE,this.onObjectUpdate),t.removeEventListener(N.RWPDUE_CONTENTS_WALLPAPER,this.onObjectUpdate),t.removeEventListener(T.FURNI_REMOVED,this.onFurniRemoved),super.unregisterUpdateEvents(t))}onObjectUpdate(t){!t||(this.reset(),this._ngZone.run(()=>{switch(this._lastEvent=t,t.type){case N.RWPDUE_PACKAGEINFO:this.showOpeningPresent();break;case N.RWPDUE_CONTENTS:case N.RWPDUE_CONTENTS_FLOOR:case N.RWPDUE_CONTENTS_LANDSCAPE:case N.RWPDUE_CONTENTS_WALLPAPER:case N.RWPDUE_CONTENTS_CLUB:this._type=t.itemType,this._spriteId=t.classId,this._isWallItem="i"===t.itemType,this.showOpenPresent()}}))}onFurniRemoved(t){!this._lastEvent||this._lastEvent.objectId===t.id&&this.hide()}hide(){this._visible=!1,this.reset()}reset(){this._type=null,this._spriteId=-1,this._extras=null,this._text=null,this._isWallItem=!1,this._lastEvent=null,this._currentView=null}showOpeningPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=this._lastEvent.giftMessage||"",this._currentView="open_present",this._visible=!0)}showOpenPresent(){!this._lastEvent||this._lastEvent.objectId<0||(this._text=s.wjX.instance.localization.getValueWithParameter("widget.furni.present.message_opened","product",this._lastEvent.giftMessage),this.isSpacesFurniture()&&(this._text=s.wjX.instance.localization.getValueWithParameter("widget.furni.present.spaces.message_opened","product",this._lastEvent.giftMessage)),this._currentView="present_opened",this._visible=!0)}isSpacesFurniture(){if(!this._lastEvent||this._lastEvent.itemType!==j.WALL)return!1;const t=s.wjX.instance.sessionDataManager.getWallItemData(this._lastEvent.classId);if(!t)return!1;const n=t.className;return n==i.FLOOR||n==i.LANDSCAPE||n==i.WALLPAPER}handleButton(t){if(t)switch(t){case"accept":this.acceptAndOpenPresent();break;case"return":break;case"furni_place_in_room":this.placeItemInRoom();break;case"furni_place_in_inventory":this.hide()}}acceptAndOpenPresent(){this.messageListener.processWidgetMessage(new On(On.RWPOM_OPEN_PRESENT,this._lastEvent.objectId)),this.hide()}placeItemInRoom(){const n=this._lastEvent&&this._lastEvent.placedItemId;if(n>0&&(!this._lastEvent||!this._lastEvent.placedInRoom))switch(this._lastEvent&&this._lastEvent.placedItemType){case j.FLOOR:{const a=this._inventoryService.controller.furnitureService.getFurnitureItem(-n);this.canMoveItem(a);break}case j.WALL:{const a=this._inventoryService.controller.furnitureService.getFurnitureItem(n);this.canMoveItem(a);break}}this.hide()}canMoveItem(t){if(!t)return!1;let n=!0;return n=t.category!=M._Str_3683&&t.category!=M._Str_3639&&t.category!=M._Str_3432&&this._inventoryService.controller.furnitureService.startRoomObjectPlacementWithoutRequest(t),n}getGiftTitle(){return this.isAnonymousGift?"widget.furni.present.window.title":"widget.furni.present.window.title_from"}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get currentView(){return this._currentView}get figure(){return this._lastEvent.purchaserFigure}get senderText(){return this._lastEvent.giftMessage}get senderName(){return this._lastEvent.purchaserName}get type(){return this._type}get spriteId(){return this._spriteId}get extras(){return this._extras}get text(){return this._text}get isWallItem(){return this._isWallItem}get isAnonymousGift(){return!this.senderName||0==this.senderName.length}}return i.FLOOR="floor",i.WALLPAPER="wallpaper",i.LANDSCAPE="landscape",i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(de),e.Y36(ge))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-gift-opening-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-gift-opening card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-gift-opening","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"row"],[1,"col-5"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],["class","d-flex justify-content-center align-items-center bg-secondary rounded h-100 overflow-hidden p-3",4,"ngIf"],[1,"col-7","d-flex","justify-content-center","align-items-center"],[1,"h5","m-0","p-0"],[1,"d-flex","align-items-center","mt-2","btn-group"],["type","button",1,"btn","btn-secondary",3,"click"],["nitro-avatar-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"headOnly","figure","direction"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","h-100","overflow-hidden","p-3",3,"type","spriteId","extras"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"]],template:function(t,n){1&t&&e.YNc(0,cc,11,8,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.RF,u.n9,He,Hi],pipes:[m],encapsulation:2}),i})();const uc=["activeView"];function _c(i,o){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function gc(i,o){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,_c,2,1,"div",13),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=o.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Q6J("ngForOf",t.users),e.xp6(2),e.Oqu(t.score)}}function dc(i,o){if(1&i&&(e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"p",8),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",9),e.TgZ(5,"perfect-scrollbar",10),e.TgZ(6,"table",11),e.TgZ(7,"thead"),e.TgZ(8,"tr",12),e.TgZ(9,"th"),e._uU(10,"#"),e.qZA(),e.TgZ(11,"th"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"th"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"tbody"),e.YNc(18,gc,7,3,"tr",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.title),e.xp6(9),e.Oqu(e.lcZ(13,5,"high.score.display.users.header")),e.xp6(3),e.Oqu(e.lcZ(16,7,"high.score.display.score.header")),e.xp6(3),e.Q6J("ngForOf",t.entries),e.xp6(2),e.Oqu(e.lcZ(21,9,"high.score.display.congratulations.footer"))}}const mc=function(i,o){return{top:i,left:o}},pc=function(i,o){return{"pb-1":i,"py-1":o}},hc=function(i,o){return{"fa-chevron-up":i,"fa-chevron-down":o}};function fc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1,2),e.YNc(2,dc,22,11,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"i",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggle()}),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngStyle",e.WLB(4,mc,t.topValue+"px",t.leftValue+"px")),e.xp6(2),e.Q6J("ngIf",!t.toggled),e.xp6(1),e.Q6J("ngClass",e.WLB(7,pc,!t.toggled,t.toggled)),e.xp6(1),e.Q6J("ngClass",e.WLB(10,hc,t.toggled,!t.toggled))}}let vc=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this.view=null,this._visible=!1,this._toggled=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null,this.topValue=0,this.leftValue=0,this.scoreTypes=["perteam","mostwins","classic"],this.clearTypes=["alltime","daily","weekly","monthly"]}open(t,n,r){this._ngZone.run(()=>{this._objectId=t,this._roomId=n,this._stuffData=r,this._visible=!0})}updatePoint(t,n){!this._visible||this._ngZone.run(()=>{const r=this.view&&this.view.nativeElement||null;!r||(this.leftValue=t-r.offsetWidth/2,this.topValue=n-(r.offsetHeight+60))})}openProfile(t){s.wjX.instance.createLinkEvent("profile/name/"+t)}toggle(){this._ngZone.run(()=>{this._toggled=!this._toggled})}hide(){this._ngZone.run(()=>{this._visible=!1,this._objectId=-1,this._roomId=-1,this._stuffData=null})}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get toggled(){return this._toggled}get objectId(){return this._objectId}get roomId(){return this._roomId}get entries(){return this._stuffData?this._stuffData.entries:[]}get clearTypeCode(){return this._stuffData?"high.score.display.cleartype."+this.clearTypes[this._stuffData.clearType]:null}get scoreTypeCode(){return this._stuffData?"high.score.display.scoretype."+this.scoreTypes[this._stuffData.scoreType]:null}get title(){if(!this.scoreTypeCode||!this.clearTypeCode)return null;const t=s.wjX.instance.getLocalization(this.scoreTypeCode),n=s.wjX.instance.getLocalization(this.clearTypeCode);return s.wjX.instance.getLocalizationWithParameters("high.score.display.caption",["scoretype","cleartype"],[t,n])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-highscore-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(uc,5),2&t){let r;e.iGM(r=e.CRH())&&(n.view=r.first)}},features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-widget-highscore context-menu card align-items-center",3,"ngStyle",4,"ngIf"],[1,"nitro-widget-highscore","context-menu","card","align-items-center",3,"ngStyle"],["activeView",""],["class","p-2","style","padding-bottom: 0px !important",4,"ngIf"],[1,"text-center=","px-2",3,"ngClass"],[1,"fas",3,"ngClass","click"],[1,"p-2",2,"padding-bottom","0px !important"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","mb-1",2,"font-size","14px"],[1,"m-0","text-wrap","text-center","w-100"],[1,"w-100"],[2,"min-height","255px","max-height","255px","height","255px","width","282px"],[1,"table","table-sm"],[2,"position","sticky"],[4,"ngFor","ngForOf"],[1,"mt-2","text-center"]],template:function(t,n){1&t&&e.YNc(0,fc,5,13,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,u.PC,u.mk,C.Vv,u.sg],pipes:[m],encapsulation:2}),i})();function Tc(i,o){1&i&&(e.TgZ(0,"div",14),e._uU(1,"\xa0"),e.qZA())}function bc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("close")}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"br"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"mannequin.widget.wronggender")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"generic.ok")))}function Cc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("close")}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"br"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"mannequin.widget.clubnotification")," "),e.xp6(3),e.Oqu(e.lcZ(5,4,"generic.ok")))}function Ec(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"i"),e._uU(2),e.qZA(),e._UZ(3,"br"),e._UZ(4,"br"),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("wear")}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"br"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.outfitName),e.xp6(3),e.hij(" ",e.lcZ(6,3,"mannequin.widget.weartext")," "),e.xp6(3),e.Oqu(e.lcZ(9,5,"mannequin.widget.wear"))}}function Sc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"input",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).outfitName=r})("keyup.enter",function(){return e.CHM(t),e.oxw(2).saveName()}),e.qZA(),e._UZ(2,"br"),e.TgZ(3,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("re_style")}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("wear")}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"br"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.outfitName),e.xp6(3),e.Oqu(e.lcZ(5,3,"mannequin.widget.style")),e.xp6(3),e.Oqu(e.lcZ(8,5,"mannequin.widget.wear"))}}function Ac(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"br"),e.TgZ(4,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("save_outfit")}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).handleButton("main")}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"br"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,3,"mannequin.widget.savetext"),""),e.xp6(4),e.Oqu(e.lcZ(6,5,"mannequin.widget.save")),e.xp6(3),e.Oqu(e.lcZ(9,7,"mannequin.widget.back")))}function wc(i,o){if(1&i&&(e.TgZ(0,"div",20),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.view," ")}}function xc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e._uU(11,"\xa0"),e.qZA(),e.YNc(12,Tc,2,0,"div",10),e.qZA(),e.qZA(),e.ynx(13,11),e.YNc(14,bc,7,6,"div",12),e.YNc(15,Cc,7,6,"div",12),e.YNc(16,Ec,11,7,"div",12),e.YNc(17,Sc,10,7,"div",12),e.YNc(18,Ac,11,9,"div",12),e.YNc(19,wc,2,1,"div",13),e.BQk(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,10,"mannequin.widget.title")),e.xp6(7),e.Q6J("direction",2)("figure",t.figure),e.xp6(2),e.Q6J("ngIf",t.hasHabboClub),e.xp6(1),e.Q6J("ngSwitch",t.view),e.xp6(1),e.Q6J("ngSwitchCase","wrong-gender"),e.xp6(1),e.Q6J("ngSwitchCase","no-club"),e.xp6(1),e.Q6J("ngSwitchCase","peer-main"),e.xp6(1),e.Q6J("ngSwitchCase","main"),e.xp6(1),e.Q6J("ngSwitchCase","save")}}class S extends ae{constructor(o){super(),this._ngZone=o,this._visible=!1,this.hasHabboClub=!1}open(o,t,n,r){this._furniId=o,this._figure=t,this._gender=n,this.outfitName=r;const a=this.handler.container.roomSession,c=this.handler.container.sessionDataManager,l=a.isRoomOwner||a.controllerLevel>=s.A5x.GUEST||c.isGodMode,g=s.wjX.instance.avatar,d=g.createFigureContainer(t);this._mannequinClubLevel=g.getFigureClubLevel(d,n,S.parts);const h=this.getViewType(l,c.gender,c.clubLevel,n,this._mannequinClubLevel);this.setView(h)}get handler(){return this.widgetHandler}hide(){this._visible=!1}get visible(){return this._visible}set visible(o){this._visible=o}getViewType(o,t,n,r,a){return o?S.EditorView:t.toLowerCase()!=r.toLowerCase()?S.WrongGender:n<a?S.WrongClubLevel:S.UseMannequin}setView(o){const r=this.handler.container.avatarRenderManager;this._view=this.createView(o);let a=null;switch(o){case S.PreviewAndSave:case S.WrongClubLevel:case S.WrongGender:a=r.createFigureContainer(this._figure),this.removeSectionsFromAvatar(a),this._renderedFigure=a.getFigureString();break;case S.UseMannequin:this._renderedFigure=this.mergeFigures(this._figure);break;case S.EditorView:a=r.createFigureContainer(this._figure),this.removeSectionsFromAvatar(a),this._renderedFigure=a.getFigureString()}this.showOrHideHabboClubLevel(this._mannequinClubLevel),this._ngZone.run(()=>{this._visible=!0})}saveName(){this.changeOutfitName()}removeSectionsFromAvatar(o){for(const t of o.getPartTypeIds())-1==S.parts.indexOf(t)&&o.removePart(t);o.updatePart(S._Str_10597[0],S._Str_10597[1],S._Str_10597[2])}mergeFigures(o){const t=new s.KRJ(this.widgetHandler.container.sessionDataManager.figure),n=new s.KRJ(o);for(const r of S.parts)t.removePart(r);for(const r of n.getPartTypeIds())t.updatePart(r,n.getPartSetId(r),n.getPartColorIds(r));return t.getFigureString()}createView(o){switch(o){case S.EditorView:return"main";case S.PreviewAndSave:return"save";case S.UseMannequin:return"peer-main";case S.WrongClubLevel:return"no-club";case S.WrongGender:return"wrong-gender"}return""}showOrHideHabboClubLevel(o){switch(o){case s.xJA.NO_CLUB:this.hasHabboClub=!1;break;case s.xJA.CLUB:case s.xJA.VIP:this.hasHabboClub=!0}}handleButton(o){switch(o){case"wear":this.wearOutfit();break;case"re_style":this.changeOutfitName(),this.setView(S.PreviewAndSave);break;case"save_outfit":this.handler.container.connection.send(new s.qmv(this._furniId)),this._visible=!1;break;case"main":this.setView(S.EditorView);break;case"close":this._visible=!1}}wearOutfit(){const o=this.widgetHandler.container.sessionDataManager;o.clubLevel<this._mannequinClubLevel?this.setView(S.WrongClubLevel):o.gender.toLowerCase()==this._gender.toLowerCase()?(this.handler.container.connection.send(new s.xcK(this._furniId)),this._visible=!1):this.setView(S.WrongGender)}changeOutfitName(){this.handler.container.connection.send(new s.EFS(this._furniId,this.outfitName))}get figure(){return this._renderedFigure}get view(){return this._view}}S.EditorView=0,S.PreviewAndSave=1,S.UseMannequin=2,S.WrongClubLevel=3,S.WrongGender=4,S.parts=[s.Bnr.CHEST_ACCESSORY,s.Bnr.COAT_CHEST,s.Bnr.CHEST,s.Bnr.LEGS,s.Bnr.SHOES,s.Bnr.WAIST_ACCESSORY],S._Str_9071=0,S._Str_8000=1,S._Str_8218=2,S._Str_10597=["hd",99999,[99998]],S.\u0275fac=function(o){return new(o||S)(e.Y36(e.R0b))},S.\u0275cmp=e.Xpm({type:S,selectors:[["nitro-room-furniture-mannequin-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-mannequin card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-furniture-mannequin","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","align-items-center","justify-content-between","pt-3","px-3","w-100"],[1,"m-0"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"row"],[1,"col-4"],[1,"mannequin-background"],["nitro-avatar-image","",1,"mannequin-figure",3,"direction","figure"],["class","hc-icon",4,"ngIf"],[3,"ngSwitch"],["class","col-8",4,"ngSwitchCase"],["class","list-group-item",4,"ngSwitchDefault"],[1,"hc-icon"],[1,"col-8"],["type","button",1,"btn","btn-primary",3,"click"],["type","text",3,"ngModel","ngModelChange","keyup.enter"],["type","button",1,"btn","btn-primary",2,"width","177px","margin-top","10px",3,"click"],["type","button",1,"btn","btn-primary",2,"margin-top","10px",3,"click"],[1,"list-group-item"]],template:function(o,t){1&o&&e.YNc(0,xc,20,12,"div",0),2&o&&e.Q6J("ngIf",t.visible)},directives:[u.O5,b,v,He,u.RF,u.n9,u.ED,_.Fj,_.JJ,_.On],pipes:[m],encapsulation:2});const Zc=function(i){return{"background-color":i}};function Ic(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).processAction(a)}),e.qZA()}2&i&&e.Q6J("ngStyle",e.VKq(1,Zc,"#"+o.$implicit))}function yc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).processAction("delete")}),e._UZ(2,"i",10),e.qZA(),e.YNc(3,Ic,1,3,"button",11),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.AVAILABLE_COLORS)}}const Rc=function(i,o){return{"background-color":i,color:o}};function Mc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.YNc(2,yc,4,1,"div",3),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(4,"i",5),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"textarea",7),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().text=r}),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngStyle",e.WLB(5,Rc,"#"+t.colorHex,t.colorHex)),e.xp6(2),e.Q6J("ngIf",t.isController),e.xp6(4),e.Q6J("disabled",!t.isController)("ngModel",t.text),e.xp6(1),e.Oqu(t.text)}}let Oc=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this.AVAILABLE_COLORS=["9CCEFF","FF9CFF","9CFF9C","FFFF33"],this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1,this.onRoomWidgetStickieDataUpdateEvent=this.onRoomWidgetStickieDataUpdateEvent.bind(this)}dispose(){this.updateStickie(),super.dispose()}registerUpdateEvents(t){!t||(t.addEventListener(Un.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(Un.RWSDUE_STICKIE_DATA,this.onRoomWidgetStickieDataUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetStickieDataUpdateEvent(t){!t||this._ngZone.run(()=>{this._objectId=t._Str_1577,this._colorHex=t._Str_10471,this._text=t.text,this._isController=t.controller,this._visible=!0})}processAction(t){if(t&&""!==t){if(this.AVAILABLE_COLORS.indexOf(t)>=0)return this._colorHex=t,void this.updateStickie();switch(t){case"delete":return void this.deleteStickie()}}}hide(){this.updateStickie(),this._objectId=-1,this._colorHex=null,this._text=null,this._isController=!1,this._visible=!1}updateStickie(){-1!==this._objectId&&this.messageListener.processWidgetMessage(new Pt(Pt.SEND_UPDATE,this._objectId,this._text,this._colorHex))}deleteStickie(){-1!==this._objectId&&(this.messageListener.processWidgetMessage(new Pt(Pt.SEND_DELETE,this._objectId)),this.hide())}get visible(){return this._visible}set visible(t){this._visible=t}get handler(){return this.widgetHandler}get objectId(){return this._objectId}get colorHex(){return this._colorHex}get text(){return this._text}set text(t){this._text=t}get isController(){return this._isController}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-sticky"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle",4,"ngIf"],[1,"nitro-furniture-stickie",3,"bringToTop","draggable","ngStyle"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","py-1","px-2"],["class"," d-flex align-items-center",4,"ngIf"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","p-1"],["name","sticky-text","rows","11","maxlength","500",1,"sticky-text",3,"disabled","ngModel","ngModelChange"],[1,"d-flex","align-items-center"],["type","button",1,"sticky-trash","mr-2",3,"click"],[1,"fas","fa-trash-alt"],["type","button","class","sticky-button rounded p-2 mr-2",3,"ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"sticky-button","rounded","p-2","mr-2",3,"ngStyle","click"]],template:function(t,n){1&t&&e.YNc(0,Mc,8,8,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.PC,_.Fj,_.nD,_.JJ,_.On,u.sg],encapsulation:2}),i})();function Uc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"p",7),e._uU(9),e.qZA(),e.TgZ(10,"div",8),e._UZ(11,"hr",9),e.TgZ(12,"div",10),e.TgZ(13,"p",11),e._uU(14),e.qZA(),e.TgZ(15,"p",11),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Gre("nitro-furniture-trophy card trophy-",t.color,""),e.xp6(3),e.Oqu(e.lcZ(4,7,"widget.furni.trophy.title")),e.xp6(6),e.Oqu(t.message),e.xp6(5),e.Oqu(t.ownerName),e.xp6(2),e.Oqu(t.date)}}let Nc=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._color=null,this._ownerName=null,this._date=null,this._message=null,this._viewType=null,this.onRoomWidgetTrophyUpdateEvent=this.onRoomWidgetTrophyUpdateEvent.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(Nn.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(Nn.TROPHY_DATA,this.onRoomWidgetTrophyUpdateEvent),super.unregisterUpdateEvents(t))}onRoomWidgetTrophyUpdateEvent(t){!t||this._ngZone.run(()=>{this._visible=!0,this._color=t.color-1,this._ownerName=t.name,this._date=t.date,this._message=t.message,this._viewType=t.viewType,(this._color<0||this._color>2)&&(this._color=0)})}hide(){this._visible=!1}get handler(){return this.widgetHandler}get visible(){return this._visible}set visible(t){this._visible=t}get color(){return this._color}get ownerName(){return this._ownerName}get date(){return this._date}get message(){return this._message}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-furniture-trophy-compontent"]],features:[e.qOj],decls:1,vars:1,consts:[["noMemory","true",3,"bringToTop","draggable","class",4,"ngIf"],["noMemory","true",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3","d-flex","flex-column"],[1,"p-0","trophy-message"],[1,"mt-auto"],[1,"mb-1"],[1,"d-flex","justify-content-between","align-items-center"],[1,"p-0","mb-0"]],template:function(t,n){1&t&&e.YNc(0,Uc,17,9,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v],pipes:[m],encapsulation:2}),i})();class qc{constructor(){this._id=0,this._category=0,this._name="",this._description="",this._imageUrl="",this._purchaseOfferId=-1,this._extraParam="",this._stuffData=null,this._ownerId=0,this._ownerName="",this._rentOfferId=-1,this._availableForBuildersClub=!1}get id(){return this._id}set id(o){this._id=o}get category(){return this._category}set category(o){this._category=o}get name(){return this._name}set name(o){this._name=o}get description(){return this._description}set description(o){this._description=o}get imageUrl(){return this._imageUrl}set imageUrl(o){this._imageUrl=o}get purchaseOfferId(){return this._purchaseOfferId}set purchaseOfferId(o){this._purchaseOfferId=o}get extraParam(){return this._extraParam}set extraParam(o){this._extraParam=o}get stuffData(){return this._stuffData}set stuffData(o){this._stuffData=o}set groupId(o){this._groupId=o}get groupId(){return this._groupId}get ownerId(){return this._ownerId}set ownerId(o){this._ownerId=o}get ownerName(){return this._ownerName}set ownerName(o){this._ownerName=o}get rentOfferId(){return this._rentOfferId}set rentOfferId(o){this._rentOfferId=o}get availableForBuildersClub(){return this._availableForBuildersClub}set availableForBuildersClub(o){this._availableForBuildersClub=o}populate(o){this.id=o.id,this.category=o.category,this.name=o.name,this.description=o.description,this.imageUrl=o.image&&o.image.src||null,this.purchaseOfferId=o.purchaseOfferId,this.extraParam=o.extraParam,this.stuffData=o.stuffData,this.groupId=o.groupId,this.ownerName=o.ownerName,this.ownerId=o.ownerId,this.rentOfferId=o.rentOfferId,this.availableForBuildersClub=o.availableForBuildersClub}}class Lc{constructor(){this._name="",this._petId=-1}get name(){return this._name}get id(){return this._petId}get type(){return this._type}get race(){return this._race}get petFigureData(){return this._petFigureData}get _Str_5175(){return this._isOwnPet}get _Str_2481(){return this._ownerId}get ownerName(){return this._ownerName}get _Str_5114(){return this._canRemovePet}get age(){return this._age}get unknownRarityLevel(){return this._breedId}get _Str_3307(){return this._skillTresholds}get publiclyRideable(){return this._accessRights}get level(){return this._level}get _Str_4276(){return this._levelMax}get experience(){return this._experience}get _Str_4095(){return this._experienceMax}get energy(){return this._energy}get _Str_3966(){return this._energyMax}get happyness(){return this._nutrition}get _Str_4448(){return this._nutritionMax}get _Str_6943(){return this._petRespect}get _Str_2707(){return this._roomIndex}get rarityLevel(){return this._rarityLevel}get maximumTimeToLive(){return this._maxWellBeingSeconds}get remainingTimeToLive(){return this._remainingWellBeingSeconds}get remainingGrowTime(){return this._remainingGrowingSeconds}get publiclyBreedable(){return this._hasBreedingPermission}populate(o){this._name=o.name,this._petId=o.id,this._type=o._Str_4355,this._race=o._Str_14767,this._petFigureData=o.petFigureData,this._isOwnPet=o._Str_5175,this._ownerId=o.ownerId,this._ownerName=o.ownerName,this._canRemovePet=o._Str_5114,this._level=o.level,this._levelMax=o.maximumLevel,this._experience=o.experience,this._experienceMax=o.levelExperienceGoal,this._energy=o.energy,this._energyMax=o.maximumEnergy,this._nutrition=o.happyness,this._nutritionMax=o.maximumHappyness,this._petRespect=o.respect,this._roomIndex=o._Str_2707,this._age=o.age,this._breedId=o.unknownRarityLevel,this._skillTresholds=o._Str_3307,this._accessRights=o.publiclyRideable,this._maxWellBeingSeconds=o.maximumTimeToLive,this._remainingWellBeingSeconds=o.remainingTimeToLive,this._remainingGrowingSeconds=o.remainingGrowTime,this._rarityLevel=o.rarityLevel,this._hasBreedingPermission=o.publiclyBreedable}}class kc{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._carryItem=0,this._roomIndex=-1,this._ownerId=-1,this._ownerName="",this._amIOwner=!1,this._amIAnyRoomController=!1,this._botSkills=[]}get id(){return this._id}set id(o){this._id=o}get name(){return this._name}set name(o){this._name=o}get figure(){return this._figure}set figure(o){this._figure=o}get motto(){return this._motto}set motto(o){this._motto=o}get badges(){return this._badges.slice()}set badges(o){this._badges=o}get carryItem(){return this._carryItem}set carryItem(o){this._carryItem=o}get roomIndex(){return this._roomIndex}set roomIndex(o){this._roomIndex=o}get ownerId(){return this._ownerId}set ownerId(o){this._ownerId=o}get ownerName(){return this._ownerName}set ownerName(o){this._ownerName=o}get amIOwner(){return this._amIOwner}set amIOwner(o){this._amIOwner=o}get amIAnyRoomController(){return this._amIAnyRoomController}set amIAnyRoomController(o){this._amIAnyRoomController=o}get botSkills(){return this._botSkills.slice()}set botSkills(o){this._botSkills=o}populate(o){this.id=o.id,this.name=o.name,this.figure=o.figure,this.motto=o.motto,this.badges=o.badges,this.carryItem=o.carryId,this.roomIndex=o.roomIndex,this.ownerId=o.ownerId,this.ownerName=o.ownerName,this.amIOwner=o._Str_3246,this.amIAnyRoomController=o._Str_3529,this.botSkills=o.botSkills}}class Fc{constructor(){this._id=0,this._name="",this._figure="",this._motto="",this._badges=[],this._groupId=0,this._groupName="",this._groupBadgeId="",this._activityPoints=0,this._respectLeft=0,this._petRespectLeft=0,this._carryItem=0,this._roomIndex=-1,this._type=""}get id(){return this._id}set id(o){this._id=o}get name(){return this._name}set name(o){this._name=o}get figure(){return this._figure}set figure(o){this._figure=o}get motto(){return this._motto}set motto(o){this._motto=o}get badges(){return this._badges.slice()}set badges(o){this._badges=o}get groupId(){return this._groupId}set groupId(o){this._groupId=o}get groupName(){return this._groupName}set groupName(o){this._groupName=o}get groupBadgeId(){return this._groupBadgeId}set groupBadgeId(o){this._groupBadgeId=o}get activityPoints(){return this._activityPoints}set activityPoints(o){this._activityPoints=o}get respectLeft(){return this._respectLeft}set respectLeft(o){this._respectLeft=o}get petRespectLeft(){return this._petRespectLeft}set petRespectLeft(o){this._petRespectLeft=o}get carryItem(){return this._carryItem}set carryItem(o){this._carryItem=o}get roomIndex(){return this._roomIndex}set roomIndex(o){this._roomIndex=o}get type(){return this._type}set type(o){this._type=o}getIsBot(){return this.type===I.BOT}populate(o){this.id=o.webID,this.name=o.name,this.figure=o.figure,this.motto=o.motto,this.badges=o.badges,this.groupId=o.groupId,this.groupName=o.groupName,this.groupBadgeId=o.groupBadgeId,this.activityPoints=o.activityPoints,this.respectLeft=o.respectLeft,this.petRespectLeft=0,this.carryItem=o.carryId,this.roomIndex=o.roomIndex,this.type=o.type}}let It=(()=>{class i{}return i.USER=1,i.BOT=2,i.RENTABLE_BOT=3,i.PET=4,i.FURNI=5,i})();class bn{constructor(){this.widget=null}hide(){this.widget.close()}update(o){}get type(){return-1}}let cn=(()=>{class i{constructor(t){this.elementRef=t,this.figure="",this.gender="M",this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._avatarImageCache=new s.lzS,this.avatarUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildAvatar()}ngOnChanges(t){const n=t.figure;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const r=t.gender;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0);const a=t.headOnly;a&&a.previousValue!==a.currentValue&&(this.needsUpdate=!0);const c=t.direction;c&&c.previousValue!==c.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildAvatar()}dispose(){}resetFigure(t){this._avatarImageCache.remove(this.getAvatarBuildString()),this.buildAvatar()}buildAvatar(){this.needsUpdate=!1;const t=this.getUserImageUrl();if(!t||!t.length)return;const n=this.elementRef.nativeElement;if(n)if(this.asBackground)n.style.backgroundImage=`url(${t})`,n.style.backgroundPositionY="-31px";else{const r=n.getElementsByClassName("avatar-image");let a=r.length;for(;a<0;)r[a].remove(),a--;const c=document.createElement("img");c.className=`avatar-image scale-${this.scale}`,c.src=t}}getUserImageUrl(){const t=this.getAvatarBuildString();let n=this._avatarImageCache.getValue(t);if(!n){const r=s.wjX.instance.avatar.createAvatarImage(this.figure,s.bLn.LARGE,this.gender,this,null);if(r){let a=s.GXC.FULL;this.headOnly&&(a=s.GXC.HEAD),r.setDirection(a,this.direction);const c=r.getCroppedImage(a);c&&(n=c.src),r.dispose()}n&&n.length&&this.putInCache(t,n)}return n}putInCache(t,n){this._avatarImageCache.length===i.MAX_CACHE_SIZE&&this._avatarImageCache.remove(this._avatarImageCache.getKey(0)),this._avatarImageCache.add(t,n)}getAvatarBuildString(){return`${this.figure}:${this.gender}:${this.direction}:${this.headOnly}`}}return i.MAX_CACHE_SIZE=10,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","avatar-image",""]],inputs:{figure:"figure",gender:"gender",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[e.TTD]}),i})(),Le=(()=>{class i{constructor(){this.badge="",this.isGroup=!1,this.hover=!0}get badgeUrl(){return this.isGroup?s.wjX.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):s.wjX.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-badge"]],inputs:{badge:"badge",isGroup:"isGroup",hover:"hover"},decls:1,vars:1,consts:[["image-placeholder","",3,"src"]],template:function(t,n){1&t&&e._UZ(0,"img",0),2&t&&e.Q6J("src",n.badgeUrl,e.LSH)},directives:[le],encapsulation:2}),i})();function Dc(i,o){if(1&i&&e._UZ(0,"nitro-badge",17),2&i){const t=e.oxw().$implicit;e.Q6J("badge",t)}}function Pc(i,o){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,Dc,1,1,"nitro-badge",16),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",""!==t)}}function Jc(i,o){if(1&i&&(e.TgZ(0,"div",18),e.TgZ(1,"span",19),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userData.motto)}}function jc(i,o){if(1&i&&(e.TgZ(0,"p",20),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.carryText)}}let Vc=(()=>{class i extends bn{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){!t||t.carryId>0&&(this.carryText=s.wjX.instance.getLocalizationWithParameter("infostand.text.handitem","item",s.wjX.instance.getLocalization("handitem"+t.carryId)))}get type(){return It.BOT}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:17,vars:7,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","mt-2"],["class","motto-container",4,"ngIf"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"div",8),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.YNc(12,Pc,2,1,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.YNc(14,Jc,3,1,"div",13),e.TgZ(15,"div",12),e.YNc(16,jc,2,1,"p",14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.userData.name),e.xp6(6),e.Q6J("figure",n.userData.figure)("direction",4)("asBackground",!0),e.xp6(3),e.Q6J("ngForOf",n.userData.badges),e.xp6(2),e.Q6J("ngIf",""!==n.userData.motto),e.xp6(2),e.Q6J("ngIf",n.userData.carryItem>0))},directives:[cn,u.sg,u.O5,Le],encapsulation:2}),i})(),Vt=(()=>{class i{transform(t){const n=t.toString().split("");let r="";for(let a=0;a<n.length;a++)r=r+'<i class="unique-number n-'+n[a]+'"></i>';return r}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"uniqueNumber",type:i,pure:!0}),i})();function Bc(i,o){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"div",20),e.ALo(2,"uniqueNumber"),e._UZ(3,"div",20),e.ALo(4,"uniqueNumber"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.furniData.stuffData.uniqueNumber),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.lcZ(4,4,t.furniData.stuffData.uniqueSeries),e.oJD)}}function Gc(i,o){if(1&i&&e._UZ(0,"img",21),2&i){const t=e.oxw();e.Q6J("src",t.furniData.imageUrl,e.LSH)}}const Hc=function(){return["hits","target"]},Wc=function(i,o){return[i,o]};function Qc(i,o){if(1&i&&(e.TgZ(0,"p",12),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.Dn7(2,1,"infostand.crackable_furni.hits_remaining",e.DdM(5,Hc),e.WLB(6,Wc,t.crackableHits,t.crackableTarget)))}}function Xc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().openFurniGroupInfo()}),e._UZ(1,"nitro-badge",23),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("badge",t.getStuffDataAsStringDataType.getValue(2))("isGroup",!0)}}function Yc(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",26),e._uU(2),e.qZA(),e.TgZ(3,"input",27),e.NdJ("ngModelChange",function(r){const c=e.CHM(t).index;return e.oxw(2).furniSettingsValues[c]=r}),e.qZA(),e.BQk()}if(2&i){const t=o.index,n=e.oxw(2);e.xp6(2),e.Oqu(n.furniSettingsKeys[t]),e.xp6(1),e.Q6J("ngModel",n.furniSettingsValues[t])}}function zc(i,o){if(1&i&&(e.TgZ(0,"div",24),e.YNc(1,Yc,4,2,"ng-container",25),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.furniSettingsKeys)}}function Kc(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().processButtonAction("move")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"infostand.button.move")))}function $c(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().processButtonAction("rotate")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"infostand.button.rotate")))}function el(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().processButtonAction("pickup")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,1===t.pickupMode?"infostand.button.eject":"infostand.button.pickup"))}}function tl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().processButtonAction("use")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"infostand.button.use")))}function nl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().processButtonAction("save_branding_configuration")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"save")))}let il=(()=>{class i extends bn{constructor(){super(...arguments),this.furniData=null,this.pickupMode=0,this.canMove=!1,this.canRotate=!1,this.canUse=!1,this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0}update(t){this.furniSettingsKeys=[],this.furniSettingsValues=[],this.isCrackable=!1,this.crackableHits=0,this.crackableTarget=0;let n=!1,r=!1,a=!1,c=!1;const l=t.roomControllerLevel>=s.A5x.GUEST;if((l||t.isOwner||t.isRoomOwner||t.isAnyRoomOwner)&&(n=!0,r=!t.isWallItem,t.roomControllerLevel>=s.A5x.MODERATOR&&(c=!0)),(t.usagePolicy===s.Ek9.EVERYBODY||t.usagePolicy===s.Ek9.CONTROLLER&&l||t.extraParam===s.f0R.JUKEBOX&&l||t.extraParam==s.f0R.USABLE_PRODUCT&&l)&&(a=!0),t.extraParam){if(t.extraParam===s.f0R.CRACKABLE_FURNI){const g=t.stuffData;a=!0,this.isCrackable=!0,this.crackableHits=g.hits,this.crackableTarget=g.target}if(c){const g=t.extraParam.substr(s.f0R.BRANDING_OPTIONS.length);if(g){const d=g.split("\t");for(const h of d){const f=h.split("=");f&&2===f.length&&(this.furniSettingsKeys.push(f[0]),this.furniSettingsValues.push(f[1]))}}}}this.canMove=n,this.canRotate=r,this.canUse=a,this.togglePickupButton(t)}togglePickupButton(t){!t||(this.pickupMode=i.PICKUP_MODE_NONE,t.isOwner||t.isAnyRoomOwner?this.pickupMode=i.PICKUP_MODE_FULL:(t.isRoomOwner||t.roomControllerLevel>=s.A5x.GUILD_ADMIN)&&(this.pickupMode=i.PICKUP_MODE_EJECT),t.isStickie&&(this.pickupMode=i.PICKUP_MODE_NONE))}processButtonAction(t){if(!t||""===t)return;let n=null,r=null;switch(t){case"move":n=se.RWFAM_MOVE;break;case"rotate":n=se.RWFUAM_ROTATE;break;case"pickup":n=this.pickupMode===i.PICKUP_MODE_FULL?se.RWFAM_PICKUP:se.RWFAM_EJECT;break;case"use":n=se.RWFAM_USE;break;case"save_branding_configuration":n=se.RWFAM_SAVE_STUFF_DATA,r=this.getSettingsAsString()}!n||this.widget.messageListener.processWidgetMessage(new se(n,this.furniData.id,this.furniData.category,this.furniData.purchaseOfferId,r))}getSettingsAsString(){if(!this.furniSettingsKeys.length||!this.furniSettingsValues.length)return"";let t="",n=0;for(;n<this.furniSettingsKeys.length;)t=t+(this.furniSettingsKeys[n]+"=")+this.furniSettingsValues[n]+"\t",n++;return t}openFurniGroupInfo(){!this.furniData.groupId||s.wjX.instance.createLinkEvent("groups/info/"+this.furniData.groupId)}get getStuffDataAsStringDataType(){return this.furniData?this.furniData.stuffData:null}get type(){return It.FURNI}}return i.PICKUP_MODE_NONE=0,i.PICKUP_MODE_EJECT=1,i.PICKUP_MODE_FULL=2,i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:28,vars:21,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"w-100",2,"min-height","50px"],["class","unique-counter-compact",4,"ngIf"],["class","d-block mx-auto","image-placeholder","",3,"src",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0","text-wrap"],[1,"badge","badge-secondary","mt-2","mb-0","text-wrap"],["class","badge badge-secondary mt-2 mb-0 text-wrap",4,"ngIf"],["class","badge badge-secondary mt-2 mb-0",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"button-container","btn-group","mt-2"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"unique-counter-compact"],[3,"innerHTML"],["image-placeholder","",1,"d-block","mx-auto",3,"src"],[1,"badge","badge-secondary","mt-2","mb-0",3,"click"],[3,"badge","isGroup"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"badge","badge-secondary","mb-2"],["type","text",1,"form-control","rounded","mb-2",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h6",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.hide()}),e._UZ(7,"i",5),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.YNc(10,Bc,5,6,"div",8),e.YNc(11,Gc,1,1,"img",9),e.qZA(),e.TgZ(12,"div",10),e.TgZ(13,"p",11),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,Qc,3,9,"p",13),e.YNc(20,Xc,2,2,"div",14),e.qZA(),e.YNc(21,zc,2,1,"div",15),e.qZA(),e.qZA(),e.TgZ(22,"div",16),e.YNc(23,Kc,3,3,"button",17),e.YNc(24,$c,3,3,"button",17),e.YNc(25,el,3,3,"button",17),e.YNc(26,tl,3,3,"button",17),e.YNc(27,nl,3,3,"button",18),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,13,n.furniData.name)),e.xp6(6),e.Q6J("ngIf",n.furniData.stuffData.isUnique),e.xp6(1),e.Q6J("ngIf",n.furniData.imageUrl),e.xp6(3),e.Oqu(e.lcZ(15,15,n.furniData.description)),e.xp6(3),e.Oqu(e.Dn7(18,17,"furni.owner","name",n.furniData.ownerName)),e.xp6(2),e.Q6J("ngIf",n.isCrackable),e.xp6(1),e.Q6J("ngIf",n.furniData.groupId),e.xp6(1),e.Q6J("ngIf",n.furniSettingsKeys.length&&n.furniSettingsValues.length&&n.furniSettingsKeys.length===n.furniSettingsValues.length),e.xp6(2),e.Q6J("ngIf",n.canMove),e.xp6(1),e.Q6J("ngIf",n.canRotate),e.xp6(1),e.Q6J("ngIf",0!==n.pickupMode),e.xp6(1),e.Q6J("ngIf",n.canUse),e.xp6(1),e.Q6J("ngIf",n.furniSettingsKeys.length&&n.furniSettingsValues.length&&n.furniSettingsKeys.length===n.furniSettingsValues.length))},directives:[u.O5,le,Le,u.sg,_.Fj,_.JJ,_.On],pipes:[m,Vt],encapsulation:2}),i})(),Wi=(()=>{class i{constructor(t,n){this._elementRef=t,this._ngZone=n,this.petFigureData=null,this.headOnly=!1,this.direction=0,this.scale=1,this.asBackground=!1,this._petImageCache=new s.lzS,this.petUrl=null,this.disposed=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildImage()}ngOnChanges(t){const n=t.petFigureData;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const r=t.headOnly;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0);const a=t.direction;a&&a.previousValue!==a.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildImage()}dispose(){}buildImage(){this.needsUpdate=!1;const t=this.getPetImageUrl();if(!t||!t.length)return;const n=this._elementRef.nativeElement;if(n)if(this.asBackground)n.style.backgroundImage=`url(${t})`;else{const r=n.getElementsByClassName("pet-image");let a=r.length;for(;a<0;)r[a].remove(),a--;const c=document.createElement("img");c.className=`pet-image scale-${this.scale}`,c.src=t}}getPetImageUrl(){const t=this.getPetBuildString();let n=this._petImageCache.getValue(t);if(n&&n.length)return n;let r=null;return this._ngZone.runOutsideAngular(()=>{if(r=s.wjX.instance.roomEngine.getRoomObjectPetImage(this.petFigureData.typeId,this.petFigureData.paletteId,this.petFigureData.color,new s.UJ(45*this.direction),64,this,this.headOnly,0,this.petFigureData.customParts,"std"),r){const c=r.getImage();c&&(n=c.src)}}),n?(this.putInCache(t,n),n):null}imageReady(t,n,r){let a=null;r?a=r.src:n&&(a=s.Oau.generateImageUrl(n)),a&&a.length&&this.putInCache(this.getPetBuildString(),a),this.buildImage()}imageFailed(t){}putInCache(t,n){this._petImageCache.length===i.MAX_CACHE_SIZE&&this._petImageCache.remove(this._petImageCache.getKey(0)),this._petImageCache.remove(t),this._petImageCache.add(t,n)}getPetBuildString(){return`${this.petFigureData}:${this.headOnly}:${this.direction}`}}return i.MAX_CACHE_SIZE=10,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b))},i.\u0275dir=e.lG2({type:i,selectors:[["","pet-image",""]],inputs:{petFigureData:"petFigureData",headOnly:"headOnly",direction:"direction",scale:"scale",asBackground:"asBackground"},features:[e.TTD]}),i})(),ol=(()=>{class i extends bn{processButtonAction(t){}get type(){return It.PET}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:20,vars:15,consts:[[1,"d-flex","flex-column","align-items-end"],[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","col-5","justify-content-center","align-items-center","bg-secondary","rounded","overflow-hidden"],["pet-image","",1,"pet-image",3,"petFigureData","direction","asBackground"],[1,"button-container","btn-group","mt-2"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h6",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"div",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"button",10),e.NdJ("click",function(){return n.processButtonAction("buyfood")}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.processButtonAction("respect")}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return n.processButtonAction("kick")}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.petData.name),e.xp6(5),e.Q6J("petFigureData",n.petData.petFigureData)("direction",2)("asBackground",!0),e.xp6(3),e.Oqu(e.lcZ(13,7,"infostand.button.buyfood")),e.xp6(3),e.Oqu(e.Dn7(16,9,"infostand.button.petrespect","count","0")),e.xp6(3),e.Oqu(e.lcZ(19,13,"infostand.button.kick")))},directives:[Wi],pipes:[m],encapsulation:2}),i})();function rl(i,o){if(1&i&&e._UZ(0,"nitro-badge",18),2&i){const t=e.oxw().$implicit;e.Q6J("badge",t)}}function sl(i,o){if(1&i&&(e.TgZ(0,"div",16),e.YNc(1,rl,1,1,"nitro-badge",17),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",""!==t)}}function al(i,o){if(1&i&&(e.TgZ(0,"div",19),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.botData.motto)}}function cl(i,o){if(1&i&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.ownerText)}}function ll(i,o){if(1&i&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.carryText)}}let ul=(()=>{class i extends bn{constructor(){super(...arguments),this.botData=null,this.ownerText="",this.carryText=""}update(t){!t||(this.ownerText=s.wjX.instance.getLocalizationWithParameter("infostand.text.botowner","name",this.botData.ownerName),t.carryId>0&&(this.carryText=s.wjX.instance.getLocalizationWithParameter("infostand.text.handitem","item",s.wjX.instance.getLocalization("handitem"+t.carryId))))}get type(){return It.RENTABLE_BOT}pickup(){this.hide(),s.wjX.instance.communication.connection.send(new s.AYH(this.botData.id))}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:8,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","bot","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],["class","badge badge-secondary mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"motto"],[1,"badge","badge-secondary","mb-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"div",8),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.YNc(12,sl,2,1,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.YNc(14,al,3,1,"div",13),e.qZA(),e.TgZ(15,"div",14),e.YNc(16,cl,2,1,"p",15),e.YNc(17,ll,2,1,"p",15),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.botData.name),e.xp6(6),e.Q6J("figure",n.botData.figure)("direction",4)("asBackground",!0),e.xp6(3),e.Q6J("ngForOf",n.botData.badges),e.xp6(2),e.Q6J("ngIf",""!==n.botData.motto),e.xp6(2),e.Q6J("ngIf",n.botData.ownerId>0),e.xp6(1),e.Q6J("ngIf",n.botData.carryItem>0))},directives:[cn,u.sg,u.O5,Le],encapsulation:2}),i})();function _l(i,o){if(1&i&&e._UZ(0,"nitro-badge",21),2&i){const t=e.oxw().$implicit;e.Q6J("badge",t)}}function gl(i,o){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,_l,1,1,"nitro-badge",20),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",""!==t)}}function dl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e._UZ(1,"i",23),e.TgZ(2,"textarea",24),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().userData.motto=r})("keyup",function(r){return e.CHM(t),e.oxw().resizeTextArea(r)})("keydown.enter",function(r){return e.CHM(t),e.oxw().saveMotto(r)}),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.s9C("placeholder",e.lcZ(3,2,"infostand.motto.change")),e.Q6J("ngModel",t.userData.motto)}}function ml(i,o){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"span",25),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.userData.motto)}}function pl(i,o){if(1&i&&(e.TgZ(0,"p",26),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.carryText)}}let hl=(()=>{class i extends bn{constructor(){super(...arguments),this.userData=null,this.carryText=""}update(t){!t||t.carryId>0&&(this.carryText=s.wjX.instance.getLocalizationWithParameter("infostand.text.handitem","item",s.wjX.instance.getLocalization("handitem"+t.carryId)))}resizeTextArea(t){if(!t)return;const n=t.target;!n||(n.style.height="0px",n.style.height=n.scrollHeight+"px")}saveMotto(t){this.userData.motto.length>38||(t.target.blur(),this.widget.messageListener.processWidgetMessage(new ri(this.userData.motto)))}visitProfile(){s.wjX.instance.createLinkEvent("profile/goto/"+this.userData.id)}get isOwnProfile(){return this.userData.type===I.OWN_USER}get type(){return It.USER}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:23,vars:12,consts:[[1,"nitro-infostand","card"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"badge","badge-secondary","badge-sm",3,"click"],[1,"fas","fa-user"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3","w-100"],[1,"d-flex","flex-nowrap"],[1,"body-image","overflow-hidden"],["avatar-image","",1,"avatar-image",3,"figure","direction","asBackground"],[1,"flex-grow-1"],[1,"badge-container"],["class","badge-item",4,"ngFor","ngForOf"],[1,"d-flex","mt-2"],["class","motto-container",4,"ngIf"],[1,"d-flex","flex-column","mt-2"],[1,"badge","badge-secondary","mb-0"],["class","badge badge-secondary mt-2 mb-0",4,"ngIf"],[1,"badge-item"],[3,"badge",4,"ngIf"],[3,"badge"],[1,"motto-container"],[1,"icon","pencil-icon"],["maxlength","38","wrap","soft","rows","1",1,"motto-input",3,"ngModel","placeholder","ngModelChange","keyup","keydown.enter"],[1,"motto"],[1,"badge","badge-secondary","mt-2","mb-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.visitProfile()}),e._UZ(4,"i",4),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.hide()}),e._UZ(7,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e._UZ(11,"div",10),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"div",12),e.YNc(14,gl,2,1,"div",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",14),e.YNc(16,dl,4,4,"div",15),e.YNc(17,ml,3,1,"div",15),e.qZA(),e.TgZ(18,"div",16),e.TgZ(19,"p",17),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,pl,2,1,"p",18),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.hij(" ",n.userData.name," "),e.xp6(6),e.Q6J("figure",n.userData.figure)("direction",4)("asBackground",!0),e.xp6(3),e.Q6J("ngForOf",n.userData.badges),e.xp6(2),e.Q6J("ngIf",n.isOwnProfile),e.xp6(1),e.Q6J("ngIf",!n.isOwnProfile),e.xp6(3),e.AsE("",e.lcZ(21,10,"extendedprofile.achievementscore")," ",n.userData.activityPoints,""),e.xp6(2),e.Q6J("ngIf",n.userData.carryItem>0))},directives:[cn,u.sg,u.O5,Le,_.Fj,_.nD,_.JJ,_.On],pipes:[m],encapsulation:2}),i})();const fl=["infostandsContainer"];let vl=(()=>{class i extends ae{constructor(t,n,r){super(),this._inventoryService=t,this._componentFactoryResolver=n,this._ngZone=r,this._lastComponent=null,this._furniData=new qc,this._userData=new Fc,this._petData=new Lc,this._botData=new kc,this.objectSelectedHandler=this.objectSelectedHandler.bind(this),this.objectDeselectedHandler=this.objectDeselectedHandler.bind(this),this.objectRemovedHandler=this.objectRemovedHandler.bind(this),this.userInfostandUpdateHandler=this.userInfostandUpdateHandler.bind(this),this.botInfostandUpdateHandler=this.botInfostandUpdateHandler.bind(this),this.furniInfostandUpdateHandler=this.furniInfostandUpdateHandler.bind(this),this.rentableBotInfostandUpdateHandler=this.rentableBotInfostandUpdateHandler.bind(this),this.petInfostandUpdateHandler=this.petInfostandUpdateHandler.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(T.OBJECT_SELECTED,this.objectSelectedHandler),t.addEventListener(T.OBJECT_DESELECTED,this.objectDeselectedHandler),t.addEventListener(T.USER_REMOVED,this.objectRemovedHandler),t.addEventListener(T.FURNI_REMOVED,this.objectRemovedHandler),t.addEventListener(I.OWN_USER,this.userInfostandUpdateHandler),t.addEventListener(I.PEER,this.userInfostandUpdateHandler),t.addEventListener(I.BOT,this.botInfostandUpdateHandler),t.addEventListener(Jt.FURNI,this.furniInfostandUpdateHandler),t.addEventListener(Wt.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.addEventListener(Ht.PET_INFO,this.petInfostandUpdateHandler),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(T.OBJECT_SELECTED,this.objectSelectedHandler),t.removeEventListener(T.OBJECT_DESELECTED,this.objectDeselectedHandler),t.removeEventListener(T.USER_REMOVED,this.objectRemovedHandler),t.removeEventListener(T.FURNI_REMOVED,this.objectRemovedHandler),t.removeEventListener(I.OWN_USER,this.userInfostandUpdateHandler),t.removeEventListener(I.PEER,this.userInfostandUpdateHandler),t.removeEventListener(I.BOT,this.botInfostandUpdateHandler),t.removeEventListener(Jt.FURNI,this.furniInfostandUpdateHandler),t.removeEventListener(Wt.RENTABLE_BOT,this.rentableBotInfostandUpdateHandler),t.removeEventListener(Ht.PET_INFO,this.petInfostandUpdateHandler),super.unregisterUpdateEvents(t))}close(){this.infostandsContainer.length&&this.infostandsContainer.remove(),this._lastComponent=null}objectSelectedHandler(t){this.messageListener.processWidgetMessage(new _e(_e.GET_OBJECT_INFO,t.id,t.category))}objectDeselectedHandler(t){this._ngZone.run(()=>this.close())}objectRemovedHandler(t){let n=!1;const r=this._lastComponent&&this._lastComponent.instance.type||-1;if(-1===r&&(n=!0),r>0)switch(t.type){case T.FURNI_REMOVED:r===It.FURNI&&t.id===this._furniData.id&&(n=!0);break;case T.USER_REMOVED:(r===It.USER&&t.id===this._userData.id||r===It.PET&&t.id===this._petData._Str_2707||r===It.BOT&&t.id===this._userData.id||r===It.RENTABLE_BOT&&t.id===this._botData.id)&&(n=!0)}n&&this._ngZone.run(()=>this.close())}userInfostandUpdateHandler(t){!t||this._ngZone.run(()=>{this._userData.populate(t);const n=this.getInfoStand(t);n&&(n.userData=this._userData,n.update(t))})}botInfostandUpdateHandler(t){!t||this._ngZone.run(()=>{this._userData.populate(t);const n=this.getInfoStand(t);n&&(n.userData=this._userData,n.update(t))})}furniInfostandUpdateHandler(t){!t||this._ngZone.run(()=>{this._furniData.populate(t);const n=this.getInfoStand(t);n&&(n.furniData=this._furniData,n.update(t))})}rentableBotInfostandUpdateHandler(t){!t||this._ngZone.run(()=>{this._botData.populate(t);const n=this.getInfoStand(t);n&&(n.botData=this._botData,n.update(t))})}petInfostandUpdateHandler(t){!t||this._ngZone.run(()=>{this._petData.populate(t);const n=this.getInfoStand(t);n&&(n.petData=this._petData,n.update(t))})}updateUserBadges(t,n){t===this._userData.id&&(this._userData.getIsBot()||this._ngZone.run(()=>this._userData.badges=n))}getInfoStand(t){const n=this.getInfoStandComponentType(t);if(!n)return null;if(this._lastComponent&&this._lastComponent.instance instanceof n)return this._lastComponent.instance;this.infostandsContainer.length&&this.infostandsContainer.remove();const r=this._componentFactoryResolver.resolveComponentFactory(n);let a=null;return r&&(a=this.infostandsContainer.createComponent(r)),this._lastComponent=a,a?(a.instance.widget=this,a.instance):null}get furniData(){return this._furniData}getInfoStandComponentType(t){if(!t)return null;switch(t.type){case I.BOT:return Vc;case Jt.FURNI:return il;case Ht.PET_INFO:return ol;case Wt.RENTABLE_BOT:return ul;case I.OWN_USER:case I.PEER:return hl}return null}get handler(){return this.widgetHandler}get inventoryTrading(){return this._inventoryService.controller.tradeService}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ge),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(fl,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.infostandsContainer=r.first)}},features:[e.qOj],decls:3,vars:0,consts:[[1,"nitro-room-infostand-component"],["infostandsContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",null,1),e.qZA())},encapsulation:2}),i})();function Tl(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.TgZ(2,"button",10),e._uU(3),e.qZA(),e.TgZ(4,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).accept(a)}),e._UZ(5,"i",12),e.qZA(),e.TgZ(6,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).deny(a)}),e._UZ(7,"i",5),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t)}}function bl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"perfect-scrollbar",7),e.YNc(9,Tl,8,1,"ng-container",8),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"widgets.doorbell.title")),e.xp6(6),e.Q6J("ngForOf",t.users)}}let Cl=(()=>{class i extends ae{constructor(t){super(),this._ngZone=t,this._visible=!1,this._users=[],this.onRoomRinging=this.onRoomRinging.bind(this),this.onRoomAcceptedAndRejected=this.onRoomAcceptedAndRejected.bind(this)}registerUpdateEvents(t){!t||(t.addEventListener(De.RWDE_RINGING,this.onRoomRinging),t.addEventListener(De.REJECTED,this.onRoomAcceptedAndRejected),t.addEventListener(De.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(De.RWDE_RINGING,this.onRoomRinging),t.removeEventListener(De.REJECTED,this.onRoomAcceptedAndRejected),t.removeEventListener(De.RWDE_ACCEPTED,this.onRoomAcceptedAndRejected),super.unregisterUpdateEvents(t))}onRoomRinging(t){!t||this._ngZone.run(()=>this.addUser(t.userName))}onRoomAcceptedAndRejected(t){!t||this._ngZone.run(()=>this.removeUser(t.userName))}addUser(t){if(!(this._users.indexOf(t)>=0)){if(this._users.length>=50)return void this.deny(t);this._visible=!0,this._users.push(t)}}removeUser(t){const n=this._users.indexOf(t);-1!==n&&(this._users.splice(n,1),this._users.length||(this._visible=!1))}deny(t){this.messageListener.processWidgetMessage(new In(t,!1)),this.removeUser(t)}accept(t){this.messageListener.processWidgetMessage(new In(t,!0)),this.removeUser(t)}hide(){this._visible=!1}get visible(){return this._visible}get users(){return this._users}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-doorbell-component"]],features:[e.qOj],decls:1,vars:1,consts:[["class","nitro-room-doorbell card","noMemory","true",3,"bringToTop","draggable",4,"ngIf"],["noMemory","true",1,"nitro-room-doorbell","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,n){1&t&&e.YNc(0,bl,10,4,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,C.Vv,u.sg],pipes:[m],encapsulation:2}),i})();var El=U(8723);let Qi=(()=>{class i{constructor(t){this._sanitizer=t}transform(t){return El.shortnameToUnicode(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.H7,16))},i.\u0275pipe=e.Yjl({name:"nitroEmoji",type:i,pure:!1}),i})(),Xi=(()=>{class i{constructor(t,n){this._sanitizer=t,this._emojiPipe=n,this._allowedColors=new Map,this._allowedColors.set("r","red"),this._allowedColors.set("b","blue"),this._allowedColors.set("g","green"),this._allowedColors.set("y","yellow"),this._allowedColors.set("w","white"),this._allowedColors.set("o","orange"),this._allowedColors.set("c","cyan"),this._allowedColors.set("br","brown"),this._allowedColors.set("pr","purple"),this._allowedColors.set("pk","pink"),this._allowedColors.set("red","red"),this._allowedColors.set("blue","blue"),this._allowedColors.set("green","green"),this._allowedColors.set("yellow","yellow"),this._allowedColors.set("white","white"),this._allowedColors.set("orange","orange"),this._allowedColors.set("cyan","cyan"),this._allowedColors.set("brown","brown"),this._allowedColors.set("purple","purple"),this._allowedColors.set("pink","pink")}transform(t){let n="";if(t=t.replace(/<[^>]*>/g,""),(t=this._emojiPipe.transform(t)).startsWith("@")&&t.indexOf("@",1)>-1){let r=null;for(;null!==(r=/@[a-zA-Z]+@/g.exec(t));){const a=r[0].toString(),c=a.substr(1,a.length-2),l=t.replace(a,"");n=this._allowedColors.has(c)?'<span style="color: '+this._allowedColors.get(c)+'">'+l+"</span>":l;break}}else n=t;return this._sanitizer.bypassSecurityTrustHtml(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(qe.H7,16),e.Y36(Qi,16))},i.\u0275pipe=e.Yjl({name:"roomChatFormatter",type:i,pure:!1}),i})();const Sl=["chatContainer"],Al=function(i){return{"background-color":i}};function wl(i,o){if(1&i&&e._UZ(0,"div",10),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,Al,t.senderColorString))}}const xl=function(i){return{"background-image":i,transform:"scale(1)",top:"-53px"}},Zl=function(i){return{"background-image":i}};function Il(i,o){if(1&i&&e._UZ(0,"div",11),2&i){const t=e.oxw();e.Q6J("ngStyle",t.petType>=0?e.VKq(1,xl,"url("+t.senderImageUrl+")"):e.VKq(3,Zl,"url("+t.senderImageUrl+")"))}}let yl=(()=>{class i{update(t){this.chatType=t.chatType,this.chatStyle=t.styleId,this.senderId=t.userId,this.senderName=t.userName,this.senderCategory=t.userCategory,this.message=t.text,this.messageLinks=t.links,this.senderX=t.userX,this.senderImageUrl=t.userImage&&t.userImage.src||null,this.senderColor=t.userColor,this.senderColorString=this.senderColor&&"#"+this.senderColor.toString(16).padStart(6,"0")||null,this.roomId=t.roomId,this.userType=t.userType,this.petType=t.petType}ready(){this.makeVisible(),this.chatContainerElement&&(this.chatContainerElement.style.minWidth=this.width+"px")}makeVisible(){this.chatContainerElement&&(this.chatContainerElement.style.visibility="visible")}getX(){return this.x}setX(t){!this.chatContainerElement||(this.x=t,this.chatContainerElement.style.left=t+"px")}getY(){return this.y}setY(t){!this.chatContainerElement||(this.y=t,this.chatContainerElement.style.top=t+"px")}selectUser(){s.wjX.instance.roomEngine.selectRoomObject(this.roomId,this.senderId,this.senderCategory)}get width(){return this.chatContainerElement&&this.chatContainerElement.clientWidth||0}get height(){return this.chatContainerElement&&this.chatContainerElement.clientHeight||0}get chatContainerElement(){return this.chatContainer&&this.chatContainer.nativeElement||null}get decoratedUsername(){return this.senderName+":"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Sl,5),2&t){let r;e.iGM(r=e.CRH())&&(n.chatContainer=r.first)}},inputs:{id:"id"},decls:11,vars:10,consts:[[1,"bubble-container"],["chatContainer",""],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[3,"click"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"pointer"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,wl,1,3,"div",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.selectUser()}),e.TgZ(4,"div",4),e.YNc(5,Il,1,5,"div",5),e.qZA(),e.TgZ(6,"div",6),e._UZ(7,"b",7),e._UZ(8,"span",8),e.ALo(9,"roomChatFormatter"),e.qZA(),e._UZ(10,"div",9),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",0===n.chatStyle),e.xp6(1),e.MT6("chat-bubble bubble-",n.chatStyle," type-",n.chatType,""),e.xp6(2),e.Q6J("ngIf",n.senderImageUrl),e.xp6(2),e.Q6J("innerHTML",n.decoratedUsername,e.oJD),e.xp6(1),e.Q6J("innerHTML",e.lcZ(9,8,n.message),e.oJD))},directives:[u.O5,u.PC],pipes:[Xi],encapsulation:2}),i})();const Rl=["chatView"],Ml=["chatContainer"];function Ol(i,o){}let Ul=(()=>{class i extends ae{constructor(t,n){super(),this.ngZone=t,this.componentFactoryResolver=n,this.timerId=++i.TIMER_TRACKER,this.cameraOffset=new s.TSu,this.chats=[],this.tempChats=[],this.pendingChats=[],this.processingChats=!1,this._skipNextMove=!1,this.onChatMessage=this.onChatMessage.bind(this),this.onRoomViewUpdate=this.onRoomViewUpdate.bind(this)}ngOnInit(){s.wjX.instance.addWorkerEventTracker(this),this.ngZone.runOutsideAngular(()=>{s.wjX.instance.sendWorkerEvent({type:"CREATE_INTERVAL",time:5e3,timerId:this.timerId,response:{type:"MOVE_CHATS"}})})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{s.wjX.instance.sendWorkerEvent({type:"REMOVE_INTERVAL",timerId:this.timerId})}),s.wjX.instance.removeWorkerEventTracker(this)}registerUpdateEvents(t){!t||(t.addEventListener(mn.RWCUE_EVENT_CHAT,this.onChatMessage),t.addEventListener(Te.SIZE_CHANGED,this.onRoomViewUpdate),t.addEventListener(Te.POSITION_CHANGED,this.onRoomViewUpdate),t.addEventListener(Te.SCALE_CHANGED,this.onRoomViewUpdate),super.registerUpdateEvents(t))}unregisterUpdateEvents(t){!t||(t.removeEventListener(mn.RWCUE_EVENT_CHAT,this.onChatMessage),t.removeEventListener(Te.SIZE_CHANGED,this.onRoomViewUpdate),t.removeEventListener(Te.POSITION_CHANGED,this.onRoomViewUpdate),t.removeEventListener(Te.SCALE_CHANGED,this.onRoomViewUpdate))}updateChatViewForDimensions(t,n){const r=this.chatViewElement;if(!r)return;const a=s.wjX.instance.getConfiguration("chat.viewer.height.percentage",.4);r.style.height=n*a+"px"}onChatMessage(t){!t||s.eQj.isRunning()&&t.chatType!==mn.CHAT_TYPE_WHISPER||(this.pendingChats.push(t),this.processPendingChats())}onRoomViewUpdate(t){t.positionDelta&&(this.cameraOffset.x=this.cameraOffset.x+t.positionDelta.x,this.cameraOffset.y=this.cameraOffset.y+t.positionDelta.y,this.resetAllChatLocations()),t.roomViewRectangle&&this.updateChatViewForDimensions(t.roomViewRectangle.width,t.roomViewRectangle.height)}processPendingChats(t=!1){if(!t&&this.processingChats)return;this.processingChats=!0;const n=this.pendingChats.shift();if(!n)return void(this.processingChats=!1);let r=null,a=null;this.ngZone.run(()=>{const c=this.componentFactoryResolver.resolveComponentFactory(yl);r=this.chatContainer.createComponent(c),a=r.instance,a&&(a.id=this.getFreeItemId(),a.update(n))}),this.addChat(r),this._skipNextMove=!0}getFreeItemId(){return"chat_item_"+i.CHAT_COUNTER}addChat(t){if(!t)return;const n=t.instance;n.senderX=n.senderX-this.cameraOffset.x,n.setY(this.chatViewElement.offsetHeight-n.height),this.resetChatItemLocation(t),this.makeRoomForChat(t),this.chats.push(t),n.ready(),i.CHAT_COUNTER++,this.processPendingChats(!0)}hideChat(t){if(!t)return;const n=this.chats.indexOf(t);n>=0&&this.chats.splice(n,1);const r=this.chatContainer.indexOf(t.hostView);r>=0&&this.chatContainer.remove(r)}moveChatUp(t,n=0){if(!t)return;const r=t.instance;let a=r.height;n&&(a=n),r.setY(r.getY()-a),r.getY()<-2*r.height&&this.hideChat(t)}moveAllChatsUp(){if(this._skipNextMove)return void(this._skipNextMove=!1);let t=this.chats.length-1;for(;t>=0;)this.moveChatUp(this.chats[t],15),t--}makeRoomForChat(t){if(!t)return;const n=t.instance,r=this.chats[this.chats.length-1],a=r&&r.instance;if(!a)return;const c=a.getY()+a.height-1,l=n.height+1,g=this.chatViewElement.offsetHeight-c;if(g<l)for(const d of this.chats)this.moveChatUp(d,l-g)}resetAllChatLocations(){let t=this.chats.length-1;for(;t>=0;){const n=this.chats[t];n&&this.resetChatItemLocation(n),t--}}resetChatItemLocation(t){const n=t.instance;let r=n.senderX+this.cameraOffset.x;r-=n.width/2,n.setX(r)}workerMessageReceived(t){if(t)switch(t.type){case"MOVE_CHATS":return void this.moveAllChatsUp()}}get chatViewElement(){return this.chatViewReference&&this.chatViewReference.nativeElement||null}get handler(){return this.widgetHandler}}return i.TIMER_TRACKER=0,i.CHAT_COUNTER=0,i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(e._Vd))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-chat-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Rl,5),e.Gf(Ml,5,e.s_b)),2&t){let r;e.iGM(r=e.CRH())&&(n.chatViewReference=r.first),e.iGM(r=e.CRH())&&(n.chatContainer=r.first)}},features:[e.qOj],decls:4,vars:0,consts:[[1,"nitro-room-chat-component"],["chatView",""],["chatContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Ol,0,0,"ng-template",null,2,e.W1O),e.qZA())},encapsulation:2}),i})();class Nl{constructor(){this._enteredGuestRoom=null,this._staffPick=!1,this._createdRoomId=0,this._currentRoomId=0,this._currentRoomOwner=!1,this._canRate=!1}get enteredGuestRoom(){return this._enteredGuestRoom}set enteredGuestRoom(o){this._enteredGuestRoom=o}get staffPick(){return this._staffPick}set staffPick(o){this._staffPick=o}get createdRoomId(){return this._createdRoomId}set createdRoomId(o){this._createdRoomId=o}get currentRoomId(){return this._currentRoomId}set currentRoomId(o){this._currentRoomId=o}get currentRoomOwner(){return this._currentRoomOwner}set currentRoomOwner(o){this._currentRoomOwner=o}get canRate(){return this._canRate}set canRate(o){this._canRate=o}}let ce=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._settingsService=n,this._ngZone=r,this._roomInfoShowing=!1,this._messages=[],this._component=null,this._topLevelContexts=[],this._topLevelContext=null,this._categories=[],this._filter=i.SEARCH_FILTERS[0],this._lastSearchResults=[],this._lastSearch="",this._data=new Nl,this._tradeSettings=[],this._homeRoomId=-1,this._isSearching=!1,this._isLoaded=!1,this._isLoading=!1,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.setTradeSettings(),this.registerMessages(),s.wjX.instance.addLinkEventTracker(this),s.XQ4.available&&s.XQ4.addCallback(s.bTG.OPENROOM,this.enterRoomWebRequest)}ngOnDestroy(){this.unregisterMessages(),s.wjX.instance.removeLinkEventTracker(this)}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.CREATED,this.onRoomSessionEvent),this._messages=[new s.muo(this.onUserInfoEvent.bind(this)),new s.KdD(this.onRoomForwardEvent.bind(this)),new s.hrQ(this.onRoomInfoOwnerEvent.bind(this)),new s.hVP(this.onRoomInfoEvent.bind(this)),new s.DW_(this.onRoomEnterErrorEvent.bind(this)),new s.rSV(this.onRoomCreatedEvent.bind(this)),new s.zfC(this.onRoomDoorbellEvent.bind(this)),new s.QbQ(this.onRoomDoorbellAcceptedEvent.bind(this)),new s.pR7(this.onRoomScoreEvent.bind(this)),new s.RPB(this.onRoomSettingsUpdatedEvent.bind(this)),new s.TAA(this.onGenericErrorEvent.bind(this)),new s.wlm(this.onRoomDoorbellRejectedEvent.bind(this)),new s.VtK(this.onNavigatorCategoriesEvent.bind(this)),new s.pqB(this.onNavigatorCollapsedEvent.bind(this)),new s.bQQ(this.onNavigatorEventCategoriesEvent.bind(this)),new s.$Bk(this.onNavigatorLiftedEvent.bind(this)),new s.i7v(this.onNavigatorMetadataEvent.bind(this)),new s.RG_(this.onNavigatorOpenRoomCreatorEvent.bind(this)),new s.k0y(this.onNavigatorSearchesEvent.bind(this)),new s.$y0(this.onNavigatorSearchEvent.bind(this)),new s.c_r(this.onNavigatorSettingsEvent.bind(this)),new s.Ny7(this.onNavigatorHomeRoomEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.CREATED,this.onRoomSessionEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSessionEvent(t){if(t)switch(t.type){case s.SeR.CREATED:return void this._ngZone.run(()=>this._settingsService.hideNavigator())}}onUserInfoEvent(t){!t||!t.getParser()||(s.wjX.instance.communication.connection.send(new s.k1$),s.wjX.instance.communication.connection.send(new s.Hg2))}onRoomForwardEvent(t){if(!(t instanceof s.KdD))return;const n=t.getParser();!n||s.wjX.instance.communication.connection.send(new s.YeH(n.roomId,!1,!0))}onRoomInfoOwnerEvent(t){if(!(t instanceof s.hrQ))return;const n=t.getParser();!n||(this._ngZone.run(()=>{this._data.currentRoomOwner=!1,this._data.currentRoomOwner=n.isOwner,this._data.currentRoomId=n.roomId}),s.wjX.instance.communication.connection.send(new s.YeH(n.roomId,!0,!1)),s.XQ4.call("legacyTrack","navigator","private",[n.roomId]))}onRoomInfoEvent(t){if(!(t instanceof s.hVP))return;const n=t.getParser();!n||this._ngZone.run(()=>{if(n.roomEnter)this._data.enteredGuestRoom=n.data,this._data.staffPick=n.data.roomPicker,this._data.createdRoomId=0;else if(n.roomForward){if(n.data.ownerName!==s.wjX.instance.sessionDataManager.userName&&!n.isGroupMember)switch(n.data.doorMode){case s.tX0.DOORBELL_STATE:return void this.openRoomDoorbell(n.data);case s.tX0.PASSWORD_STATE:return void this.openRoomPassword(n.data)}this.goToRoom(n.data.roomId)}else this._data.enteredGuestRoom=n.data,this._data.staffPick=n.data.roomPicker})}onRoomEnterErrorEvent(t){if(!(t instanceof s.DW_))return;const n=t.getParser();if(!n)return;this._ngZone.run(()=>{switch(n.reason){case s.pUT.REASON_FULL:this._notificationService.alert("${navigator.guestroomfull.text}","${navigator.guestroomfull.title}");break;case s.pUT.REASON_QUEUE_ERROR:this._notificationService.alert("${room.queue.error. "+n.parameter+"}","${room.queue.error.title}");break;case s.pUT.REASON_BANNED:this._notificationService.alert("${navigator.banned.text}","${navigator.banned.title}");break;default:this._notificationService.alert("${room.queue.error.title}","${room.queue.error.title}")}}),s.wjX.instance.communication.connection.send(new s.Cq3);const r=new s.BOM(s.BOM.TOOLBAR_CLICK);r.iconName=s.V3W.HOTEL_VIEW,s.wjX.instance.roomEngine.events.dispatchEvent(r)}onRoomCreatedEvent(t){if(!t)return;const n=t.getParser();!n||(this._ngZone.run(()=>{this._data.createdRoomId=n.roomId,this._roomInfoShowing=!1}),this.goToRoom(n.roomId))}onRoomDoorbellEvent(t){if(!t)return;const n=t.getParser();!n||(!n.userName||0===n.userName.length)&&this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!0))}onRoomDoorbellAcceptedEvent(t){if(!t)return;const n=t.getParser();!n||(!n.userName||0===n.userName.length)&&this._ngZone.run(()=>this._component&&this._component.closeRoomDoorbell())}onRoomScoreEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._data.canRate=n.canLike)}onRoomSettingsUpdatedEvent(t){if(!t)return;const n=t.getParser();!n||s.wjX.instance.communication.connection.send(new s.YeH(n.roomId,!1,!1))}onGenericErrorEvent(t){if(!t)return;const n=t.getParser();if(n)switch(n.errorCode){case-100002:this._ngZone.run(()=>this._component&&this._component.openRoomPassword(null,!0));break;case 4009:this._notificationService.alert("${navigator.alert.need.to.be.vip}","${generic.alert.title}");break;case 4010:this._notificationService.alert("${navigator.alert.invalid_room_name}","${generic.alert.title}");break;case 4011:this._notificationService.alert("${navigator.alert.cannot_perm_ban}","${generic.alert.title}");break;case 4013:this._notificationService.alert("${navigator.alert.room_in_maintenance}","${generic.alert.title}")}}onRoomDoorbellRejectedEvent(t){if(!t)return;const n=t.getParser();!n||(!n.userName||0===n.userName.length)&&this._ngZone.run(()=>this._component&&this._component.openRoomDoorbell(null,!1,!0))}onNavigatorCategoriesEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._categories=n.categories)}onNavigatorCollapsedEvent(t){t&&t.getParser()}onNavigatorEventCategoriesEvent(t){t&&t.getParser()}onNavigatorLiftedEvent(t){t&&t.getParser()}onNavigatorMetadataEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._topLevelContexts=n.topLevelContexts,this._topLevelContexts.length>0&&this.setCurrentContext(this._topLevelContexts[0]),this.clearSearch()})}onNavigatorOpenRoomCreatorEvent(t){!t||!t.getParser()||!this._component||this._ngZone.run(()=>this._component.openRoomCreator())}onNavigatorSearchesEvent(t){t&&t.getParser()}onNavigatorSearchEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.result;!r||this._ngZone.run(()=>{this.setCurrentContextByCode(r.code),this._lastSearchResults=r.results,this._isSearching=!1})}onNavigatorSettingsEvent(t){t&&t.getParser()}onNavigatorHomeRoomEvent(t){if(!t)return;const n=t.getParser();!n||(this._homeRoomId=n.homeRoomId)}getMaxVisitors(t){const n=[];let r=i.MAX_VISITOR_STEPPER;for(;r<=t;)n.push(r),r+=i.MAX_VISITOR_INCREMENTOR;return n}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}goToRoom(t,n=null){s.wjX.instance.roomSessionManager.createSession(t,n)}goToPrivateRoom(t){s.wjX.instance.communication.connection.send(new s.YeH(t,!1,!0))}goToHomeRoom(){return!(this._homeRoomId<1||(this.goToRoom(this._homeRoomId),0))}getContextByCode(t){if(!t)return null;for(const n of this._topLevelContexts)if(n&&n.code===t)return n;return null}setCurrentContext(t,n=!0){!t||this._topLevelContext===t||(this._topLevelContext=t)}setCurrentContextByCode(t,n=!0){if(!t)return;const r=this.getContextByCode(t);!r||this.setCurrentContext(r,n)}setCurrentFilter(t){!t||this._filter===t||(this._filter=t)}search(t=null){if(!this._topLevelContext||this._isSearching)return;this._filter||this.setCurrentFilter(i.SEARCH_FILTERS[0]);const n=this._filter&&this._filter.query?this._filter.query+":":"";let r=t;null===r&&(r=this._lastSearch),this._lastSearch=r||"",this.sendSearch(this._topLevelContext.code,n+this._lastSearch)}clearSearch(){this.setCurrentFilter(i.SEARCH_FILTERS[0]),this._lastSearch=null,this.isLoaded&&this.search()}sendSearch(t,n){!t||(this._isSearching=!0,this._ngZone.runOutsideAngular(()=>s.wjX.instance.communication.connection.send(new s.mNM(t,n))))}loadNavigator(){this._ngZone.runOutsideAngular(()=>s.wjX.instance.communication.connection.send(new s.IqE)),this._isLoaded=!0}openRoomDoorbell(t){!t||!this._component||this._component.openRoomDoorbell(t)}openRoomPassword(t){!t||!this._component||this._component.openRoomPassword(t)}toggleRoomInfo(){this._roomInfoShowing=!this._roomInfoShowing}linkReceived(t){const n=t.split("/");if(!(n.length<2))switch(n[1]){case"goto":if(n.length>2)switch(n[2]){case"home":this.goToHomeRoom();break;default:{const r=parseInt(n[2]);r>0&&this.goToPrivateRoom(r)}}return}}enterRoomWebRequest(t,n=!1,r=null){s.wjX.instance.communication.connection.send(new s.ahd(t))}get eventUrlPrefix(){return"navigator"}get component(){return this._component}set component(t){this._component=t}get topLevelContexts(){return this._topLevelContexts}get topLevelContext(){return this._topLevelContext}get categories(){return this._categories}get filter(){return this._filter}get lastSearch(){return this._lastSearch}set lastSearch(t){this._lastSearch=t}get lastSearchResults(){return this._lastSearchResults}get isSearching(){return this._isSearching}get isLoaded(){return this._isLoaded}get isLoading(){return this._isLoading}get tradeSettings(){return this._tradeSettings}get data(){return this._data}get roomInfoShowing(){return this._roomInfoShowing}set roomInfoShowing(t){this._roomInfoShowing=t}}return i.SEARCH_FILTERS=[{name:"anything",query:null},{name:"room.name",query:"roomname"},{name:"owner",query:"owner"},{name:"tag",query:"tag"},{name:"group",query:"group"}],i.MAX_VISITOR_STEPPER=10,i.MAX_VISITOR_INCREMENTOR=5,i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(w),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function ql(i,o){if(1&i&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij("#",t,"")}}function Ll(i,o){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,ql,2,1,"div",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.tags)}}function kl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).likeRoom()}),e._UZ(1,"i",23),e.qZA()}}const Yi=function(i){return[i]};function Fl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"p",8),e._uU(3),e.qZA(),e.TgZ(4,"p",9),e._uU(5),e.qZA(),e.YNc(6,Ll,2,1,"div",10),e.TgZ(7,"div",11),e.TgZ(8,"div",12),e.TgZ(9,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleRoomTools()}),e._UZ(10,"i",13),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleZoom()}),e._UZ(12,"i",4),e.qZA(),e.YNc(13,kl,2,0,"button",14),e.TgZ(14,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleChatHistory()}),e._UZ(15,"i",15),e.qZA(),e.qZA(),e.TgZ(16,"div",16),e.TgZ(17,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().goInDirection(-1)}),e._UZ(18,"i",18),e.qZA(),e.TgZ(19,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().goInDirection(1)}),e._UZ(20,"i",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("@inOutAnimation",void 0),e.xp6(3),e.Oqu(t.roomName),e.xp6(2),e.Oqu(t.ownerName),e.xp6(1),e.Q6J("ngIf",t.tags.length),e.xp6(6),e.Q6J("ngClass",e.VKq(8,Yi,t.zoomed?"fa-search-minus":"fa-search-plus")),e.xp6(1),e.Q6J("ngIf",t.canRate),e.xp6(4),e.Q6J("disabled",!t.hasDirection(-1)),e.xp6(2),e.Q6J("disabled",!t.hasDirection(1))}}let Dl=(()=>{class i extends ae{constructor(t,n,r,a){super(),this._componentFactoryResolver=t,this._ngZone=n,this._settingsService=r,this._navigatorService=a,this._lastRoomId=-1,this._roomData=null,this._currentRoomIndex=-1,this._roomName="",this._ownerName="",this._tags=[],this._zoomed=!0,this._roomOptionsVisible=!1,this._roomToolsVisible=!1,this._roomOptionsTimeout=null}ngOnDestroy(){this._navigatorService.roomInfoShowing=!1,this.stopRoomOptionsTimeout()}updateRoomInfo(t){!t||this._ngZone.run(()=>{for(const n of i.VISITED_ROOMS)n.roomId===t.roomId&&(n.roomName=t.roomName)})}updateRoomTools(t,n,r){this._ngZone.run(()=>{this._roomName=t,this._ownerName=n,this._tags=r,this.showRoomOptions()})}addVisitedRoom(t){this._ngZone.run(()=>{for(const n of i.VISITED_ROOMS)if(n&&n.roomId===t.roomId)return;i.VISITED_ROOMS.push(t),i.VISITED_ROOMS.length>i.MAX_VISIT_HISTORY&&i.VISITED_ROOMS.shift(),this._currentRoomIndex=i.VISITED_ROOMS.length-1})}updateRoomCurrentIndex(t){this._ngZone.run(()=>{let n=0;for(;n<i.VISITED_ROOMS.length;){const r=i.VISITED_ROOMS[n];if(r&&r.roomId===t)return void(this._currentRoomIndex=n);n++}})}likeRoom(){this.handler.rateRoom()}hasDirection(t){const n=this._currentRoomIndex+t;return n>=0&&n<i.VISITED_ROOMS.length}goInDirection(t){const n=this._currentRoomIndex+t;if(n<0||n>i.VISITED_ROOMS.length-1)return;const r=i.VISITED_ROOMS[n];!r||this._navigatorService.goToPrivateRoom(r.roomId)}toggleChatHistory(){this._settingsService.toggleChatHistory()}toggleZoom(){this.widgetHandler.processWidgetMessage(new Oi),this._zoomed=!this._zoomed}toggleRoomOptions(){this._roomOptionsVisible=!this._roomOptionsVisible,this._roomOptionsVisible&&this.showRoomOptions(!1)}showRoomOptions(t=!0){this._roomOptionsVisible=!0,this.stopRoomOptionsTimeout(),t&&(this._roomOptionsTimeout=setTimeout(()=>{this.stopRoomOptionsTimeout(),this._roomOptionsVisible=!1},5e3))}stopRoomOptionsTimeout(){!this._roomOptionsTimeout||(clearTimeout(this._roomOptionsTimeout),this._roomOptionsTimeout=null)}toggleRoomTools(){this._navigatorService.toggleRoomInfo()}get handler(){return this.widgetHandler}get roomName(){return this._roomName}get ownerName(){return this._ownerName}get tags(){return this._tags}get zoomed(){return this._zoomed}get roomOptionsVisible(){return this._roomOptionsVisible}get roomToolsVisible(){return this._roomToolsVisible}set roomToolsVisible(t){this._roomToolsVisible=t}get roomData(){return this._roomData}get canRate(){return this._navigatorService.data.canRate}}return i.VISITED_ROOMS=[],i.MAX_VISIT_HISTORY=10,i.\u0275fac=function(t){return new(t||i)(e.Y36(e._Vd),e.Y36(e.R0b),e.Y36(w),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-room-tools-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"nitro-room-tools"],[1,"row","m-0","p-0"],[1,"d-flex","align-items-end"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas",3,"ngClass"],["class","card ml-2",4,"ngIf"],[1,"card","ml-2"],[1,"d-flex","flex-column","p-3"],[1,"h5","text-truncate",2,"max-width","80%"],[1,"h6","room-owner","m-0"],["class","d-block mt-2",4,"ngIf"],[1,"d-flex","mt-2"],[1,"btn-group"],[1,"fas","fa-cog"],["type","button","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],[1,"fas","fa-comment-alt"],[1,"btn-group","ml-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"fas","fa-arrow-left"],[1,"fas","fa-arrow-right"],[1,"d-block","mt-2"],["class","badge badge-secondary badge-sm mr-2",4,"ngFor","ngForOf"],[1,"badge","badge-secondary","badge-sm","mr-2"],[1,"fas","fa-heart"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.toggleRoomOptions()}),e._UZ(4,"i",4),e.qZA(),e.qZA(),e.YNc(5,Fl,21,10,"div",5),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngClass",e.VKq(2,Yi,n.roomOptionsVisible?"fa-chevron-left":"fa-chevron-right")),e.xp6(1),e.Q6J("ngIf",n.roomOptionsVisible))},directives:[u.mk,u.O5,u.sg],encapsulation:2,data:{animation:[(0,F.X$)("inOutAnimation",[(0,F.eR)(":enter",[(0,F.oB)({transform:"translateX(-50%)"}),(0,F.jt)(".1s ease-in",(0,F.oB)({transform:"translateX(0%)"}))]),(0,F.eR)(":leave",[(0,F.oB)({transform:"translateX(0%)"}),(0,F.jt)(".1s ease-out",(0,F.oB)({transform:"translateX(-50%)"}))])])]}}),i})(),Cn=(()=>{class i{constructor(t){this._notificationService=t,this.title="",this.message="",this.choices=[]}close(){this._notificationService.closeAlert(this)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"perfect-scrollbar",4),e._UZ(6,"div",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.close()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(3),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(3),e.Oqu(e.lcZ(10,3,"generic.close")))},directives:[b,v,C.Vv],pipes:[m],encapsulation:2}),i})();function Pl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().choose(a)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.Q6J("ngClass",t.classes),e.xp6(1),e.Oqu(e.lcZ(2,2,t.localizationKey))}}let Jl=(()=>{class i extends Cn{constructor(){super(...arguments),this.callback=null,this.choices=[]}choose(t){try{this.choices[t].callback()}catch(n){s.Aey.log(n)}this.close()}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:8,vars:5,consts:[["dragHandle",".card-header","noMemory","true","center","true",1,"card","nitro-alert","nitro-alert-generic-component",3,"bringToTop","draggable"],[1,"card-header","text-center"],[1,"card-body"],[1,"mb-3",3,"innerHTML"],[1,"btn-group","w-100"],["type","button","class","btn w-100",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","w-100",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"div",3),e.ALo(5,"keepHtml"),e.TgZ(6,"div",4),e.YNc(7,Pl,3,4,"button",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",n.title," "),e.xp6(2),e.Q6J("innerHTML",e.lcZ(5,3,n.message),e.oJD),e.xp6(3),e.Q6J("ngForOf",n.choices))},directives:[b,v,u.sg,u.mk],pipes:[Vi,m],encapsulation:2}),i})();class Bt{constructor(o,t,n=[]){this._localizationKey=o,this._callback=t,this._classes=n}get localizationKey(){return this._localizationKey}get callback(){return this._callback}get classes(){return this._classes}}let jl=(()=>{class i extends Cn{constructor(){super(...arguments),this.callback=null}confirm(){if(this.callback)try{this.callback()}catch(t){s.Aey.log(t)}this.close()}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:13,vars:8,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-link","mr-1",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.close()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.confirm()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(2),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(3),e.Oqu(e.lcZ(9,4,"generic.cancel")),e.xp6(3),e.Oqu(e.lcZ(12,6,"generic.ok")))},directives:[b,v],pipes:[m],encapsulation:2}),i})();function Vl(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().openLink()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"mod.alert.link")))}let Bl=(()=>{class i extends Cn{constructor(){super(...arguments),this.link=""}openLink(){window.open(this.link,"_blank")}get hasLink(){return this.link.length>0}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:12,vars:6,consts:[["noMemory","true","center","true",1,"nitro-alert","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[1,"d-block",3,"innerHTML"],[1,"d-flex","align-items-center","justify-content-center","mt-3"],["type","button","class","btn btn-link mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-link","mr-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"perfect-scrollbar",4),e._UZ(6,"div",5),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,Vl,3,3,"button",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return n.close()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(3),e.Q6J("innerHTML",n.message,e.oJD),e.xp6(2),e.Q6J("ngIf",n.hasLink),e.xp6(2),e.Oqu(e.lcZ(11,4,"generic.close")))},directives:[b,v,C.Vv,u.O5],pipes:[m],encapsulation:2}),i})();function Gl(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"div",8),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("innerHTML",t,e.oJD)}}let Hl=(()=>{class i extends Cn{constructor(){super(...arguments),this.messages=[]}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:11,vars:5,consts:[["noMemory","true","center","true",1,"nitro-alert","multiple-messages","d-flex","flex-column","bg-primary","border","border-black","shadow","rounded",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-center","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"position-relative","w-100",2,"min-height","65px","max-height","275px"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","align-items-center","justify-content-center","mt-3"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-block",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"perfect-scrollbar",4),e.YNc(6,Gl,2,1,"ng-container",5),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return n.close()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.title),e.xp6(3),e.Q6J("ngForOf",n.messages),e.xp6(3),e.Oqu(e.lcZ(10,3,"generic.close")))},directives:[b,v,C.Vv,u.sg],pipes:[m],encapsulation:2}),i})();const Wl=["alertsContainer"];function Ql(i,o){}function Xl(i,o){}let Yl=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._componentFactoryResolver=n,this._ngZone=r,this._alerts=new Map}ngOnInit(){this._notificationService.alertCenter=this}ngOnDestroy(){this.closeAllAlerts(),this._notificationService.alertCenter=null}alert(t,n=null){return this.buildAlert(Cn,t,n)}alertWithLink(t,n=null,r=null){const a=this.buildAlert(Bl,t,r);return a?(a.link=n,a):null}alertWithConfirm(t,n=null,r=null){const a=this.buildAlert(jl,t,n);return a?(a.callback=r,a):null}alertWithChoices(t,n,r=null){let a=null;return this._ngZone.run(()=>{a=this.createAlertComponent(Jl),r?r.startsWith("${")&&(r=s.wjX.instance.getLocalization(r)):r=s.wjX.instance.getLocalization("${mod.alert.title}"),t&&(t.startsWith("${")&&(t=s.wjX.instance.getLocalization(t)),t=t.replace(/\r\n|\r|\n/g,"<br />")),a.title=r,a.message=t,a.choices=n}),a||null}alertWithScrollableMessages(t,n=null){const r=this.buildAlert(Hl,null,n);if(!r)return;const a=[];for(const c of t)!c||a.push(c.replace(/\r\n|\r|\n/g,"<br />"));return r.messages=a,r}buildAlert(t,n,r=null){let a=null;return this._ngZone.run(()=>{a=this.createAlertComponent(t),r?r.startsWith("${")&&(r=s.wjX.instance.getLocalization(r)):r=s.wjX.instance.getLocalization("${mod.alert.title}"),n&&(n.startsWith("${")&&(n=s.wjX.instance.getLocalization(n)),n=n.replace(/\r\n|\r|\n/g,"<br />")),a.title=r,a.message=n}),a||null}createAlertComponent(t){if(!t)return null;let n=null;const r=this._componentFactoryResolver.resolveComponentFactory(t);let a=null;return r&&(a=this.alertsContainer.createComponent(r),this._alerts.set(a.instance,a)),n=a.instance,n}closeAlert(t){if(!t)return;const n=this._alerts.get(t);!n||(this._alerts.delete(t),this.removeAlertView(n.hostView))}closeAllAlerts(){for(const t of this._alerts.keys())this.closeAlert(t)}removeAlertView(t){if(!t)return;const n=this.alertsContainer.indexOf(t);-1!==n&&this.alertsContainer.remove(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-alert-center-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Wl,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.alertsContainer=r.first)}},decls:5,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""],["alertsContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ql,0,0,"ng-template",null,1,e.W1O),e.qZA(),e.YNc(3,Xl,0,0,"ng-template",null,2,e.W1O))},encapsulation:2}),i})(),Fn=(()=>{class i{constructor(t){this._ngZone=t,this._isReady=!1,this._messages=[],this._currencies=new Map,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new s.DIW(this.onUserCreditsEvent.bind(this)),new s.kXA(this.onUserCurrencyEvent.bind(this)),new s.Ofh(this.onUserCurrencyUpdateEvent.bind(this)),new s.gE4(this.onUserSubscriptionEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]}})}requestUpdate(){s.wjX.instance.communication.connection.send(new s.yKm)}onUserCreditsEvent(t){if(!t)return;const n=t.getParser();this._isReady=!0,this._ngZone.run(()=>this.setCurrency(-1,parseFloat(n.credits)))}onUserCurrencyEvent(t){if(!t)return;const n=t.getParser();this._ngZone.run(()=>{for(const[r,a]of n.currencies)this.setCurrency(r,a)})}onUserCurrencyUpdateEvent(t){if(!t)return;const n=t.getParser();this._ngZone.run(()=>this.setCurrency(n.type,n.amount))}onUserSubscriptionEvent(t){if(!t)return;const n=t.getParser();if(n)switch(n.productName){case"habbo_club":return void(this._habboClubSubscription=n);default:return}}setCurrency(t,n){this._currencies.set(t,n)}get currencies(){return this._currencies}get visibleCurrencies(){return s.wjX.instance.getConfiguration("displayed.currency.types",[])}get hcSub(){return this._habboClubSubscription}get isReady(){return this._isReady}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const zl=["nitro-currency-icon",""],Kl=function(i){return{"background-image":i}};let Dn=(()=>{class i{constructor(){this.type=null}get iconUrl(){if(null===this.type)return null;let t=s.wjX.instance.getConfiguration("currency.asset.icon.url","");return t=t.replace("%type%",this.type.toString()),`url('${t}')`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-currency-icon",""]],inputs:{type:"type"},attrs:zl,decls:1,vars:3,consts:[[1,"nitro-currency-icon",3,"ngStyle"]],template:function(t,n){1&t&&e._UZ(0,"div",0),2&t&&e.Q6J("ngStyle",e.VKq(1,Kl,n.iconUrl))},directives:[u.PC],encapsulation:2}),i})(),$l=(()=>{class i{transform(t,n){if(isNaN(t)||null===t||0===t)return 0;let r=Math.abs(t);const a=Math.pow(10,1),c=t<0;let l="";const g=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}];for(let d=0;d<g.length;d++){let h=r/g[d].value;if(h=Math.round(h*a)/a,h>=1){r=h,l=g[d].key;break}}return(c?"-":"")+r+l}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"shortNumber",type:i,pure:!0}),i})();const eu=function(i,o,t){return{"bg-pink":i,"bg-warning":o,"bg-skyBlue":t}};function tu(i,o){if(1&i&&(e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._uU(2),e.ALo(3,"shortNumber"),e.qZA(),e.TgZ(4,"div",9),e._UZ(5,"div",7),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,3,t.value),""),e.xp6(2),e.Q6J("ngClass",e.kEZ(5,eu,0==t.key,-1==t.key,5==t.key)),e.xp6(1),e.Q6J("type",t.key)}}function nu(i,o){if(1&i&&(e.ynx(0),e.YNc(1,tu,6,9,"div",8),e.BQk()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isVisible(t.key))}}let iu=(()=>{class i{constructor(t){this._purseService=t}ngOnInit(){this._purseService.requestUpdate()}isVisible(t){return-1!==this._purseService.visibleCurrencies.indexOf(t)}getCurrencyUrl(t){return s.wjX.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t)}get currencies(){return this._purseService.currencies}get hcDay(){if(!this._purseService.hcSub)return;const t=s.Uwc.shortFormat(60*this._purseService.hcSub.minutesUntilExpiration);return this._purseService.hcSub.minutesUntilExpiration?t:s.wjX.instance.localization.getValue("purse.clubdays.zero.amount.text")}get isReady(){return this._purseService.isReady}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Fn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-purse-main-component"]],decls:10,vars:5,consts:[[1,"nitro-purse-component","float-right"],[1,"position-relative","mb-1"],[1,"row","px-0","mx-0"],[4,"ngFor","ngForOf"],[1,"col","item-detail","btn","btn-primary","rounded","d-flex","nohover"],[1,"d-flex","flex-grow-1","align-items-center","justify-content-end","detail-value"],[1,"detail-icon","bg-orange"],["nitro-currency-icon","",1,"w-100","h-100",3,"type"],["class","col item-detail btn btn-primary rounded d-flex nohover",4,"ngIf"],[1,"detail-icon","bg-secondary",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,nu,2,1,"ng-container",3),e.ALo(4,"keyvalue"),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"div",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,3,n.currencies)),e.xp6(4),e.hij(" ",n.hcDay," "),e.xp6(2),e.Q6J("type","hc"))},directives:[u.sg,Dn,u.O5,u.mk],pipes:[u.Nd,$l],encapsulation:2}),i})();class zi{constructor(){this._id=0,this._name="",this._description="",this._roomId="0",this._badgeParts=new Map,this._colorA=0,this.colorB=0,this._state=0,this._canMembersDecorate=!1,this._badgeParts.set(0,new s.cJn(!0)),this._badgeParts.set(1,new s.cJn(!1)),this._badgeParts.set(2,new s.cJn(!1)),this._badgeParts.set(3,new s.cJn(!1)),this._badgeParts.set(4,new s.cJn(!1))}getBadgePart(o){return this._badgeParts.get(o)}setPartsColor(o){this._badgeParts.forEach(t=>{t.color=o})}get id(){return this._id}set id(o){this._id=o}get name(){return this._name}set name(o){this._name=o}get description(){return this._description}set description(o){this._description=o}get roomId(){return this._roomId}set roomId(o){this._roomId=o}get badgeParts(){return this._badgeParts}set badgeParts(o){this._badgeParts=o}get colorA(){return this._colorA}set colorA(o){this._colorA=o}get colorB(){return this._colorB}set colorB(o){this._colorB=o}get currentBadgeCode(){let o="";return this._badgeParts.forEach(t=>{t.code&&(o+=t.code)}),o}get currentBadgeArray(){const o=[];return this._badgeParts.forEach(t=>{t.code&&(o.push(t.key),o.push(t.color),o.push(t.position))}),o}get state(){return this._state}set state(o){this._state=o}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(o){this._canMembersDecorate=o}}var W=U(9517);const ou=["nitro-group-creator-component",""];function ru(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-creator-tab-info-component",16),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw().groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)("showRoomError",t.showRoomError)("availableRooms",t.availableRooms)}}function su(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-creator-tab-badge-component",17),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw().groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function au(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-creator-tab-colors-component",17),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw().groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("groupSettings",t.groupSettings)("setDefaultValues",!0)}}function cu(i,o){if(1&i&&e._UZ(0,"nitro-group-creator-tab-confirmation-component",18),2&i){const t=e.oxw();e.Q6J("groupSettings",t.groupSettings)("groupCost",t.groupCost)}}function lu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"generic.cancel")))}function uu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().previousStep()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.create.previousstep")))}function _u(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().nextStep()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.create.nextstep")))}function gu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().buyGroup()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.create.confirm.buy")))}let Ki=(()=>{class i{constructor(t,n){this._groupsService=t,this._activeModal=n,this._clear()}_clear(){this.groupSettings=new zi,this._currentStep=1,this._showNameError=!1,this._showDescriptionError=!1,this._showRoomError=!1,this._availableRooms=new Map,this._groupCost=0}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}previousStep(){1!==this._currentStep&&this._currentStep--}nextStep(){4!==this._currentStep&&(1===this._currentStep&&(this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showRoomError="0"===this.groupSettings.roomId,this._showNameError||this._showDescriptionError||this._showRoomError)||this._currentStep++)}hide(){this._activeModal.close()}buyGroup(){this._groupsService.buyGroup(this.groupSettings)}get currentStep(){return this._currentStep}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}get showRoomError(){return this._showRoomError}get availableRooms(){return this._availableRooms}set availableRooms(t){this._availableRooms=t}get groupCost(){return this._groupCost}set groupCost(t){this._groupCost=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot),e.Y36(W.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-group-creator-component",""]],attrs:ou,decls:30,vars:27,consts:[[1,"nitro-group-creator-component"],[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"disabled"],[1,"btn","btn-success",3,"disabled"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupCost",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],["class","btn btn-secondary",3,"click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[3,"groupSettings","showNameError","showDescriptionError","showRoomError","availableRooms","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupCost"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"button",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",7),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",7),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",8),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.YNc(21,ru,1,5,"nitro-group-creator-tab-info-component",9),e.YNc(22,su,1,2,"nitro-group-creator-tab-badge-component",10),e.YNc(23,au,1,2,"nitro-group-creator-tab-colors-component",10),e.YNc(24,cu,1,2,"nitro-group-creator-tab-confirmation-component",11),e.TgZ(25,"div",12),e.YNc(26,lu,3,3,"button",13),e.YNc(27,uu,3,3,"button",14),e.YNc(28,_u,3,3,"button",14),e.YNc(29,gu,3,3,"button",15),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,17,"group.window.title")),e.xp6(6),e.Q6J("disabled",1!==n.currentStep),e.xp6(1),e.Oqu(e.lcZ(11,19,"group.create.steplabel.1")),e.xp6(2),e.Q6J("disabled",2!==n.currentStep),e.xp6(1),e.Oqu(e.lcZ(14,21,"group.create.steplabel.2")),e.xp6(2),e.Q6J("disabled",3!==n.currentStep),e.xp6(1),e.Oqu(e.lcZ(17,23,"group.create.steplabel.3")),e.xp6(2),e.Q6J("disabled",4!==n.currentStep),e.xp6(1),e.Oqu(e.lcZ(20,25,"group.create.steplabel.4")),e.xp6(2),e.Q6J("ngIf",1===n.currentStep),e.xp6(1),e.Q6J("ngIf",2===n.currentStep),e.xp6(1),e.Q6J("ngIf",3===n.currentStep),e.xp6(1),e.Q6J("ngIf",4===n.currentStep),e.xp6(2),e.Q6J("ngIf",1===n.currentStep),e.xp6(1),e.Q6J("ngIf",n.currentStep>1),e.xp6(1),e.Q6J("ngIf",n.currentStep<4),e.xp6(1),e.Q6J("ngIf",4===n.currentStep))},encapsulation:2}),i})(),Ot=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._modalService=n,this._ngZone=r,this._messages=[],this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._groupColorsA=new Map,this._groupColorsB=new Map,this._leavingGroupId=0,this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.registerMessages(),s.wjX.instance.addLinkEventTracker(this)}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.ENDED,this.onRoomSessionEvent),this._messages=[new s.hVP(this.onRoomInfoEvent.bind(this)),new s.OOH(this.onGroupInformationEvent.bind(this)),new s.kSS(this.onGroupMembersEvent.bind(this)),new s.arW(this.onGroupConfirmMemberRemoveEvent.bind(this)),new s.YVw(this.onGroupBuyDataEvent.bind(this)),new s.mNQ(this.onGroupBadgePartsEvent.bind(this)),new s.dP_(this.onCatalogPurchaseEvent.bind(this)),new s.MN7(this.onGroupSettingsEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.ENDED,this.onRoomSessionEvent),this._messages&&this._messages.length){for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]}})}onRoomSessionEvent(t){if(t)switch(t.type){case s.SeR.ENDED:return void this._ngZone.run(()=>{this._roomInfoComponent.clear()})}}onRoomInfoEvent(t){if(!t)return;const n=t.getParser();!n||(this._ngZone.run(()=>{this._roomInfoComponent.groupId=n.data.habboGroupId,this._roomInfoComponent.groupName=n.data.groupName,this._roomInfoComponent.groupBadgeCode=n.data.groupBadgeCode,this._roomInfoComponent.groupMember=n.isGroupMember}),s.wjX.instance.communication.connection.send(new s.Jr3(n.data.habboGroupId,!1)))}onGroupInformationEvent(t){if(!t)return;const n=t.getParser();!n||((n.flag||n.id===this._groupInfoComponent.groupId)&&this._ngZone.run(()=>{this._groupInfoComponent.groupId=n.id,this._groupInfoComponent.groupName=n.title,this._groupInfoComponent.groupBadgeCode=n.badge,this._groupInfoComponent.groupDescription=n.description,this._groupInfoComponent.groupType=n.type,this._groupInfoComponent.groupMembershipType=n.membershipType,this._groupInfoComponent.groupCreationDate=n.createdAt,this._groupInfoComponent.groupOwnerName=n.ownerName,this._groupInfoComponent.groupMembersCount=n.membersCount,this._groupInfoComponent.groupMembershipRequestsCount=n.pendingRequestsCount,this._groupInfoComponent.groupHomeRoomId=n.roomId,this._groupInfoComponent.isOwner=n.isOwner}),this._roomInfoComponent.groupId===n.id&&this._ngZone.run(()=>{this._roomInfoComponent.groupType=n.type,this._roomInfoComponent.groupMembershipType=n.membershipType}))}onGroupMembersEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._groupMembersComponent.groupId=n.groupId,this._groupMembersComponent.groupName=n.groupTitle,this._groupMembersComponent.groupBadgeCode=n.badge,this._groupMembersComponent.totalMembersCount=n.totalMembersCount,this._groupMembersComponent.result=n.result,this._groupMembersComponent.admin=n.admin,this._groupMembersComponent.pageSize=n.pageSize,this._groupMembersComponent.pageIndex=n.pageIndex,this._groupMembersComponent.level=n.level.toString()})}onGroupConfirmMemberRemoveEvent(t){if(!t)return;const n=t.getParser();if(!n)return;let r=[];if(n.userId===s.wjX.instance.sessionDataManager.userId)r=this._groupInfoComponent.confirmLeave();else{if(!this._groupMembersComponent.admin)return;r=this._groupMembersComponent.confirmRemove(n.userId,n.furnitureCount)}this._notificationService.alertWithChoices(r[1],r[2],r[0])}onGroupBuyDataEvent(t){if(!t)return;const n=t.getParser();if(n&&this._groupCreatorModal){const r=this._groupCreatorModal.componentInstance;r&&this._ngZone.run(()=>{r.groupCost=n.groupCost,r.availableRooms=n.availableRooms})}}onGroupBadgePartsEvent(t){if(!t)return;const n=t.getParser();!n||(this._badgeBases=n.bases,this._badgeSymbols=n.symbols,this._badgePartColors=n.partColors,this._groupColorsA=n.colorsA,this._groupColorsB=n.colorsB)}onCatalogPurchaseEvent(t){!t||!t.getParser()||this._ngZone.run(()=>{this.closeGroupCreator()})}onGroupSettingsEvent(t){if(!t)return;const n=t.getParser();!n||!this._groupManagerComponent||(this._groupManagerComponent.load(n),s.wjX.instance.communication.connection.send(new s.wTe))}linkReceived(t){const n=t.split("/");if(!(n.length<2))switch(n[1]){case"create":return void this.openGroupCreator();case"manage":if(!n[2])return;return void this.requestGroupSettings(parseInt(n[2]));case"info":if(!n[2])return;return void this.getInfo(parseInt(n[2]))}}getInfo(t){s.wjX.instance.communication.connection.send(new s.Jr3(t,!0))}getMembers(t,n,r,a){s.wjX.instance.communication.connection.send(new s.KEV(t,n,r,a))}join(t){0===this._roomInfoComponent.groupType&&this._ngZone.run(()=>{this._roomInfoComponent.groupMember=!0}),s.wjX.instance.communication.connection.send(new s.ycz(t))}giveAdmin(t,n){s.wjX.instance.communication.connection.send(new s.y8f(t,n))}takeAdmin(t,n){s.wjX.instance.communication.connection.send(new s.__f(t,n))}acceptMembership(t,n){s.wjX.instance.communication.connection.send(new s.dsv(t,n))}declineMembership(t,n){s.wjX.instance.communication.connection.send(new s.znQ(t,n))}removeMember(t,n){s.wjX.instance.communication.connection.send(new s.aMD(t,n))}deleteGroup(t){s.wjX.instance.communication.connection.send(new s.ZtR(t))}openProfile(t){s.wjX.instance.communication.connection.send(new s.m7m(t))}save(t){s.wjX.instance.communication.connection.send(new s.Ow8(t.id,t.name,t.description)),s.wjX.instance.communication.connection.send(new s.aQg(t.id,t.currentBadgeArray)),s.wjX.instance.communication.connection.send(new s.ZlJ(t.id,t.colorA,t.colorB)),s.wjX.instance.communication.connection.send(new s.$nd(t.id,t.state,t.canMembersDecorate?0:1))}buyGroup(t){s.wjX.instance.communication.connection.send(new s.OHt(t.name,t.description,parseInt(t.roomId),t.colorA,t.colorB,t.currentBadgeArray))}openGroupCreator(){this._groupCreatorModal||(this._groupCreatorModal=this._modalService.open(Ki,{backdrop:"static",centered:!0,keyboard:!1}),this._groupCreatorModal&&this._groupCreatorModal.result.then(()=>this._groupCreatorModal=null),s.wjX.instance.communication.connection.send(new s.aDl),s.wjX.instance.communication.connection.send(new s.wTe))}closeGroupCreator(){!this._groupCreatorModal||(this._groupCreatorModal.close(),this._groupCreatorModal=null)}requestGroupSettings(t){s.wjX.instance.communication.connection.send(new s.LWR(t))}get eventUrlPrefix(){return"groups"}set groupRoomInfoComponent(t){this._roomInfoComponent=t}set groupInfoComponent(t){this._groupInfoComponent=t}set groupMembersComponent(t){this._groupMembersComponent=t}set groupManagerComponent(t){this._groupManagerComponent=t}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(W.FF),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function du(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).join()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.join")))}function mu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).join()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.requestmembership")))}function pu(i,o){1&i&&(e.TgZ(0,"button",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.membershippending")))}function hu(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,mu,3,3,"button",13),e.YNc(2,pu,3,3,"button",16),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",0===t.groupMembershipType),e.xp6(1),e.Q6J("ngIf",2===t.groupMembershipType)}}function fu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).openInfo()}),e._UZ(2,"nitro-badge",11),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.qZA(),e.YNc(5,du,3,3,"button",13),e.YNc(6,hu,3,2,"div",14),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("badge",t.groupBadgeCode)("isGroup",!0),e.xp6(2),e.Oqu(t.groupName),e.xp6(1),e.Q6J("ngIf",0===t.groupType&&0===t.groupMembershipType),e.xp6(1),e.Q6J("ngIf",1===t.groupType)}}function vu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleOpen()}),e.TgZ(4,"div",5),e._UZ(5,"i",6),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"i",8),e.qZA(),e.qZA(),e.YNc(10,fu,7,5,"div",9),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,3,"group.homeroominfo.title")),e.xp6(3),e.Q6J("ngClass",t.open?"fa-chevron-down":"fa-chevron-left"),e.xp6(1),e.Q6J("ngIf",t.open)}}let Tu=(()=>{class i{constructor(t){this._groupService=t,this._groupService.groupRoomInfoComponent=this,this._open=!1,this.clear()}clear(){this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupType=-1,this._groupMembershipType=-1,this._groupMember=!1}toggleOpen(){this._open=!this._open}join(){!this._groupId||0!==this._groupMembershipType||this._groupService.join(this.groupId)}openInfo(){this._groupService.getInfo(this._groupId)}get visible(){return this._groupId>0}get open(){return this._open}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get isGroupMember(){return this._groupMember}set groupMember(t){this._groupMember=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-room-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-room-info-component mb-2 float-right",4,"ngIf"],[1,"nitro-group-room-info-component","mb-2","float-right"],[1,"card","w-100"],[1,"d-flex","flex-column","p-2","w-100"],[1,"d-flex","flex-row","justify-content-between","w-100",3,"click"],[1,"w-100"],[1,"fas","fa-users","mr-2"],[1,"toggler"],[1,"fas",3,"ngClass"],["class","d-flex flex-column w-100 mt-2",4,"ngIf"],[1,"d-flex","flex-column","w-100","mt-2"],[1,"mr-2",3,"badge","isGroup"],[1,"group-name","w-100"],["class","btn btn-success btn-block btn-sm mt-2",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-success","btn-block","btn-sm","mt-2",3,"click"],["class","btn btn-primary disabled btn-block btn-sm mt-2","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block","btn-sm","mt-2"]],template:function(t,n){1&t&&e.YNc(0,vu,11,5,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,u.mk,Le],pipes:[m],encapsulation:2}),i})(),bu=(()=>{class i{constructor(t){this._notificationService=t,this.type=null,this.parameters=null,this.removing=!1}hide(){this.removing=!0,setTimeout(()=>this.close(),300)}close(){this._notificationService.closeNotification(this)}interpolate(t,n=null){n||(n=new RegExp(/%(.*?)%/g));const r=t.match(n);if(r&&r.length)for(const a of r){const c=this.parameters.get(this.removeInterpolateKey(a));c&&(t=t.replace(a,c))}return t}removeInterpolateKey(t){return t.replace(/%/g,"")}getDefaultImage(){const t=this.notificationLocaleKey+".image";let n=s.wjX.instance.getLocalization(t)||null;return n===t?(n=s.wjX.instance.getConfiguration("image.library.notifications.url"),n=n.replace("%image%",this.type),n):(n&&n.length&&(n=this.interpolate(n),n=s.wjX.instance.core.configuration.interpolate(n)),n)}getDefaultLinkTitle(){let t=s.wjX.instance.getLocalization(this.notificationLocaleKey+".linkTitle")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultLinkUrl(){let t=s.wjX.instance.getLocalization(this.notificationLocaleKey+".linkUrl")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultMessage(){let t=s.wjX.instance.getLocalization(this.notificationLocaleKey+".message")||null;return t&&t.length&&(t=this.interpolate(t)),t}getDefaultTitle(){let t=s.wjX.instance.getLocalization(this.notificationLocaleKey+".title")||null;return t&&t.length&&(t=this.interpolate(t)),t}get notificationLocaleKey(){return"notification."+this.type}get timeout(){return 0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();const Cu=function(i){return{"background-image":i}};function Eu(i,o){if(1&i&&e._UZ(0,"div",3),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,Cu,"url("+t.getDefaultImage()+")"))}}let $i=(()=>{class i extends bu{clickNotification(){this.visitUrl(),this.hide()}visitUrl(){const t=this.getDefaultLinkUrl();if(!t||!t.length)return;const n=t.split(":");!n||n.length<2||("event"===n[0]?s.wjX.instance.createLinkEvent(n[1]):window.open(t,"_blank"))}getDefaultImage(){let t=this.parameters.get("image")||null;return t?(t=s.wjX.instance.core.configuration.interpolate(t),t):super.getDefaultImage()}getDefaultLinkTitle(){let t=this.parameters.get("linkTitle")||null;return t?(t=s.wjX.instance.getLocalization(t),t):super.getDefaultLinkTitle()}getDefaultLinkUrl(){return this.parameters.get("linkUrl")||super.getDefaultLinkUrl()}getDefaultMessage(){let t=this.parameters.get("message")||null;return t?(t=s.wjX.instance.getLocalization(t),t):super.getDefaultMessage()}getDefaultTitle(){let t=this.parameters.get("title")||null;return t?(t=s.wjX.instance.getLocalization(t),t):super.getDefaultTitle()}get timeout(){return 5e3}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:3,vars:4,consts:[[1,"d-flex","justify-content-center","align-items-center","nitro-notification-bubble","bg-primary","rounded","border","border-black","shadow",3,"click"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.clickNotification()}),e._UZ(1,"p",1),e.YNc(2,Eu,1,3,"div",2),e.qZA()),2&t&&(e.ekj("removing",n.removing),e.xp6(1),e.Q6J("innerHTML",n.getDefaultMessage(),e.oJD),e.xp6(1),e.Q6J("ngIf",n.getDefaultImage()))},directives:[u.O5,u.PC],encapsulation:2}),i})();const Su=function(i){return{"background-image":i}};function Au(i,o){if(1&i&&e._UZ(0,"div",7),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(1,Su,"url("+t.getDefaultImage()+")"))}}let wu=(()=>{class i extends $i{get timeout(){return 0}}return i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:10,vars:8,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","nitro-notification-bubble","bubble-event","bg-primary","rounded","border","shadow"],[1,"d-flex","w-100"],[1,"bubble-message","text-center","w-100","mb-0",3,"innerHTML"],["class","bubble-image bg-secondary rounded",3,"ngStyle",4,"ngIf"],[1,"d-flex","btn-group","w-100","mt-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"bubble-image","bg-secondary","rounded",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"p",2),e.YNc(3,Au,1,3,"div",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.hide()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.clickNotification()}),e._uU(9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.ekj("removing",n.removing),e.xp6(2),e.Q6J("innerHTML",n.getDefaultMessage(),e.oJD),e.xp6(1),e.Q6J("ngIf",n.getDefaultImage()),e.xp6(3),e.Oqu(e.lcZ(7,6,"alert.close.button")),e.xp6(3),e.Oqu(n.getDefaultLinkTitle()))},directives:[u.O5,u.PC],pipes:[m],encapsulation:2}),i})();const xu=["notificationsContainer"];function Zu(i,o){}let Iu=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._componentFactoryResolver=n,this._ngZone=r,this._notifications=new Map}ngOnInit(){this._notificationService.notificationCenter=this}ngOnDestroy(){this.closeAllNotifications(),this._notificationService.notificationCenter=null}displayNotification(t,n){let r=null;switch(t){case"hotel.event":r=wu;break;default:r=$i}const a=this.buildNotification(r);return a?(a.type=t,a.parameters=n,a.timeout>0&&setTimeout(()=>a&&a.hide(),a.timeout),a):null}buildNotification(t){let n=null;return this._ngZone.run(()=>{n=this.createNotificationComponent(t)}),n||null}createNotificationComponent(t){if(!t)return null;let n=null;const r=this._componentFactoryResolver.resolveComponentFactory(t);let a=null;return r&&(a=this.notificationsContainer.createComponent(r),this._notifications.set(a.instance,a)),n=a.instance,n}closeNotification(t){if(!t)return;const n=this._notifications.get(t);!n||(this._notifications.delete(t),this.removeNotificationView(n.hostView))}closeAllNotifications(){for(const t of this._notifications.keys())this.closeNotification(t)}removeNotificationView(t){if(!t)return;const n=this.notificationsContainer.indexOf(t);-1!==n&&this.notificationsContainer.remove(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-notification-center-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(xu,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.notificationsContainer=r.first)}},decls:3,vars:0,consts:[[1,"d-flex","flex-column-reverse"],["notificationsContainer",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Zu,0,0,"ng-template",null,1,e.W1O),e.qZA())},encapsulation:2}),i})();class yu{constructor(o){this._name=o,this._achievements=[]}get name(){return this._name}set name(o){this._name=o}get achievements(){return this._achievements}set achievements(o){this._achievements=o}}let Xt=(()=>{class i{constructor(t,n){this._settingsService=t,this._ngZone=n,this._messages=[],this._categories=[],this._selectedCategory=null,this._achievementScore=0,this._isInitalized=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.TsR(this.onAchievementsMessageEvent.bind(this)),new s.Hws(this.onAchievementsScoreEvent.bind(this)),new s.bbX(this.onAchievementEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onAchievementsScoreEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._achievementScore=n.score)}onAchievementsMessageEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=[];for(const a of n.achievements){if(!a)continue;let c=null;for(const l of r)if(l&&l.name===a.category){c=l;break}c||(c=new yu(a.category),r.push(c)),c.achievements.push(a)}this._ngZone.run(()=>{this._categories=r,this._selectedCategory=this._categories[0],this._isInitalized=!0})}onAchievementEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.achievement;!r||this._ngZone.run(()=>{for(const a of this._categories){if(!a||a.name!==r.category)continue;let c=!1;for(const l of a.achievements)if(l&&l.achievementId===r.achievementId){c=!0,l.progress!==r.progress&&(l.reset(r),this.isIgnoredAchievement(l)||this._selectedCategory!==a&&l.unseen++);break}if(c)break}})}isIgnoredAchievement(t){if(!t)return!1;const n=s.wjX.instance.getConfiguration("achievements.unseen.ignored"),r=t.badgeId.replace(/[0-9]/g,"");return n.indexOf(r)>=0}loadAchievements(){s.wjX.instance.communication.connection.send(new s.c2_)}get categories(){return this._categories}get selectedCategory(){return this._selectedCategory}set selectedCategory(t){this._selectedCategory=t}get achievementScore(){return this._achievementScore}get isInitalized(){return this._isInitalized}get unseenCount(){let t=0;for(const n of this._categories)if(n)for(const r of n.achievements)!r||(t+=r.unseen);return t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Ru=["progressBar"],Mu=["nitro-achievements-category-list-component",""];function Ou(i,o){if(1&i&&(e.TgZ(0,"div",13),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.getUnseenCount(t))}}const Uu=function(i){return[i]},Nu=function(i){return{"background-image":i}};function qu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectCategory(a)}),e.TgZ(1,"div",10),e.YNc(2,Ou,2,1,"div",11),e.TgZ(3,"div",12),e._uU(4),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Uu,n.selectedCategory===t?"bg-primary":"bg-secondary"))("ngStyle",e.VKq(6,Nu,"url("+n.getCategoryImage(t.name,t.achievements)+")")),e.xp6(1),e.Q6J("ngIf",n.getUnseenCount(t)),e.xp6(2),e.Oqu(n.getCategoryProgress(t.achievements))}}const Lu=function(i){return{width:i}};let ku=(()=>{class i{constructor(t,n,r){this._settingsService=t,this._achivementsService=n,this._ngZone=r,this.visible=!1}selectCategory(t){this._achivementsService.selectedCategory=t}getProgressNumbers(){let t=0,n=0;for(const r of this.categories)if(r)for(const a of r.achievements)!a||(t+=a.finalLevel?a.level:a.level-1,n+=a.levelCount);return[t,n]}getProgressPercentageString(){const[t,n]=this.getProgressNumbers();return Math.trunc(t/n*100)+"%"}getProgressString(){const[t,n]=this.getProgressNumbers();return t+"/"+n}getCategoryImage(t,n,r=!1){if(r)return s.wjX.instance.getConfiguration("achievements.images.url",s.wjX.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}.png`).toString().replace("%image%",t);let a=0;for(const l of n)a+=l.finalLevel?l.level:l.level-1;const c=a>0?"active":"inactive";return s.wjX.instance.getConfiguration("achievements.images.url",s.wjX.instance.core.configuration.getValue("image.library.url")+`quests/achcategory_${t}_${c}.png`).toString().replace("%image%",`achcategory_${t}_${c}`)}getCategoryProgress(t){let n=0,r=0;for(const a of t)!a||(a.firstLevelAchieved&&(n+=a.finalLevel?a.level:a.level-1),r+=a.levelCount);return n+"/"+r}getUnseenCount(t){let n=0;if(t)for(const r of t.achievements)!r||(n+=r.unseen);return n}get categories(){return this._achivementsService.categories}get selectedCategory(){return this._achivementsService.selectedCategory}get achievementScore(){return this._achivementsService.achievementScore}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(Xt),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-achievements-category-list-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(Ru,5),2&t){let r;e.iGM(r=e.CRH())&&(n.progressBar=r.first)}},inputs:{visible:"visible"},attrs:Mu,decls:12,vars:10,consts:[[1,"grid-container","achievement-category-container","w-100","mb-2"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","w-100"],[1,"achievement-progress-bar","bg-secondary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"],[1,"text-center","bg-secondary","rounded","px-2","mt-2"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],[1,"achievement-progress"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,qu,5,8,"div",2),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"span",7),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",8),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.categories),e.xp6(3),e.Q6J("ngStyle",e.VKq(8,Lu,n.getProgressPercentageString())),e.xp6(3),e.Oqu(n.getProgressString()),e.xp6(2),e.Oqu(e.Dn7(11,4,"achievements.categories.score","score",n.achievementScore)))},directives:[u.sg,u.PC,u.mk,u.O5],pipes:[m],encapsulation:2}),i})();class Fu{constructor(o){this.badgeId=o,this._base="",this._level=1,this.parseText()}parseText(){let o=this.badgeId.length-1;for(;o>0&&this.isNumber(this.badgeId.charAt(o));)o--;this._base=this.badgeId.substr(0,o+1);const t=this.badgeId.substr(o+1,this.badgeId.length);t&&""!=t&&(this._level=Number.parseInt(t))}isNumber(o){const t=o.charCodeAt(0);return t>=49&&t<=57}set level(o){this._level=Math.max(1,o)}get level(){return this._level}get getBadgeId(){return this._base+this._level}get base(){return this._base}}const Du=["nitro-achievements-category-component",""];function Pu(i,o){if(1&i&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.count)}}const Ju=function(i,o){return[i,o]},ju=function(i){return{"background-image":i}};function Vu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectAchievement(a)}),e.TgZ(1,"div",6),e.YNc(2,Pu,2,1,"div",7),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(3,Ju,n.selectedAchievement===t?"bg-primary":"bg-secondary",t&&t.firstLevelAchieved?"":"greyscale"))("ngStyle",e.VKq(6,ju,"url("+n.getBadgeImageUrl(t)+")")),e.xp6(1),e.Q6J("ngIf",t.count)}}function Bu(i,o){if(1&i&&(e.TgZ(0,"span",19),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._UZ(5,"img",20),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij("",e.lcZ(2,3,"achievements.details.reward")," "),e.xp6(3),e.Oqu(t.selectedAchievement.levelRewardPoints),e.xp6(1),e.Q6J("src",t.getCurrencyUrl(t.selectedAchievement.levelRewardPointType),e.LSH)}}const Gu=function(i){return{width:i}};function Hu(i,o){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e.TgZ(2,"div",23),e.TgZ(3,"span",24),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.VKq(2,Gu,t.getProgress(t.selectedAchievement))),e.xp6(3),e.Oqu(t.getProgress(t.selectedAchievement,!0))}}const Wu=function(i){return[i]};function Qu(i,o){if(1&i&&(e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e._UZ(3,"img",12),e.qZA(),e.TgZ(4,"span",13),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",14),e.TgZ(7,"span",15),e._uU(8),e.qZA(),e.TgZ(9,"span",16),e._uU(10),e.qZA(),e.YNc(11,Bu,6,5,"span",17),e.YNc(12,Hu,5,4,"div",18),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(7,Wu,t.selectedAchievement.firstLevelAchieved?"":"greyscale"))("src",t.getBadgeImageUrl(t.selectedAchievement),e.LSH),e.xp6(2),e.Oqu(t.getBadgeLevelString(t.selectedAchievement)),e.xp6(3),e.Oqu(t.getBadgeText(t.selectedAchievement)),e.xp6(2),e.Oqu(t.getBadgeText(t.selectedAchievement,!0)),e.xp6(1),e.Q6J("ngIf",!t.selectedAchievement.finalLevel),e.xp6(1),e.Q6J("ngIf",!t.selectedAchievement.finalLevel)}}let Xu=(()=>{class i{constructor(t){this._achivementsService=t,this.category=null,this._selectedAchievement=null}ngOnChanges(t){const r=t.category.currentValue;r&&r!==t.category.previousValue&&(this._selectedAchievement=null)}selectAchievement(t){t.unseen=0,this._selectedAchievement=t}getAchievedBadgeId(t){return t.finalLevel?t.badgeId:s.wjX.instance.localization.getBadgeBaseAndLevel(t.badgeId)}getBadgeText(t,n=!1){const r=this.getAchievedBadgeId(t),a=new Fu(r);let c;return c=this.getText(n?["badge_desc_"+r,"badge_desc_"+a.base]:["badge_name_"+r,"badge_name_"+a.base]),c.replace("%roman%",this.getRomanNumeral(a.level)).replace("%limit%",t.scoreLimit.toString())}getText(t){let n="",r=0;for(;r<t.length;){const a=t[r];if(n=s.wjX.instance.getLocalization(a),n!==a)return n;r++}return""}getProgress(t,n=!1){if(t)return n?t.progress+"/"+t.toNextProgress:Math.trunc(t.progress/t.toNextProgress*100)+"%"}getBadgeLevelString(t){if(!t)return;let n=s.wjX.instance.getLocalization("achievements.details.level");return n=n.replace("%level%",Math.max(1,t.level-1).toString()),n=n.replace("%limit%",t.levelCount.toString()),n}getRomanNumeral(t){return s.wjX.instance.localization.getRomanNumeral(t)}getBadgeImageUrl(t){let n=t.badgeId;return t.levelCount>1&&(n=n.replace(/[0-9]/g,""),n+=t.level-1>0?t.level-1:t.level),s.wjX.instance.sessionDataManager.getBadgeUrl(n)}getCurrencyUrl(t){return s.wjX.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}get selectedAchievement(){return this._selectedAchievement}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Xt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-achievements-category-component",""]],inputs:{category:"category"},features:[e.TTD],attrs:Du,decls:7,vars:5,consts:[[1,"text-center","bg-secondary","rounded","px-2","mb-2"],[1,"grid-container","w-100","mb-2",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","bg-secondary mb-auto w-100 p-1 rounded d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],[1,"detail-info","has-image","rounded",3,"ngClass","ngStyle"],["class","position-absolute btn btn-sm btn-danger px-1 py-0 rounded count",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-danger","px-1","py-0","rounded","count"],[1,"bg-secondary","mb-auto","w-100","p-1","rounded","d-flex","flex-row"],[1,"text-center"],[1,"badge_preview","flex-shrink-0","justify-content-center","d-flex"],["image-placeholder","",1,"badge_preview_image","align-self-center",3,"ngClass","src"],[1,"font-weight-bolder","text-center","small"],[1,"badge_info","w-100","small"],[1,"mb-1","font-weight-bolder"],[1,"mb-1","d-block",2,"min-height","42px"],["class","mb-1 d-block",4,"ngIf"],["class","achievement-progress-bar bg-primary rounded p-1 position-relative",4,"ngIf"],[1,"mb-1","d-block"],["image-placeholder","",1,"pl-1",3,"src"],[1,"achievement-progress-bar","bg-primary","rounded","p-1","position-relative"],[1,"achievement-progress-bar-inner","bg-success","rounded","py-3",3,"ngStyle"],[1,"achievement-progress-bar-content","text-center","d-flex","justify-content-center"],[1,"align-self-center"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"perfect-scrollbar",1),e.TgZ(4,"div",2),e.YNc(5,Vu,3,8,"div",3),e.qZA(),e.qZA(),e.YNc(6,Qu,13,9,"div",4)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,3,"quests."+n.category.name+".name")),e.xp6(4),e.Q6J("ngForOf",n.category.achievements),e.xp6(1),e.Q6J("ngIf",n.selectedAchievement))},directives:[C.Vv,u.sg,u.O5,u.mk,u.PC,le],pipes:[m],encapsulation:2}),i})();function Yu(i,o){if(1&i&&e._UZ(0,"div",9),2&i){const t=e.oxw(2);e.Q6J("category",t.selectedCategory)}}function zu(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"div",7),e.YNc(9,Yu,1,1,"div",8),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"inventory.achievements")),e.xp6(6),e.Q6J("ngIf",t.selectedCategory)}}let Ku=(()=>{class i{constructor(t,n,r){this._settingsService=t,this._achivementsService=n,this._ngZone=r,this.visible=!1}ngOnChanges(t){const r=t.visible.currentValue;r&&r!==(t.visible.previousValue||!1)&&this.prepareAchievements()}prepareAchievements(){this._achivementsService.isInitalized||this._achivementsService.loadAchievements()}hide(){this._settingsService.hideAchievements()}get selectedCategory(){return this._achivementsService.selectedCategory}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(Xt),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-achievements-main-component"]],inputs:{visible:"visible"},features:[e.TTD],decls:1,vars:1,consts:[["class","nitro-achievements card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-achievements","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],["nitro-achievements-category-list-component","",1,"col-6","d-flex","flex-column"],["class","col-6 d-flex flex-column","nitro-achievements-category-component","",3,"category",4,"ngIf"],["nitro-achievements-category-component","",1,"col-6","d-flex","flex-column",3,"category"]],template:function(t,n){1&t&&e.YNc(0,zu,10,4,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,ku,Xu],pipes:[m],encapsulation:2}),i})(),eo=(()=>{class i{constructor(t,n){this._notificationService=t,this._ngZone=n,this._component=null,this.registerMessages()}static getReasonAsString(t){switch(t){case 1:return"useless";case 2:return"abusive";default:return"resolved"}}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new s.iQr(this.onCallForHelpResultMessageEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t)}onCallForHelpResultMessageEvent(t){if(!t)return;const n=t.getParser();if(!n)return;let r=n.messageText;""===r&&(r=s.wjX.instance.getLocalization("${help.cfh.closed."+i.getReasonAsString(n.resultType)+"}")),this._ngZone.run(()=>this._notificationService.alert(r,"${mod.alert.title}"))}get component(){return this._component}set component(t){this._component=t}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),$u=(()=>{class i{constructor(t,n){this._callForHelpService=t,this._ngZone=n}ngOnInit(){this._callForHelpService.component=this}ngOnDestroy(){this._callForHelpService.component=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(eo),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-call-for-help-main-component"]],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),pi=(()=>{class i{openPage(t){}closePage(t){!t||!this._component||this._component.close(t)}closeAll(){!this._component||this._component.closeAll()}get component(){return this._component}set component(t){this._component=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),e_=(()=>{class i{constructor(t){this._habbopediaService=t,this.url=""}close(){this._habbopediaService.closePage(this)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(pi))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();const t_=["pagesContainer"];function n_(i,o){}let i_=(()=>{class i{constructor(t,n,r){this._habbopediaService=t,this._componentFactoryResolver=n,this._ngZone=r,this._pages=new Map}ngOnInit(){this._habbopediaService.component=this,s.wjX.instance.addLinkEventTracker(this)}ngOnDestroy(){s.wjX.instance.removeLinkEventTracker(this),this._habbopediaService.component=null}openPage(t){this.buildPage(e_,t)}buildPage(t,n){const r=this.createComponent(t);return r?(r.url=n,r):null}createComponent(t){if(!t)return null;const n=this._componentFactoryResolver.resolveComponentFactory(t);let r=null;return n&&(r=this.pagesContainer.createComponent(n),this._pages.set(r.instance,r)),r.instance}close(t){if(!t)return;const n=this._pages.get(t);!n||(this._pages.delete(t),this.removeView(n.hostView))}closeAll(){for(const t of this._pages.keys())this.close(t)}removeView(t){if(!t)return;const n=this.pagesContainer.indexOf(t);-1!==n&&this.pagesContainer.remove(n)}linkReceived(t){const n=t.split("/");n.length<2||(n.shift(),this.openPage(n.join("/")))}get eventUrlPrefix(){return"habbopages/"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(pi),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-pedia-main-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(t_,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.pagesContainer=r.first)}},decls:2,vars:0,consts:[["pagesContainer",""]],template:function(t,n){1&t&&e.YNc(0,n_,0,0,"ng-template",null,0,e.W1O)},encapsulation:2}),i})();class o_{constructor(o,t,n=!1){this._model=o,this._partColor=t,this._isSelected=!1,this._isDisabledForWearing=n,this._Str_22595()}dispose(){this._model=null,this._partColor=null}get isSelected(){return this._isSelected}set isSelected(o){this._isSelected=o}_Str_22595(){this._isHC=!!this._partColor&&this._partColor.clubLevel>0}get _Str_3420(){return this._partColor}get color(){return s.No6.int2rgb(this._partColor.rgb)}get _Str_14863(){return this._isDisabledForWearing}get isHC(){return this._isHC}}let to=(()=>{class i{constructor(t){this._model=t,this._figureString=null,this._isDisposed=!1}dispose(){this._isDisposed=!0}update(t,n=0,r=4){this._figureString=t}resetFigure(t){}get disposed(){return this._isDisposed}get figureString(){return this._figureString}}return i.PREVIEW_AVATAR_DIRECTION=4,i})(),A=(()=>{class i{constructor(){this._gender="M",this._direction=4,this._avatarEffectType=-1,this._direction=to.PREVIEW_AVATAR_DIRECTION,this._view=new to(this)}loadAvatarData(t,n){this._data=new Map,this._colors=new Map,this._gender=n,this.parseFigureString(t),this.updateView()}dispose(){this._data=null,this._colors=null,this._isDisposed=!0,this._view&&(this._view.dispose(),this._view=null)}get disposed(){return this._isDisposed}parseFigureString(t){if(!t)return;const n=t.split(".");if(n&&n.length)for(const r of n){const a=r.split("-");if(!a.length)continue;const c=a[0],l=parseInt(a[1]),g=[];let d=2;for(;d<a.length;)g.push(parseInt(a[d])),d++;g.length||g.push(0),this.savePartSetId(c,l,!1),this.savePartSetColourId(c,g,!1)}}getPartSetId(t){const n=this._data.get(t);return void 0!==n?n:-1}getColourIds(t){const n=this._colors.get(t);return void 0!==n?n:[]}getFigureString(){let t="";const n=[];for(const[a,c]of this._data.entries()){const l=this._colors.get(a);let g=a+"-"+c;if(l&&l.length){let d=0;for(;d<l.length;)g=g+"-"+l[d],d++}n.push(g)}let r=0;for(;r<n.length;)t+=n[r],r<n.length-1&&(t+="."),r++;return t}savePartData(t,n,r,a=!1){this.savePartSetId(t,n,a),this.savePartSetColourId(t,r,a)}savePartSetId(t,n,r=!0){switch(t){case i.FACE:case i.HAIR:case i.HAT:case i.HEAD_ACCESSORIES:case i.EYE_ACCESSORIES:case i.FACE_ACCESSORIES:case i.SHIRT:case i.JACKET:case i.CHEST_ACCESSORIES:case i.CHEST_PRINTS:case i.TROUSERS:case i.SHOES:case i.TROUSER_ACCESSORIES:n>=0?this._data.set(t,n):this._data.delete(t)}r&&this.updateView()}savePartSetColourId(t,n,r=!0){switch(t){case i.FACE:case i.HAIR:case i.HAT:case i.HEAD_ACCESSORIES:case i.EYE_ACCESSORIES:case i.FACE_ACCESSORIES:case i.SHIRT:case i.JACKET:case i.CHEST_ACCESSORIES:case i.CHEST_PRINTS:case i.TROUSERS:case i.SHOES:case i.TROUSER_ACCESSORIES:this._colors.set(t,n)}r&&this.updateView()}getFigureStringWithFace(t,n=!0){let r="";const a=[i.FACE],c=[];for(const g of a){const d=this._colors.get(g);if(void 0===d)continue;let h=this._data.get(g);g===i.FACE&&n&&(h=t);let f=g+"-"+h;if(h>=0){let E=0;for(;E<d.length;)f=f+"-"+d[E],E++}c.push(f)}let l=0;for(;l<c.length;)r+=c[l],l<c.length-1&&(r+="."),l++;return r}updateView(){this._view.update(this.getFigureString(),this._avatarEffectType,this._direction)}get view(){return this._view}get gender(){return this._gender}resetFigure(t){this.updateView()}set avatarEffectType(t){this._avatarEffectType=t}get avatarEffectType(){return this._avatarEffectType}get direction(){return this._direction}set direction(t){this._direction=t,this.updateView()}}return i.MALE="M",i.FEMALE="F",i.UNISEX="U",i.SCALE="h",i.STD="std",i.DEFAULT_FRAME="0",i.FACE="hd",i.HAIR="hr",i.HAT="ha",i.HEAD_ACCESSORIES="he",i.EYE_ACCESSORIES="ea",i.FACE_ACCESSORIES="fa",i.JACKET="cc",i.SHIRT="ch",i.CHEST_ACCESSORIES="ca",i.CHEST_PRINTS="cp",i.TROUSERS="lg",i.SHOES="sh",i.TROUSER_ACCESSORIES="wa",i})();class Ut{constructor(o,t,n,r=!0,a=!1){if(this._renderManager=s.wjX.instance.avatar,this._model=o,this._partSet=t,this._colors=n,this._useColors=r,this._isDisabledForWearing=a,this._thumbContainer=null,this._imageUrl=null,this._maxColorIndex=0,this._isValidFigure=!1,this._isSelected=!1,this._isHC=!1,this._isSellable=!1,this._isClear=!1,this._disposed=!1,this._isInitalized=!1,t){const c=t.parts;for(const l of c)this._maxColorIndex=Math.max(this._maxColorIndex,l.colorLayerIndex)}}init(){this._isInitalized||(this._isInitalized=!0,this.update())}dispose(){this._disposed||(this._renderManager=null,this._model=null,this._partSet=null,this._colors=null,this._imageUrl=null,this._disposed=!0,this._isInitalized=!1,this._thumbContainer&&(this._thumbContainer.destroy(),this._thumbContainer=null))}update(){this.updateThumbVisualization()}analyzeFigure(){if(!(this._renderManager&&this._model&&this.partSet&&this.partSet.parts&&this.partSet.parts.length))return!1;const o=this._renderManager.createFigureContainer(this.partSet.type+"-"+this.partSet.id);return this._renderManager.isFigureContainerReady(o)?(this._isValidFigure=!0,!0):(this._renderManager.downloadAvatarFigure(o,this),!1)}renderThumb(){if(!this._renderManager||!this.partSet||!this._model||!this._isValidFigure&&!this.analyzeFigure())return null;const o=this.partSet.parts.concat().sort(this.sortByDrawOrder),t=new s.kab;for(const n of o){if(!n)continue;let r=null,a=0,c=!1;for(;!c&&a<Ut.THUMB_DIRECTIONS.length;)r=this._renderManager.getAssetByName(A.SCALE+"_"+A.STD+"_"+n.type+"_"+n.id+"_"+Ut.THUMB_DIRECTIONS[a]+"_"+A.DEFAULT_FRAME),r&&r.texture?c=!0:a++;if(!c)continue;const l=r.offsetX,g=r.offsetY;let d=null;if(this._useColors&&n.colorLayerIndex>0){const f=this._colors[n.colorLayerIndex-1];f&&(d=f)}const h=new s.L_v(r.texture);h.position.set(l,g),d&&(h.tint=d.rgb),t.addChild(h)}return t}updateThumbVisualization(){if(!this._isInitalized)return;let o=this._thumbContainer;o||(o=this.renderThumb()),o&&(this._partSet?(this._isHC=this._partSet.clubLevel>0,this._isSellable=this._partSet.isSellable):(this._isHC=!1,this._isSellable=!1),this._isDisabledForWearing&&this.setAlpha(o,.2),this._imageUrl=s.Oau.generateImageUrl(o))}setAlpha(o,t){return o.alpha=t,o}sortByDrawOrder(o,t){const n=Ut.DRAW_ORDER.indexOf(o.type),r=Ut.DRAW_ORDER.indexOf(t.type);return n<r?-1:n>r?1:o.index<t.index?-1:o.index>t.index?1:0}resetFigure(o){!this.analyzeFigure()||this.update()}get disposed(){return this._disposed}get id(){return this._partSet?this._partSet.id:-1}get partSet(){return this._partSet}set colors(o){this._colors=o,this.update()}get isDisabledForWearing(){return this._isDisabledForWearing}set iconImage(o){this._thumbContainer=o,this.update()}get imageUrl(){return this._imageUrl}get colorLayerCount(){return this._maxColorIndex}get isSelected(){return this._isSelected}set isSelected(o){this._isSelected=o}get isHC(){return this._isHC}get isSellable(){return this._isSellable}get isClear(){return this._isClear}set isClear(o){this._isClear=o}}Ut.THUMB_DIRECTIONS=[2,6,0,4,3,1],Ut.DRAW_ORDER=[s.Bnr.LEFT_HAND_ITEM,s.Bnr.LEFT_HAND,s.Bnr.LEFT_SLEEVE,s.Bnr.LEFT_COAT_SLEEVE,s.Bnr.BODY,s.Bnr.SHOES,s.Bnr.LEGS,s.Bnr.CHEST,s.Bnr.CHEST_ACCESSORY,s.Bnr.COAT_CHEST,s.Bnr.CHEST_PRINT,s.Bnr.WAIST_ACCESSORY,s.Bnr.RIGHT_HAND,s.Bnr.RIGHT_SLEEVE,s.Bnr.RIGHT_COAT_SLEEVE,s.Bnr.HEAD,s.Bnr.FACE,s.Bnr.EYES,s.Bnr.HAIR,s.Bnr.HAIR_BIG,s.Bnr.FACE_ACCESSORY,s.Bnr.EYE_ACCESSORY,s.Bnr.HEAD_ACCESSORY,s.Bnr.HEAD_ACCESSORY_EXTRA,s.Bnr.RIGHT_HAND_ITEM];class hi{constructor(o,t,n){this.MAX_PALETTES=2,this._selectedPartIndex=-1,this._name=o,this._parts=t,this._palettes=n,this._selectedPartIndex=-1}static defaultColorId(o,t){if(!o||!o.length)return-1;let n=0;for(;n<o.length;){const r=o[n];if(r._Str_3420&&r._Str_3420.clubLevel<=t)return r._Str_3420.id;n++}return-1}init(){for(const o of this._parts)!o||o.init()}dispose(){if(this._parts){for(const o of this._parts)o.dispose();this._parts=null}if(this._palettes){for(const o of this._palettes)if(o)for(const t of o)t.dispose();this._palettes=null}this._selectedPartIndex=-1,this._paletteIndexes=null}selectPartId(o){if(!this._parts)return;let t=0;for(;t<this._parts.length;){if(this._parts[t].id===o)return void this.selectPartIndex(t);t++}}selectColorIds(o){if(!o||!this._palettes)return;this._paletteIndexes=new Array(o.length);let t=0;for(;t<this._palettes.length;){const n=this.getPalette(t);if(n){let r=0;if(o.length>t)r=o[t];else{const c=n[0];c&&c._Str_3420&&(r=c._Str_3420.id)}let a=0;for(;a<n.length;){const c=n[a];c._Str_3420.id===r?(this._paletteIndexes[t]=a,c.isSelected=!0):c.isSelected=!1,a++}}t++}this.updatePartColors()}selectPartIndex(o){if(!this._parts)return null;if(this._selectedPartIndex>=0&&this._parts.length>this._selectedPartIndex){const t=this._parts[this._selectedPartIndex];t&&(t.isSelected=!1)}if(this._parts.length>o){const t=this._parts[o];if(t)return t.isSelected=!0,this._selectedPartIndex=o,t}return null}selectColorIndex(o,t){const n=this.getPalette(t);if(!n||n.length<=o)return null;this.deselectColorIndex(this._paletteIndexes[t],t),this._paletteIndexes[t]=o;const r=n[o];return r?(r.isSelected=!0,this.updatePartColors(),r):null}getCurrentColorIndex(o){return this._paletteIndexes[o]}deselectColorIndex(o,t){const n=this.getPalette(t);if(!n||n.length<=o)return;const r=n[o];!r||(r.isSelected=!1)}getSelectedColorIds(){if(!(this._paletteIndexes&&this._paletteIndexes.length&&this._palettes&&this._palettes.length))return null;const o=this._palettes[0];if(!o||!o.length)return null;const t=o[0];if(!t||!t._Str_3420)return null;const n=t._Str_3420.id,r=[];let a=0;for(;a<this._paletteIndexes.length;){const l=this._palettes[a];if(l&&!(l.length<=a))if(l.length>this._paletteIndexes[a]){const g=l[this._paletteIndexes[a]];r.push(g&&g._Str_3420?g._Str_3420.id:n)}else r.push(n);a++}const c=this.getCurrentPart();return c?r.slice(0,Math.max(c.colorLayerCount,1)):null}getSelectedColors(){const o=[];let t=0;for(;t<this._paletteIndexes.length;){const n=this.getSelectedColor(t);o.push(n?n._Str_3420:null),t++}return o}getSelectedColor(o){const t=this.getPalette(o);return!t||t.length<=this._paletteIndexes[o]?null:t[this._paletteIndexes[o]]}getSelectedColorId(o){const t=this.getSelectedColor(o);return t&&t._Str_3420?t._Str_3420.id:0}get parts(){return this._parts}getPalette(o){return!this._paletteIndexes||!this._palettes||this._palettes.length<=o?null:this._palettes[o]}getCurrentPart(){return this._parts[this._selectedPartIndex]}updatePartColors(){const o=this.getSelectedColors();for(const t of this._parts)t&&(t.colors=o)}hasClubSelectionsOverLevel(o){let t=!1;const n=this.getSelectedColors();if(n){let c=0;for(;c<n.length;){const l=n[c];l&&l.clubLevel>o&&(t=!0),c++}}let r=!1;const a=this.getCurrentPart();if(a&&a.partSet){const c=a.partSet;c&&c.clubLevel>o&&(r=!0)}return t||r}hasInvalidSelectedItems(o){const t=this.getCurrentPart();if(!t)return!1;const n=t.partSet;return n&&n.isSellable?!o.hasFigureSetId(n.id):void 0}stripClubItemsOverLevel(o){const t=this.getCurrentPart();if(t&&t.partSet&&t.partSet.clubLevel>o){const r=this.selectPartIndex(0);return r&&!r.partSet&&this.selectPartIndex(1),!0}return!1}stripClubColorsOverLevel(o){const t=[],n=this.getSelectedColors();let r=!1;const a=this.getPalette(0),c=hi.defaultColorId(a,o);if(-1===c)return!1;let l=0;for(;l<n.length;){const g=n[l];g?g.clubLevel>o?(t.push(c),r=!0):t.push(g.id):(t.push(c),r=!0),l++}return r&&this.selectColorIds(t),r}get name(){return this._name}get selectedPartIndex(){return this._selectedPartIndex}}class Pn{constructor(o){this._editor=o,this._isInitalized=!1,this._maxPaletteCount=0}dispose(){this._categories=null,this._editor=null,this._disposed=!0}get disposed(){return this._disposed}init(){this._categories||(this._categories=new s.lzS)}reset(){if(this._isInitalized=!1,this._categories)for(const o of this._categories.getValues())o&&o.dispose();this._categories=new s.lzS,this._viewer&&this._viewer.prepareModel()}setViewer(o){this._viewer=o}addCategory(o){let t=this._categories.getValue(o);t||(t=this._editor._Str_24037(this,o),t&&(this._categories.add(o,t),this.updateSelectionsFromFigure(o)))}updateSelectionsFromFigure(o){if(!this._categories||!this._editor||!this._editor.figureData)return;const t=this._categories.getValue(o);if(!t)return;const n=this._editor.figureData.getPartSetId(o);let r=this._editor.figureData.getColourIds(o);r||(r=[]),t.selectPartId(n),t.selectColorIds(r)}hasClubSelectionsOverLevel(o){if(!this._categories)return!1;for(const t of this._categories.getValues())if(t&&t.hasClubSelectionsOverLevel(o))return!0;return!1}hasInvalidSelectedItems(o){if(!this._categories)return!1;for(const t of this._categories.getValues())if(t&&t.hasInvalidSelectedItems(o))return!0;return!1}_Str_15298(o){if(!this._categories)return!1;let t=!1;for(const n of this._categories.getKeys()){const r=this._categories.getValue(n);if(!r)continue;let a=!1;if(r.stripClubItemsOverLevel(o)&&(a=!0),r.stripClubColorsOverLevel(o)&&(a=!0),a){const c=r.getCurrentPart();c&&this._editor&&this._editor.figureData&&r&&this._editor.figureData.savePartData(n,c.id,r.getSelectedColorIds(),!0),t=!0}}return t}_Str_8360(){if(!this._categories)return!1;for(const t of this._categories.getKeys())this._categories.getValue(t);return!1}selectPart(o,t){const n=this._categories.getValue(o);if(!n)return;const r=n.selectedPartIndex;n.selectPartIndex(t);const a=n.getCurrentPart();if(a){if(a.isDisabledForWearing)return n.selectPartIndex(r),void this._editor.openHabboClubAdWindow();this._maxPaletteCount=a.colorLayerCount,this._editor&&this._editor.figureData&&this._editor.figureData.savePartData(o,a.id,n.getSelectedColorIds(),!0)}}selectColor(o,t,n){const r=this._categories.getValue(o);if(!r)return;const a=r.getCurrentColorIndex(n);if(r.selectColorIndex(t,n),this._editor&&this._editor.figureData){if(r.getSelectedColor(n)._Str_14863)return r.selectColorIndex(a,n),void this._editor.openHabboClubAdWindow();this._editor.figureData.savePartSetColourId(o,r.getSelectedColorIds(),!0)}}get controller(){return this._editor}getCategoryData(o){return this._isInitalized||this.init(),this._categories?this._categories.getValue(o):null}get categories(){return this._categories}get canSetGender(){return!1}get maxPaletteCount(){return this._maxPaletteCount}set maxPaletteCount(o){this._maxPaletteCount=o}get name(){return null}}class r_ extends Pn{constructor(){super(...arguments),this._imageCallBackHandled=!1}init(){super.init(),this.addCategory(A.FACE),this._isInitalized=!0}selectColor(o,t,n){super.selectColor(o,t,n),this.updateSelectionsFromFigure(A.FACE)}updateSelectionsFromFigure(o){if(!this._categories||!this._editor||!this._editor.figureData)return;const t=this._categories.getValue(o);if(!t)return;const n=this._editor.figureData.getPartSetId(o);let r=this._editor.figureData.getColourIds(o);r||(r=[]),t.selectPartId(n),t.selectColorIds(r);for(const a of t.parts){const c=this.controller.figureData.getFigureStringWithFace(a.id),l=s.wjX.instance.avatar.createAvatarImage(c,s.bLn.LARGE,null,this),g=l.getImageAsSprite(s.GXC.HEAD);g&&(g.y=10,a.iconImage=g,setTimeout(()=>l.dispose(),0))}}resetFigure(o){this._imageCallBackHandled||(this._imageCallBackHandled=!0,this.updateSelectionsFromFigure(A.FACE))}get canSetGender(){return!0}get name(){return s.Nh$.GENERIC}}class s_ extends Pn{init(){super.init(),this.addCategory(A.HAIR),this.addCategory(A.HAT),this.addCategory(A.HEAD_ACCESSORIES),this.addCategory(A.EYE_ACCESSORIES),this.addCategory(A.FACE_ACCESSORIES),this._isInitalized=!0}get name(){return s.Nh$.HEAD}}class a_ extends Pn{init(){super.init(),this.addCategory(A.TROUSERS),this.addCategory(A.SHOES),this.addCategory(A.TROUSER_ACCESSORIES),this._isInitalized=!0}get name(){return s.Nh$.LEGS}}class c_ extends Pn{init(){super.init(),this.addCategory(A.SHIRT),this.addCategory(A.CHEST_PRINTS),this.addCategory(A.JACKET),this.addCategory(A.CHEST_ACCESSORIES),this._isInitalized=!0}get name(){return s.Nh$.TORSO}}const l_=function(i){return{active:i}};function u_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectCategory(a.name)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(4,l_,n.activeCategory===t)),e.xp6(1),e.Oqu(e.lcZ(2,2,"avatareditor.category."+t.name))}}function __(i,o){if(1&i&&e._UZ(0,"div",14),2&i){const t=e.oxw(2);e.Q6J("model",t.activeCategory)("gender",t.gender)}}function g_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e._UZ(2,"div",17),e._UZ(3,"div",18),e._UZ(4,"div",19),e.TgZ(5,"div",20),e.TgZ(6,"i",21),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.rotateAvatar(r.figureData.direction+1)}),e.qZA(),e.TgZ(7,"i",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.rotateAvatar(r.figureData.direction-1)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",23),e.TgZ(9,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).resetFigure()}),e._UZ(10,"i",25),e.qZA(),e.TgZ(11,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).clearFigure()}),e._UZ(12,"i",26),e.qZA(),e.qZA(),e.TgZ(13,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).saveFigure()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("figure",t.figureData.view.figureString)("direction",t.figureData.direction)("scale",2),e.xp6(10),e.Oqu(e.lcZ(15,4,"avatareditor.save"))}}function d_(i,o){if(1&i&&e._UZ(0,"div",28),2&i){const t=e.oxw(2);e.Q6J("figureData",t.figureData)}}function m_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.YNc(10,u_,3,6,"button",9),e.qZA(),e.YNc(11,__,1,2,"div",10),e.qZA(),e.YNc(12,g_,16,6,"div",11),e.YNc(13,d_,1,1,"div",12),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"avatareditor.title")),e.xp6(7),e.Q6J("ngForOf",t.categories.getValues()),e.xp6(1),e.Q6J("ngIf",t.activeCategory),e.xp6(1),e.Q6J("ngIf",t.figureData),e.xp6(1),e.Q6J("ngIf",t.figureData)}}let no=(()=>{class i{constructor(t,n,r){this._inventoryService=t,this._settingsService=n,this._avatarEditorService=r,this.visible=!1}ngOnInit(){this._avatarEditorService.component=this,this._figureStructureData=s.wjX.instance.avatar.structureData,this._categories=new s.lzS,this._figures=new Map,this._gender=A.MALE,this._clubMemberLevel=0,this._lastSavedFigure="",this._lastSavedGender=A.MALE;const t=new A,n=new A;t.loadAvatarData(i._Str_18590,A.MALE),n.loadAvatarData(i._Str_18820,A.FEMALE),this._figures.set(A.MALE,t),this._figures.set(A.FEMALE,n),this._categories.add(s.Nh$.GENERIC,new r_(this)),this._categories.add(s.Nh$.HEAD,new s_(this)),this._categories.add(s.Nh$.TORSO,new c_(this)),this._categories.add(s.Nh$.LEGS,new a_(this)),this.selectFirstCategory()}ngOnDestroy(){this._avatarEditorService.component=null}hide(){this._settingsService.hideAvatarEditor()}selectFirstCategory(){const t=this._categories.getWithIndex(0);!t||this.selectCategory(t.name)}selectCategory(t){if(!t)return;const n=this._categories.getValue(t);!n||(this._aciveCategory=n)}loadAvatarInEditor(t,n,r,a=!0){switch(n){case A.MALE:case"m":case"M":n=A.MALE;break;case A.FEMALE:case"f":case"F":n=A.FEMALE;break;default:n=A.MALE}let c=!1;this._clubMemberLevel=r;const l=this._figures.get(n);if(l){if(t!==l.getFigureString()&&(c=!0),n!==this._gender&&(this._gender=n,c=!0),l.loadAvatarData(t,n),c)for(const g of this._categories.getValues())!g||g.reset();a&&(this._lastSavedFigure=t,this._lastSavedGender=this._gender)}}_Str_24037(t,n){if(!t||!n)return null;const r=[],a=[];let c=0;for(;c<i._Str_6331;)a.push([]),c++;const l=this._Str_20100(n);if(!l)return null;const g=this.getPalette(l.paletteID);if(!g)return null;let d=this.figureData.getColourIds(n);d||(d=[]);const h=new Array(d.length),f=this._Str_24175;for(const z of g.colors.getValues())if(z.isSelectable&&(f||this.clubMemberLevel>=z.clubLevel)){let Lt=0;for(;Lt<i._Str_6331;){const wn=new o_(t,z,this.clubMemberLevel<z.clubLevel);a[Lt].push(wn),Lt++}if(n!==A.FACE){let yt=0;for(;yt<d.length;)z.id===d[yt]&&(h[yt]=z),yt++}}let E=0,k=[];if(f?(E=2,k=s.wjX.instance.avatar.getMandatoryAvatarPartSetIds(this.gender,E)):k=s.wjX.instance.avatar.getMandatoryAvatarPartSetIds(this.gender,this.clubMemberLevel),-1==k.indexOf(n)){const z=new Ut(t,null,null,!1);z.isClear=!0,r.push(z)}const x=n!==A.FACE,ue=l.partSets;let $t=ue.length-1;for(;$t>=0;){const z=ue.getWithIndex($t);let Lt=!1;if((z.gender===A.UNISEX||z.gender==this.gender)&&(Lt=!0),z.isSelectable&&Lt&&(f||this.clubMemberLevel>=z.clubLevel)){const yt=this.clubMemberLevel<z.clubLevel;let wn=!0;if(z.isSellable&&(wn=this._inventoryService&&this._inventoryService.hasFigureSetId(z.id)),wn){const gn=new Ut(t,z,h,x,yt);r.push(gn)}}$t--}for(r.sort(this._Str_25757?this._Str_25189:this._Str_23935),c=0;c<i._Str_6331;)a[c].sort(this._Str_23625),c++;return new hi(n,r,a)}openHabboClubAdWindow(){}_Str_20100(t){return this._figureStructureData?this._figureStructureData.getSetType(t):null}getPalette(t){return this._figureStructureData?this._figureStructureData.getPalette(t):null}_Str_25189(t,n){const r=t.partSet?t.partSet.clubLevel:9999999999,a=n.partSet?n.partSet.clubLevel:9999999999,c=!!t.partSet&&t.partSet.isSellable,l=!!n.partSet&&n.partSet.isSellable;return c&&!l?1:l&&!c||r>a?-1:r<a?1:t.partSet.id>n.partSet.id?-1:t.partSet.id<n.partSet.id?1:0}_Str_23935(t,n){const r=t.partSet?t.partSet.clubLevel:-1,a=n.partSet?n.partSet.clubLevel:-1,c=!!t.partSet&&t.partSet.isSellable,l=!!n.partSet&&n.partSet.isSellable;return c&&!l?1:l&&!c||r<a?-1:r>a?1:t.partSet.id<n.partSet.id?-1:t.partSet.id>n.partSet.id?1:0}_Str_23625(t,n){const r=t._Str_3420?t._Str_3420.clubLevel:-1,a=n._Str_3420?n._Str_3420.clubLevel:-1;return r<a?-1:r>a?1:t._Str_3420.index<n._Str_3420.index?-1:t._Str_3420.index>n._Str_3420.index?1:0}rotateAvatar(t){let n=t;n<s.$BT.MIN_DIRECTION&&(n=s.$BT.MAX_DIRECTION+(n+1)),n>s.$BT.MAX_DIRECTION&&(n-=s.$BT.MAX_DIRECTION+1),this.figureData.direction=n}saveFigure(){const t=this.figureData;!t||(this._lastSavedFigure=t.getFigureString(),this._lastSavedGender=t.gender,s.wjX.instance.communication.connection.send(new s.hXe(t.gender,this._lastSavedFigure)),this.hide())}clearFigure(){const t=this.figureData;!t||this.loadAvatarInEditor(t.getFigureStringWithFace(0,!1),t.gender,this._clubMemberLevel,!1)}resetFigure(){this.loadAvatarInEditor(this._lastSavedFigure,this._gender,this._clubMemberLevel)}get _Str_25757(){return s.wjX.instance.getConfiguration("avatareditor.show.clubitems.first",!0)}get _Str_24175(){return s.wjX.instance.getConfiguration("avatareditor.show.clubitems.dimmed",!0)}get clubMemberLevel(){return this._clubMemberLevel?this._clubMemberLevel:s.wjX.instance.sessionDataManager.clubLevel}set clubMemberLevel(t){this._clubMemberLevel=t}get figureStructureData(){return this._figureStructureData}get figureData(){return this._figures.get(this._gender)}get gender(){return this._gender}set gender(t){if(this._gender!==t){switch(t){case A.MALE:case"m":case"M":t=A.MALE;break;case A.FEMALE:case"f":case"F":t=A.FEMALE;break;default:t=A.MALE}this._gender=t;for(const n of this._categories.getValues())n.reset();this.selectFirstCategory()}}get categories(){return this._categories}get activeCategory(){return this._aciveCategory}}return i._Str_18590="hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007",i._Str_18820="hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68",i._Str_6331=2,i.\u0275fac=function(t){return new(t||i)(e.Y36(ge),e.Y36(w),e.Y36(sn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-avatar-editor-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-avatar-editor card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-avatar-editor","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col","d-flex","flex-column"],[1,"btn-group"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["class","d-flex flex-column","nitro-avatar-model-viewer-component","",3,"model","gender",4,"ngIf"],["class","col-4 d-flex flex-column",4,"ngIf"],["nitro-avatar-wardrobe-component","","class","col-12 nitro-avatar-wardrobe-component mt-1",3,"figureData",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-avatar-model-viewer-component","",1,"d-flex","flex-column",3,"model","gender"],[1,"col-4","d-flex","flex-column"],[1,"d-flex","position-relative","flex-grow-1","justify-content-center"],[1,"avatar-spotlight","position-absolute"],[1,"avatar-shadow","position-absolute"],["nitro-avatar-image","",1,"d-flex","justify-content-center","position-absolute","w-100","h-100","avatar-container",3,"figure","direction","scale"],[1,"arrow-container"],[1,"icon","arrow-left-icon",3,"click"],[1,"icon","arrow-right-icon",3,"click"],[1,"btn-group","mb-1"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fas","fa-undo"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-sm","btn-success","mb-1",3,"click"],["nitro-avatar-wardrobe-component","",1,"col-12","nitro-avatar-wardrobe-component","mt-1",3,"figureData"]],template:function(t,n){1&t&&e.YNc(0,m_,14,7,"div",0),2&t&&e.Q6J("ngIf",n.visible)},encapsulation:2}),i})();function p_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"ul",2),e.TgZ(2,"li",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAvatarEditor()}),e._UZ(3,"i",4),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"li",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleAchievements()}),e._UZ(8,"i",5),e.TgZ(9,"span"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"li",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleNavigator()}),e._UZ(13,"i",6),e.TgZ(14,"span"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.TgZ(17,"li",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleUserSettings()}),e._UZ(18,"i",7),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.Q6J("@inOutAnimation",void 0),e.xp6(5),e.Oqu(e.lcZ(6,5,"widget.memenu.editavatar")),e.xp6(5),e.Oqu(e.lcZ(11,7,"widget.memenu.achievements")),e.xp6(5),e.Oqu(e.lcZ(16,9,"widget.memenu.myrooms")),e.xp6(5),e.Oqu(e.lcZ(21,11,"toolbar.icon.tooltip.settings")))}let h_=(()=>{class i{constructor(t,n,r,a,c){this._avatarEditorService=t,this.settingsService=n,this.navigatorService=r,this._achievementService=a,this._ngZone=c}ngOnInit(){}ngOnDestroy(){}get isVisible(){return this.settingsService.meMenuVisible||!1}toggleAvatarEditor(){this._avatarEditorService.loadOwnAvatarInEditor(),this.settingsService.toggleAvatarEditor()}toggleAchievements(){this.settingsService.toggleAchievements()}toggleNavigator(){this.settingsService.toggleNavigator(),this.navigatorService.setCurrentContextByCode("myworld_view")}toggleUserSettings(){this.settingsService.toggleUserSettings()}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(sn),e.Y36(w),e.Y36(ce),e.Y36(Xt),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-toolbar-me-menu-component"]],decls:1,vars:1,consts:[["class","card bg-secondary nitro-toolbar-me-menu",4,"ngIf"],[1,"card","bg-secondary","nitro-toolbar-me-menu"],[1,"list-group","list-group-horizontal","p-1"],[1,"d-flex","flex-column","list-group-item",3,"click"],[1,"icon","icon-me-clothing","d-block"],[1,"icon","icon-me-achievements","d-block"],[1,"icon","icon-me-rooms","d-block"],[1,"icon","icon-me-settings","d-block"]],template:function(t,n){1&t&&e.YNc(0,p_,22,13,"div",0),2&t&&e.Q6J("ngIf",n.isVisible)},directives:[u.O5],pipes:[m],encapsulation:2,data:{animation:[(0,F.X$)("inOutAnimation",[(0,F.eR)(":enter",[(0,F.oB)({bottom:10,opacity:0}),(0,F.jt)(".3s ease-out",(0,F.oB)({bottom:77,opacity:1}))]),(0,F.eR)(":leave",[(0,F.oB)({bottom:77,opacity:1}),(0,F.jt)(".3s ease-in",(0,F.oB)({bottom:10,opacity:0}))])])]}}),i})();const f_=["navigationList"];function v_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickIcon("hotel_view")}),e._UZ(1,"i",13),e.qZA()}}function T_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickIcon("home_room")}),e._UZ(1,"i",14),e.qZA()}}function b_(i,o){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.unseenInventoryCount)}}function C_(i,o){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.unseenFriendListCount)}}function E_(i,o){if(1&i&&(e.TgZ(0,"div",15),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.unseenAchievementsCount)}}let S_=(()=>{class i{constructor(t,n,r,a,c,l,g,d){this._inventoryService=t,this._navigatorService=n,this._friendListService=r,this._achievementService=a,this.sessionService=c,this.settingsService=l,this._modToolsService=g,this.ngZone=d,this.isInRoom=!1,this.onNitroToolbarEvent=this.onNitroToolbarEvent.bind(this)}ngOnInit(){this.ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.addEventListener(s.BOM.TOOLBAR_CLICK,this.onNitroToolbarEvent),s.wjX.instance.roomEngine.events.addEventListener(s.Pdl.ANIMATE_ICON,this.onNitroToolbarEvent)})}ngOnDestroy(){this.ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.removeEventListener(s.BOM.TOOLBAR_CLICK,this.onNitroToolbarEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.Pdl.ANIMATE_ICON,this.onNitroToolbarEvent)})}onNitroToolbarEvent(t){if(t)switch(t.type){case s.BOM.TOOLBAR_CLICK:return void this.clickIcon(t.iconName);case s.Pdl.ANIMATE_ICON:return void this.animateToIcon(t.iconName,t.image,t.x,t.y)}}clickIcon(t){if(t&&""!==t)switch(t){case s.V3W.HOTEL_VIEW:return void this.visitDesktop();case s.V3W.HOME_ROOM:return void this.visitHomeRoom();case s.V3W.NAVIGATOR:return void this.toggleNavigator();case s.V3W.CATALOG:return void this.toggleCatalog();case s.V3W.INVENTORY:return void this.toggleInventory();case s.V3W.FRIEND_LIST:return void this.toggleFriendList();case s.V3W.ME_MENU:return this.toggleMeMenu(),void s.wjX.instance.roomEngine.events.dispatchEvent(new s.BOM(s.BOM.SELECT_OWN_AVATAR))}}animateToIcon(t,n,r,a){if(!t||!n||!this.navigationListElement||""===(t=this.getIconName(t)))return;const c=this.navigationListElement.getElementsByClassName(t)[0];if(c){n.className="toolbar-icon-animation",n.style.visibility="visible",n.style.left=r+"px",n.style.top=a+"px",document.body.append(n);const l=c.getBoundingClientRect(),g=n.getBoundingClientRect(),d=g.x-l.x,h=g.y-l.y,f=Math.sqrt(d*d+h*h),E=500-Math.abs(1/f*100*500*.5),k=20,H=`ToolbarBouncing[${t}]`;s.UVp.getMotionByTag(H)||(s.UVp.runMotion(new s.ciR(new s.NT4(E+8),new s.bGT(c,400,12))).tag=H);const x=new s.ciR(new s.ihh(new s.eTp(n,E,l.x-g.x+k,l.y-g.y,100,1),1),new s.W2z(n));s.UVp.runMotion(x)}}getIconName(t){switch(t){case s.V3W.HOTEL_VIEW:return"icon-hotelview";case s.V3W.NAVIGATOR:return"icon-navigator";case s.V3W.CATALOG:return"icon-catalog";case s.V3W.INVENTORY:return"icon-inventory";default:return""}}toggleCatalog(){this.settingsService.toggleCatalog()}toggleInventory(){this.settingsService.toggleInventory()}toggleFriendList(){this.settingsService.toggleFriendList()}toggleNavigator(){this.settingsService.toggleNavigator()}toggleMeMenu(){this.settingsService.toggleMeMenu()}visitDesktop(){s.wjX.instance.roomSessionManager.getSession(-1)&&(s.wjX.instance.communication.connection.send(new s.Cq3),s.wjX.instance.roomSessionManager.removeSession(-1))}visitHomeRoom(){this._navigatorService.goToHomeRoom()}get figure(){return this.sessionService.figure}get navigationListElement(){return this.navigationList&&this.navigationList.nativeElement||null}get unseenInventoryCount(){return this._inventoryService.unseenCount}get unseenFriendListCount(){return this._friendListService.notificationCount}get unseenAchievementsCount(){return this._achievementService.unseenCount}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ge),e.Y36(ce),e.Y36(Je),e.Y36(Xt),e.Y36(hn),e.Y36(w),e.Y36(je),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-toolbar-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(f_,5),2&t){let r;e.iGM(r=e.CRH())&&(n.navigationList=r.first)}},inputs:{isInRoom:"isInRoom"},decls:20,vars:9,consts:[[1,"nitro-toolbar-component"],[1,"card","p-0","overflow-hidden"],[1,"list-group","list-group-horizontal","p-1"],["navigationList",""],["class","list-group-item",3,"click",4,"ngIf"],[1,"list-group-item",3,"click"],[1,"icon","icon-rooms"],[1,"icon","icon-catalog"],[1,"icon","icon-inventory"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"icon","icon-friendall"],[1,"list-group-item","avatar-image",3,"click"],["nitro-avatar-image","",3,"figure","headOnly","direction"],[1,"icon","icon-hotelview","icon-nitro-light"],[1,"icon","icon-house"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2,3),e.YNc(4,v_,2,0,"li",4),e.YNc(5,T_,2,0,"li",4),e.TgZ(6,"li",5),e.NdJ("click",function(){return n.clickIcon("navigator")}),e._UZ(7,"i",6),e.qZA(),e.TgZ(8,"li",5),e.NdJ("click",function(){return n.clickIcon("catalog")}),e._UZ(9,"i",7),e.qZA(),e.TgZ(10,"li",5),e.NdJ("click",function(){return n.clickIcon("inventory")}),e._UZ(11,"i",8),e.YNc(12,b_,2,1,"div",9),e.qZA(),e.TgZ(13,"li",5),e.NdJ("click",function(){return n.clickIcon("friendlist")}),e._UZ(14,"i",10),e.YNc(15,C_,2,1,"div",9),e.qZA(),e.TgZ(16,"li",11),e.NdJ("click",function(){return n.clickIcon("me_menu")}),e._UZ(17,"div",12),e.YNc(18,E_,2,1,"div",9),e.qZA(),e.qZA(),e.qZA(),e._UZ(19,"nitro-toolbar-me-menu-component"),e.qZA()),2&t&&(e.Q6J("@inOutAnimation",void 0),e.xp6(4),e.Q6J("ngIf",n.isInRoom),e.xp6(1),e.Q6J("ngIf",!n.isInRoom),e.xp6(7),e.Q6J("ngIf",n.unseenInventoryCount),e.xp6(3),e.Q6J("ngIf",n.unseenFriendListCount),e.xp6(2),e.Q6J("figure",n.figure)("headOnly",!0)("direction",2),e.xp6(1),e.Q6J("ngIf",n.unseenAchievementsCount))},directives:[u.O5,He,h_],encapsulation:2,data:{animation:[(0,F.X$)("inOutAnimation",[(0,F.eR)(":enter",[(0,F.oB)({bottom:"-100%"}),(0,F.jt)("1s ease-out",(0,F.oB)({bottom:10}))])])]}}),i})();function A_(i,o){if(1&i&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.totalFriendRequests)}}function w_(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw(2);e.Q6J("threadSelector",t.selectThread)}}function x_(i,o){if(1&i&&e._UZ(0,"div",19),2&i){const t=e.oxw(2);e.Q6J("thread",t.currentThread)}}const Z_=function(i){return{active:i}};function I_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().displayFriends()}),e._uU(10),e.ALo(11,"translate"),e.YNc(12,A_,2,1,"span",9),e.qZA(),e.TgZ(13,"h6",10),e.TgZ(14,"span",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.TgZ(17,"perfect-scrollbar",12),e._UZ(18,"div",13),e.qZA(),e.qZA(),e.TgZ(19,"div",14),e.YNc(20,w_,1,1,"div",15),e.YNc(21,x_,1,1,"div",16),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,9,"messenger.title")),e.xp6(6),e.Q6J("ngClass",e.VKq(15,Z_,t.friendsVisible)),e.xp6(1),e.hij(" ",e.lcZ(11,11,"friendlist.friends"),""),e.xp6(2),e.Q6J("ngIf",t.totalFriendRequests>0),e.xp6(3),e.Oqu(e.lcZ(16,13,"toolbar.icon.label.messenger")),e.xp6(3),e.Q6J("currentThread",t.currentThread)("threadSelector",t.selectThread),e.xp6(2),e.Q6J("ngIf",t.friendsVisible),e.xp6(1),e.Q6J("ngIf",t.currentThread)}}let io=(()=>{class i{constructor(t,n,r){this._settingsService=t,this._friendListService=n,this._ngZone=r,this.visible=!1,this._friendsVisible=!0,this._currentThread=null,this.selectThread=this.selectThread.bind(this)}ngOnInit(){this._friendListService.component=this,s.wjX.instance.communication.connection.send(new s.z_H)}ngOnChanges(t){const r=t.visible.currentValue;!r&&r!==t.visible.previousValue&&this.selectThread(null)}ngOnDestroy(){this._friendListService.component=null}hide(){this._settingsService.hideFriendList()}displayFriends(){this._friendsVisible=!0,this._currentThread=null}selectThread(t){if(t)return this._friendsVisible=!1,this._currentThread=t,void t.setRead();this._friendsVisible=!0,this._currentThread=null}get currentThread(){return this._currentThread}get friendsVisible(){return this._friendsVisible&&!this._currentThread}get totalFriendRequests(){return this._friendListService.requests.size}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(Je),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-friendlist-main-component"]],inputs:{visible:"visible"},features:[e.TTD],decls:1,vars:1,consts:[["class","nitro-friendlist card",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-friendlist","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-4","d-flex","flex-column"],[1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],[1,"mt-2","mb-1"],[1,"badge","text-uppercase"],[1,"position-relative","w-100",2,"min-height","320px","max-height","320px","height","320px"],["nitro-friendlist-thread-list-component","",3,"currentThread","threadSelector"],[1,"col","d-flex","flex-column"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector",4,"ngIf"],["nitro-friendlist-thread-viewer-component","",3,"thread",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-viewer-component","",3,"threadSelector"],["nitro-friendlist-thread-viewer-component","",3,"thread"]],template:function(t,n){1&t&&e.YNc(0,I_,22,17,"div",0),2&t&&e.Q6J("ngIf",n.visible)},encapsulation:2}),i})(),oo=(()=>{class i extends Ce{}return i.CODE="frontpage_featured",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:0,consts:[[1,"nitro-catalog-layout-frontpagefeatured-component"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1," frontpage\n"),e.qZA())},encapsulation:2}),i})();const Jn=function(i){return{"background-image":i}};function y_(i,o){if(1&i&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(2,Jn,"url("+t.getImagesUrl()+t.activePage.frontPageItems[0].itemPromoImage+")")),e.xp6(2),e.Oqu(t.activePage.frontPageItems[0].itemName)}}function R_(i,o){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",9),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(2,Jn,"url("+t.getImagesUrl()+t.activePage.frontPageItems[1].itemPromoImage+")")),e.xp6(2),e.Oqu(t.activePage.frontPageItems[1].itemName)}}function M_(i,o){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",9),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(2,Jn,"url("+t.getImagesUrl()+t.activePage.frontPageItems[2].itemPromoImage+")")),e.xp6(2),e.Oqu(t.activePage.frontPageItems[2].itemName)}}function O_(i,o){if(1&i&&(e.TgZ(0,"div",11),e.TgZ(1,"div",9),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngStyle",e.VKq(2,Jn,"url("+t.getImagesUrl()+t.activePage.frontPageItems[3].itemPromoImage+")")),e.xp6(2),e.Oqu(t.activePage.frontPageItems[3].itemName)}}let fi=(()=>{class i extends Ce{getImagesUrl(){return s.wjX.instance.core.configuration.getValue("image.library.url")}}return i.CODE="frontpage4",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:5,consts:[[1,"nitro-catalog-layout-frontpage4-component","row"],[1,"col-4"],["class","front-page-item tall",3,"ngStyle",4,"ngIf"],[1,"col-8"],[1,"d-flex","flex-column","w-100","mb-3"],["class","front-page-item wide mb-3",3,"ngStyle",4,"ngIf"],["class","front-page-item wide mb-0",3,"ngStyle",4,"ngIf"],[3,"localization"],[1,"front-page-item","tall",3,"ngStyle"],[1,"front-page-item-caption"],[1,"front-page-item","wide","mb-3",3,"ngStyle"],[1,"front-page-item","wide","mb-0",3,"ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,y_,3,4,"div",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.YNc(5,R_,3,4,"div",5),e.YNc(6,M_,3,4,"div",5),e.YNc(7,O_,3,4,"div",6),e.qZA(),e._UZ(8,"redeem-voucher-component",7),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",n.activePage.frontPageItems[0]),e.xp6(3),e.Q6J("ngIf",n.activePage.frontPageItems[1]),e.xp6(1),e.Q6J("ngIf",n.activePage.frontPageItems[2]),e.xp6(1),e.Q6J("ngIf",n.activePage.frontPageItems[3]),e.xp6(1),e.Q6J("localization",n.activePage.localization))},encapsulation:2}),i})();function U_(i,o){if(1&i&&e._UZ(0,"img",14),2&i){const t=e.oxw(2);e.Q6J("src",t.getImage(1),e.LSH)}}function N_(i,o){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,U_,1,1,"img",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getImage(1))}}function q_(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"nitro-badge",16),e.TgZ(2,"div",17),e._uU(3),e.qZA(),e._UZ(4,"div",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("badge",t.selectedGroup.badge)("isGroup",!0),e.xp6(2),e.Oqu(t.offerName(t.activeOffer)),e.xp6(1),e.Q6J("roomPreviewer",t.roomPreviewer)("width",364)("height",182)}}function L_(i,o){if(1&i&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.title)}}function k_(i,o){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.offerCount(t))}}const F_=function(i){return{active:i}},D_=function(i){return{"background-image":i}};function P_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectOffer(a)}),e.TgZ(1,"button",21),e._UZ(2,"div",22),e.YNc(3,k_,2,1,"div",23),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,F_,n.activeOffer===t)),e.xp6(1),e.Q6J("ngStyle",e.VKq(5,D_,"url("+n.offerImage(t)+")")),e.xp6(1),e.Q6J("ngIf",n.offerCount(t)>1)}}function J_(i,o){if(1&i&&e._UZ(0,"div",25),2&i){const t=e.oxw();e.Q6J("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)("forcedExtra",t.selectedGroupId)}}const ro=function(i){return{backgroundColor:i}};let vi=(()=>{class i extends Ce{constructor(t,n,r){super(t,n,r),this._catalogService=t,this._marketService=n,this._ngZone=r,this._groups=[],this._selectedGroupId=null,this._selectedGroup=null,this._lastOfferSelected=null,t.registerGroupFurniTemplate(this)}ngOnInit(){this._catalogService.requestGroups()}ngOnDestroy(){this._catalogService.component.previewStuffData=null}selectOffer(t){if(!t)return void this._catalogService.component.selectOffer(null);this._lastOfferSelected=t;const n=[];n.push("0"),n.push(this.selectedGroupId),n.push(this._selectedGroup.badge),n.push(this.selectedGroupColorA),n.push(this.selectedGroupColorB);const r=new s.riO;r.setValue(n),this._catalogService.component&&(this._catalogService.component.previewStuffData=r,this._catalogService.component.selectOffer(t))}getFirstProduct(t){return t&&t.products[0]||null}hasMultipleProducts(t){return t.products.length>1}offerName(t){let n="";const r=this.getFirstProduct(t);if(r)switch(r.productType){case j.FLOOR:n="roomItem.name."+r.furniClassId;break;case j.WALL:n="wallItem.name."+r.furniClassId}return""===n?n:s.wjX.instance.getLocalization(n)}getProductFurniData(t){return t?this._catalogService.getFurnitureDataForProductOffer(t):null}offerImage(t){if(!t)return"";const n=t.products[0];if(!n)return"";const r=this.getProductFurniData(n);if(!r)return"";switch(n.productType){case j.FLOOR:case j.WALL:return this._catalogService.getFurnitureDataIconUrl(r)}return""}offerCount(t){if(!this.hasMultipleProducts(t)){const n=this.getFirstProduct(t);if(n)return n.productCount}return 1}get groups(){return this._groups}set groups(t){this._groups=t,t.length>0&&this._ngZone.run(()=>{this.selectedGroupId=t[0].id.toString()})}get selectedGroup(){return this._selectedGroup}get selectedGroupId(){return this._selectedGroupId}set selectedGroupId(t){this._selectedGroupId=t,this._selectedGroup=this.groups.filter(n=>n.id.toString()===t)[0],this.selectOffer(null),this.selectOffer(this._lastOfferSelected)}get selectedGroupColorA(){return this._selectedGroup?this._selectedGroup.colorA:"fff"}get selectedGroupColorB(){return this._selectedGroup?this._selectedGroup.colorB:"fff"}}return i.CODE="guild_custom_furni",i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(We),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:13,vars:12,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative mb-2",4,"ngIf"],[1,"input-group","mb-2"],[1,"input-group-prepend"],[1,"btn","btn-primary",3,"ngStyle"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"grid-container","w-100",2,"min-height","156px","max-height","156px","height","156px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-center mt-2 flex-grow-1 w-100","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled","forcedExtra",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","mb-2"],[1,"position-absolute",2,"right","10px","z-index","1",3,"badge","isGroup"],[1,"position-absolute","bg-secondary","rounded","text-center","px-2",2,"z-index","1"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[3,"value"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-center","mt-2","flex-grow-1","w-100",3,"activePage","activeOffer","quantityEnabled","forcedExtra"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,N_,2,1,"div",1),e.YNc(2,q_,5,6,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"button",5),e._UZ(6,"button",5),e.qZA(),e.TgZ(7,"select",6),e.NdJ("ngModelChange",function(a){return n.selectedGroupId=a}),e.YNc(8,L_,2,2,"option",7),e.qZA(),e.qZA(),e.TgZ(9,"perfect-scrollbar",8),e.TgZ(10,"div",9),e.YNc(11,P_,4,7,"div",10),e.qZA(),e.qZA(),e.YNc(12,J_,1,4,"div",11),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.activeOffer),e.xp6(1),e.Q6J("ngIf",n.activeOffer),e.xp6(3),e.Q6J("ngStyle",e.VKq(8,ro,"#"+n.selectedGroupColorA)),e.xp6(1),e.Q6J("ngStyle",e.VKq(10,ro,"#"+n.selectedGroupColorB)),e.xp6(1),e.Q6J("ngModel",n.selectedGroupId),e.xp6(1),e.Q6J("ngForOf",n.groups),e.xp6(3),e.Q6J("ngForOf",n.offers),e.xp6(1),e.Q6J("ngIf",n.activeOffer))},encapsulation:2}),i})(),so=(()=>{class i extends Ce{openGroupCreator(){s.wjX.instance.createLinkEvent("groups/create")}}return i.CODE="guild_frontpage",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:7,consts:[[1,"nitro-catalog-layout-guildfrontpage-component"],[1,"mb-2",3,"innerHtml"],[1,"small","mb-2",3,"innerHtml"],[1,"small","mb-3",3,"innerHtml"],[1,"text-center"],[1,"btn","btn-primary","mb-3",3,"click"],["image-placeholder","",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e._UZ(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.openGroupCreator()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"img",6),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("innerHtml",n.getText(2),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(0),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(1),e.oJD),e.xp6(3),e.Oqu(e.lcZ(7,5,"catalog.start.guild.purchase.button")),e.xp6(2),e.Q6J("src",n.getImage(1),e.LSH))},directives:[le],pipes:[m],encapsulation:2}),i})(),ao=(()=>{class i extends Ce{}return i.CODE="pets",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets2-component"]],template:function(t,n){1&t&&e._UZ(0,"div",0)},encapsulation:2}),i})(),co=(()=>{class i extends Ce{}return i.CODE="pets2",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:10,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100","card","nitro-catalog-layout-pets3-component","small","p-1"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"overflow-hidden","d-flex","flex-column",2,"min-height","422px"],[1,"row","m-3"],[1,"col-sm-3","overflow-hidden","d-flex","justify-content-center","px-1"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","justify-content-center","px-2"],[1,"align-self-center",3,"innerHtml"],[1,"mx-3",3,"innerHtml"],[1,"mx-3","mt-auto","mb-3",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"perfect-scrollbar",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6),e._UZ(7,"h6",7),e.qZA(),e.qZA(),e._UZ(8,"div",8),e._UZ(9,"span",9),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("src",n.getImage(1),e.LSH),e.xp6(2),e.Q6J("innerHtml",n.getText(1),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(2),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(3),e.oJD))},directives:[C.Vv,le],encapsulation:2}),i})(),lo=(()=>{class i extends Ce{}return i.CODE="pets3",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:11,vars:4,consts:[[1,"nitro-catalog-layout-pets3-component","d-flex","flex-column","w-100","h-100"],[1,"position-relative","w-100",2,"min-height","422px","max-height","422px","height","422px"],[1,"d-flex","flex-column"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center"],["image-placeholder","",3,"src"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],[1,"h5","m-0",3,"innerHtml"],[1,"h6","m-0","mb-2",3,"innerHtml"],[1,"h6","m-0",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"perfect-scrollbar",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"img",5),e.qZA(),e.TgZ(6,"div",6),e._UZ(7,"p",7),e.qZA(),e.qZA(),e._UZ(8,"p",8),e.TgZ(9,"p",9),e._uU(10,"sdfgsdfgsdfg"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("src",n.getImage(1),e.LSH),e.xp6(2),e.Q6J("innerHtml",n.getText(1),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(2),e.oJD),e.xp6(1),e.Q6J("innerHtml",n.getText(3),e.oJD))},directives:[C.Vv,le],encapsulation:2}),i})();function j_(i,o){if(1&i&&e._UZ(0,"img",9),2&i){const t=e.oxw();e.Q6J("src",t.getImage(1),e.LSH)}}function V_(i,o){if(1&i&&(e.TgZ(0,"div",10),e._UZ(1,"div",11),e._UZ(2,"div",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("roomPreviewer",t.roomPreviewer)("width",243)("height",240),e.xp6(1),e.Q6J("vertical",!0)("activePage",t.activePage)("activeOffer",t.activeOffer)}}function B_(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.Oqu(n.offerCount(t))}}const jn=function(i){return{active:i}},G_=function(i){return{"background-image":i}};function H_(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectOffer(a)}),e.TgZ(1,"button",14),e.YNc(2,B_,2,1,"div",15),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,jn,n.activeOffer===t))("ngStyle",e.VKq(5,G_,"url("+n.offerImage(t)+")")),e.xp6(1),e.Q6J("ngIf",n.offerCount(t)>1)}}let Ti=(()=>{class i extends an{constructor(){super(...arguments),this._groupNames=["wallpaper","floor","landscape"],this._groups=[],this._activeGroupIndex=-1}ngOnInit(){this.sortOffers(),this.selectFirstSpace()}sortOffers(){for(const t of this.offers){if(!t)continue;const n=this.getFirstProduct(t);if(n&&(n.productType===j.WALL||n.productType===j.FLOOR)){const r=this.getProductFurniData(n);if(r){const a=r.className,c=this._groupNames.indexOf(a);for(-1===c&&this._groupNames.push(a);this._groups.length<this._groupNames.length;)this._groups.push([]);switch(a){case"floor":case"wallpaper":case"landscape":this._groups[c].push(t)}}}}this.switchCategory("walls")}switchCategory(t){let n=-1;switch(t){case"walls":n=0;break;case"floor":n=1;break;case"landscape":n=2}this._activeGroupIndex=n}selectFirstSpace(){if(-1===this._activeGroupIndex)return;const t=this._groups[this.activeGroupIndex];!t||!t.length||this.selectOffer(t[0])}offerName(t){let n="";const r=this.getFirstProduct(t);if(r)switch(r.productType){case j.FLOOR:n="roomItem.name."+r.furniClassId;break;case j.WALL:n="wallItem.name."+r.furniClassId}return""===n?n:s.wjX.instance.getLocalization(n)}offerImage(t){if(!t)return"";const n=t.products[0];if(!n)return"";const r=this.getProductFurniData(n);if(!r)return"";const a=s.wjX.instance.getConfiguration("catalog.asset.url");let c="";switch(n.productType){case j.WALL:switch(r.className){case"floor":c=["th",r.className,n.extraParam].join("_");break;case"wallpaper":c=["th","wall",n.extraParam].join("_");break;case"landscape":c=["th",r.className,n.extraParam.replace(".","_"),"001"].join("_")}break;default:return super.offerImage(t)}return a+"/"+c+".png"}get groups(){return this._groups}get activeGroupIndex(){return this._activeGroupIndex}}return i.CODE="spaces_new",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:17,vars:21,consts:[[1,"d-flex","flex-column","w-100","h-100","nitro-catalog-layout-spaces-component"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["class","d-flex position-relative w-100 h-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-cente","btn-group","mt-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"ngClass","click"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"d-flex","position-relative","w-100","h-100"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],["nitro-catalog-purchase-component","",1,"d-flex","flex-grow-1","ml-2",3,"vertical","activePage","activeOffer"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],["class","position-absolute bg-danger px-1 py-0 rounded shadow count",4,"ngIf"],[1,"position-absolute","bg-danger","px-1","py-0","rounded","shadow","count"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,j_,1,1,"img",2),e.YNc(3,V_,3,6,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.switchCategory("walls")}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return n.switchCategory("floor")}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return n.switchCategory("landscape")}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"perfect-scrollbar",6),e.TgZ(15,"div",7),e.YNc(16,H_,3,7,"div",8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf",!n.activeOffer&&n.getImage(1)),e.xp6(1),e.Q6J("ngIf",n.activeOffer),e.xp6(2),e.Q6J("ngClass",e.VKq(15,jn,0===n.activeGroupIndex)),e.xp6(1),e.Oqu(e.lcZ(7,9,"catalog.spaces.tab.walls")),e.xp6(2),e.Q6J("ngClass",e.VKq(17,jn,1===n.activeGroupIndex)),e.xp6(1),e.Oqu(e.lcZ(10,11,"catalog.spaces.tab.floors")),e.xp6(2),e.Q6J("ngClass",e.VKq(19,jn,2===n.activeGroupIndex)),e.xp6(1),e.Oqu(e.lcZ(13,13,"catalog.spaces.tab.views")),e.xp6(4),e.Q6J("ngForOf",n.groups[n.activeGroupIndex]))},encapsulation:2}),i})();function W_(i,o){1&i&&e._UZ(0,"p",17),2&i&&e.Q6J("innerHtml",o.$implicit,e.oJD)}function Q_(i,o){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e._UZ(2,"img",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("",t.currentTrophyOffer.priceCredits," "),e.xp6(1),e.Q6J("src",t.getCurrencyUrl(-1),e.LSH)}}function X_(i,o){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e._UZ(2,"img",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" + ",t.currentTrophyOffer.priceActivityPoints," "),e.xp6(1),e.Q6J("src",t.getCurrencyUrl(t.currentTrophyOffer.priceActivityPointsType),e.LSH)}}let uo=(()=>{class i extends Ce{constructor(){super(...arguments),this.textPages=[],this._allTrophyOffers=new s.lzS,this.currentTrophyOffer=null,this._imageUrl=null,this._currentTrophy=null,this._availableColorsForCurrentTrophy=null,this._currentTrophyIndex=0,this._orderOfColors=["g","s","b"],this.enteredText=""}ngOnInit(){const t=this.activePage.offers;if(this.textPages=this.activePage.localization.texts.filter(n=>n&&n.length>0),t&&t.length)for(const n of t){if(!n)continue;const r=this.getTrophyNameWithoutColors(n.localizationId),a=this.getTrophyColorCharacter(n.localizationId);let c=this._allTrophyOffers.getValue(r);c||(c=new s.lzS,this._allTrophyOffers.add(r,c)),c.add(a,n)}this.selectOfferByIndex(this._currentTrophyIndex)}selectOfferByIndex(t){const n=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex);n&&this.selectOffer(n)}selectOffer(t){if(!t)return;let n=null;const r=[];this._orderOfColors.map(a=>{const c=t.getValue(a);c&&r.push(a),n||(n=c)}),n||(n=t.getWithIndex(0)),n&&(this._currentTrophyColor=this.getTrophyColorCharacter(n.localizationId)),this._availableColorsForCurrentTrophy=r,this.selectTrophyColor(n)}selectTrophyColor(t){if(!t)return;this.currentTrophyOffer=t;const n=t.products[0];if(!n)return;const r=s.wjX.instance.roomEngine.getFurnitureFloorImage(n.furniClassId,new s.UJ(2,0,0),64,this,0,n.extraParam);if(r){const a=r.getImage();a&&(this._imageUrl=a.src)}this._currentTrophy=n}handleTrophyColor(t){if(this._availableColorsForCurrentTrophy.indexOf(t)<0)return;const n=this._allTrophyOffers.getWithIndex(this._currentTrophyIndex).getValue(t);!n||(this._currentTrophyColor=t,this.selectTrophyColor(n))}getActiveClass(t){return this._availableColorsForCurrentTrophy.indexOf(t)>=0&&this._currentTrophyColor==t?"selected":""}imageReady(t,n,r){if(n){const a=s.Oau.generateImageUrl(n);a&&this._ngZone.run(()=>this._imageUrl=a)}}handleButton(t){switch(t){case"next":this._allTrophyOffers.length-1==this._currentTrophyIndex?this._currentTrophyIndex=0:this._currentTrophyIndex++;break;case"previous":0==this._currentTrophyIndex?this._currentTrophyIndex=this._allTrophyOffers.length-1:this._currentTrophyIndex--}this.selectOfferByIndex(this._currentTrophyIndex)}imageFailed(t){}hasMultipleOffers(){return this._allTrophyOffers&&this._allTrophyOffers.length>0}trophyHasColor(t){return this._availableColorsForCurrentTrophy.indexOf(t)>-1}getTrophyNameWithoutColors(t){const n=this.getTrophyColorCharacter(t);return n.length>0?t.slice(0,t.length-1-n.length):t}getTrophyColorCharacter(t){if(-1!=t.indexOf("prizetrophy_2011_"))return"";const r=t.lastIndexOf("_")+1;if(r<=0)return"";const a=t.substr(r);return a.length>1||"g"!=a&&"s"!=a&&"b"!=a?"":a}buyCurrentItem(){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.currentTrophyOffer,1,this.enteredText)}getText(){return""}get imageUrl(){return this._imageUrl}}return i.CODE="trophies",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:26,vars:15,consts:[[1,"w-100","h-100","nitro-catalog-layout-trophies-component"],[1,"d-flex","flex-column"],["class","small",3,"innerHtml",4,"ngFor","ngForOf"],[1,"w-100","bg-secondary","rounded","nitro-catalog-layout-trophies-selector","row","mx-0","py-2","mb-2"],[1,"col-sm","d-flex","flex-row","justify-content-end"],["type","button",1,"btn","btn-sm","btn-secondary","align-self-end",3,"click"],[1,"col-sm","d-flex","flex-row","justify-content-center"],["image-placeholder","",1,"align-self-center",3,"src"],[1,"col-sm","d-flex","flex-row"],[1,"d-flex","flex-row","nitro-catalog-layout-trophies-types","mb-2"],["type","button",3,"ngClass","disabled","click"],["autofocus","","name","trophie","maxlength","300",1,"w-100","bg-secondary","rounded","mb-2",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1","bg-emperor","rounded","mt-auto"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"small",3,"innerHtml"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,W_,1,1,"p",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.NdJ("click",function(){return n.handleButton("previous")}),e._uU(6,"Previous"),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"img",7),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"button",5),e.NdJ("click",function(){return n.handleButton("next")}),e._uU(11,"Next"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",9),e.TgZ(13,"button",10),e.NdJ("click",function(){return n.handleTrophyColor("g")}),e.qZA(),e.TgZ(14,"button",10),e.NdJ("click",function(){return n.handleTrophyColor("s")}),e.qZA(),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.handleTrophyColor("b")}),e.qZA(),e.qZA(),e.TgZ(16,"textarea",11),e.NdJ("ngModelChange",function(a){return n.enteredText=a}),e._uU(17),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"div",13),e.YNc(20,Q_,3,2,"b",14),e.YNc(21,X_,3,2,"b",14),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"button",16),e.NdJ("click",function(){return n.buyCurrentItem()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.textPages),e.xp6(6),e.Q6J("src",n.imageUrl,e.LSH),e.xp6(5),e.Q6J("ngClass","btn btn-sm color-gold p-0 w-100 rounded mr-2 "+n.getActiveClass("g"))("disabled",!n.trophyHasColor("g")),e.xp6(1),e.Q6J("ngClass","btn btn-sm color-silver p-0 w-100 rounded mr-2 "+n.getActiveClass("s"))("disabled",!n.trophyHasColor("s")),e.xp6(1),e.Q6J("ngClass","btn btn-sm color-bronze p-0 w-100 rounded mr-2 "+n.getActiveClass("b"))("disabled",!n.trophyHasColor("b")),e.xp6(1),e.Q6J("ngModel",n.enteredText),e.xp6(1),e.Oqu(n.enteredText),e.xp6(3),e.Q6J("ngIf",n.currentTrophyOffer.priceCredits),e.xp6(1),e.Q6J("ngIf",n.currentTrophyOffer.priceActivityPoints),e.xp6(3),e.Oqu(e.lcZ(25,13,"buy")))},directives:[u.sg,le,u.mk,_.Fj,_.nD,_.JJ,_.On,u.O5],pipes:[m],encapsulation:2}),i})(),Y_=(()=>{class i extends Ce{}return i.CODE="UNSUPPORTED",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:0,consts:[[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","nitro-catalog-layout-unsupported-component"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1," This layout is not yet implemented\n"),e.qZA())},encapsulation:2}),i})();function z_(i,o){if(1&i&&e._UZ(0,"img",8),2&i){const t=e.oxw();e.Q6J("src",t.getImage(1),e.LSH)}}function K_(i,o){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"i",18),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(3),e.Oqu(n.getOfferText(t))}}function $_(i,o){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e._UZ(2,"img",19),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij("",t.priceCredits," "),e.xp6(1),e.Q6J("src",n.getCurrencyUrl(-1),e.LSH)}}function eg(i,o){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e._UZ(2,"img",19),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij(" + ",t.priceActivityPoints," "),e.xp6(1),e.Q6J("src",n.getCurrencyUrl(t.priceActivityPointsType),e.LSH)}}function tg(i,o){if(1&i&&(e.TgZ(0,"b"),e._uU(1),e._UZ(2,"img",19),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.hij("",t.priceActivityPoints," "),e.xp6(1),e.Q6J("src",n.getCurrencyUrl(t.priceActivityPointsType),e.LSH)}}function ng(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw().buyVip(r)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"catalog.purchase_confirmation.gift")))}function ig(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",9),e.YNc(2,K_,4,1,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"div",12),e.YNc(5,$_,3,2,"b",13),e.YNc(6,eg,3,2,"b",13),e.YNc(7,tg,3,2,"b",13),e.qZA(),e.TgZ(8,"div",14),e.YNc(9,ng,3,3,"button",15),e.TgZ(10,"button",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().buyVip(a)}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",t.productCode),e.xp6(3),e.Q6J("ngIf",t.priceCredits),e.xp6(1),e.Q6J("ngIf",t.priceActivityPoints&&t.priceCredits),e.xp6(1),e.Q6J("ngIf",t.priceActivityPoints&&!t.priceCredits),e.xp6(2),e.Q6J("ngIf",t.giftable),e.xp6(2),e.Oqu(e.lcZ(12,6,"buy"))}}let _o=(()=>{class i extends Ce{constructor(t,n,r){super(t,n,r),this._catalogService=t,this._marketService=n,this._ngZone=r,this.vipOffers=[],t.registerVipBuyTemplate(this),t.requestOffers(6)}setOffers(t){this._ngZone.run(()=>{this.vipOffers=t.reverse()})}getPurseContent(){const t=this._catalogService.purse;return s.wjX.instance.localization.getValueWithParameter("catalog.vip.extend.info","days",(31*t.clubPeriods+t.clubDays).toString())}buyVip(t){this._catalogService.component&&this._catalogService.component.confirmVipSubscription(t)}getOfferText(t){return t.months>0?s.wjX.instance.getLocalizationWithParameter("catalog.vip.item.header.months","num_months",t.months.toString()):s.wjX.instance.getLocalizationWithParameter("catalog.vip.item.header.days","num_days",t.extraDays.toString())}}return i.CODE="vip_buy",i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(We),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:11,vars:6,consts:[[1,"w-100","h-100","nitro-catalog-layout-default-component"],[1,"row"],[1,"col-5"],["image-placeholder","",3,"src",4,"ngIf"],[1,"col-7"],[1,"small",3,"innerHtml"],[1,"col-12","mt-1"],[4,"ngFor","ngForOf"],["image-placeholder","",3,"src"],[1,"bg-secondary","rounded","mb-2","p-1"],["class","bg-primary rounded p-1 w-100 mb-1 d-flex flex-row",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between","px-2","py-1"],[1,"align-self-center"],[4,"ngIf"],[1,"d-flex","flex-row"],["type","button","class","btn btn-success btn-sm mr-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bg-primary","rounded","p-1","w-100","mb-1","d-flex","flex-row"],[1,"icon","icon-catalogue-hc_small","mr-2","d-block","align-self-center"],["image-placeholder","",1,"pl-1",3,"src"],["type","button",1,"btn","btn-success","btn-sm","mr-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,z_,1,1,"img",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"h6"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"p",5),e.qZA(),e.TgZ(9,"div",6),e.YNc(10,ig,13,8,"ng-container",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!n.activeOffer&&n.getImage(1)),e.xp6(3),e.Oqu(e.lcZ(7,4,"catalog.vip.extend.title")),e.xp6(2),e.Q6J("innerHtml",n.getPurseContent(),e.oJD),e.xp6(2),e.Q6J("ngForOf",n.vipOffers))},directives:[u.O5,u.sg,le],pipes:[m],encapsulation:2}),i})();function og(i,o){if(1&i&&e._UZ(0,"img",9),2&i){const t=e.oxw(2);e.Q6J("src",t.getImage(1),e.LSH)}}function rg(i,o){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,og,1,1,"img",8),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.getImage(1))}}function sg(i,o){if(1&i&&e._UZ(0,"div",14),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)("width",366)("height",180)}}function ag(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"img",9),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.offerImage(t.activeOffer),e.LSH)}}function cg(i,o){if(1&i&&(e.TgZ(0,"div",10),e.TgZ(1,"div",11),e._uU(2),e.qZA(),e.YNc(3,sg,1,3,"div",12),e.YNc(4,ag,2,1,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.offerName(t.activeOffer)),e.xp6(1),e.Q6J("ngIf",t.roomPreviewerVisible),e.xp6(1),e.Q6J("ngIf",!t.roomPreviewerVisible)}}const lg=function(i){return{active:i}};function ug(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectOffer(a)}),e._UZ(1,"button",17),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(6,lg,n.activeOffer===t))("scale",4)("figure",t&&t.products[0]&&t.products[0].extraParam)("direction",3)("headOnly",!0)("asBackground",!0)}}function _g(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw();e.Q6J("activePage",t.activePage)("activeOffer",t.activeOffer)("quantityEnabled",t.activeOffer.bundlePurchaseAllowed)}}let bi=(()=>{class i extends an{}return i.CODE="bots",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:7,vars:4,consts:[[1,"d-flex","flex-column","w-100","h-100"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100 mb-2",4,"ngIf"],["class","position-relative d-flex flex-column justify-content-center align-items-center w-100 mb-2",4,"ngIf"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],["class","d-flex align-items-end flex-grow-1 w-100 mt-1","nitro-catalog-purchase-component","",3,"activePage","activeOffer","quantityEnabled",4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100","mb-2"],["image-placeholder","",3,"src",4,"ngIf"],["image-placeholder","",3,"src"],[1,"position-relative","d-flex","flex-column","justify-content-center","align-items-center","w-100","mb-2"],[1,"position-absolute","bg-secondary","rounded","text-center","m-2","p-2","t-0","l-0",2,"z-index","1"],["class","room-preview","nitro-room-preview-component","",3,"roomPreviewer","width","height",4,"ngIf"],["class","d-flex justify-content-center align-items-center h-100 w-100",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","width","height"],[1,"d-flex","justify-content-center","align-items-center","h-100","w-100"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],["nitro-catalog-purchase-component","",1,"d-flex","align-items-end","flex-grow-1","w-100","mt-1",3,"activePage","activeOffer","quantityEnabled"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,rg,2,1,"div",1),e.YNc(2,cg,5,3,"div",2),e.TgZ(3,"perfect-scrollbar",3),e.TgZ(4,"div",4),e.YNc(5,ug,2,8,"div",5),e.qZA(),e.qZA(),e.YNc(6,_g,1,3,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.activeOffer),e.xp6(1),e.Q6J("ngIf",n.activeOffer),e.xp6(3),e.Q6J("ngForOf",n.offers),e.xp6(1),e.Q6J("ngIf",n.activeOffer))},encapsulation:2}),i})();function gg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",13),e.TgZ(1,"span",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).selectOffer(r)}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"catalog.club_gift.selectable")),e.xp6(3),e.Oqu(e.lcZ(6,4,"catalog.club_gift.select")))}function dg(i,o){if(1&i&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.nonAvailableText(t.offerId)," ")}}const go=function(i){return{"background-image":i}};function mg(i,o){if(1&i&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"p",10),e._uU(4),e.qZA(),e.YNc(5,gg,7,6,"div",11),e.YNc(6,dg,2,1,"div",12),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.VKq(4,go,"url("+n.offerImage(t)+")")),e.xp6(3),e.Oqu(n.getProductFurniData(t.products[0]).name),e.xp6(1),e.Q6J("ngIf",n.getAvailability(t.offerId)),e.xp6(1),e.Q6J("ngIf",!n.getAvailability(t.offerId))}}function pg(i,o){if(1&i&&(e.TgZ(0,"div",2),e.TgZ(1,"p",3),e._uU(2),e.qZA(),e.TgZ(3,"perfect-scrollbar",4),e.YNc(4,mg,7,6,"div",5),e.qZA(),e.TgZ(5,"p",6),e._uU(6),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.giftsAvailable),e.xp6(2),e.Q6J("ngForOf",t.gifts),e.xp6(2),e.Oqu(t.pastClubDays)}}function hg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.TgZ(2,"h6",17),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().hidePopup()}),e._UZ(6,"i",19),e.qZA(),e.qZA(),e.TgZ(7,"div",20),e.TgZ(8,"div",21),e._UZ(9,"div",22),e.qZA(),e.TgZ(10,"div",23),e.TgZ(11,"div",24),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",25),e.TgZ(14,"div",26),e.TgZ(15,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmGift()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().hidePopup()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"catalog.club_gift.confirm")),e.xp6(6),e.Q6J("ngStyle",e.VKq(11,go,"url("+t.getGiftImage()+")")),e.xp6(3),e.Oqu(t.giftName()),e.xp6(4),e.Oqu(e.lcZ(17,7,"catalog.club_gift.select")),e.xp6(3),e.Oqu(e.lcZ(20,9,"cancel"))}}let mo=(()=>{class i extends Ce{constructor(){super(...arguments),this.showPopup=!1,this.vipOffers=[],this._currentSelectedVipOffer=null}get visible(){return null!==this._catalogService.clubGiftsParser}hidePopup(){this.showPopup=!1}getAvailability(t){return this._catalogService.clubGiftsParser.getOfferExtraData(t).isSelectable&&this._catalogService.clubGiftsParser.giftsAvailable>0}get gifts(){return this.visible?this._catalogService.clubGiftsParser.offers:[]}get direction(){return new s.UJ(90)}selectOffer(t){this._currentSelectedVipOffer=t,this.showPopup=!0}getGiftImage(){return this.offerImage(this._currentSelectedVipOffer)}giftName(){return this.getProductFurniData(this._currentSelectedVipOffer.products[0]).name}confirmGift(){s.wjX.instance.communication.connection.send(new s.vre(this._currentSelectedVipOffer.localizationId)),this._catalogService.clubGiftsParser.giftsAvailable--,this.showPopup=!1}get pastClubDays(){const t=this._catalogService.purse.pastClubDays,r=t>31?"catalog.club_gift.past_club.long":"catalog.club_gift.past_club",a=Math.floor(t%31),c=Math.floor(t/31);let l=s.wjX.instance.localization.getValue(r);return l=l.replace("%days%",a.toString()),l=l.replace("%months%",c.toString()),l}nonAvailableText(t){const n=this._catalogService.clubGiftsParser.getOfferExtraData(t),r=n.daysRequired-this._catalogService.purse.pastClubDays;if(r<=0)return"";let c="";c=n.isVip?"catalog.club_gift.vip_missing":"catalog.club_gift.club_missing",r>31&&(c+=".long");const l=r%31,g=r/31;let d=s.wjX.instance.localization.getValue(c);return d=d.replace("%days%",l.toString()),d=d.replace("%months%",g.toString()),d}get giftsAvailable(){if(!this.visible)return"";const t=this._catalogService.clubGiftsParser;return t.giftsAvailable>0?s.wjX.instance.localization.getValueWithParameter("catalog.club_gift.available","amount",t.giftsAvailable.toString()):t.daysUntilNextGift>0?s.wjX.instance.localization.getValueWithParameter("catalog.club_gift.days_until_next","days",t.daysUntilNextGift.toString()):this._catalogService.hasClubDays()?s.wjX.instance.localization.getValue("catalog.club_gift.not_available"):s.wjX.instance.localization.getValue("catalog.club_gift.no_club")}}return i.CODE="club_gifts",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:2,consts:[["class","w-100 h-100 nitro-catalog-layout-vip-gifts-component px-1",4,"ngIf"],["class","nitro-catalog-confirm-purchase-component card",3,"bringToTop","draggable",4,"ngIf"],[1,"w-100","h-100","nitro-catalog-layout-vip-gifts-component","px-1"],[1,"text-center","w-100"],[2,"min-height","450px","max-height","450px","height","450px"],["class","gift-item rounded bg-secondary mb-2 d-flex flex-row p-1",4,"ngFor","ngForOf"],[1,"w-100","text-center","p-0","m-0"],[1,"gift-item","rounded","bg-secondary","mb-2","d-flex","flex-row","p-1"],[1,"gift-image","align-self-center","mr-2","flex-shrink-0",3,"ngStyle"],[1,"w-100"],[1,"mb-0","pb-0","d-block"],["class","w-100 d-flex flex-row justify-content-between",4,"ngIf"],["class","w-100",4,"ngIf"],[1,"w-100","d-flex","flex-row","justify-content-between"],["type","button",1,"btn","btn-sm","btn-primary","align-self-center",3,"click"],[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,pg,7,3,"div",0),e.YNc(1,hg,21,13,"div",1)),2&t&&(e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.showPopup))},directives:[u.O5,C.Vv,u.sg,u.PC,b,v],pipes:[m],encapsulation:2}),i})();function fg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().redeemCredits()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"catalog.marketplace.offer.redeem")))}function vg(i,o){if(1&i&&(e._UZ(0,"div",20),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw().$implicit;e.Q6J("innerHtml",e.lcZ(1,1,t.stuffData.uniqueSeries),e.oJD)}}function Tg(i,o){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.offerTime(t))}}function bg(i,o){if(1&i&&(e.TgZ(0,"div",23),e.TgZ(1,"div",22),e._uU(2),e.qZA(),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.Oqu(n.offerExpiredText(t))}}function Cg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).takeBack(r)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"catalog.marketplace.offer.pick")))}function Eg(i,o){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Oqu(n.offerSoldText(t))}}const Sg=function(i){return{unique:i}},Ag=function(i){return{"background-image":i}};function wg(i,o){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e._UZ(3,"div",10),e.YNc(4,vg,2,3,"div",11),e.qZA(),e.TgZ(5,"div",12),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div",13),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"div",15),e.YNc(13,Tg,3,1,"div",16),e.YNc(14,bg,3,1,"div",17),e.YNc(15,Cg,3,3,"button",18),e.qZA(),e.YNc(16,Eg,2,1,"div",19),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(10,Sg,t.isUniqueLimitedItem)),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,Ag,"url("+n.imageUrlOffer(t)+")")),e.xp6(1),e.Q6J("ngIf",t.isUniqueLimitedItem),e.xp6(3),e.Oqu(n.getMarketplaceOfferTitle(t)),e.xp6(2),e.Oqu(n.getMarketplacePrice(t)),e.xp6(2),e.Oqu(n.getMarketplaceOfferDescription(t)),e.xp6(2),e.Q6J("ngIf",n.offerIsOnGoing(t)),e.xp6(1),e.Q6J("ngIf",n.offerIsExpired(t)),e.xp6(1),e.Q6J("ngIf",n.canTakeBack(t)),e.xp6(1),e.Q6J("ngIf",n.offerIsSold(t))}}function xg(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"perfect-scrollbar",5),e.YNc(2,wg,17,14,"div",6),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.ownOffers)}}let po=(()=>{class i extends Ce{constructor(){super(...arguments),this.redeemButtonActive=!1}ngOnInit(){s.wjX.instance.communication.connection.send(new s.CO1)}get statusText(){const t=this._marketService.lastOwnOffers,n=s.wjX.instance.localization.getValue("catalog.marketplace.no_items");return t&&0!==t.length?s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",t.length.toString()):n}get topText(){const t=this._marketService.lastOwnOffers,n=s.wjX.instance.localization.getValue("catalog.marketplace.redeem.no_sold_items");if(!t||0===t.length)return n;let r=0;for(const a of t.getValues())a.status==We._Str_8295&&r++;if(r>0){const a=this._marketService.creditsWaiting;return this.redeemButtonActive=!0,s.wjX.instance.localization.getValueWithParameters("catalog.marketplace.redeem.get_credits",["count","credits"],[r.toString(),a.toString()])}return n}imageUrlOffer(t){if(!t)return"";switch(t.furniType){case 1:return s.wjX.instance.roomEngine.getFurnitureFloorIconUrl(t.furniId);case 2:return s.wjX.instance.roomEngine.getFurnitureWallIconUrl(t.furniId,t.extraData)}return""}getMarketplaceOfferTitle(t){return t?s.wjX.instance.localization.getValue(2==t.furniType?"wallItem.name."+t.furniId:"roomItem.name."+t.furniId):""}getMarketplaceOfferDescription(t){return t?s.wjX.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId):""}getMarketplacePrice(t){return t?s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",t.price.toString()):""}offerIsOnGoing(t){return!!t&&t.status===We._Str_15376}offerIsSold(t){return!!t&&t.status===We._Str_8295}offerIsExpired(t){return!!t&&t.status===We._Str_6495}canTakeBack(t){if(!t)return!1;const n=this.offerIsSold(t),r=this.offerIsExpired(t);return!n||r}offerExpiredText(t){return t?s.wjX.instance.localization.getValue("catalog.marketplace.offer.expired"):""}takeBack(t){!t||this._marketService.redeemExpiredMarketPlaceOffer(t.offerId)}offerSoldText(t){return t?s.wjX.instance.localization.getValue("catalog.marketplace.offer.sold"):""}offerTime(t){if(!t)return"";const n=Math.max(1,t.timeLeftMinutes),r=Math.floor(n/60);let c=n-60*r+" "+s.wjX.instance.localization.getValue("catalog.marketplace.offer.minutes");return r>0&&(c=r+" "+s.wjX.instance.localization.getValue("catalog.marketplace.offer.hours")+" "+c),s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.offer.time_left","time",c)}redeemCredits(){this.redeemButtonActive=!1,this._marketService.redeemCredits()}get hasOwnOffersOnMarketplace(){return!(!this._marketService.lastOwnOffers||0===this._marketService.lastOwnOffers.length)}get ownOffers(){return this._marketService.lastOwnOffers.getValues()}}return i.CODE="marketplace_own_items",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],["type","button","class","btn btn-block btn-success btn-sm mb-2",3,"click",4,"ngIf"],[4,"ngIf"],["type","button",1,"btn","btn-block","btn-success","btn-sm","mb-2",3,"click"],[2,"height","381px","min-height","381px","max-height","381px"],["class","rounded bg-secondary mb-2 p-2",4,"ngFor","ngForOf"],[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],["class","badge badge-primary badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","badge badge-danger badge-sm text-wrap w-100 d-flex",4,"ngIf"],["class","btn btn-primary btn-sm ml-2","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","badge badge-success badge-sm text-wrap w-100",4,"ngIf"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"badge","badge-danger","badge-sm","text-wrap","w-100","d-flex"],[1,"btn","btn-primary","btn-sm","ml-2",2,"white-space","nowrap",3,"click"],[1,"badge","badge-success","badge-sm","text-wrap","w-100"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.qZA(),e.YNc(3,fg,3,3,"button",2),e._uU(4),e.YNc(5,xg,3,1,"div",3),e.qZA()),2&t&&(e.xp6(2),e.Oqu(n.topText),e.xp6(1),e.Q6J("ngIf",n.redeemButtonActive),e.xp6(1),e.hij(" ",n.statusText," "),e.xp6(1),e.Q6J("ngIf",n.hasOwnOffersOnMarketplace))},directives:[u.O5,C.Vv,u.sg,u.mk,u.PC],pipes:[m,Vt],encapsulation:2}),i})();const Zg=["nitro-marketplace-sub-activity",""];function Ig(i,o){if(1&i&&(e.TgZ(0,"option",4),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("selected",t.value==n.sortType)("value",t.value),e.xp6(1),e.Oqu(t.name)}}let yg=(()=>{class i{constructor(){this.sortChanged=new e.vpe,this.sortType=0}getFilters(){const t=[];for(const n of this.sortTypes){const r=this.translateKey(`catalog.marketplace.sort.${n}`);t.push({name:r,value:n})}return t}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(t){return s.wjX.instance.localization.getValue(t)}onOptionSelect(t){const n=parseInt(t.target.value);this.sortType=n,this.sortChanged.emit(n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-marketplace-sub-activity",""]],inputs:{sortTypes:"sortTypes"},outputs:{sortChanged:"sortChanged"},attrs:Zg,decls:6,vars:4,consts:[[1,"d-flex","flex-row"],[1,"mr-2","align-self-center",2,"white-space","nowrap"],[1,"form-control","form-control-sm",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[3,"selected","value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",2),e.NdJ("change",function(a){return n.onOptionSelect(a)}),e.YNc(5,Ig,2,3,"option",3),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"catalog.marketplace.sort_order")),e.xp6(3),e.Q6J("ngForOf",n.getFilters()))},directives:[u.sg,_.YN,_.Kr],pipes:[m],encapsulation:2}),i})();const Rg=["nitro-marketplace-sub-advanced",""];function Mg(i,o){if(1&i&&(e.TgZ(0,"option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("selected",t.value==n.sortType)("value",t.value),e.xp6(1),e.Oqu(t.name)}}let Og=(()=>{class i{constructor(){this.sortType=0,this.searchQuery="",this.searchPriceBetweenStart=null,this.searchPriceBetweenEnd=null,this.onSearch=new e.vpe}getFilters(){const t=[];for(const n of this.sortTypes){const r=this.translateKey(`catalog.marketplace.sort.${n}`);t.push({name:r,value:n})}return t}ngOnInit(){this.sortType=this.sortTypes[0]}translateKey(t){return s.wjX.instance.localization.getValue(t)}onOptionSelect(t){const n=parseInt(t.target.value);this.sortType=n}search(){this.onSearch.emit({minPrice:this.searchPriceBetweenStart,maxPrice:this.searchPriceBetweenEnd,query:this.searchQuery,type:this.sortType})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-marketplace-sub-advanced",""]],inputs:{sortTypes:"sortTypes"},outputs:{onSearch:"onSearch"},attrs:Rg,decls:20,vars:13,consts:[[1,"row","mb-1"],[1,"col-7"],["type","text",1,"form-control","form-control-sm","mb-1",3,"ngModel","placeholder","ngModelChange"],[1,"col-5"],[1,"mt-2"],[1,"row","mb-2"],[1,"form-control","form-control-sm","w-100",3,"change"],[3,"selected","value",4,"ngFor","ngForOf"],[1,"input-group"],["type","number","placeholder","0",1,"form-control","form-control-sm","mb-1",3,"ngModel","ngModelChange"],["type","number","placeholder","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary","btn-block","btn-sm",3,"click"],[3,"selected","value"]],template:function(t,n){1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",0),e.TgZ(2,"div",1),e.TgZ(3,"input",2),e.NdJ("ngModelChange",function(a){return n.searchQuery=a}),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"div",1),e.TgZ(11,"select",6),e.NdJ("change",function(a){return n.onOptionSelect(a)}),e.YNc(12,Mg,2,3,"option",7),e.qZA(),e.qZA(),e.TgZ(13,"div",3),e.TgZ(14,"div",8),e.TgZ(15,"input",9),e.NdJ("ngModelChange",function(a){return n.searchPriceBetweenStart=a}),e.qZA(),e.TgZ(16,"input",10),e.NdJ("ngModelChange",function(a){return n.searchPriceBetweenEnd=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return n.search()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngModel",n.searchQuery)("placeholder",e.lcZ(4,7,"catalog.marketplace.search_name")),e.xp6(4),e.Oqu(e.lcZ(8,9,"catalog.marketplace.search_price")),e.xp6(5),e.Q6J("ngForOf",n.getFilters()),e.xp6(3),e.Q6J("ngModel",n.searchPriceBetweenStart),e.xp6(1),e.Q6J("ngModel",n.searchPriceBetweenEnd),e.xp6(2),e.Oqu(e.lcZ(19,11,"generic.search")))},directives:[_.Fj,_.JJ,_.On,u.sg,_.wV,_.YN,_.Kr],pipes:[m],encapsulation:2}),i})();const Ug=["nitro-marketplace-offer",""];function Ng(i,o){if(1&i&&(e._UZ(0,"div",12),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw();e.Q6J("innerHtml",e.lcZ(1,1,t.offer.stuffData.uniqueNumber),e.oJD)}}const qg=function(i){return{unique:i}},Lg=function(i){return{"background-image":i}};let kg=(()=>{class i{constructor(t,n,r,a){this._marketplaceService=t,this._notificationService=n,this._ngZone=r,this._purseService=a}get imageUrlOffer(){if(!this.offer)return"";switch(this.offer.furniType){case 1:return s.wjX.instance.roomEngine.getFurnitureFloorIconUrl(this.offer.furniId);case 2:return s.wjX.instance.roomEngine.getFurnitureWallIconUrl(this.offer.furniId,this.offer.extraData)}return""}get marketplaceOfferTitle(){return this.offer?s.wjX.instance.localization.getValue(2==this.offer.furniType?"wallItem.name."+this.offer.furniId:"roomItem.name."+this.offer.furniId):""}get marketplaceOfferDescription(){if(!this.offer)return"";const t=this.offer;return s.wjX.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId)}get marketplacePrice(){return this.offer?s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.offer.price_own_item","price",this.offer.price.toString()):""}get averagePrice(){const t=this.offer.price,n=this.offer.averagePrice,r=0!=n?n.toString():" - ";return s.wjX.instance.localization.getValueWithParameters("catalog.marketplace.offer.price_public_item",["price","average"],[t.toString(),r])}get offerCount(){return s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.offer_count","count",this.offer.offerCount.toString())}get description(){return this.offer?s.wjX.instance.localization.getValue(2==this.offer.furniType?"wallItem.desc."+this.offer.furniId:"roomItem.desc."+this.offer.furniId):""}buy(){this._purseService.currencies.get(-1)<this.offer.price?this._notificationService.alert(s.wjX.instance.localization.getValue("catalog.alert.notenough.credits.description"),s.wjX.instance.localization.getValue("catalog.alert.notenough.title")):this._ngZone.run(()=>this._marketplaceService.buyOffer(this.offer))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(We),e.Y36(R),e.Y36(e.R0b),e.Y36(Fn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-marketplace-offer",""]],inputs:{offer:"offer"},attrs:Ug,decls:19,vars:14,consts:[[1,"rounded","bg-secondary","mb-2","p-2"],[1,"d-flex","flex-row","mb-1"],[1,"position-relative","align-self-center","align-items-end","mr-2","flex-shrink-0",2,"width","36px","height","36px",3,"ngClass"],[1,"position-absolute","w-100","h-100",2,"background-repeat","no-repeat","background-position","center",3,"ngStyle"],["class","position-absolute unique-counter","style","bottom:0px;",3,"innerHtml",4,"ngIf"],[1,"align-self-center"],[1,"small"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","mb-1"],[1,"d-flex","flex-row"],[1,"badge","badge-primary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn","btn-primary","btn-sm","ml-2","w-100",2,"white-space","nowrap",3,"click"],[1,"position-absolute","unique-counter",2,"bottom","0px",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.YNc(4,Ng,2,3,"div",4),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e._uU(11),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"div",9),e.TgZ(14,"div",10),e._uU(15),e.qZA(),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return n.buy()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(10,qg,n.offer.isUniqueLimitedItem)),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,Lg,"url("+n.imageUrlOffer+")")),e.xp6(1),e.Q6J("ngIf",n.offer.isUniqueLimitedItem),e.xp6(3),e.Oqu(n.marketplaceOfferTitle),e.xp6(2),e.Oqu(n.averagePrice),e.xp6(2),e.Oqu(n.description),e.xp6(4),e.Oqu(n.offerCount),e.xp6(2),e.Oqu(e.lcZ(18,8,"buy")))},directives:[u.mk,u.PC,u.O5],pipes:[m,Vt],encapsulation:2}),i})();function Fg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("sortChanged",function(r){return e.CHM(t),e.oxw().onSortChanged(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("sortTypes",t.SORT_TYPES_ACTIVITY)}}function Dg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("sortChanged",function(r){return e.CHM(t),e.oxw().onSortChanged(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("sortTypes",t.SORT_TYPES_VALUE)}}function Pg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("onSearch",function(r){return e.CHM(t),e.oxw().onSearch(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("sortTypes",t.SORT_TYPES_ADVANCED)}}function Jg(i,o){1&i&&e._UZ(0,"div",11),2&i&&e.Q6J("offer",o.$implicit)}const jg=function(i,o){return{"view-big":i,"view-short":o}};function Vg(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",8),e._uU(2),e.qZA(),e.TgZ(3,"perfect-scrollbar",9),e.YNc(4,Jg,1,1,"div",10),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.foundText),e.xp6(1),e.Q6J("ngClass",e.WLB(3,jg,"activity"===t.view||"value"===t.view,"advanced"===t.view)),e.xp6(1),e.Q6J("ngForOf",t.marketOffers)}}const Ci=function(i){return{active:i}};let ho=(()=>{class i extends Ce{constructor(){super(...arguments),this.SORT_TYPES_VALUE=[1,2],this.SORT_TYPES_ACTIVITY=[3,4,5,6],this.SORT_TYPES_ADVANCED=[1,2,3,4,5,6],this.view="activity",this.sortType=3}ngOnInit(){this.searchOffers()}selectView(t){this.view=t;let n=!1;switch(t){case"activity":this.sortType=this.SORT_TYPES_ACTIVITY[0],n=!0;break;case"value":this.sortType=this.SORT_TYPES_VALUE[0],n=!0;break;case"advanced":this.sortType=this.SORT_TYPES_ADVANCED[0]}n&&this.onSearch({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}onSortChanged(t){this._ngZone.run(()=>this.sortType=t),this.searchOffers()}onSearch(t){const r=0!=t.maxPrice&&t.maxPrice?t.maxPrice:-1;t.minPrice=0!=t.minPrice&&t.minPrice?t.minPrice:-1,t.maxPrice=r,this._marketService.requestOffers(t)}searchOffers(){this._marketService.requestOffers({minPrice:-1,maxPrice:-1,query:"",type:this.sortType})}get marketOffers(){return this._marketService.publicOffers}get totalOffersFound(){return this._marketService.totalOffersFound}get foundText(){return s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.items_found","count",this.totalOffersFound.toString())}get hasOffers(){return this.marketOffers&&this.marketOffers.length>0}}return i.CODE="marketplace",i.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:15,vars:22,consts:[[1,"w-100","h-100","px-1","nitro-catalog-layout-marketplace-own-items-component"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","mb-2","nitro-marketplace-sub-activity","",3,"sortTypes","sortChanged",4,"ngIf"],["class","mb-2","nitro-marketplace-sub-advanced","",3,"sortTypes","onSearch",4,"ngIf"],[4,"ngIf"],["nitro-marketplace-sub-activity","",1,"mb-2",3,"sortTypes","sortChanged"],["nitro-marketplace-sub-advanced","",1,"mb-2",3,"sortTypes","onSearch"],[1,"mb-1"],[3,"ngClass"],["nitro-marketplace-offer","",3,"offer",4,"ngFor","ngForOf"],["nitro-marketplace-offer","",3,"offer"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.selectView("activity")}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.selectView("value")}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",2),e.NdJ("click",function(){return n.selectView("advanced")}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.YNc(11,Fg,1,1,"div",3),e.YNc(12,Dg,1,1,"div",3),e.YNc(13,Pg,1,1,"div",4),e.YNc(14,Vg,5,6,"div",5),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngClass",e.VKq(16,Ci,"activity"===n.view)),e.xp6(1),e.Oqu(e.lcZ(4,10,"catalog.marketplace.search_by_activity")),e.xp6(2),e.Q6J("ngClass",e.VKq(18,Ci,"value"===n.view)),e.xp6(1),e.Oqu(e.lcZ(7,12,"catalog.marketplace.search_by_value")),e.xp6(2),e.Q6J("ngClass",e.VKq(20,Ci,"advanced"===n.view)),e.xp6(1),e.Oqu(e.lcZ(10,14,"catalog.marketplace.search_advanced")),e.xp6(2),e.Q6J("ngIf","activity"===n.view),e.xp6(1),e.Q6J("ngIf","value"===n.view),e.xp6(1),e.Q6J("ngIf","advanced"===n.view),e.xp6(1),e.Q6J("ngIf",n.hasOffers))},directives:[u.mk,u.O5,yg,Og,C.Vv,u.sg,kg],pipes:[m],styles:[".view-big[_ngcontent-%COMP%]{height:373px;min-height:373px;max-height:373px}.view-short[_ngcontent-%COMP%]{height:291px;min-height:291px;max-height:291px}"]}),i})();class Bg{getLayoutForType(o){switch(o){case oo.CODE:return oo;case fi.CODE:return fi;case bi.CODE:return bi;case ao.CODE:return ao;case co.CODE:return co;case lo.CODE:return lo;case Ti.CODE:return Ti;case an.CODE:return an;case _o.CODE:return _o;case so.CODE:return so;case vi.CODE:return vi;case uo.CODE:return uo;case Tn.CODE:return Tn;case mo.CODE:return mo;case po.CODE:return po;case ho.CODE:return ho;default:return Y_}}}const Gg=["layoutsContainer"],Hg=function(i){return{active:i}};function Wg(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).selectTab(a)}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Hg,n.activeTab===t)),e.xp6(1),e.Oqu(t.localization)}}function Qg(i,o){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"div",16),e.YNc(2,Wg,3,4,"ng-container",17),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.catalogRoot.children)}}function Xg(i,o){1&i&&e._UZ(0,"div",19)}function Yg(i,o){}function zg(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.TgZ(2,"h6",7),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",9),e.qZA(),e.qZA(),e.YNc(7,Qg,3,1,"div",10),e.TgZ(8,"div",11),e.YNc(9,Xg,1,0,"div",12),e.TgZ(10,"div",13),e.YNc(11,Yg,0,0,"ng-template",null,14,e.W1O),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"catalog.title")),e.xp6(4),e.Q6J("ngIf",t.catalogRoot&&t.catalogRoot.children.length>0),e.xp6(2),e.Q6J("ngIf",t.activeTab&&t.activeTab.children.length>0)}}function Kg(i,o){if(1&i&&e._UZ(0,"nitro-catalog-confirm-marketplace-purchase-component",20),2&i){const t=e.oxw();e.Q6J("offer",t.currentMarketplaceOfferToBuy)}}function $g(i,o){if(1&i&&e._UZ(0,"nitro-catalog-confirm-purchase-component",21),2&i){const t=e.oxw();e.Q6J("giftOffer",t.giftOffer)("page",t.purchaseOfferPage)("offer",t.purchaseOffer)("quantity",t.purchaseOfferQuantity)("extra",t.purchaseOfferExtra)("completed",t.purchaseCompleted)}}function ed(i,o){if(1&i&&e._UZ(0,"nitro-catalog-confirm-vip-subscription-component",22),2&i){const t=e.oxw();e.Q6J("subscription",t.purchaseVipSubscription)}}function td(i,o){1&i&&e._UZ(0,"nitro-catalog-confirm-purchase-insufficient-funds")}function nd(i,o){1&i&&e._UZ(0,"nitro-catalog-customize-gift-component")}let fo=(()=>{class i{constructor(t,n,r,a,c,l,g){this._settingsService=t,this._notificationService=n,this._catalogService=r,this._marketplaceService=a,this._componentFactoryResolver=c,this._purseService=l,this._ngZone=g,this.visible=!1,this._roomPreviewer=null,this._previewStuffData=null,this._lastComponent=null,this._layoutFactory=null,this._activeTab=null,this._activeOffer=null,this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseGiftOffer=null,this._purchaseVipSubscription=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseCompleted=!1,this._showInsufficientFunds=!1,this._showGiftConfigurator=!1,r.requestClubGifts()}ngOnInit(){this._catalogService.component=this,this._layoutFactory=new Bg,this._roomPreviewer||(this._roomPreviewer=new s.L4r(s.wjX.instance.roomEngine,++s.L4r.PREVIEW_COUNTER))}ngOnChanges(t){const r=t.visible.currentValue;r!==t.visible.previousValue&&(r?this.prepareCatalog():this.removeLastComponent())}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this.reset(),this._catalogService.component=null,this._layoutFactory=null}reset(){this.removeLastComponent(),this._activeTab=null,this._activeOffer=null,this.hidePurchaseConfirmation()}hide(){this._settingsService.hideCatalog(),this._catalogService.clearSearchResults()}hidePurchaseConfirmation(){this._purchaseOfferPage=null,this._purchaseOffer=null,this._purchaseOfferQuantity=1,this._purchaseOfferExtra=null,this._purchaseVipSubscription=null,this._purchaseGiftOffer=null,this._showGiftConfigurator=!1}prepareCatalog(){this._catalogService.catalogRoot?setTimeout(()=>{this._activeTab?this._catalogService.activePage?this.setupLayout():this.selectFirstPage(this._activeTab):this.selectFirstTab()},0):this._catalogService.setupCatalog(de.MODE_NORMAL)}setupLayout(){const t=this._catalogService.activePage;if(!t)return;const n=this._layoutFactory.getLayoutForType(t.layoutCode);n?(this.createComponent(n),this._lastComponent&&(this._lastComponent.instance.activePage=t),this.selectOffer(null)):this.removeLastComponent()}createComponent(t){if(!t||!this.layoutsContainer)return;this.removeLastComponent();const n=this._componentFactoryResolver.resolveComponentFactory(t);let r=null;n&&(r=this.layoutsContainer.createComponent(n)),this._lastComponent=r}removeLastComponent(){this.layoutsContainer&&this.layoutsContainer.remove(),this._lastComponent=null,this._activeOffer=null}selectTab(t){!t||(this._activeTab=t,this.selectFirstPage(t))}reselectCurrentTab(){this.selectFirstPage(this._activeTab)}selectPage(t){!t||this._catalogService.requestPage(t)}selectFirstPage(t,n=!1){if(t){if(!n&&t.children.length)return void this.selectPage(t.children&&t.children[0]);this.selectPage(t)}}selectFirstTab(){if(!this.catalogRoot)return;const t=this.catalogRoot.children&&this.catalogRoot.children[0];t&&this.selectTab(t)}selectOffer(t){if(this._activeOffer=t,this._activeOffer){const n=this._activeOffer.products[0];if(!n||!this._roomPreviewer)return;const r=this._catalogService.getFurnitureDataForProductOffer(n);if(!r&&n.productType!==j.ROBOT)return;this._ngZone.runOutsideAngular(()=>{switch(n.productType){case j.ROBOT:{this._roomPreviewer.updateObjectRoom("default","default","default");const a=s.wjX.instance.avatar.getFigureStringWithFigureIds(n.extraParam,"m",[]);this._roomPreviewer.addAvatarIntoRoom(a,0)}break;case j.FLOOR:if(this._roomPreviewer.updateObjectRoom("default","default","default"),r.specialType===Gi.FIGURE_PURCHASABLE_SET){const a=[],c=r.customParams.split(",");for(const g of c){const d=parseInt(g);s.wjX.instance.avatar.isValidFigureSetForGender(d,s.wjX.instance.sessionDataManager.gender)&&a.push(d)}const l=s.wjX.instance.avatar.getFigureStringWithFigureIds(s.wjX.instance.sessionDataManager.figure,s.wjX.instance.sessionDataManager.gender,a);this._roomPreviewer.addAvatarIntoRoom(l,0)}else this._roomPreviewer.addFurnitureIntoRoom(n.furniClassId,new s.UJ(90),this._previewStuffData);return;case j.WALL:switch(r.className){case"floor":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(n.extraParam);break;case"wallpaper":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,n.extraParam);break;case"landscape":this._roomPreviewer.reset(!1),this._roomPreviewer.updateObjectRoom(null,null,n.extraParam);break;default:return this._roomPreviewer.updateObjectRoom("default","default","default"),void this._roomPreviewer.addWallItemIntoRoom(n.furniClassId,new s.UJ(90),n.extraParam)}return}})}else this._ngZone.runOutsideAngular(()=>this._roomPreviewer&&this._roomPreviewer.reset(!1))}hasSufficientFunds(t,n,r,a=1){if(!this._purseService)return!1;const c=this._purseService.currencies,l=c.get(-1),g=c.get(n);return!(l<t*a||g<r*a)}confirmPurchase(t,n,r=1,a=null,c=!1){this.hasSufficientFunds(n.priceCredits,n.priceActivityPointsType,n.priceActivityPoints,r)?(this._purchaseOfferPage=t,this._purchaseOffer=n,this._purchaseOfferQuantity=r,this._purchaseOfferExtra=a,c&&(this._purchaseGiftOffer=n)):this.setInsufficientFunds(!0)}confirmVipSubscription(t){this.hasSufficientFunds(t.priceCredits,t.priceActivityPointsType,t.priceActivityPoints,1)?this._purchaseVipSubscription=t:this.setInsufficientFunds(!0)}get previewStuffData(){return this._previewStuffData}set previewStuffData(t){this._previewStuffData=t}get roomPreviewer(){return this._roomPreviewer}get catalogRoot(){return this._catalogService.catalogRoot}get activeTab(){return this._activeTab}get activeOffer(){return this._activeOffer}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get purchaseOfferPage(){return this._purchaseOfferPage}get purchaseOffer(){return this._purchaseOffer}get currentMarketplaceOfferToBuy(){return this._marketplaceService.currentMarketplaceOfferToBuy}get giftOffer(){return this._purchaseGiftOffer}get showGiftConfigurator(){return this._showGiftConfigurator}makeGiftConfiguratorVisible(){this._showGiftConfigurator=!0}get purchaseOfferQuantity(){return this._purchaseOfferQuantity}get purchaseOfferExtra(){return this._purchaseOfferExtra}get purchaseCompleted(){return this._purchaseCompleted}get purchaseVipSubscription(){return this._purchaseVipSubscription}setInsufficientFunds(t){this._showInsufficientFunds=t}get showInsufficientFunds(){return this._showInsufficientFunds}handleSearchResults(t){this._catalogService.setSearchPage(t),this.setupLayout()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(R),e.Y36(de),e.Y36(We),e.Y36(e._Vd),e.Y36(Fn),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-main-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Gg,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.layoutsContainer=r.first)}},inputs:{visible:"visible"},features:[e.TTD],decls:6,vars:6,consts:[["class","nitro-catalog card",3,"bringToTop","draggable",4,"ngIf"],[3,"offer",4,"ngIf"],[3,"giftOffer","page","offer","quantity","extra","completed",4,"ngIf"],[3,"subscription",4,"ngIf"],[4,"ngIf"],[1,"nitro-catalog","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],["class","d-flex px-3 pt-3",4,"ngIf"],[1,"row","p-3"],["nitro-catalog-navigation-component","","class","col-4",4,"ngIf"],[1,"col"],["layoutsContainer",""],[1,"d-flex","px-3","pt-3"],[1,"btn-group","w-100"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"ngClass","click"],["nitro-catalog-navigation-component","",1,"col-4"],[3,"offer"],[3,"giftOffer","page","offer","quantity","extra","completed"],[3,"subscription"]],template:function(t,n){1&t&&(e.YNc(0,zg,13,5,"div",0),e.YNc(1,Kg,1,1,"nitro-catalog-confirm-marketplace-purchase-component",1),e.YNc(2,$g,1,6,"nitro-catalog-confirm-purchase-component",2),e.YNc(3,ed,1,1,"nitro-catalog-confirm-vip-subscription-component",3),e.YNc(4,td,1,0,"nitro-catalog-confirm-purchase-insufficient-funds",4),e.YNc(5,nd,1,0,"nitro-catalog-customize-gift-component",4)),2&t&&(e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.currentMarketplaceOfferToBuy),e.xp6(1),e.Q6J("ngIf",(null!==n.purchaseOffer||null!==n.giftOffer)&&!n.showGiftConfigurator),e.xp6(1),e.Q6J("ngIf",null!==n.purchaseVipSubscription),e.xp6(1),e.Q6J("ngIf",n.showInsufficientFunds),e.xp6(1),e.Q6J("ngIf",null!==n.giftOffer&&n.showGiftConfigurator))},encapsulation:2}),i})();class Z{constructor(o,t,n){this._level=o,this._tileSize=t,this._name=n}get level(){return this._level}get tileSize(){return this._tileSize}get name(){return this._name}}const id=["nitro-navigator-room-creator-component",""],od=function(i){return{active:i}},rd=function(i){return{"background-image":i}};function sd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().setRoomLayout(a.name)}),e.TgZ(1,"button",22),e.TgZ(2,"div",23),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(6,od,n.roomLayoutControl.value===t.name))("ngStyle",e.VKq(8,rd,"url("+n.getRoomLayoutImageUrl(t.name)+")")),e.xp6(2),e.AsE("",t.tileSize," ",e.lcZ(4,4,"navigator.createroom.tilesize"),"")}}function ad(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(e.lcZ(2,2,t.name))}}function cd(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ld(i,o){if(1&i&&(e.TgZ(0,"option",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}let ud=(()=>{class i{constructor(t,n,r){this._navigatorService=t,this._activeModal=n,this._formBuilder=r,this._layouts=[],this._maxVisitors=[],this._tradeSettings=[],this._roomCreateListener=null}ngOnInit(){this.setRoomLayouts(),this.setMaxVisitors(50),this.setTradeSettings(),this.createForm(),this._roomCreateListener=new s.rSV(this.onRoomCreatedEvent.bind(this)),s.wjX.instance.communication.registerMessageEvent(this._roomCreateListener)}ngOnDestroy(){s.wjX.instance.communication.removeMessageEvent(this._roomCreateListener)}onRoomCreatedEvent(t){this.hide()}createForm(){let t=0;const n=this.categories[0];n&&(t=n.id),this._form=this._formBuilder.group({roomName:["",_.kI.required],roomDesc:[""],roomLayout:[this.layouts[0].name,_.kI.required],roomCategory:[t.toString(),_.kI.required],roomVisitors:[this.maxVisitors[0].toString(),_.kI.required],roomTrade:["0",_.kI.required]})}submit(){if(!this.form.valid)return;const t=this.roomNameControl.value,n=this.roomDescControl.value,r="model_"+this.roomLayoutControl.value,a=parseInt(this.roomCategoryControl.value),c=parseInt(this.roomVisitorsControl.value),l=parseInt(this.roomTradeControl.value);!t||""===t||s.wjX.instance.communication.connection.send(new s.Ybc(t,n,r,a,c,l))}hide(){this._activeModal.close()}setRoomLayouts(){this._layouts=[new Z(s.xJA.NO_CLUB,104,"a"),new Z(s.xJA.NO_CLUB,94,"b"),new Z(s.xJA.NO_CLUB,36,"c"),new Z(s.xJA.NO_CLUB,84,"d"),new Z(s.xJA.NO_CLUB,80,"e"),new Z(s.xJA.NO_CLUB,80,"f"),new Z(s.xJA.NO_CLUB,416,"i"),new Z(s.xJA.NO_CLUB,320,"j"),new Z(s.xJA.NO_CLUB,448,"k"),new Z(s.xJA.NO_CLUB,352,"l"),new Z(s.xJA.NO_CLUB,384,"m"),new Z(s.xJA.NO_CLUB,372,"n"),new Z(s.xJA.CLUB,80,"g"),new Z(s.xJA.CLUB,74,"h"),new Z(s.xJA.CLUB,416,"o"),new Z(s.xJA.CLUB,352,"p"),new Z(s.xJA.CLUB,304,"q"),new Z(s.xJA.CLUB,336,"r"),new Z(s.xJA.CLUB,748,"u"),new Z(s.xJA.CLUB,438,"v"),new Z(s.xJA.VIP,540,"t"),new Z(s.xJA.VIP,512,"w"),new Z(s.xJA.VIP,396,"x"),new Z(s.xJA.VIP,440,"y"),new Z(s.xJA.VIP,456,"z"),new Z(s.xJA.VIP,208,"0"),new Z(s.xJA.VIP,1009,"1"),new Z(s.xJA.VIP,1044,"2"),new Z(s.xJA.VIP,183,"3"),new Z(s.xJA.VIP,254,"4"),new Z(s.xJA.VIP,1024,"5"),new Z(s.xJA.VIP,801,"6"),new Z(s.xJA.VIP,354,"7"),new Z(s.xJA.VIP,888,"8"),new Z(s.xJA.VIP,926,"9")]}setMaxVisitors(t){this._maxVisitors=[];let n=i.MAX_VISITOR_STEPPER;for(;n<=t;)this._maxVisitors.push(n),n+=i.MAX_VISITOR_INCREMENTOR}setTradeSettings(){this._tradeSettings=[],this._tradeSettings.push("${navigator.roomsettings.trade_not_allowed}","${navigator.roomsettings.trade_not_with_Controller}","${navigator.roomsettings.trade_allowed}")}setRoomLayout(t){const n=this.roomLayoutControl;!n||n.setValue(t)}getRoomLayoutImageUrl(t){let n=s.wjX.instance.getConfiguration("images.url");return n+=`/navigator/models/model_${t}.png`,n}get form(){return this._form}get categories(){return this._navigatorService.categories}get layouts(){return this._layouts}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._tradeSettings}get roomNameControl(){return this._form.controls.roomName}get roomDescControl(){return this._form.controls.roomDesc}get roomLayoutControl(){return this._form.controls.roomLayout}get roomCategoryControl(){return this._form.controls.roomCategory}get roomVisitorsControl(){return this._form.controls.roomVisitors}get roomTradeControl(){return this._form.controls.roomTrade}get isLoading(){return!1}}return i.MAX_VISITOR_STEPPER=10,i.MAX_VISITOR_INCREMENTOR=5,i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(W.Kz),e.Y36(_.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-room-creator-component",""]],attrs:id,decls:49,vars:32,consts:[[1,"d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","row","p-3"],[1,"col-7"],[1,"grid-container",2,"height","479px","min-height","479px","max-height","479px"],[1,"grid-items","grid-2"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5"],[3,"formGroup"],[1,"form-group"],["type","text","formControlName","roomName",1,"form-control","form-control-sm"],["formControlName","roomDesc",1,"form-control","form-control-sm"],["formControlName","roomCategory",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["formControlName","roomVisitors",1,"form-control","form-control-sm"],["formControlName","roomTrade",1,"form-control","form-control-sm"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","ngStyle"],[1,"badge","badge-primary"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h6",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.hide()}),e._UZ(5,"i",3),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"perfect-scrollbar",6),e.TgZ(9,"div",7),e.YNc(10,sd,5,10,"div",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"form",10),e.TgZ(13,"div",11),e.TgZ(14,"label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",12),e.qZA(),e.TgZ(18,"div",11),e.TgZ(19,"label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"textarea",13),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"select",14),e.YNc(28,ad,3,4,"option",15),e.qZA(),e.qZA(),e.TgZ(29,"div",11),e.TgZ(30,"label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"select",16),e.YNc(34,cd,2,2,"option",15),e.qZA(),e.qZA(),e.TgZ(35,"div",11),e.TgZ(36,"label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"select",17),e.YNc(40,ld,3,4,"option",15),e.ALo(41,"keyvalue"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",18),e.TgZ(43,"button",19),e.NdJ("click",function(){return n.submit()}),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"button",20),e.NdJ("click",function(){return n.hide()}),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,14,"navigator.createroom.title")),e.xp6(8),e.Q6J("ngForOf",n.layouts),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(3),e.Oqu(e.lcZ(16,16,"navigator.createroom.roomnameinfo")),e.xp6(5),e.Oqu(e.lcZ(21,18,"navigator.createroom.roomdescinfo")),e.xp6(5),e.Oqu(e.lcZ(26,20,"navigator.category")),e.xp6(3),e.Q6J("ngForOf",n.categories),e.xp6(3),e.Oqu(e.lcZ(32,22,"navigator.maxvisitors")),e.xp6(3),e.Q6J("ngForOf",n.maxVisitors),e.xp6(3),e.Oqu(e.lcZ(38,24,"navigator.tradesettings")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(41,26,n.tradeSettings)),e.xp6(3),e.Q6J("disabled",n.form.pristine||n.form.invalid),e.xp6(1),e.Oqu(e.lcZ(45,28,"navigator.createroom.create")),e.xp6(3),e.Oqu(e.lcZ(48,30,"generic.cancel")))},directives:[C.Vv,u.sg,_._Y,_.JL,_.sg,_.Fj,_.JJ,_.u,_.EJ,u.mk,u.PC,_.YN,_.Kr],pipes:[m,u.Nd],encapsulation:2}),i})();const _d=["nitro-navigator-room-doorbell-component",""];function gd(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.doorbell.info")))}function dd(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.doorbell.waiting")))}function md(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.doorbell.no.answer")))}function pd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().ring()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.doorbell.button.ring")))}let hd=(()=>{class i{constructor(t,n){this._navigatorService=t,this._activeModal=n,this.room=null,this.isWaiting=!1,this.noAnswer=!1}ring(){!this.room||this.isWaiting||this.noAnswer||(this._navigatorService.goToRoom(this.room.roomId),this.hide())}close(){this._navigatorService.component.closeRoomDoorbell(),this.isWaiting&&s.wjX.instance.communication.connection.send(new s.Cq3)}hide(){this._activeModal.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(W.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-room-doorbell-component",""]],inputs:{room:"room",isWaiting:"isWaiting",noAnswer:"noAnswer"},attrs:_d,decls:18,vars:10,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",1),e.NdJ("click",function(){return n.close()}),e._UZ(4,"i",2),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,gd,3,3,"span",6),e.YNc(9,dd,3,3,"span",6),e.YNc(10,md,3,3,"span",6),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"div",5),e.TgZ(13,"div",7),e.TgZ(14,"button",8),e.NdJ("click",function(){return n.close()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,pd,3,3,"button",9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,6,"navigator.doorbell.title")," "),e.xp6(7),e.Q6J("ngIf",!n.isWaiting&&!n.noAnswer),e.xp6(1),e.Q6J("ngIf",n.isWaiting&&!n.noAnswer),e.xp6(1),e.Q6J("ngIf",n.noAnswer),e.xp6(5),e.Oqu(e.lcZ(16,8,"generic.cancel")),e.xp6(2),e.Q6J("ngIf",!n.isWaiting&&!n.noAnswer))},directives:[u.O5],pipes:[m],encapsulation:2}),i})();const fd=["nitro-navigator-room-password-component",""];function vd(i,o){if(1&i&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.room.roomName)}}function Td(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.password.info")))}function bd(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.password.retryinfo")))}let Cd=(()=>{class i{constructor(t,n){this._navigatorService=t,this._activeModal=n,this.room=null,this.isWrongPassword=!1,this.password=""}tryPassword(){!this.room||!this.password||(this._navigatorService.goToRoom(this.room.roomId,this.password),this.hide())}close(){this._navigatorService.component.closeRoomPassword()}hide(){this._activeModal.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(W.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-room-password-component",""]],inputs:{room:"room",isWrongPassword:"isWrongPassword"},attrs:fd,decls:25,vars:16,consts:[[1,"modal-header"],["type","button",1,"close",3,"click"],[1,"modal-body"],[1,"row"],[1,"col-12"],["class","font-weight-bold",4,"ngIf"],[4,"ngIf"],[1,"form-group"],["autocomplete","new-password","type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"font-weight-bold"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"button",1),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.YNc(7,vd,2,1,"div",5),e.YNc(8,Td,3,3,"div",6),e.YNc(9,bd,3,3,"div",6),e._UZ(10,"br"),e.TgZ(11,"div",7),e.TgZ(12,"label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"input",8),e.NdJ("ngModelChange",function(a){return n.password=a}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",3),e.TgZ(17,"div",4),e.TgZ(18,"div",9),e.TgZ(19,"button",10),e.NdJ("click",function(){return n.close()}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"button",11),e.NdJ("click",function(){return n.tryPassword()}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,8,"navigator.password.title")," "),e.xp6(6),e.Q6J("ngIf",n.room),e.xp6(1),e.Q6J("ngIf",!n.isWrongPassword),e.xp6(1),e.Q6J("ngIf",n.isWrongPassword),e.xp6(4),e.Oqu(e.lcZ(14,10,"navigator.password.enter")),e.xp6(2),e.Q6J("ngModel",n.password),e.xp6(5),e.Oqu(e.lcZ(21,12,"generic.cancel")),e.xp6(3),e.Oqu(e.lcZ(24,14,"navigator.password.button.try")))},directives:[u.O5,_.Fj,_.JJ,_.On],pipes:[m],encapsulation:2}),i})();const Ed=function(i){return{active:i}};function Sd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).setCurrentContext(a)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(4,Ed,n.topLevelContext===t)),e.xp6(1),e.Oqu(e.lcZ(2,2,"navigator.toplevelview."+t.code))}}function Ad(i,o){1&i&&e._UZ(0,"div",17),2&i&&e.Q6J("result",o.$implicit)}function wd(i,o){1&i&&e._UZ(0,"div",18)}function xd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"h6",4),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",6),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.YNc(9,Sd,3,6,"button",9),e.TgZ(10,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().openRoomCreator()}),e._UZ(11,"i",11),e.qZA(),e.qZA(),e._UZ(12,"div",12),e.TgZ(13,"perfect-scrollbar",13),e.YNc(14,Ad,1,1,"div",14),e.qZA(),e.YNc(15,wd,1,0,"div",15),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,t.isLoading?"navigator.title.is.busy":"navigator.title")),e.xp6(6),e.Q6J("ngForOf",t.topLevelContexts),e.xp6(5),e.Q6J("ngForOf",t.lastSearchResults),e.xp6(1),e.Q6J("ngIf",t.sliderVisible)}}function Zd(i,o){1&i&&e._UZ(0,"nitro-navigator-room-info-component")}let vo=(()=>{class i{constructor(t,n,r){this._settingsService=t,this._navigatorService=n,this._modalService=r,this.visible=!1}ngOnInit(){this._navigatorService.component=this}ngOnChanges(t){const r=t.visible.currentValue;r&&r!==t.visible.previousValue&&this.prepareNavigator()}ngOnDestroy(){this._roomCreatorModal&&this._roomCreatorModal.close(),this._navigatorService.component=null}prepareNavigator(){this._navigatorService.isLoaded?this._navigatorService.search():this._navigatorService.loadNavigator()}setCurrentContext(t){this._navigatorService.setCurrentContext(t),this._navigatorService.clearSearch()}hide(){this._settingsService.hideNavigator()}openRoomCreator(){this._roomCreatorModal||(this._roomCreatorModal=this._modalService.open(ud,{backdrop:"static",size:"lg",centered:!0,keyboard:!1}),this._roomCreatorModal&&this._roomCreatorModal.result.then(()=>this._roomCreatorModal=null))}openRoomDoorbell(t,n=!1,r=!1){this._roomPasswordModal&&this._roomPasswordModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let a=this._roomDoorbellModal;if(a||(a=this._roomDoorbellModal=this._modalService.open(hd,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),a.result.then(()=>this._roomDoorbellModal=null)),this._roomDoorbellModal=a,this._roomDoorbellModal){const c=a.componentInstance;c&&(c.room=t,c.isWaiting=n,c.noAnswer=r)}}closeRoomDoorbell(){!this._roomDoorbellModal||(this._roomDoorbellModal.close(),this._lastRoom=null)}openRoomPassword(t,n=!1){this._roomDoorbellModal&&this._roomDoorbellModal.close(),t||(t=this._lastRoom),this._lastRoom=t;let r=this._roomPasswordModal;if(r||(r=this._roomPasswordModal=this._modalService.open(Cd,{backdrop:"static",size:"sm",centered:!0,keyboard:!1}),r.result.then(()=>this._roomPasswordModal=null)),this._roomPasswordModal=r,this._roomPasswordModal){const a=r.componentInstance;if(!a)return;a.room=t,a.isWrongPassword=n}}closeRoomPassword(){!this._roomPasswordModal||(this._roomPasswordModal.close(),this._lastRoom=null)}get topLevelContext(){return this._navigatorService&&this._navigatorService.topLevelContext||null}get topLevelContexts(){return this._navigatorService&&this._navigatorService.topLevelContexts||null}get lastSearchResults(){return this._navigatorService.lastSearchResults}get isLoading(){return this._navigatorService&&(this._navigatorService.isLoading||this._navigatorService.isSearching)}get sliderVisible(){return s.wjX.instance.core.configuration.getValue("navigator.slider.enabled")}get roomInfoShowing(){return this._navigatorService.roomInfoShowing}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(ce),e.Y36(W.FF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-main-component"]],inputs:{visible:"visible"},features:[e.TTD],decls:3,vars:2,consts:[["class","nitro-navigator card",3,"bringToTop","draggable",4,"ngIf"],[4,"ngIf"],[1,"nitro-navigator","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button","class","btn btn-secondary",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-plus"],["nitro-navigator-search-component",""],[1,"results-container","position-relative","w-100","pr-1",2,"min-height","350px","max-height","350px","height","350px"],["class","mb-1","nitro-navigator-search-result-component","",3,"result",4,"ngFor","ngForOf"],["nitro-navigator-slider-component","",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["nitro-navigator-search-result-component","",1,"mb-1",3,"result"],["nitro-navigator-slider-component",""]],template:function(t,n){1&t&&(e.YNc(0,xd,16,6,"div",0),e.YNc(1,Zd,1,0,"nitro-navigator-room-info-component",1),e._UZ(2,"nitro-navigator-roomsettings-component")),2&t&&(e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("ngIf",n.roomInfoShowing))},encapsulation:2}),i})();class Ei{constructor(o){this._locked=!1,this._id=o.itemId,this._type=o.spriteId,this._ref=o.ref,this._category=o.category,this._groupable=o.isGroupable&&!o.rentable,this._tradeable=o.tradable,this._recyclable=o.isRecycleable,this._sellable=o.sellable,this._stuffData=o.stuffData,this._extra=o.extra,this._secondsToExpiration=o.secondsToExpiration,this._expirationTimeStamp=o.expirationTimeStamp,this._hasRentPeriodStarted=o.hasRentPeriodStarted,this._creationDay=o.creationDay,this._creationMonth=o.creationMonth,this._creationYear=o.creationYear,this._slotId=o.slotId,this._songId=o.songId,this._flatId=o.flatId,this._isRented=o.rentable,this._isWallItem=o.isWallItem}get rentable(){return this._isRented}get id(){return this._id}get ref(){return this._ref}get category(){return this._category}get type(){return this._type}get stuffData(){return this._stuffData}set stuffData(o){this._stuffData=o}get extra(){return this._extra}get _Str_16260(){return this._recyclable}get isTradable(){return this._tradeable}get isGroupable(){return this._groupable}get sellable(){return this._sellable}get secondsToExpiration(){if(-1===this._secondsToExpiration)return-1;let o=-1;return this._hasRentPeriodStarted?(o=this._secondsToExpiration-(s.wjX.instance.time-this._expirationTimeStamp)/1e3,o<0&&(o=0)):o=this._secondsToExpiration,o}get _Str_8932(){return this._creationDay}get _Str_9050(){return this._creationMonth}get _Str_9408(){return this._creationYear}get slotId(){return this._slotId}get _Str_3951(){return this._songId}get locked(){return this._locked}set locked(o){this._locked=o}get flatId(){return this._flatId}get isWallItem(){return this._isWallItem}get hasRentPeriodStarted(){return this._hasRentPeriodStarted}get _Str_10616(){return this._expirationTimeStamp}update(o){this._type=o.spriteId,this._ref=o.ref,this._category=o.category,this._groupable=o.isGroupable&&!o.rentable,this._tradeable=o.tradable,this._recyclable=o.isRecycleable,this._sellable=o.sellable,this._stuffData=o.stuffData,this._extra=o.extra,this._secondsToExpiration=o.secondsToExpiration,this._expirationTimeStamp=o.expirationTimeStamp,this._hasRentPeriodStarted=o.hasRentPeriodStarted,this._creationDay=o.creationDay,this._creationMonth=o.creationMonth,this._creationYear=o.creationYear,this._slotId=o.slotId,this._songId=o.songId,this._flatId=o.flatId,this._isRented=o.rentable,this._isWallItem=o.isWallItem}}let Id=(()=>{class i{constructor(t,n,r,a,c){this._Str_18094=1,this._Str_18535=.2,this._type=t,this._category=n,this._roomEngine=r,this._stuffData=a,this._extra=c,this._isWallItem=!1,this._iconUrl=null,this._name=null,this._description=null,this._locked=!1,this._selected=!1,this._hasUnseenItems=!1,this._items=new s.lzS}prepareGroup(){this.setIcon(),this.setName(),this.setDescription()}dispose(){}getItemByIndex(t){return this._items.getWithIndex(t)}getItemById(t){return this._items.getValue(t)}getTradeItems(t){const n=[],r=this.getLastItem();if(!r)return n;let a=0,c=0;for(;c<this._items.length&&!(a>=t);){const l=this.getItemByIndex(c);!l.locked&&l.isTradable&&l.type===r.type&&(n.push(l),a++),c++}return n}push(t,n=!1){const r=this._items.getValue(t.id);r?r.locked=!1:this._items.add(t.id,t),1===this._items.length&&this.prepareGroup()}pop(){let t=null;return this._items.length>0&&(t=this._items.getWithIndex(this._items.length-1),this._items.remove(t.id)),t}remove(t){const n=this._items.getValue(t);return n?(this._items.remove(t),n):null}getTotalCount(){if(this._category===M._Str_12351){let n=0,r=0;for(;r<this._items.length;){const a=this._items.getWithIndex(r);n+=parseInt(a.stuffData.getLegacyString()),r++}return n}return this._items.length}getUnlockedCount(){if(this.category===M._Str_12351)return this.getTotalCount();let t=0,n=0;for(;n<this._items.length;)this._items.getWithIndex(n).locked||t++,n++;return t}getLastItem(){return this._items.length?this._items.getWithIndex(this._items.length-1):null}unlockAllItems(){if(this._items.length)for(const n of this._items.getValues())n&&n.locked&&(n.locked=!1)}lockItemIds(t){for(const n of this._items.getValues()){const r=t.indexOf(n.ref)>=0;n.locked!==r&&(n.locked=r)}}setName(){const t=this.getLastItem();if(!t)return void(this._name="");let n="";switch(this._category){case M._Str_5186:n="poster_"+t.stuffData.getLegacyString()+"_name";break;case M._Str_9125:return void(this._name="SONG_NAME");default:n=this.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type}this._name=s.wjX.instance.getLocalization(n)}setDescription(){const t=this.getLastItem();if(!t)return void(this._description="");let n="";switch(this._category){case M._Str_5186:n="poster_"+t.stuffData.getLegacyString()+"_desc";break;case M._Str_9125:return void(this._description="SONG_NAME");default:n=this.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type}this._description=s.wjX.instance.getLocalization(n)}setIcon(){if(this._iconUrl)return;let t=null;t=this.isWallItem?this._roomEngine.getFurnitureWallIconUrl(this._type,this._stuffData.getLegacyString()):this._roomEngine.getFurnitureFloorIconUrl(this._type),t&&(this._iconUrl=t)}get type(){return this._type}get category(){return this._category}get stuffData(){return this._stuffData}get extra(){return this._extra}get iconUrl(){return this._iconUrl}get name(){return this._name}get description(){return this._description}get hasUnseenItems(){return this._hasUnseenItems}set hasUnseenItems(t){this._hasUnseenItems=t}get locked(){return this._locked}set locked(t){this._locked=t}get selected(){return this._selected}set selected(t){this._selected=t}get isWallItem(){const t=this.getItemByIndex(0);return!!t&&t.isWallItem}get isGroupable(){const t=this.getItemByIndex(0);return!!t&&t.isGroupable}get isSellable(){const t=this.getItemByIndex(0);return!!t&&t.sellable}get items(){return this._items}}return i.INVENTORY_THUMB_XML="inventory_thumb_xml",i._Str_4072=13421772,i._Str_4169=10275685,i})(),En=(()=>{class i{constructor(t,n,r){this._inventoryService=t,this._notificationService=n,this._ngZone=r,this._messages=[],this._furniMsgFragments=null,this._groupItems=[],this._search="",this._searchType="",this._itemIdInFurniPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.addEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new s.GRg(this.onFurnitureListAddOrUpdateEvent.bind(this)),new s.AAd(this.onFurnitureListEvent.bind(this)),new s.xH7(this.onFurnitureListInvalidateEvent.bind(this)),new s.UKf(this.onFurnitureListRemovedEvent.bind(this)),new s.KI(this.onFurniturePostItPlacedEvent.bind(this)),new s.rnQ(this.onMarketplaceSellEvent.bind(this)),new s.wMS(this.onMarketplaceConfigEvent.bind(this)),new s.LxJ(this.onMarketplaceItemStatsEvent.bind(this)),new s.AH7(this.onMarketplaceItemPostedEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t);s.wjX.instance.communication.connection.send(new s.sHX)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){!t||this._isObjectMoverRequested&&t.type===s.MCw.PLACED&&(this._isObjectMoverRequested=!1,t.placedInRoom||this._ngZone.run(()=>this._inventoryService.showWindow()))}onFurnitureListAddOrUpdateEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.items;this._ngZone.run(()=>{for(const a of r){const c=this.getGroupItemForFurnitureId(a.itemId);if(c){const l=c.getItemById(a.itemId);l&&(l.update(a),c.hasUnseenItems=!0)}else{const l=new Ei(a);this.addFurnitureItem(l,!1)}}})}onFurnitureListEvent(t){if(!t)return;const n=t.getParser();if(!n)return;this._furniMsgFragments||(this._furniMsgFragments=new Array(n.totalFragments));const r=new Map([...n.fragment]),a=this.mergeFragments(r,n.totalFragments,n.fragmentNumber,this._furniMsgFragments);!a||(this._ngZone.run(()=>this.processFragment(a)),this._furniMsgFragments=null)}onFurnitureListInvalidateEvent(t){if(t&&t.getParser()){if(this._inventoryService.furnitureVisible)return void this.requestLoad();this._needsUpdate=!0}}onFurnitureListRemovedEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this.removeItemById(n.itemId)&&this.setAllFurnitureSeen()})}onFurniturePostItPlacedEvent(t){t&&t.getParser()}onMarketplaceItemPostedEvent(t){if(!t)return;const n=t.getParser();if(!n)return;let r=null;r=1==n.result?"inventory.marketplace.result.title.success":"inventory.marketplace.result.title.failure",r=s.wjX.instance.localization.getValue(r);const a=s.wjX.instance.localization.getValue(`inventory.marketplace.result.${n.result}`);this._notificationService.alert(a,r)}onMarketplaceItemStatsEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this._marketPlaceItemStats=n)}onMarketplaceConfigEvent(t){if(!t)return;const n=t.getParser();!n||(this._marketPlaceConfig=n)}onMarketplaceSellEvent(t){if(!t)return;const n=t.getParser();if(n){switch(n.resultCode){case 2:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_privilege.info"),this.getTranslation("inventory.marketplace.no_trading_privilege.title"));case 3:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.no_trading_pass.info"),this.getTranslation("inventory.marketplace.no_trading_pass.title"));case 5:return;case 6:return void this._notificationService.alert(this.getTranslation("inventory.marketplace.trading_lock.info"),this.getTranslation("inventory.marketplace.trading_lock.title"))}this._ngZone.run(()=>this._inventoryService.marketPlaceOfferVisible=!0)}}getTranslation(t){return s.wjX.instance.localization.getValue(t)}mergeFragments(t,n,r,a){if(1===n)return t;a[r]=t;for(const l of a)if(!l)return null;const c=new Map;for(const l of a){for(const[g,d]of l)c.set(g,d);l.clear()}return a=null,c}processFragment(t){const n=this.getAllItemIds(),r=[],a=[];for(const l of t.keys())-1===n.indexOf(l)&&r.push(l);for(const l of n)t.get(l)||a.push(l);const c=0===n.length;for(const l of a)this.removeItemById(l);for(const l of r){const g=t.get(l);if(!g)continue;const d=new Ei(g);this.addFurnitureItem(d,!0)}c||r.length&&this._inventoryService.updateItemLocking(),r.length&&this._inventoryService.furniController&&(this._inventoryService.furniController.paginateConfig.currentPage=1),this._isInitialized=!0,this._inventoryService.events.next(i.INVENTORY_UPDATED),this._inventoryService.furniController&&this._inventoryService.furniController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const n of this._groupItems){let r=n.getTotalCount();n.category===M._Str_12351&&(r=1);let a=0;for(;a<r;)t.push(n.getItemByIndex(a).id),a++}return t}getFurnitureItem(t){for(const n of this._groupItems){if(!n)continue;const r=n.getItemById(t);if(r)return r}return null}addFurnitureItem(t,n){let r=null;r=t.isGroupable?this.addGroupableFurnitureItem(t,n):this.addSingleFurnitureItem(t,n),n||(r.hasUnseenItems=!0)}addSingleFurnitureItem(t,n){const r=[];for(const l of this._groupItems)l.type===t.type&&r.push(l);for(const l of r)if(l.getItemById(t.id))return l;const a=this.isFurnitureUnseen(t),c=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,n);return c.push(t,a),a?(c.hasUnseenItems=!0,this.unshiftGroupitem(c)):this.pushGroupItem(c),c}addGroupableFurnitureItem(t,n){let r=null;for(const c of this._groupItems)if(c.type===t.type&&c.isWallItem==t.isWallItem&&c.isGroupable)if(t.category===M._Str_5186){if(c.stuffData.getLegacyString()===t.stuffData.getLegacyString()){r=c;break}}else{if(t.category!==M._Str_12454){r=c;break}if(t.stuffData.compare(c.stuffData)){r=c;break}}const a=this.isFurnitureUnseen(t);return r?(r.push(t,a),a&&(r.hasUnseenItems=!0,this.removeAndUnshiftGroupitem(r)),r):(r=this.createGroupItem(t.type,t.category,t.stuffData,t.extra,n),r.push(t,a),a?(r.hasUnseenItems=!0,this.unshiftGroupitem(r)):this.pushGroupItem(r),r)}createGroupItem(t,n,r,a=NaN,c=!1){return new Id(t,n,s.wjX.instance.roomEngine,r,a)}removeItemById(t){let n=0;for(;n<this._groupItems.length;){const r=this._groupItems[n],a=r.remove(t);if(a)return this._itemIdInFurniPlacing===a.ref&&(this.cancelRoomObjectPlacement(),this.attemptItemPlacement()||this._inventoryService.showWindow()),r.getTotalCount()<=0&&(this._groupItems.splice(n,1),r.dispose()),r;n++}return null}isFurnitureUnseen(t){let n=0;return n=t.rentable?y.RENTABLE:y.FURNI,this._inventoryService.unseenTracker._Str_3613(n,t.id)}setAllFurnitureSeen(){this._inventoryService.unseenTracker._Str_8813(y.FURNI);for(const t of this._groupItems)t.hasUnseenItems&&(t.hasUnseenItems=!1);this._inventoryService.updateUnseenCount()}offerOnMarketplace(){const t=this.getSelectedGroup();if(!t)return;const n=t.getItemByIndex(0);!n||!n.sellable||(this._offerOnMarketPlaceItem=n,s.wjX.instance.communication.connection.send(new s.uG4),s.wjX.instance.communication.connection.send(new s.hwc(-1,n.type)))}attemptItemPlacement(t=!1){const n=this.getSelectedGroup();if(!n||!n.getUnlockedCount())return!1;const r=n.getLastItem();if(!r)return!1;if(r.category===M._Str_3683||r.category===M._Str_3639||r.category===M._Str_3432){if(t)return!1;s.wjX.instance.communication.connection.send(new s.CDx(r.id))}else this._inventoryService.hideWindow(),this.startRoomObjectPlacement(r);return!0}startRoomObjectPlacementWithoutRequest(t){let n=0,r=!1;return n=t.isWallItem?s.YGE.WALL:s.YGE.FLOOR,r=t.category===M._Str_5186?s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,t.id,n,t.type,t.stuffData.getLegacyString()):s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,t.id,n,t.type,t.extra.toString(),t.stuffData),r}startRoomObjectPlacement(t){let n=0,r=!1;n=t.isWallItem?s.YGE.WALL:s.YGE.FLOOR,r=t.category===M._Str_5186?s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,t.id,n,t.type,t.stuffData.getLegacyString()):s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,t.id,n,t.type,t.extra.toString(),t.stuffData),r&&(this._itemIdInFurniPlacing=t.ref,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._itemIdInFurniPlacing>-1&&(s.wjX.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._itemIdInFurniPlacing=-1)}getGroupItemForFurnitureId(t){for(const n of this._groupItems)if(n.getItemById(t))return n;return null}getSelectedGroup(){for(const t of this._groupItems)if(t&&t.selected)return t;return null}unshiftGroupitem(t){this._groupItems.unshift(t)}pushGroupItem(t){this._groupItems.push(t)}removeGroupItem(t){const n=this._groupItems.indexOf(t);n>-1&&this._groupItems.splice(n,1)}removeAndUnshiftGroupitem(t){this.removeGroupItem(t),this.unshiftGroupitem(t)}unlockAllItems(){for(const t of this._groupItems)t.unlockAllItems()}unselectAllGroupItems(){for(const t of this._groupItems)t.selected=!1}requestLoad(){this._needsUpdate=!1,s.wjX.instance.communication.connection.send(new s.A7o)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get groupItems(){return this._groupItems}get isObjectMoverRequested(){return this._isObjectMoverRequested}get search(){return this._search}set search(t){this._search=t}get searchType(){return this._searchType}set searchType(t){this._searchType=t}get offerOnMarketPlaceItem(){return this._offerOnMarketPlaceItem}get marketPlaceConfig(){return this._marketPlaceConfig}get marketPlaceItemStats(){return this._marketPlaceItemStats}set marketPlaceItemStats(t){this._marketPlaceItemStats=t}}return i.INVENTORY_UPDATED="IFS_INVENTORY_UPDATED",i.SELECT_FIRST_GROUP="IFS_SELECT_FIRST_GROUP",i.SELECT_EXISTING_GROUP_DEFAULT="IFS_SELECT_EXISTING_GROUP_DEFAULT",i.\u0275fac=function(t){return new(t||i)(e.LFG(ge),e.LFG(R),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();class yd{constructor(o){this._botData=o,this._selected=!1,this._isUnseen=!1}get id(){return this._botData.id}get botData(){return this._botData}get selected(){return this._selected}set selected(o){this._selected=o}get isUnseen(){return this._isUnseen}set isUnseen(o){this._isUnseen=o}}let To=(()=>{class i{constructor(t,n){this._inventoryService=t,this._ngZone=n,this._messages=[],this._bots=new s.lzS,this._botIdInBotPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.addEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new s.LQ5(this.onBotInventoryMessageEvent.bind(this)),new s.iYo(this.onBotRemovedFromInventoryEvent.bind(this)),new s.c55(this.onBotAddedToInventoryEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){!t||this._isObjectMoverRequested&&t.type===s.MCw.PLACED&&(this._isObjectMoverRequested=!1,t.placedInRoom||this._ngZone.run(()=>this._inventoryService.showWindow()))}onBotInventoryMessageEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{for(const r of n.items.values())this.addSingleBotItem(r);this._isInitialized=!0,this._inventoryService.botsController&&this._inventoryService.botsController.selectExistingGroupOrDefault()})}onBotRemovedFromInventoryEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>this.removeItemById(n.itemId))}onBotAddedToInventoryEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{const r=this.addSingleBotItem(n.item);r&&(r.isUnseen=!0)})}getAllItemIds(){const t=[];for(const n of this._bots.getValues())t.push(n.id);return t}getBotItem(t){return this._bots.getValue(t)||null}addSingleBotItem(t){this._bots||(this._bots=new s.lzS);const n=new yd(t);return this.isBotUnseen(t)?(n.isUnseen=!0,this.unshiftBotItem(n)):this.pushBotItem(n),n}removeItemById(t){if(!this._bots.length)return null;const n=this._bots.remove(t);return n?(this._botIdInBotPlacing===n.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),n):null}isBotUnseen(t){return this._inventoryService.unseenTracker._Str_3613(y.BOT,t.id)}setAllBotsSeen(){this._inventoryService.unseenTracker._Str_8813(y.BOT);for(const t of this._bots.getValues())t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptBotPlacement(t=!1){const n=this.getSelectedBot();if(!n)return!1;const r=n.botData;if(!r)return!1;const a=s.wjX.instance.roomSessionManager.getSession(1);return!(!a||!a.isRoomOwner||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(r),0))}startRoomObjectPlacement(t){s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,-t.id,s.YGE.UNIT,s.OOj.RENTABLE_BOT,t.figure)&&(this._botIdInBotPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._botIdInBotPlacing>-1&&(s.wjX.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._botIdInBotPlacing=-1)}getSelectedBot(){for(const t of this._bots.getValues())if(t&&t.selected)return t;return null}unshiftBotItem(t){this._bots.unshift(t.id,t)}pushBotItem(t){this._bots.add(t.id,t)}removeBotItem(t){this._bots.remove(t.id)}removeAndUnshiftGroupitem(t){this.removeBotItem(t),this.unshiftBotItem(t)}unselectAllBotItems(){for(const t of this._bots.getValues())t.selected=!1}requestLoad(){this._needsUpdate=!1,s.wjX.instance.communication.connection.send(new s.z4J)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get bots(){return this._bots.getValues()}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return i.INVENTORY_UPDATED="IBS_INVENTORY_UPDATED",i.SELECT_FIRST_GROUP="IBS_SELECT_FIRST_GROUP",i.SELECT_EXISTING_GROUP_DEFAULT="IBS_SELECT_EXISTING_GROUP_DEFAULT",i.\u0275fac=function(t){return new(t||i)(e.LFG(ge),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();class Rd{constructor(o){this._petData=o,this._selected=!1,this._isUnseen=!1}get id(){return this._petData.id}get petData(){return this._petData}get selected(){return this._selected}set selected(o){this._selected=o}get isUnseen(){return this._isUnseen}set isUnseen(o){this._isUnseen=o}}let bo=(()=>{class i{constructor(t,n){this._inventoryService=t,this._ngZone=n,this._messages=[],this._petMsgFragments=null,this._pets=[],this._petIdInPetPlacing=-1,this._isObjectMoverRequested=!1,this._isInitialized=!1,this._needsUpdate=!1,this.onRoomEngineObjectPlacedEvent=this.onRoomEngineObjectPlacedEvent.bind(this),this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.addEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent),this._messages=[new s.Zgz(this.onPetsReceivedEvent.bind(this)),new s.ZGx(this.onPetAddedEvent.bind(this)),new s.G$D(this.onPetRemovedEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.PLACED,this.onRoomEngineObjectPlacedEvent);for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectPlacedEvent(t){!t||this._isObjectMoverRequested&&t.type===s.MCw.PLACED&&(this._isObjectMoverRequested=!1,t.placedInRoom||this._ngZone.run(()=>this._inventoryService.showWindow()))}onPetsReceivedEvent(t){if(!t)return;const n=t.getParser();if(!n)return;this._petMsgFragments||(this._petMsgFragments=new Array(n.totalFragments));const r=new Map([...n.fragment]),a=this.mergeFragments(r,n.totalFragments,n.fragmentNumber,this._petMsgFragments);!a||this._ngZone.run(()=>this.processFragment(a))}onPetRemovedEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this.removeItemById(n.petId)&&this.setAllPetsSeen()})}onPetAddedEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=n.pet;this._ngZone.run(()=>{const a=this.getPetItem(r.id);a?a.isUnseen=!0:this.addSinglePetItem(r)})}mergeFragments(t,n,r,a){if(1===n)return t;a[r]=t;for(const l of a)if(!l)return null;const c=new Map;for(const l of a){for(const[g,d]of l)c.set(g,d);l.clear()}return a=null,c}processFragment(t){const n=this.getAllItemIds(),r=[],a=[];for(const l of t.keys())-1===n.indexOf(l)&&r.push(l);for(const l of n)t.get(l)||a.push(l);const c=0===n.length;for(const l of a)this.removeItemById(l);for(const l of r){const g=t.get(l);!g||this.addSinglePetItem(g)}c||r.length&&this._inventoryService.updateItemLocking(),this._isInitialized=!0,this._inventoryService.events.next(i.INVENTORY_UPDATED),this._inventoryService.petsController&&this._inventoryService.petsController.selectExistingGroupOrDefault()}getAllItemIds(){const t=[];for(const n of this._pets)t.push(n.id);return t}getPetItem(t){for(const n of this._pets)if(n&&n.id===t)return n;return null}addSinglePetItem(t){const n=new Rd(t);return this.isPetUnseen(t)?(n.isUnseen=!0,this.unshiftPetItem(n)):this.pushPetItem(n),n}removeItemById(t){let n=0;for(;n<this._pets.length;){const r=this._pets[n];if(r&&r.id===t)return this._petIdInPetPlacing===r.id&&(this.cancelRoomObjectPlacement(),this._inventoryService.showWindow()),this._pets.splice(n,1),r;n++}return null}isPetUnseen(t){return this._inventoryService.unseenTracker._Str_3613(y.PET,t.id)}setAllPetsSeen(){this._inventoryService.unseenTracker._Str_8813(y.PET);for(const t of this._pets)t.isUnseen&&(t.isUnseen=!1);this._inventoryService.updateUnseenCount()}attemptPetPlacement(t=!1){const n=this.getSelectedPet();if(!n)return!1;const r=n.petData;if(!r)return!1;const a=s.wjX.instance.roomSessionManager.getSession(1);return!(!a||!a.isRoomOwner&&!a.allowPets||(this._inventoryService.hideWindow(),this.startRoomObjectPlacement(r),0))}startRoomObjectPlacement(t){s.wjX.instance.roomEngine.processRoomObjectPlacement(s.S4W.INVENTORY,-t.id,s.YGE.UNIT,s.OOj.PET,t.figureData.figuredata)&&(this._petIdInPetPlacing=t.id,this.setObjectMoverRequested(!0))}cancelRoomObjectPlacement(){this._petIdInPetPlacing>-1&&(s.wjX.instance.roomEngine.cancelRoomObjectPlacement(),this.setObjectMoverRequested(!1),this._petIdInPetPlacing=-1)}getSelectedPet(){for(const t of this._pets)if(t&&t.selected)return t;return null}unshiftPetItem(t){this._pets.unshift(t)}pushPetItem(t){this._pets.push(t)}removePetItem(t){const n=this._pets.indexOf(t);n>-1&&this._pets.splice(n,1)}removeAndUnshiftGroupitem(t){this.removePetItem(t),this.unshiftPetItem(t)}unselectAllPetItems(){for(const t of this._pets)t.selected=!1}requestLoad(){this._needsUpdate=!1,s.wjX.instance.communication.connection.send(new s.LnR)}setObjectMoverRequested(t){this._isObjectMoverRequested!==t&&this._ngZone.run(()=>this._isObjectMoverRequested=t)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get pets(){return this._pets}get isObjectMoverRequested(){return this._isObjectMoverRequested}}return i.INVENTORY_UPDATED="IPS_INVENTORY_UPDATED",i.SELECT_FIRST_GROUP="IPS_SELECT_FIRST_GROUP",i.SELECT_EXISTING_GROUP_DEFAULT="IPS_SELECT_EXISTING_GROUP_DEFAULT",i.\u0275fac=function(t){return new(t||i)(e.LFG(ge),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Co=(()=>{class i{constructor(t,n){this._inventoryService=t,this._ngZone=n,this._messages=[],this._badges=[],this._badgesInUse=[],this._isInitialized=!1,this._needsUpdate=!1,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.tv4(this.onBadgesListEvent.bind(this)),new s.dcL(this.onBadgeReceivedEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onBadgesListEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this._badgesInUse=[],this._badges=[];const r=n.getAllBadgeCodes(),a=n.getActiveBadgeCodes();for(const c of r)-1===a.indexOf(c)?this._badges.push(c):this._badgesInUse.push(c);this._isInitialized=!0,this._inventoryService.badgesController&&this._inventoryService.badgesController.selectExistingGroupOrDefault()})}onBadgeReceivedEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{const r=n.badgeCode;-1===this._badges.indexOf(r)&&this._badges.push(r)})}setAllBadgesSeen(){this._inventoryService.unseenTracker._Str_8813(y.BADGE),this._inventoryService.updateUnseenCount()}isWearingBadge(t){return this._badgesInUse.indexOf(t)>=0}badgeLimitReached(){return 5===this._badgesInUse.length}wearOrClearBadge(t){const n=this._badgesInUse.indexOf(t);if(-1===n){this._badgesInUse.push(t);const r=this._badges.indexOf(t);r>=0&&this._badges.splice(r,1)}else this._badgesInUse.splice(n,1),-1===this._badges.indexOf(t)&&this._badges.push(t)}requestLoad(){this._needsUpdate=!1,s.wjX.instance.communication.connection.send(new s.GYT)}get controller(){return this._inventoryService.controller}get isInitalized(){return this._isInitialized}get needsUpdate(){return this._needsUpdate}get badges(){return this._badges}get activeBadges(){return this._badgesInUse}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ge),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Md=["nitro-inventory-trading-component",""];function Od(i,o){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index,n=e.oxw();e.xp6(1),e.Oqu(n.ownUserItems[t].getUnlockedCount())}}function Ud(i,o){if(1&i&&(e._UZ(0,"div",24),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw(2).index,n=e.oxw();e.Q6J("innerHtml",e.lcZ(1,1,n.ownUserItems[t].stuffData.uniqueNumber),e.oJD)}}const Eo=function(i){return{unique:i}},So=function(i){return{"background-image":i}};function Nd(i,o){if(1&i&&(e.TgZ(0,"button",19),e._UZ(1,"div",20),e.YNc(2,Od,2,1,"div",21),e.YNc(3,Ud,2,3,"div",22),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.Q6J("ngClass",e.VKq(4,Eo,n.ownUserItems[t].stuffData.uniqueNumber)),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,So,"url("+n.getIconUrl(n.ownUserItems[t])+")")),e.xp6(1),e.Q6J("ngIf",!n.ownUserItems[t].stuffData.uniqueNumber),e.xp6(1),e.Q6J("ngIf",n.ownUserItems[t].stuffData.uniqueNumber)}}function qd(i,o){1&i&&e._UZ(0,"button",25)}function Ld(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().removeItem(a)}),e.YNc(1,Nd,4,8,"button",17),e.YNc(2,qd,1,0,"button",18),e.qZA()}if(2&i){const t=o.index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.ownUserItems[t]),e.xp6(1),e.Q6J("ngIf",!n.ownUserItems[t])}}function kd(i,o){if(1&i&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).index,n=e.oxw();e.xp6(1),e.Oqu(n.otherUserItems[t].getUnlockedCount())}}function Fd(i,o){if(1&i&&(e._UZ(0,"div",24),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw(2).index,n=e.oxw();e.Q6J("innerHtml",e.lcZ(1,1,n.otherUserItems[t].stuffData.uniqueNumber),e.oJD)}}function Dd(i,o){if(1&i&&(e.TgZ(0,"button",19),e._UZ(1,"div",20),e.YNc(2,kd,2,1,"div",21),e.YNc(3,Fd,2,3,"div",22),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.Q6J("ngClass",e.VKq(4,Eo,n.otherUserItems[t].stuffData.uniqueNumber)),e.xp6(1),e.Q6J("ngStyle",e.VKq(6,So,"url("+n.getIconUrl(n.otherUserItems[t])+")")),e.xp6(1),e.Q6J("ngIf",!n.otherUserItems[t].stuffData.uniqueNumber),e.xp6(1),e.Q6J("ngIf",n.otherUserItems[t].stuffData.uniqueNumber)}}function Pd(i,o){1&i&&e._UZ(0,"button",25)}function Jd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().removeItem(a)}),e.YNc(1,Dd,4,8,"button",17),e.YNc(2,Pd,1,0,"button",18),e.qZA()}if(2&i){const t=o.index,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.otherUserItems[t]),e.xp6(1),e.Q6J("ngIf",!n.otherUserItems[t])}}function jd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().progressTrade()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),e.xp6(1),e.Oqu(e.lcZ(2,2,"inventory.trading.accept"))}}function Vd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().progressTrade()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.ownUserNumItems&&!t.otherUserNumItems),e.xp6(1),e.Oqu(e.lcZ(2,2,t.ownUserAccepts?"inventory.trading.modify":"inventory.trading.accept"))}}function Bd(i,o){if(1&i&&(e.TgZ(0,"button",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.Dn7(2,1,"inventory.trading.countdown","counter",t.timerTick))}}function Gd(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw().progressTrade()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.trading.confirm")))}function Hd(i,o){1&i&&(e.TgZ(0,"button",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.trading.info.waiting")))}function Wd(i,o){1&i&&(e.TgZ(0,"button",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.trading.accept")))}const Ao=function(i,o){return{"trade-unlocked-icon":i,"trade-locked-icon":o}};let ln=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._inventoryService=n,this._ngZone=r,this.indexs=[0,1,2,3,4,5,6,7,8],this._timerTick=3}ngOnInit(){this._inventoryService.tradeController=this}ngOnDestroy(){this._inventoryService.tradeController=null}startTimer(){this._timer&&(clearInterval(this._timer),this._timer=null),this._timerTick=3,this._timer=setInterval(this.progressTimer.bind(this),1e3)}resetTimer(){this._timer&&clearInterval(this._timer),this._timerTick=-1}progressTimer(){-1!==this._timerTick?(this._timerTick--,0===this._timerTick&&this._inventoryService.controller.tradeService.onTimerFinished()):this.resetTimer()}getIconUrl(t){return t&&t.iconUrl||null}removeItem(t){this._inventoryService.controller.tradeService.removeItem(t)}progressTrade(){switch(this._inventoryService.controller.tradeService.state){case un.TRADING_STATE_RUNNING:!this.otherUserItems.length&&!this.ownUserAccepts&&this._notificationService.alert("${inventory.trading.warning.other_not_offering}"),this.ownUserAccepts?this._inventoryService.controller.tradeService.sendTradingUnacceptComposer():this._inventoryService.controller.tradeService.sendTradingAcceptComposer();break;case un.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingConfirmComposer()}}cancelTrade(){switch(this._inventoryService.controller.tradeService.state){case un.TRADING_STATE_RUNNING:this._inventoryService.controller.tradeService.sendTradingCloseComposer();break;case un.TRADING_STATE_CONFIRMING:this._inventoryService.controller.tradeService.sendTradingCancelComposer()}}get timerTick(){return this._timerTick}get state(){return this._inventoryService.controller.tradeService.state}get ownUserName(){return this._inventoryService.controller.tradeService.ownUserName}get ownUserItems(){return this._inventoryService.controller.tradeService.ownUserItems.getValues()}get ownUserNumItems(){return this._inventoryService.controller.tradeService.ownUserNumItems}get ownUserNumCredits(){return this._inventoryService.controller.tradeService.ownUserNumCredits}get ownUserAccepts(){return this._inventoryService.controller.tradeService.ownUserAccepts}get otherUserName(){return this._inventoryService.controller.tradeService.otherUserName}get otherUserItems(){return this._inventoryService.controller.tradeService.otherUserItems.getValues()}get otherUserNumItems(){return this._inventoryService.controller.tradeService.otherUserNumItems}get otherUserNumCredits(){return this._inventoryService.controller.tradeService.otherUserNumCredits}get otherUserAccepts(){return this._inventoryService.controller.tradeService.otherUserAccepts}}return i.COLOR_LOCKED=4284532064,i.COLOR_UNLOCKED=2577770,i.ALERT_SCAM=0,i.ALERT_OTHER_CANCELLED=1,i.ALERT_ALREADY_OPEN=2,i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-trading-component",""]],attrs:Md,decls:40,vars:28,consts:[[1,"row","mt-3"],[1,"d-flex","flex-column","col-6"],[1,"badge","badge-secondary","w-100","p-1","mb-1"],[1,"d-flex","mb-1"],[1,"grid-container","position-relative"],[1,"grid-items","grid-3"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"icon","w-100",3,"ngClass"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","w-100","p-1","m-1"],[1,"d-flex","col-12","justify-content-between"],[3,"ngSwitch"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngSwitchCase"],["type","button","class","btn btn-secondary","disabled","",4,"ngSwitchCase"],["type","button","class","btn btn-secondary",3,"click",4,"ngSwitchCase"],["type","button",1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info",3,"ngClass",4,"ngIf"],["type","button","class","position-relative btn btn-secondary align-items-end detail-info has-image",4,"ngIf"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button","disabled","",1,"btn","btn-secondary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.YNc(8,Ld,3,2,"div",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"i",8),e.TgZ(11,"div",9),e._uU(12),e.qZA(),e.TgZ(13,"div",9),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",2),e._uU(17),e.qZA(),e.TgZ(18,"div",3),e.TgZ(19,"div",4),e.TgZ(20,"div",5),e.YNc(21,Jd,3,2,"div",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"i",8),e.TgZ(24,"div",9),e._uU(25),e.qZA(),e.TgZ(26,"div",9),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",0),e.TgZ(29,"div",10),e.ynx(30,11),e.YNc(31,jd,3,4,"button",12),e.YNc(32,Vd,3,4,"button",12),e.YNc(33,Bd,3,5,"button",13),e.YNc(34,Gd,3,3,"button",14),e.YNc(35,Hd,3,3,"button",13),e.YNc(36,Wd,3,3,"button",13),e.BQk(),e.TgZ(37,"button",15),e.NdJ("click",function(){return n.cancelTrade()}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,18,"inventory.trading.you")),e.xp6(5),e.Q6J("ngForOf",n.indexs),e.xp6(2),e.Q6J("ngClass",e.WLB(22,Ao,!n.ownUserAccepts,n.ownUserAccepts)),e.xp6(2),e.hij("",n.ownUserNumItems," items"),e.xp6(2),e.hij("",n.ownUserNumCredits," credits"),e.xp6(3),e.Oqu(n.otherUserName),e.xp6(4),e.Q6J("ngForOf",n.indexs),e.xp6(2),e.Q6J("ngClass",e.WLB(25,Ao,!n.otherUserAccepts,n.otherUserAccepts)),e.xp6(2),e.hij("",n.otherUserNumItems," items"),e.xp6(2),e.hij("",n.otherUserNumCredits," credits"),e.xp6(3),e.Q6J("ngSwitch",n.state),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(1),e.Q6J("ngSwitchCase",5),e.xp6(2),e.Oqu(e.lcZ(39,20,"generic.cancel")))},directives:[u.sg,u.mk,u.RF,u.n9,u.O5,u.PC],pipes:[m,Vt],encapsulation:2}),i})(),un=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._inventoryService=n,this._ngZone=r,this._messages=[],this._state=0,this._running=!1,this._ownUserIndex=-1,this._ownUserName="",this._ownUserNumItems=0,this._ownUserNumCredits=0,this._ownUserAccepts=!1,this._ownUserCanTrade=!1,this._otherUserIndex=-1,this._otherUserName="",this._otherUserNumItems=0,this._otherUserNumCredits=0,this._otherUserAccepts=!1,this._otherUserCanTrade=!1,this._offeredItemIds=[],this.registerMessages()}static _Str_16998(t,n){let r=t.toString();const a=n;if(!(n instanceof s.riO))return r;let c=1;for(;c<5;)r=r+","+a.getValue(c),c++;return r}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.D1C(this.onTradingAcceptEvent.bind(this)),new s.vSS(this.onTradingCloseEvent.bind(this)),new s.WYD(this.onTradingCompletedEvent.bind(this)),new s.Eyp(this.onTradingConfirmationEvent.bind(this)),new s.wsK(this.onTradingListItemEvent.bind(this)),new s.qMv(this.onTradingNotOpenEvent.bind(this)),new s.DFg(this.onTradingOpenEvent.bind(this)),new s.CP9(this.onTradingOpenFailedEvent.bind(this)),new s.DDk(this.onTradingOtherNotAllowedEvent.bind(this)),new s.Zjm(this.onTradingYouAreNotAllowedEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onTradingAcceptEvent(t){!t||!t.getParser()||this._ngZone.run(()=>{t.userID===this._ownUserIndex?this._ownUserAccepts=t.userAccepts:this._otherUserAccepts=t.userAccepts})}tradingNotificationMessage(t){switch(t){case ln.ALERT_SCAM:return void this._notificationService.alert("${inventory.trading.warning.other_not_offering}","${inventory.trading.notification.title}");case ln.ALERT_OTHER_CANCELLED:return void this._notificationService.alert("${inventory.trading.info.closed}","${inventory.trading.notification.title}");case ln.ALERT_ALREADY_OPEN:return void this._notificationService.alert("${inventory.trading.info.already_open}","${inventory.trading.notification.title}")}}onTradingCloseEvent(t){if(!t)return;const n=t.getParser();!n||!this._running||this._ngZone.run(()=>{n.reason===s.PMz.ERROR_WHILE_COMMIT?this._notificationService.alert("${inventory.trading.notification.caption}, ${inventory.trading.notification.commiterror.info}","${inventory.trading.notification.title}"):n.userID!==this._ownUserIndex&&this.tradingNotificationMessage(ln.ALERT_OTHER_CANCELLED),this.close()})}onTradingCompletedEvent(t){!t||!t.getParser()||this._ngZone.run(()=>this.state=i.TRADING_STATE_COMPLETED)}onTradingConfirmationEvent(t){!t||!t.getParser()||this._ngZone.run(()=>this.state=i.TRADING_STATE_COUNTDOWN)}onTradingListItemEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{const r=new s.lzS,a=new s.lzS;this.parseItems(n.firstUserItemArray,r),this.parseItems(n.secondUserItemArray,a),this.updateTrade(n,r,a)})}onTradingNotOpenEvent(t){}onTradingOpenEvent(t){if(!t)return;const n=t.getParser();if(!n)return;const r=s.wjX.instance.sessionDataManager,a=this._inventoryService.roomSession;if(!r||!a)return;let c=n.userID;const l=a.userDataManager.getUserData(c);if(!l)return;let g=l.name,d=n.userCanTrade,h=n.otherUserID;const f=a.userDataManager.getUserData(h);if(!f)return;let E=f.name,k=n.otherUserCanTrade;if(h===r.userId){const H=c,x=g,ue=d;c=h,g=E,d=k,h=H,E=x,k=ue}this._ngZone.run(()=>{this._inventoryService.hideAllControllers(),this._inventoryService.showWindow(),this._inventoryService.furnitureVisible=!0,this._inventoryService.tradingVisible=!0,this._Str_23457(c,g,d,h,E,k)})}onTradingOpenFailedEvent(t){if(!t)return;const n=t.getParser();!n||(n.reason===s.GX6.REASON_YOU_ARE_ALREADY_TRADING||n.reason===s.GX6.REASON_OTHER_USER_ALREADY_TRADING)&&this._ngZone.run(()=>{this.tradingNotificationMessage(ln.ALERT_ALREADY_OPEN)})}onTradingOtherNotAllowedEvent(t){!t||this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.others_account_disabled}","${inventory.trading.notification.title}")})}onTradingYouAreNotAllowedEvent(t){!t||this._ngZone.run(()=>{this._notificationService.alert("${inventory.trading.warning.own_account_disabled}","${inventory.trading.notification.title}")})}close(){this._running&&(this._state!==i.TRADING_STATE_READY&&this._state!==i.TRADING_STATE_COMPLETED&&(this.sendTradingCloseComposer(),this.state=i.TRADING_STATE_CANCELLED),this._inventoryService.controller.furnitureService.unlockAllItems(),this.state=i.TRADING_STATE_READY,this._running=!1,this._inventoryService.tradingVisible=!1)}startTrade(t,n){!this.controller||(this.controller.furnitureService.isInitalized||this.controller.furnitureService.requestLoad(),this.sendTradingOpenComposer(t))}_Str_23457(t,n,r,a,c,l){this._ownUserIndex=t,this._ownUserName=n,this._ownUserItems=new s.lzS,this._ownUserAccepts=!1,this._ownUserCanTrade=r,this._otherUserIndex=a,this._otherUserName=c,this._otherUserItems=new s.lzS,this._otherUserAccepts=!1,this._otherUserCanTrade=l,this._running=!0,this.state=i.TRADING_STATE_RUNNING}parseItems(t,n){if(!this.controller)return;const r=t.length;let a=0;for(;a<r;){const c=t[a];if(c){const l=c.spriteId,g=c.category;let d=c.furniType+l;(!c.isGroupable||this.isExternalImage(l))&&(d="itemid"+c.itemId),c.category===M._Str_5186?d=c.itemId+"poster"+c.stuffData.getLegacyString():c.category===M._Str_12454&&(d="");let h=c.isGroupable&&!this.isExternalImage(c.spriteId)?n.getValue(d):null;h||(h=this.controller.furnitureService.createGroupItem(l,g,c.stuffData),n.add(d,h)),h.push(new Ei(c))}a++}}isExternalImage(t){const n=s.wjX.instance.sessionDataManager.getWallItemData(t);return n&&n.isExternalImage}updateTrade(t,n,r){this._ownUserItems&&this._ownUserItems.reset(),this._otherUserItems&&this._otherUserItems.reset(),t.firstUserID===this._ownUserIndex?(this._ownUserItems=n,this._ownUserNumItems=t.firstUserNumItems,this._ownUserNumCredits=t.firstUserNumCredits,this._otherUserItems=r,this._otherUserNumItems=t.secondUserNumItems,this._otherUserNumCredits=t.secondUserNumCredits):(this._ownUserItems=r,this._ownUserNumItems=t.secondUserNumItems,this._ownUserNumCredits=t.secondUserNumCredits,this._otherUserItems=n,this._otherUserNumItems=t.firstUserNumItems,this._otherUserNumCredits=t.firstUserNumCredits),this._ownUserAccepts=!1,this._otherUserAccepts=!1,this._inventoryService.updateItemLocking()}offerItems(t,n,r,a,c,l){if(!c&&t.length)s.wjX.instance.communication.connection.send(new s.f5c(t.pop()));else{const g=[];for(const d of t)this.canTradeItem(n,r,a,c,l)&&g.push(d);g.length&&s.wjX.instance.communication.connection.send(1===g.length?new s.f5c(g.pop()):new s.gQU(...g))}}canTradeItem(t,n,r,a,c){if(this._ownUserAccepts||null==this._ownUserItems)return!1;if(this._ownUserItems.length<i.MAX_ITEMS_TO_TRADE)return!0;if(!a)return!1;let l=n.toString();return l=r===M._Str_5186?l+"poster"+c.getLegacyString():r===M._Str_12454?i._Str_16998(n,c):(t?"I":"S")+l,!!this._ownUserItems.getValue(l)}removeItem(t){const n=this._ownUserItems.getWithIndex(t);if(!n)return;const r=n.getLastItem();r&&s.wjX.instance.communication.connection.send(new s.jdP(r.id))}getOwnTradingItemIds(){const t=[];if(!this._ownUserItems||!this._ownUserItems.length)return t;for(const n of this._ownUserItems.getValues()){let r=0;for(;r<n.getTotalCount();){const a=n.getItemByIndex(r);a&&t.push(a.ref),r++}}return t}onTimerFinished(){this._state===i.TRADING_STATE_COUNTDOWN&&(this.state=i.TRADING_STATE_CONFIRMING)}sendTradingAcceptComposer(){s.wjX.instance.communication.connection.send(new s.cNz)}sendTradingUnacceptComposer(){s.wjX.instance.communication.connection.send(new s.gbv)}sendTradingConfirmComposer(){this.state=i.TRADING_STATE_CONFIRMED,s.wjX.instance.communication.connection.send(new s.E2K)}sendTradingCloseComposer(){s.wjX.instance.communication.connection.send(new s.fkE)}sendTradingCancelComposer(){s.wjX.instance.communication.connection.send(new s.Soc)}sendTradingOpenComposer(t){s.wjX.instance.communication.connection.send(new s.SWj(t))}get controller(){return this._inventoryService.controller}get state(){return this._state}set state(t){if(this._state===t)return;let r=!1;switch(this._state){case i.TRADING_STATE_READY:(t===i.TRADING_STATE_RUNNING||t===i.TRADING_STATE_COMPLETED)&&(this._state=t,r=!0);break;case i.TRADING_STATE_RUNNING:t===i.TRADING_STATE_COUNTDOWN?(this._state=t,r=!0,this._inventoryService.tradeController.startTimer()):t===i.TRADING_STATE_CANCELLED&&(this._state=t,r=!0);break;case i.TRADING_STATE_COUNTDOWN:(t===i.TRADING_STATE_CONFIRMING||t===i.TRADING_STATE_CANCELLED||t===i.TRADING_STATE_RUNNING)&&(this._state=t,r=!0);break;case i.TRADING_STATE_CONFIRMING:t===i.TRADING_STATE_CONFIRMED?(this._state=t,r=!0):(t===i.TRADING_STATE_COMPLETED||t===i.TRADING_STATE_CANCELLED)&&(this._state=t,r=!0,this.close());break;case i.TRADING_STATE_CONFIRMED:(t===i.TRADING_STATE_COMPLETED||t===i.TRADING_STATE_CANCELLED)&&(this._state=t,r=!0,this.close());break;case i.TRADING_STATE_COMPLETED:t===i.TRADING_STATE_READY&&(this._state=t,r=!0);break;case i.TRADING_STATE_CANCELLED:(t===i.TRADING_STATE_READY||t===i.TRADING_STATE_RUNNING)&&(this._state=t,r=!0)}}get running(){return this._running}get ownUserName(){return this._ownUserName}get ownUserItems(){return this._ownUserItems}get ownUserNumItems(){return this._ownUserNumItems}get ownUserNumCredits(){return this._ownUserNumCredits}get ownUserAccepts(){return this._ownUserAccepts}get ownUserCanTrade(){return this._ownUserCanTrade}get otherUserName(){return this._otherUserName}get otherUserItems(){return this._otherUserItems}get otherUserNumItems(){return this._otherUserNumItems}get otherUserNumCredits(){return this._otherUserNumCredits}get otherUserAccepts(){return this._otherUserAccepts}get otherUserCanTrade(){return this._otherUserCanTrade}}return i.MAX_ITEMS_TO_TRADE=9,i.TRADING_STATE_READY=0,i.TRADING_STATE_RUNNING=1,i.TRADING_STATE_COUNTDOWN=2,i.TRADING_STATE_CONFIRMING=3,i.TRADING_STATE_CONFIRMED=4,i.TRADING_STATE_COMPLETED=5,i.TRADING_STATE_CANCELLED=6,i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(ge),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function Qd(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.furniUnseenCount)}}function Xd(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.botUnseenCount)}}function Yd(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.petUnseenCount)}}function zd(i,o){if(1&i&&(e.TgZ(0,"div",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.badgeUnseenCount)}}function Kd(i,o){if(1&i&&e._UZ(0,"div",17),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)}}function $d(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)}}function em(i,o){if(1&i&&e._UZ(0,"div",19),2&i){const t=e.oxw(2);e.Q6J("roomPreviewer",t.roomPreviewer)}}function tm(i,o){1&i&&e._UZ(0,"div",20)}function nm(i,o){1&i&&e._UZ(0,"div",21)}const Vn=function(i){return{active:i}};function im(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"h6",4),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",6),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().showFurniture()}),e._uU(10),e.ALo(11,"translate"),e.YNc(12,Qd,2,1,"div",10),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().showBots()}),e._uU(14),e.ALo(15,"translate"),e.YNc(16,Xd,2,1,"div",10),e.qZA(),e.TgZ(17,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().showPets()}),e._uU(18),e.ALo(19,"translate"),e.YNc(20,Yd,2,1,"div",10),e.qZA(),e.TgZ(21,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().showBadges()}),e._uU(22),e.ALo(23,"translate"),e.YNc(24,zd,2,1,"div",10),e.qZA(),e.qZA(),e.YNc(25,Kd,1,1,"div",11),e.YNc(26,$d,1,1,"div",12),e.YNc(27,em,1,1,"div",13),e.YNc(28,tm,1,0,"div",14),e.YNc(29,nm,1,0,"div",15),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,18,"inventory.title")),e.xp6(6),e.Q6J("ngClass",e.VKq(28,Vn,t.furnitureVisible||t.tradingVisible)),e.xp6(1),e.Oqu(e.lcZ(11,20,"inventory.furni")),e.xp6(2),e.Q6J("ngIf",t.furniUnseenCount),e.xp6(1),e.Q6J("ngClass",e.VKq(30,Vn,t.botsVisible)),e.xp6(1),e.Oqu(e.lcZ(15,22,"inventory.bots")),e.xp6(2),e.Q6J("ngIf",t.botUnseenCount),e.xp6(1),e.Q6J("ngClass",e.VKq(32,Vn,t.petsVisible)),e.xp6(1),e.Oqu(e.lcZ(19,24,"inventory.furni.tab.pets")),e.xp6(2),e.Q6J("ngIf",t.petUnseenCount),e.xp6(1),e.Q6J("ngClass",e.VKq(34,Vn,t.badgesVisible)),e.xp6(1),e.Oqu(e.lcZ(23,26,"inventory.badges")),e.xp6(2),e.Q6J("ngIf",t.badgeUnseenCount),e.xp6(1),e.Q6J("ngIf",t.botsVisible),e.xp6(1),e.Q6J("ngIf",t.petsVisible),e.xp6(1),e.Q6J("ngIf",t.furnitureVisible),e.xp6(1),e.Q6J("ngIf",t.badgesVisible),e.xp6(1),e.Q6J("ngIf",t.tradingVisible)}}let wo=(()=>{class i{constructor(t,n,r,a,c,l,g){this._settingsService=t,this._inventoryService=n,this._inventoryFurnitureService=r,this._inventoryBotService=a,this._inventoryPetService=c,this._inventoryBadgeService=l,this._inventoryTradingService=g,this.visible=!1,this._roomPreviewer=null}ngOnInit(){this._roomPreviewer||(this._roomPreviewer=new s.L4r(s.wjX.instance.roomEngine,++s.L4r.PREVIEW_COUNTER)),this._inventoryService.controller=this}ngOnDestroy(){this._roomPreviewer&&this._roomPreviewer.dispose(),this._inventoryService.controller=null}ngOnChanges(t){const r=t.visible.currentValue;r!==t.visible.previousValue&&(r||this._inventoryTradingService.close())}hide(){this._inventoryService.hideWindow()}showFurniture(){this._inventoryService.furnitureVisible=!0,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showBots(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!0,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!1}showPets(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!0,this._inventoryService.badgesVisible=!1}showBadges(){this._inventoryService.furnitureVisible=!1,this._inventoryService.botsVisible=!1,this._inventoryService.petsVisible=!1,this._inventoryService.badgesVisible=!0}updateItemLocking(){const t=[];if(t.push(...this._inventoryTradingService.getOwnTradingItemIds()),t.length)for(const n of this._inventoryFurnitureService.groupItems)n.lockItemIds(t);else this._inventoryFurnitureService.unlockAllItems()}setAllFurnitureSeen(){this._inventoryFurnitureService.setAllFurnitureSeen()}setAllBotsSeen(){this._inventoryBotService.setAllBotsSeen()}setAllPetsSeen(){this._inventoryPetService.setAllPetsSeen()}setAllBadgesSeen(){this._inventoryBadgeService.setAllBadgesSeen()}get roomPreviewer(){return this._roomPreviewer}get furnitureVisible(){return this._inventoryService.furnitureVisible}get badgesVisible(){return this._inventoryService.badgesVisible}get tradingVisible(){return this._inventoryService.tradingVisible}get marketPlaceOfferVisible(){return this._inventoryService.marketPlaceOfferVisible}get offerForMarketplace(){return this.furnitureService.offerOnMarketPlaceItem}get offerStatsIsCorrect(){return this.offerForMarketplace&&this._inventoryFurnitureService.marketPlaceItemStats&&this.offerForMarketplace.type===this._inventoryFurnitureService.marketPlaceItemStats.furniTypeId}get botsVisible(){return this._inventoryService.botsVisible}get petsVisible(){return this._inventoryService.petsVisible}get furnitureService(){return this._inventoryFurnitureService}get botService(){return this._inventoryBotService}get petService(){return this._inventoryPetService}get badgeService(){return this._inventoryBadgeService}get tradeService(){return this._inventoryTradingService}get furniUnseenCount(){return this._inventoryService.furniUnseenCount}get botUnseenCount(){return this._inventoryService.botUnseenCount}get petUnseenCount(){return this._inventoryService.petUnseenCount}get badgeUnseenCount(){return this._inventoryService.badgeUnseenCount}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(ge),e.Y36(En),e.Y36(To),e.Y36(bo),e.Y36(Co),e.Y36(un))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-inventory-main-component"]],inputs:{visible:"visible"},features:[e.TTD],decls:2,vars:3,consts:[["class","nitro-inventory card",3,"bringToTop","draggable",4,"ngIf"],["nitro-inventory-offer-marketplace-component","",3,"showMainWindow","item"],[1,"nitro-inventory","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","w-100","mb-2"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","bg-danger px-1 py-0 rounded notification-count ml-1",4,"ngIf"],["nitro-inventory-bots-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-pets-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-furniture-component","",3,"roomPreviewer",4,"ngIf"],["nitro-inventory-badges-component","",4,"ngIf"],["nitro-inventory-trading-component","",4,"ngIf"],[1,"bg-danger","px-1","py-0","rounded","notification-count","ml-1"],["nitro-inventory-bots-component","",3,"roomPreviewer"],["nitro-inventory-pets-component","",3,"roomPreviewer"],["nitro-inventory-furniture-component","",3,"roomPreviewer"],["nitro-inventory-badges-component",""],["nitro-inventory-trading-component",""]],template:function(t,n){1&t&&(e.YNc(0,im,30,36,"div",0),e._UZ(1,"div",1)),2&t&&(e.Q6J("ngIf",n.visible),e.xp6(1),e.Q6J("showMainWindow",n.marketPlaceOfferVisible&&n.offerForMarketplace&&n.offerStatsIsCorrect)("item",n.offerForMarketplace))},encapsulation:2}),i})(),xo=(()=>{class i{constructor(t,n){this._ngZone=t,this._settingsService=n,this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.flush(),this.registerMessages(),s.wjX.instance.addLinkEventTracker(this)}ngOnDestroy(){s.wjX.instance.removeLinkEventTracker(this),this.unregisterMessages()}flush(){this._userLoadedProfile=null,this._userBadges=[],this._heartRelationships=null,this._smileRelationships=null,this._bobbaRelationships=null,this._selectedGroup=null}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.SELECTED,this.onRoomEngineObjectEvent),this._messages=[new s.sx4(this.onUserProfileEvent.bind(this)),new s.tV2(this.onUserCurrentBadgesEvent.bind(this)),new s.WUU(this.onUserRelationshipsEvent.bind(this)),new s.OOH(this.onGroupInformationEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.SELECTED,this.onRoomEngineObjectEvent),this._messages&&this._messages.length)for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomEngineObjectEvent(t){if(t)switch(t.type){case s.MCw.SELECTED:return}}onUserProfileEvent(t){if(!t)return;const n=t.getParser();!n||this._ngZone.run(()=>{this.flush(),this._userLoadedProfile=n,s.wjX.instance.communication.connection.send(new s.i3r(this._userLoadedProfile.id)),s.wjX.instance.communication.connection.send(new s.Oti(this._userLoadedProfile.id)),n.groups.length>0&&s.wjX.instance.communication.connection.send(new s.Jr3(this._userLoadedProfile.groups[0].id,!1)),this._settingsService.showUserProfile()})}onUserCurrentBadgesEvent(t){if(!t||!this._userLoadedProfile)return;const n=t.getParser();!n||n.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>this._userBadges=n.badges)}onUserRelationshipsEvent(t){if(!t||!this._userLoadedProfile)return;const n=t.getParser();!n||n.userId===this._userLoadedProfile.id&&this._ngZone.run(()=>{this._heartRelationships=n.relationshipStatusMap.getValue(s.t6z.HEART),this._smileRelationships=n.relationshipStatusMap.getValue(s.t6z.SMILE),this._bobbaRelationships=n.relationshipStatusMap.getValue(s.t6z.BOBBA)})}onGroupInformationEvent(t){if(!t)return;const n=t.getParser();!n||this._selectedGroup&&n.id!==this._selectedGroup.id||this._ngZone.run(()=>this._selectedGroup=n)}selectGroup(t){s.wjX.instance.communication.connection.send(new s.Jr3(t,!1))}loadUserProfile(t){s.wjX.instance.communication.connection.send(new s.m7m(t))}linkReceived(t){const n=t.split("/");if(!(n.length<2))switch(n[1]){case"goto":if(n.length>2){const r=parseInt(n[2]);r>0&&this.loadUserProfile(r)}return}}get eventUrlPrefix(){return"profile"}set component(t){this._component=t}get userLoadedProfile(){return this._userLoadedProfile}get userBadges(){return this._userBadges}get heartRelationships(){return this._heartRelationships}get smileRelationships(){return this._smileRelationships}get bobbaRelationships(){return this._bobbaRelationships}get selectedGroup(){return this._selectedGroup}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b),e.LFG(w))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),om=(()=>{class i{constructor(t){this.changeDetector=t,this._time=0,this._timer=null,this.updateTime=this.updateTime.bind(this)}ngOnDestroy(){this.clearInterval()}transform(t){return this._time=t,this.setupInterval(),s.Uwc.format(Date.now()-this._time)}clearInterval(){this._timer&&(clearInterval(this._timer),this._timer=null)}setupInterval(){this._timer||(this._timer=setInterval(this.updateTime,3e4))}updateTime(){this.changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO,16))},i.\u0275pipe=e.Yjl({name:"timeAgo",type:i,pure:!0}),i})();function rm(i,o){1&i&&(e.TgZ(0,"button",53),e._UZ(1,"i",54),e.qZA())}function sm(i,o){if(1&i&&(e.TgZ(0,"div",56),e._UZ(1,"nitro-badge",57),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("badge",t)}}function am(i,o){if(1&i&&(e.TgZ(0,"div",9),e.YNc(1,sm,2,1,"div",55),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.userBadges)}}const Zo=function(i){return{active:i}};function cm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(3).selectGroup(a.id)}),e._UZ(1,"nitro-badge",61),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("ngClass",e.VKq(3,Zo,n.selectedGroup&&n.selectedGroup.id===t.id)),e.xp6(1),e.Q6J("badge",t.badge)("isGroup",!0)}}function lm(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"perfect-scrollbar",58),e.TgZ(2,"div",59),e.YNc(3,cm,2,5,"div",51),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.userProfile.groups)}}function um(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(3);e.Q6J("headOnly",!0)("figure",t.currentRandomHeartRelationship.randomFriendFigure)("direction",4)}}function _m(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(3);e.Q6J("headOnly",!0)("figure",t.currentRandomSmileRelationship.randomFriendFigure)("direction",4)}}function gm(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(3);e.Q6J("headOnly",!0)("figure",t.currentRandomBobbaRelationship.randomFriendFigure)("direction",4)}}function dm(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",62),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.openRelationshipProfile(r.currentRandomHeartRelationship)}),e.TgZ(5,"div",63),e._UZ(6,"i",64),e.qZA(),e.TgZ(7,"div",65),e.YNc(8,um,1,3,"div",43),e.TgZ(9,"div",44),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",45),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.openRelationshipProfile(r.currentRandomSmileRelationship)}),e.TgZ(16,"div",63),e._UZ(17,"i",66),e.qZA(),e.TgZ(18,"div",65),e.YNc(19,_m,1,3,"div",43),e.TgZ(20,"div",44),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",45),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return r.openRelationshipProfile(r.currentRandomBobbaRelationship)}),e.TgZ(27,"div",63),e._UZ(28,"i",67),e.qZA(),e.TgZ(29,"div",68),e.YNc(30,gm,1,3,"div",43),e.TgZ(31,"div",44),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"div",45),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,10,"extendedprofile.relstatus")),e.xp6(6),e.Q6J("ngIf",t.currentRandomHeartRelationship),e.xp6(2),e.hij(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.randomFriendName:e.lcZ(11,12,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomHeartRelationship&&t.currentRandomHeartRelationship.friendCount>1?e.Dn7(14,14,"extendedprofile.relstatus.others.heart","count",t.currentRandomHeartRelationship.friendCount-1):""," "),e.xp6(6),e.Q6J("ngIf",t.currentRandomSmileRelationship),e.xp6(2),e.hij(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.randomFriendName:e.lcZ(22,18,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomSmileRelationship&&t.currentRandomSmileRelationship.friendCount>1?e.Dn7(25,20,"extendedprofile.relstatus.others.smile","count",t.currentRandomSmileRelationship.friendCount-1):""," "),e.xp6(6),e.Q6J("ngIf",t.currentRandomBobbaRelationship),e.xp6(2),e.hij(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.randomFriendName:e.lcZ(33,24,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomBobbaRelationship&&t.currentRandomBobbaRelationship.friendCount>1?e.Dn7(36,26,"extendedprofile.relstatus.others.bobba","count",t.currentRandomBobbaRelationship.friendCount-1):""," ")}}function mm(i,o){1&i&&(e.TgZ(0,"div",70),e._UZ(1,"i",71),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"extendedprofile.me")," "))}function pm(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(2);e.Q6J("headOnly",!0)("figure",t.currentRandomHeartRelationship.randomFriendFigure)("direction",4)}}function hm(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(2);e.Q6J("headOnly",!0)("figure",t.currentRandomSmileRelationship.randomFriendFigure)("direction",4)}}function fm(i,o){if(1&i&&e._UZ(0,"div",69),2&i){const t=e.oxw(2);e.Q6J("headOnly",!0)("figure",t.currentRandomBobbaRelationship.randomFriendFigure)("direction",4)}}function vm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",60),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectGroup(a.id)}),e._UZ(1,"nitro-badge",61),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(3,Zo,n.selectedGroup&&n.selectedGroup.id===t.id)),e.xp6(1),e.Q6J("badge",t.badge)("isGroup",!0)}}function Tm(i,o){1&i&&(e.TgZ(0,"button",84),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.join")))}function bm(i,o){1&i&&(e.TgZ(0,"button",84),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.requestmembership")))}function Cm(i,o){1&i&&(e.TgZ(0,"button",86),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.membershippending")))}function Em(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,bm,3,3,"button",83),e.YNc(2,Cm,3,3,"button",85),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",0===t.selectedGroup.membershipType),e.xp6(1),e.Q6J("ngIf",2===t.selectedGroup.membershipType)}}function Sm(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Tm,3,3,"button",83),e.YNc(2,Em,3,2,"div",26),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",0===t.selectedGroup.type),e.xp6(1),e.Q6J("ngIf",1===t.selectedGroup.type)}}function Am(i,o){1&i&&(e.TgZ(0,"button",87),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.leave")))}const wm=function(){return["date","owner"]},xm=function(i,o){return[i,o]},Zm=function(i,o){return["group.created",null,null,i,o]};function Im(i,o){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",72),e.TgZ(2,"div",73),e.TgZ(3,"div",74),e._UZ(4,"i",36),e._uU(5),e.qZA(),e.TgZ(6,"div",75),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",76),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",77),e.TgZ(12,"div",78),e._UZ(13,"nitro-badge",61),e.qZA(),e.TgZ(14,"div",79),e._UZ(15,"i",80),e._uU(16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",81),e.YNc(18,Sm,3,2,"div",26),e.YNc(19,Am,3,3,"button",82),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngClass","icon-group-type-"+t.selectedGroup.type),e.xp6(1),e.hij(" ",t.selectedGroup.title," "),e.xp6(2),e.Oqu(e.G7q(8,9,e.WLB(19,Zm,e.DdM(15,wm),e.WLB(16,xm,t.selectedGroup.createdAt,t.selectedGroup.ownerName)))),e.xp6(3),e.Oqu(t.selectedGroup.description),e.xp6(3),e.Q6J("badge",t.selectedGroup.badge)("isGroup",!0),e.xp6(3),e.hij(" ",t.selectedGroup.membersCount,""),e.xp6(2),e.Q6J("ngIf",1!==t.selectedGroup.membershipType),e.xp6(1),e.Q6J("ngIf",1===t.selectedGroup.membershipType)}}const Bn=function(i){return[i]};function ym(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e._uU(12),e.qZA(),e.YNc(13,rm,2,0,"button",11),e.qZA(),e.TgZ(14,"div",12),e.TgZ(15,"div",13),e._UZ(16,"div",14),e.qZA(),e.TgZ(17,"div",15),e.TgZ(18,"div",16),e._uU(19),e.qZA(),e.TgZ(20,"div",17),e._UZ(21,"div",18),e.ALo(22,"translate"),e._UZ(23,"div",18),e.ALo(24,"translate"),e.TgZ(25,"div",19),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",20),e.TgZ(29,"div",21),e.TgZ(30,"div",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectTab(0)}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectTab(1)}),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectTab(2)}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.qZA(),e.TgZ(39,"div",24),e.YNc(40,am,2,1,"div",25),e.YNc(41,lm,4,1,"ng-container",26),e.YNc(42,dm,37,30,"ng-container",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"div",27),e.TgZ(44,"div",7),e.TgZ(45,"div",8),e.TgZ(46,"div",28),e.TgZ(47,"div",29),e._UZ(48,"div",30),e.qZA(),e.TgZ(49,"div",31),e.TgZ(50,"div",32),e._uU(51),e.qZA(),e.TgZ(52,"div",33),e._uU(53),e.qZA(),e._UZ(54,"div",34),e.ALo(55,"translate"),e._UZ(56,"div",34),e.ALo(57,"translate"),e.ALo(58,"timeAgo"),e._UZ(59,"div",34),e.ALo(60,"translate"),e.TgZ(61,"div"),e.TgZ(62,"div",35),e._UZ(63,"i",36),e.qZA(),e.YNc(64,mm,4,3,"div",37),e.qZA(),e.qZA(),e.qZA(),e._UZ(65,"div",38),e.qZA(),e.TgZ(66,"div",8),e._UZ(67,"div",34),e.ALo(68,"translate"),e.TgZ(69,"div",32),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.openRelationshipProfile(r.currentRandomHeartRelationship)}),e.TgZ(73,"div",40),e._UZ(74,"i",41),e.qZA(),e.TgZ(75,"div",42),e.YNc(76,pm,1,3,"div",43),e.TgZ(77,"div",44),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",45),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(83,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.openRelationshipProfile(r.currentRandomSmileRelationship)}),e.TgZ(84,"div",40),e._UZ(85,"i",46),e.qZA(),e.TgZ(86,"div",42),e.YNc(87,hm,1,3,"div",43),e.TgZ(88,"div",44),e._uU(89),e.ALo(90,"translate"),e.qZA(),e.TgZ(91,"div",45),e._uU(92),e.ALo(93,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"div",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.openRelationshipProfile(r.currentRandomBobbaRelationship)}),e.TgZ(95,"div",40),e._UZ(96,"i",47),e.qZA(),e.TgZ(97,"div",42),e.YNc(98,fm,1,3,"div",43),e.TgZ(99,"div",44),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.TgZ(102,"div",45),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(105,"hr"),e.TgZ(106,"div",7),e.TgZ(107,"div",48),e._UZ(108,"div",34),e.ALo(109,"translate"),e.TgZ(110,"perfect-scrollbar",49),e.TgZ(111,"div",50),e.YNc(112,vm,2,5,"div",51),e.qZA(),e.qZA(),e.qZA(),e.TgZ(113,"div",52),e.YNc(114,Im,20,22,"div",26),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,45,"extendedprofile.caption")),e.xp6(8),e.Q6J("ngClass",e.VKq(105,Bn,t.isMe||t.isFriend?"rounded":"rounded-left")),e.xp6(1),e.Oqu(t.userProfile.username),e.xp6(1),e.Q6J("ngIf",!t.isMe&&!t.isFriend),e.xp6(3),e.Q6J("figure",t.userProfile.figure)("direction",2),e.xp6(3),e.Oqu(t.userProfile.motto),e.xp6(2),e.Q6J("innerHTML",e.Dn7(22,47,"extendedprofile.created","created",t.userProfile.registration),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.Dn7(24,51,"extendedprofile.last.login","lastlogin",t.lastLogin),e.oJD),e.xp6(3),e.AsE(" ",e.lcZ(27,55,"extendedprofile.achievementscore")," ",t.userProfile.achievementPoints," "),e.xp6(4),e.Q6J("ngClass",e.VKq(107,Bn,0==t.tabId?"bg-emperor":"bg-secondary")),e.xp6(1),e.hij(" ",e.lcZ(32,57,"inventory.badges.inactivebadges")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(109,Bn,1==t.tabId?"bg-emperor":"bg-secondary")),e.xp6(1),e.AsE(" ",e.lcZ(35,59,"avatar.profile.groups")," ",t.userProfile.groups.length," "),e.xp6(2),e.Q6J("ngClass",e.VKq(111,Bn,2==t.tabId?"bg-emperor":"bg-secondary")),e.xp6(1),e.AsE(" ",e.lcZ(38,61,"friendlist.friends"),": ",t.userProfile.friendsCount," "),e.xp6(3),e.Q6J("ngIf",0==t.tabId),e.xp6(1),e.Q6J("ngIf",1==t.tabId),e.xp6(1),e.Q6J("ngIf",2==t.tabId),e.xp6(6),e.Q6J("figure",t.userProfile.figure)("direction",2),e.xp6(3),e.Oqu(t.userProfile.username),e.xp6(2),e.Oqu(t.userProfile.motto),e.xp6(1),e.Q6J("innerHTML",e.Dn7(55,63,"extendedprofile.created","created",t.userProfile.registration),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.Dn7(57,67,"extendedprofile.last.login","lastlogin",e.lcZ(58,71,t.userProfile.lastVisit)),e.oJD),e.xp6(3),e.Q6J("innerHTML",e.Dn7(60,73,"extendedprofile.activitypoints","activitypoints",t.userProfile.achievementPoints),e.oJD),e.xp6(4),e.Q6J("ngClass",t.userProfile.isOnline?"icon-online":"icon-offline"),e.xp6(1),e.Q6J("ngIf",t.isMe),e.xp6(3),e.Q6J("innerHTML",e.Dn7(68,77,"extendedprofile.friends.count","count",t.userProfile.friendsCount),e.oJD),e.xp6(3),e.Oqu(e.lcZ(71,81,"extendedprofile.relstatus")),e.xp6(6),e.Q6J("ngIf",t.currentRandomHeartRelationship),e.xp6(2),e.hij(" ",t.currentRandomHeartRelationship?t.currentRandomHeartRelationship.randomFriendName:e.lcZ(79,83,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomHeartRelationship&&t.currentRandomHeartRelationship.friendCount>1?e.Dn7(82,85,"extendedprofile.relstatus.others.heart","count",t.currentRandomHeartRelationship.friendCount-1):""," "),e.xp6(6),e.Q6J("ngIf",t.currentRandomSmileRelationship),e.xp6(2),e.hij(" ",t.currentRandomSmileRelationship?t.currentRandomSmileRelationship.randomFriendName:e.lcZ(90,89,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomSmileRelationship&&t.currentRandomSmileRelationship.friendCount>1?e.Dn7(93,91,"extendedprofile.relstatus.others.smile","count",t.currentRandomSmileRelationship.friendCount-1):""," "),e.xp6(6),e.Q6J("ngIf",t.currentRandomBobbaRelationship),e.xp6(2),e.hij(" ",t.currentRandomBobbaRelationship?t.currentRandomBobbaRelationship.randomFriendName:e.lcZ(101,95,"extendedprofile.no.friends.in.this.category")," "),e.xp6(3),e.hij(" ",t.currentRandomBobbaRelationship&&t.currentRandomBobbaRelationship.friendCount>1?e.Dn7(104,97,"extendedprofile.relstatus.others.bobba","count",t.currentRandomBobbaRelationship.friendCount-1):""," "),e.xp6(5),e.Q6J("innerHTML",e.Dn7(109,101,"extendedprofile.groups.count","count",t.userProfile.groups.length),e.oJD),e.xp6(4),e.Q6J("ngForOf",t.userProfile.groups),e.xp6(2),e.Q6J("ngIf",t.selectedGroup)}}let Rm=(()=>{class i{constructor(t,n,r){this._userProfileService=t,this._sessionService=n,this._settingsService=r,this._tabId=0}ngOnInit(){this._userProfileService.component=this}ngOnDestroy(){this._userProfileService.component=null}hide(){this._settingsService.hideUserProfile()}openRelationshipProfile(t){!t||s.wjX.instance.communication.connection.send(new s.m7m(t.randomFriendId))}selectGroup(t){this._userProfileService.selectGroup(t)}selectTab(t){this._tabId=t}get visible(){return this._settingsService.userProfileVisible}get userProfile(){return this._userProfileService.userLoadedProfile}get userBadges(){return this._userProfileService.userBadges}get isMe(){return!!this.userProfile&&this._sessionService.userId===this.userProfile.id}get lastLogin(){return this.userProfile?s.Uwc.format(this.userProfile.secondsSinceLastVisit,".ago",2):""}get isFriend(){return!!this.userProfile&&this.userProfile.isMyFriend}get currentRandomHeartRelationship(){return this._userProfileService.heartRelationships}get currentRandomSmileRelationship(){return this._userProfileService.smileRelationships}get currentRandomBobbaRelationship(){return this._userProfileService.bobbaRelationships}get selectedGroup(){return this._userProfileService.selectedGroup}get tabId(){return this._tabId}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(xo),e.Y36(hn),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-user-profile-component"]],decls:1,vars:1,consts:[["class","card nitro-user-profile-component",3,"bringToTop","draggable",4,"ngIf"],[1,"card","nitro-user-profile-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3","header-draggable"],[1,"mb-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-row"],[1,"bg-emperor","w-100","mb-1","font-bold","text-center",3,"ngClass"],["class","btn btn-sm btn-success rounded-right mb-1 px-2 py-0",4,"ngIf"],[1,"row","mx-0"],[1,"profile-avatar-container","col-3","px-0","mx-0"],["nitro-avatar-image","",1,"avatar-img","bg-emperor","rounded-left",3,"figure","direction"],[1,"col-9","px-0","mx-0","bg-emperor","profile-user-right","p-2"],[1,"profile-user-motto","font-italic","small"],[1,"mt-auto","small"],[1,"p-1","bg-primary","rounded","mb-1",3,"innerHTML"],[1,"p-1","bg-primary","rounded"],[1,"col-6","d-flex","flex-column"],[1,"d-flex","flex-row","small"],[1,"rounded-top","p-1","mr-1",3,"ngClass","click"],[1,"rounded-top","bg-secondary","p-1","mr-1",3,"ngClass","click"],[1,"bg-emperor","profile-info-bg","p-1"],["class","d-flex flex-row",4,"ngIf"],[4,"ngIf"],[1,"d-none"],[1,"profile-upper-container"],[1,"profile-avatar-container"],["nitro-avatar-image","",1,"avatar-img",3,"figure","direction"],[1,"profile-info-container"],[1,"font-weight-bold"],[1,"profile-info-motto","font-italic"],[3,"innerHTML"],[2,"float","left"],[1,"icon",3,"ngClass"],["class","its-me",4,"ngIf"],[1,"badges-container"],[1,"profile-relationship",3,"click"],[1,"icon-container"],[1,"icon","icon-relationship-heart"],[1,"profile-relationship-information"],["class","relationship-avatar","nitro-avatar-image","",3,"headOnly","figure","direction",4,"ngIf"],[1,"profile-relationship-name"],[1,"profile-relationship-extra"],[1,"icon","icon-relationship-smile"],[1,"icon","icon-relationship-bobba"],[1,"col-3"],[1,"grid-container","position-relative","w-100",2,"min-height","160px","max-height","160px"],[1,"grid-items","grid-1"],["class","item-detail",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"col-9"],[1,"btn","btn-sm","btn-success","rounded-right","mb-1","px-2","py-0"],[1,"fas","fa-user-plus"],["class","bg-primary p-1 rounded user-profile-badge",4,"ngFor","ngForOf"],[1,"bg-primary","p-1","rounded","user-profile-badge"],[1,"h-100","d-flex","justify-content-center",3,"badge"],[1,"d-flex","flex-column","w-100",2,"min-height","160px","height","160px","max-height","160px"],[1,"bg-primary","w-100","rounded","mb-1"],[1,"item-detail",3,"ngClass","click"],[3,"badge","isGroup"],[1,"font-weight-bold","small"],[1,"icon-container","mr-1"],[1,"fas","fa-heart","text-pink"],[1,"profile-relationship-information","bg-primary","rounded","w-100","mb-1","p-1"],[1,"fas","fa-smile","text-warning"],[1,"fas","fa-skull","text-black"],[1,"profile-relationship-information","bg-primary","rounded","w-100","p-1"],["nitro-avatar-image","",1,"relationship-avatar",3,"headOnly","figure","direction"],[1,"its-me"],[1,"icon","icon-check"],[1,"group-detail"],[1,"left-side"],[1,"group-title","font-weight-bold"],[1,"group-created-at"],[1,"group-description"],[1,"right-side"],[1,"group-badge"],[1,"group-members"],[1,"icon","icon-group-members"],[1,"group-membership-action"],["class","btn btn-danger btn-block",4,"ngIf"],["class","btn btn-primary btn-block",4,"ngIf"],[1,"btn","btn-primary","btn-block"],["class","btn btn-primary disabled btn-block",4,"ngIf"],[1,"btn","btn-primary","disabled","btn-block"],[1,"btn","btn-danger","btn-block"]],template:function(t,n){1&t&&e.YNc(0,ym,115,113,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.mk,He,C.Vv,u.sg,Le],pipes:[m,om],encapsulation:2}),i})();const Mm=["historyScroller"],Om=function(i){return{"background-color":i}};function Um(i,o){if(1&i&&e._UZ(0,"div",23),2&i){const t=e.oxw(2).$implicit;e.Q6J("ngStyle",e.VKq(1,Om,t.senderColorString))}}const Nm=function(i){return{"background-image":i}};function qm(i,o){if(1&i&&e._UZ(0,"div",24),2&i){const t=e.oxw(2).$implicit;e.Q6J("ngStyle",e.VKq(1,Nm,"url("+t.senderImageUrl+")"))}}function Lm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).selectUser(r.senderId)}),e.YNc(1,Um,1,3,"div",17),e.TgZ(2,"div"),e.TgZ(3,"div",18),e.YNc(4,qm,1,3,"div",19),e.qZA(),e.TgZ(5,"div",20),e._UZ(6,"b",21),e._UZ(7,"span",22),e.ALo(8,"roomChatFormatter"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0===t.chatStyle),e.xp6(1),e.MT6("chat-bubble bubble-",t.chatStyle," type-",t.chatType,""),e.xp6(2),e.Q6J("ngIf",t.senderImageUrl),e.xp6(2),e.Q6J("innerHTML",t.senderName,e.oJD),e.xp6(1),e.Q6J("innerHTML",e.lcZ(8,8,t.content),e.oJD)}}function km(i,o){if(1&i&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.content)}}function Fm(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",10),e.TgZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4),e.ALo(5,"date"),e.qZA(),e.qZA(),e.TgZ(6,"div",13),e.YNc(7,Lm,9,10,"div",14),e.YNc(8,km,2,1,"div",15),e.qZA(),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(4),e.Oqu(e.xi3(5,3,t.date,"HH:mm:ss")),e.xp6(3),e.Q6J("ngIf",-1!==t.senderId),e.xp6(1),e.Q6J("ngIf",-1===t.senderId)}}function Dm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"perfect-scrollbar",6,7),e.TgZ(9,"div",8),e.YNc(10,Fm,9,6,"ng-container",9),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("topCenter",!1)("center",!1)("noMemory",!0),e.xp6(3),e.Oqu(e.lcZ(4,6,"room.chathistory.button.text")),e.xp6(7),e.Q6J("ngForOf",t.historyItems)("ngForTrackBy",t.trackById)}}let Pm=(()=>{class i{constructor(t,n){this._settingsService=t,this._chatHistoryService=n}ngOnChanges(t){const r=t.visible.currentValue;r&&r!==t.visible.previousValue&&setTimeout(()=>this.scrollToBottom(),1)}hide(){this._settingsService.hideChatHistory()}selectUser(t){t&&s.wjX.instance.roomEngine.selectRoomObject(s.wjX.instance.roomEngine.activeRoomId,t,s.YGE.UNIT)}trackById(t,n){return n.id}scrollToBottom(){!this.historyScroller||this.historyScroller.directiveRef.scrollToBottom(0)}get historyItems(){return this._chatHistoryService.historyItems}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(ci))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-chat-history-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Mm,5),2&t){let r;e.iGM(r=e.CRH())&&(n.historyScroller=r.first)}},inputs:{visible:"visible"},features:[e.TTD],decls:1,vars:1,consts:[["class","card nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory",4,"ngIf"],[1,"card","nitro-chat-history-component",3,"bringToTop","draggable","topCenter","center","noMemory"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"position-relative","w-100","h-100","mb-1"],["historyScroller",""],[1,"d-flex","flex-column","pt-3","px-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","mb-2"],[1,"d-flex","col-3","justify-content-end","align-items-center"],[1,"badge","badge-secondary","badge-sm"],[1,"d-flex","col-9","align-items-center","pl-0"],["class","bubble-container",3,"click",4,"ngIf"],["class","badge badge-success badge-sm",4,"ngIf"],[1,"bubble-container",3,"click"],["class","user-container-bg",3,"ngStyle",4,"ngIf"],[1,"user-container"],["class","user-image",3,"ngStyle",4,"ngIf"],[1,"chat-content"],[1,"username-container","mr-1",3,"innerHTML"],[1,"message",3,"innerHTML"],[1,"user-container-bg",3,"ngStyle"],[1,"user-image",3,"ngStyle"],[1,"badge","badge-success","badge-sm"]],template:function(t,n){1&t&&e.YNc(0,Dm,11,8,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,C.Vv,u.sg,u.PC],pipes:[m,u.uU,Xi],encapsulation:2}),i})(),Io=(()=>{class i{constructor(t){this._ngZone=t,this._messages=[],this._volumeSystem=0,this._volumeFurni=0,this._volumeTrax=0,this._oldChat=!1,this._roomInvites=!1,this._cameraFollow=!0,this._flags=0,this._chatType=0,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this.unregisterMessages(),this._messages=[new s.z0m(this.onUserSettingsEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{if(this._messages&&this._messages.length){for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]}})}onUserSettingsEvent(t){if(!t)return;const n=t.getParser();!n||(this._volumeSystem=n.volumeSystem/100,this._volumeFurni=n.volumeFurni/100,this._volumeTrax=n.volumeTrax/100,this._oldChat=n.oldChat,this._roomInvites=n.roomInvites,this._cameraFollow=n.cameraFollow,this._flags=n.flags,this._chatType=n.chatType,this.sendUpdateEvent())}sendSound(){s.wjX.instance.communication.connection.send(new s.jXt(Math.round(100*this._volumeSystem),Math.round(100*this._volumeFurni),Math.round(100*this._volumeTrax)))}sendUpdateEvent(){const t=new s.B$z;t.volumeSystem=this._volumeSystem,t.volumeFurni=this._volumeFurni,t.volumeTrax=this._volumeTrax,t.oldChat=this._oldChat,t.roomInvites=this._roomInvites,t.cameraFollow=this._cameraFollow,t.flags=this._flags,t.chatType=this._chatType,s.wjX.instance.events.dispatchEvent(t)}_sendOldChat(){s.wjX.instance.communication.connection.send(new s.gPf(this._oldChat))}_sendRoomInvites(){s.wjX.instance.communication.connection.send(new s.q3I(this._roomInvites))}_sendCameraFollow(){s.wjX.instance.communication.connection.send(new s.hFI(this._cameraFollow))}get volumeSystem(){return this._volumeSystem}set volumeSystem(t){t>1&&(t=1),t<0&&(t=0),this._volumeSystem=t,this.sendUpdateEvent()}get volumeFurni(){return this._volumeFurni}set volumeFurni(t){t>1&&(t=1),t<0&&(t=0),this._volumeFurni=t,this.sendUpdateEvent()}get volumeTrax(){return this._volumeTrax}set volumeTrax(t){t>1&&(t=1),t<0&&(t=0),this._volumeTrax=t,this.sendUpdateEvent()}get oldChat(){return this._oldChat}set oldChat(t){this._oldChat=t,this._sendOldChat()}get roomInvites(){return this._roomInvites}set roomInvites(t){this._roomInvites=t,this._sendRoomInvites()}get cameraFollow(){return this._cameraFollow}set cameraFollow(t){this._cameraFollow=t,this._sendCameraFollow(),this.sendUpdateEvent()}get flags(){return this._flags}set flags(t){this._flags=t,this.sendUpdateEvent()}get chatType(){return this._chatType}set chatType(t){this._chatType=t,this.sendUpdateEvent()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const _n=function(i){return{"text-muted":i}},Si=function(i,o){return{"fa-volume-mute":i,"fa-volume-down":o}};function Jm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"input",8),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().oldChat=r}),e.qZA(),e.TgZ(10,"label",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().roomInvites=r}),e.qZA(),e.TgZ(15,"label",11),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"input",12),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().cameraFollow=r}),e.qZA(),e.TgZ(20,"label",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.TgZ(23,"div",14),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",15),e.TgZ(27,"label",16),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"div",17),e.TgZ(31,"div",18),e._UZ(32,"i",19),e.qZA(),e.TgZ(33,"div",20),e.TgZ(34,"input",21),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().volumeSystem=r})("mouseup",function(){return e.CHM(t),e.oxw().saveSound()}),e.qZA(),e.qZA(),e.TgZ(35,"div",18),e._UZ(36,"i",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",15),e.TgZ(38,"label",23),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"div",17),e.TgZ(42,"div",18),e._UZ(43,"i",19),e.qZA(),e.TgZ(44,"div",20),e.TgZ(45,"input",24),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().volumeFurni=r})("mouseup",function(){return e.CHM(t),e.oxw().saveSound()}),e.qZA(),e.qZA(),e.TgZ(46,"div",18),e._UZ(47,"i",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div"),e.TgZ(49,"label",25),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",17),e.TgZ(53,"div",18),e._UZ(54,"i",19),e.qZA(),e.TgZ(55,"div",20),e.TgZ(56,"input",26),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().volumeTrax=r})("mouseup",function(){return e.CHM(t),e.oxw().saveSound()}),e.qZA(),e.qZA(),e.TgZ(57,"div",18),e._UZ(58,"i",22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,23,"widget.memenu.settings.title")),e.xp6(6),e.Q6J("ngModel",t.oldChat),e.xp6(2),e.hij(" ",e.lcZ(12,25,"memenu.settings.chat.prefer.old.chat")," "),e.xp6(3),e.Q6J("ngModel",t.roomInvites),e.xp6(2),e.hij(" ",e.lcZ(17,27,"memenu.settings.other.ignore.room.invites")," "),e.xp6(3),e.Q6J("ngModel",t.cameraFollow),e.xp6(2),e.hij(" ",e.lcZ(22,29,"memenu.settings.other.disable.room.camera.follow")," "),e.xp6(3),e.Oqu(e.lcZ(25,31,"widget.memenu.settings.volume")),e.xp6(4),e.Oqu(e.lcZ(29,33,"widget.memenu.settings.volume.ui")),e.xp6(3),e.Q6J("ngClass",e.VKq(39,_n,t.volumeSystem>=50)),e.xp6(1),e.Q6J("ngClass",e.WLB(41,Si,0===t.volumeSystem,t.volumeSystem>0)),e.xp6(2),e.Q6J("ngModel",t.volumeSystem),e.xp6(1),e.Q6J("ngClass",e.VKq(44,_n,t.volumeSystem<50)),e.xp6(4),e.Oqu(e.lcZ(40,35,"widget.memenu.settings.volume.furni")),e.xp6(3),e.Q6J("ngClass",e.VKq(46,_n,t.volumeFurni>=50)),e.xp6(1),e.Q6J("ngClass",e.WLB(48,Si,0===t.volumeFurni,t.volumeFurni>0)),e.xp6(2),e.Q6J("ngModel",t.volumeFurni),e.xp6(1),e.Q6J("ngClass",e.VKq(51,_n,t.volumeFurni<50)),e.xp6(4),e.Oqu(e.lcZ(51,37,"widget.memenu.settings.volume.trax")),e.xp6(3),e.Q6J("ngClass",e.VKq(53,_n,t.volumeTrax>=50)),e.xp6(1),e.Q6J("ngClass",e.WLB(55,Si,0===t.volumeTrax,t.volumeTrax>0)),e.xp6(2),e.Q6J("ngModel",t.volumeTrax),e.xp6(1),e.Q6J("ngClass",e.VKq(58,_n,t.volumeTrax<50))}}let jm=(()=>{class i{constructor(t,n){this._userSettingsService=t,this._settingsService=n,this.visible=!1}hide(){this._settingsService.hideUserSettings()}saveSound(){this._userSettingsService.sendSound()}get volumeSystem(){return 100*this._userSettingsService.volumeSystem}set volumeSystem(t){this._userSettingsService.volumeSystem=t/100}get volumeFurni(){return 100*this._userSettingsService.volumeFurni}set volumeFurni(t){this._userSettingsService.volumeFurni=t/100}get volumeTrax(){return 100*this._userSettingsService.volumeTrax}set volumeTrax(t){this._userSettingsService.volumeTrax=t/100}get oldChat(){return this._userSettingsService.oldChat}set oldChat(t){this._userSettingsService.oldChat=t}get roomInvites(){return this._userSettingsService.roomInvites}set roomInvites(t){this._userSettingsService.roomInvites=t}get cameraFollow(){return this._userSettingsService.cameraFollow}set cameraFollow(t){this._userSettingsService.cameraFollow=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Io),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-user-settings-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-user-settings-component card position-absolute",3,"bringToTop","draggable",4,"ngIf"],[1,"nitro-user-settings-component","card","position-absolute",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"form-check"],["type","checkbox","id","oldChat",1,"form-check-input",3,"ngModel","ngModelChange"],["for","oldChat",1,"form-check-label"],["type","checkbox","id","roomInvites",1,"form-check-input",3,"ngModel","ngModelChange"],["for","roomInvites",1,"form-check-label"],["type","checkbox","id","cameraFollow",1,"form-check-input",3,"ngModel","ngModelChange"],["for","cameraFollow",1,"form-check-label"],[1,"mt-3","mb-2"],[1,"mb-2"],["for","volumeSystem"],[1,"d-flex","flex-row"],[3,"ngClass"],[1,"fas",3,"ngClass"],[1,"w-100","ml-2","mr-2"],["type","range","min","0","max","100","step","1","id","volumeSystem",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],[1,"fas","fa-volume-up"],["for","volumeFurni"],["type","range","min","0","max","100","step","1","id","volumeFurni",1,"custom-range",3,"ngModel","ngModelChange","mouseup"],["for","volumeTrax"],["type","range","min","0","max","100","step","1","id","volumeTrax",1,"custom-range",3,"ngModel","ngModelChange","mouseup"]],template:function(t,n){1&t&&e.YNc(0,Jm,59,60,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,_.Wl,_.JJ,_.On,u.mk,_.eT,_.Fj],pipes:[m],encapsulation:2}),i})();class Gm extends s.d7D{constructor(o,t){super("\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nvarying vec2 vTextureCoord;\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 lineColor;\nuniform vec3 color;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorLine = lineColor * currentColor.a;\n    vec3 colorOverlay = color * currentColor.a;\n\n    if(currentColor.r == 0.0 && currentColor.g == 0.0 && currentColor.b == 0.0 && currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorLine.r, colorLine.g, colorLine.b, currentColor.a);\n    } else if(currentColor.a > 0.0) {\n        gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n    }\n}"),this.uniforms.lineColor=new Float32Array(3),this.uniforms.color=new Float32Array(3),this.lineColor=o,this.color=t}get lineColor(){return this._lineColor}set lineColor(o){const t=this.uniforms.lineColor;"number"==typeof o?(s.No6.hex2rgb(o,t),this._lineColor=o):(t[0]=o[0],t[1]=o[1],t[2]=o[2],this._lineColor=s.No6.rgb2hex(t))}get color(){return this._color}set color(o){const t=this.uniforms.color;"number"==typeof o?(s.No6.hex2rgb(o,t),this._color=o):(t[0]=o[0],t[1]=o[1],t[2]=o[2],this._color=s.No6.rgb2hex(t))}}class Hm{constructor(o){this._component=o;const t=new Gm([1,1,1],[.6,.6,.6]);this._selectionShader=t}show(o){this.applySelectionShader(this.getRoomObject(o))}hide(o){this.clearSelectionShader(this.getRoomObject(o))}clearSelectionShaderFromFurni(o){for(const t of o)this.clearSelectionShader(this.getRoomObject(t))}applySelectionShaderToFurni(o){for(const t of o)this.applySelectionShader(this.getRoomObject(t))}getRoomObject(o){return this._component?s.wjX.instance.roomEngine.getRoomObject(this._component.roomId,o,s.YGE.FLOOR):null}applySelectionShader(o){if(!o)return;const t=o.visualization;if(t)for(const n of t.sprites)1!==n.blendMode&&(n.filters=[this._selectionShader])}clearSelectionShader(o){if(!o)return;const t=o.visualization;if(t)for(const n of t.sprites)n.filters=[]}}let Yt=(()=>{class i{constructor(t,n){this._wiredService=t,this._formBuilder=n}get code(){return-1}get negativeCode(){return-1}get requiresFurni(){return P._Str_5431}get hasStateSnapshot(){return!1}readIntegerParamsFromForm(){return[]}readStringParamFromForm(){return""}onInitStart(){}onEditStart(t){}get hasSpecialInputs(){return!1}validate(){return null}static getLocaleName(t){const n=Math.floor(t/2);return t%2?(n+.5).toString():n.toString()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(pn),e.Y36(_.qu))},i.\u0275dir=e.lG2({type:i}),i})();class V extends Yt{constructor(){super(...arguments),this.delay=0}onEditStart(o){this.delay=o.delayInPulses}}class fe extends Yt{}let J=(()=>{class i{}return i.STATES_MATCH=0,i.FURNIS_HAVE_AVATARS=1,i.TRIGGERER_IS_ON_FURNI=2,i.TIME_ELAPSED_MORE=3,i.TIME_ELAPSED_LESS=4,i.USER_COUNT_IN=5,i.ACTOR_IS_IN_TEAM=6,i.HAS_STACKED_FURNIS=7,i.STUFF_TYPE_MATCHES=8,i.STUFFS_IN_FORMATION=9,i.ACTOR_IS_GROUP_MEMBER=10,i.ACTOR_IS_WEARING_BADGE=11,i.ACTOR_IS_WEARING_EFFECT=12,i.NOT_STATES_MATCH=13,i.FURNI_NOT_HAVE_HABBO=14,i.NOT_ACTOR_ON_FURNI=15,i.NOT_USER_COUNT_IN=16,i.NOT_ACTOR_IN_TEAM=17,i.NOT_HAS_STACKED_FURNIS=18,i.NOT_FURNI_IS_OF_TYPE=19,i.NOT_STUFFS_IN_FORMATION=20,i.NOT_ACTOR_IN_GROUP=21,i.NOT_ACTOR_WEARS_BADGE=22,i.NOT_ACTOR_WEARING_EFFECT=23,i.DATE_RANGE_ACTIVE=24,i.ACTOR_HAS_HANDITEM=25,i})();class Qe extends fe{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return Qe.CODE}onEditStart(o){this.handitemId=o.intData.length>0&&this.allowedHanditemIds.includes(o.intData[0].toString())?o.intData[0].toString():"0"}readIntegerParamsFromForm(){return[parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}Qe.CODE=J.ACTOR_HAS_HANDITEM,Qe.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Qe)))(t||Qe)}}(),Qe.\u0275cmp=e.Xpm({type:Qe,selectors:[["ng-component"]],features:[e.qOj],decls:30,vars:36,consts:[[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",1),e.NdJ("ngModelChange",function(r){return t.handitemId=r}),e.TgZ(6,"option",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"option",3),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"option",4),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",5),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",7),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"option",8),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"option",9),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,18,"wiredfurni.params.handitem")),e.xp6(2),e.Q6J("ngModel",t.handitemId),e.xp6(1),e.Q6J("selected","0"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(8,20,"wiredfurni.tooltip.handitem")),e.xp6(2),e.Q6J("selected","2"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(11,22,"handitem2")),e.xp6(2),e.Q6J("selected","5"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(14,24,"handitem5")),e.xp6(2),e.Q6J("selected","7"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(17,26,"handitem7")),e.xp6(2),e.Q6J("selected","8"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(20,28,"handitem8")),e.xp6(2),e.Q6J("selected","9"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(23,30,"handitem9")),e.xp6(2),e.Q6J("selected","10"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(26,32,"handitem10")),e.xp6(2),e.Q6J("selected","27"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(29,34,"handitem27")))},encapsulation:2});class Ee extends fe{get code(){return Ee.CODE}get negativeCode(){return Ee.NEGATIVE_CODE}}Ee.CODE=J.ACTOR_IS_GROUP_MEMBER,Ee.NEGATIVE_CODE=J.NOT_ACTOR_IN_GROUP,Ee.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ee)))(t||Ee)}}(),Ee.\u0275cmp=e.Xpm({type:Ee,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class Se extends fe{constructor(){super(...arguments),this.team="1"}get code(){return Se.CODE}get negativeCode(){return Se.NEGATIVE_CODE}onEditStart(o){this.team=o.intData[0].toString()}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}Se.CODE=J.ACTOR_IS_IN_TEAM,Se.NEGATIVE_CODE=J.NOT_ACTOR_IN_TEAM,Se.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Se)))(t||Se)}}(),Se.\u0275cmp=e.Xpm({type:Se,selectors:[["ng-component"]],features:[e.qOj],decls:23,vars:19,consts:[[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","radio","value","4",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",0),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(r){return t.team=r}),e.qZA(),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(r){return t.team=r}),e.qZA(),e.TgZ(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",0),e.TgZ(14,"input",4),e.NdJ("ngModelChange",function(r){return t.team=r}),e.qZA(),e.TgZ(15,"label",2),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.TgZ(18,"div",0),e.TgZ(19,"input",5),e.NdJ("ngModelChange",function(r){return t.team=r}),e.qZA(),e.TgZ(20,"label",2),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,9,"wiredfurni.params.team")," "),e.xp6(3),e.Q6J("ngModel",t.team),e.xp6(2),e.Oqu(e.lcZ(7,11,"wiredfurni.params.team.1")),e.xp6(3),e.Q6J("ngModel",t.team),e.xp6(2),e.Oqu(e.lcZ(12,13,"wiredfurni.params.team.2")),e.xp6(3),e.Q6J("ngModel",t.team),e.xp6(2),e.Oqu(e.lcZ(17,15,"wiredfurni.params.team.3")),e.xp6(3),e.Q6J("ngModel",t.team),e.xp6(2),e.Oqu(e.lcZ(22,17,"wiredfurni.params.team.4")))},encapsulation:2});class Ae extends fe{get code(){return Ae.CODE}get negativeCode(){return Ae.NEGATIVE_CODE}readIntegerParamsFromForm(){const o=parseInt(this.effectId);return isNaN(o)?[]:[o]}onEditStart(o){this.effectId=o.stringData.length>0?o.stringData:"0"}get hasSpecialInputs(){return!0}}Ae.CODE=J.ACTOR_IS_WEARING_EFFECT,Ae.NEGATIVE_CODE=J.NOT_ACTOR_WEARING_EFFECT,Ae.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ae)))(t||Ae)}}(),Ae.\u0275cmp=e.Xpm({type:Ae,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.effectId=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"wiredfurni.params.effectid")),e.xp6(2),e.Q6J("ngModel",t.effectId))},encapsulation:2});class we extends fe{get code(){return we.CODE}get negativeCode(){return we.NEGATIVE_CODE}get requiresFurni(){return P._Str_4873}}we.CODE=J.TRIGGERER_IS_ON_FURNI,we.NEGATIVE_CODE=J.NOT_ACTOR_ON_FURNI,we.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(we)))(t||we)}}(),we.\u0275cmp=e.Xpm({type:we,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class xe extends fe{get code(){return xe.CODE}get negativeCode(){return xe.NEGATIVE_CODE}readStringParamFromForm(){return this.botName}onEditStart(o){this.botName=o.stringData}get hasSpecialInputs(){return!0}}xe.CODE=J.ACTOR_IS_WEARING_BADGE,xe.NEGATIVE_CODE=J.NOT_ACTOR_WEARS_BADGE,xe.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(xe)))(t||xe)}}(),xe.\u0275cmp=e.Xpm({type:xe,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"wiredfurni.params.badgecode")),e.xp6(2),e.Q6J("ngModel",t.botName))},encapsulation:2});class Be extends fe{get code(){return Be.CODE}test(){return Be.CODE}readIntegerParamsFromForm(){const o=[],t=new Date(this.startDate).getTime();if(!isNaN(t)){o.push(t/1e3);const n=new Date(this.endDate).getTime();isNaN(n)||o.push(n/1e3)}return o}onEditStart(o){let t,n;t=o.intData.length>0?new Date(1e3*o.intData[0]):new Date(0),n=o.intData.length>1?new Date(1e3*o.intData[1]):new Date(0),this.startDate=this.dateToString(t),this.endDate=this.dateToString(n)}get hasSpecialInputs(){return!0}dateToString(o){return`${o.getFullYear()}/${("0"+(o.getMonth()+1)).slice(-2)}/${("0"+o.getDate()).slice(-2)} ${("0"+o.getHours()).slice(-2)}:${("0"+o.getMinutes()).slice(-2)}`}}Be.CODE=J.DATE_RANGE_ACTIVE,Be.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Be)))(t||Be)}}(),Be.\u0275cmp=e.Xpm({type:Be,selectors:[["ng-component"]],features:[e.qOj],decls:11,vars:8,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.startDate=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",0),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",1),e.NdJ("ngModelChange",function(r){return t.endDate=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"wiredfurni.params.startdate")),e.xp6(2),e.Q6J("ngModel",t.startDate),e.xp6(3),e.Oqu(e.lcZ(9,6,"wiredfurni.params.enddate")),e.xp6(2),e.Q6J("ngModel",t.endDate))},encapsulation:2});class Xe extends fe{constructor(){super(...arguments),this.requireAll="0"}get code(){return Xe.CODE}get requiresFurni(){return P._Str_4873}onEditStart(o){this.requireAll=o.intData.length>0&&1===o.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}Xe.CODE=J.NOT_HAS_STACKED_FURNIS,Xe.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Xe)))(t||Xe)}}(),Xe.\u0275cmp=e.Xpm({type:Xe,selectors:[["ng-component"]],features:[e.qOj],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",0),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(r){return t.requireAll=r}),e.qZA(),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(r){return t.requireAll=r}),e.qZA(),e.TgZ(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,5,"wiredfurni.params.not_requireall")," "),e.xp6(3),e.Q6J("ngModel",t.requireAll),e.xp6(2),e.Oqu(e.lcZ(7,7,"wiredfurni.params.not_requireall.0")),e.xp6(3),e.Q6J("ngModel",t.requireAll),e.xp6(2),e.Oqu(e.lcZ(12,9,"wiredfurni.params.not_requireall.1")))},encapsulation:2});class Ze extends fe{get code(){return Ze.CODE}get negativeCode(){return Ze.NEGATIVE_CODE}get requiresFurni(){return P._Str_4873}}Ze.CODE=J.FURNIS_HAVE_AVATARS,Ze.NEGATIVE_CODE=J.FURNI_NOT_HAVE_HABBO,Ze.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ze)))(t||Ze)}}(),Ze.\u0275cmp=e.Xpm({type:Ze,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class Ie extends fe{get code(){return Ie.CODE}get negativeCode(){return Ie.NEGATIVE_CODE}get requiresFurni(){return P._Str_4991}}Ie.CODE=J.STUFF_TYPE_MATCHES,Ie.NEGATIVE_CODE=J.NOT_FURNI_IS_OF_TYPE,Ie.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ie)))(t||Ie)}}(),Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class Ye extends fe{constructor(){super(...arguments),this.requireAll="0"}get code(){return Ye.CODE}get requiresFurni(){return P._Str_4873}onEditStart(o){this.requireAll=o.intData.length>0&&1===o.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.requireAll?1:0]}get hasSpecialInputs(){return!0}}Ye.CODE=J.HAS_STACKED_FURNIS,Ye.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ye)))(t||Ye)}}(),Ye.\u0275cmp=e.Xpm({type:Ye,selectors:[["ng-component"]],features:[e.qOj],decls:13,vars:11,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",0),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(r){return t.requireAll=r}),e.qZA(),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(r){return t.requireAll=r}),e.qZA(),e.TgZ(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,5,"wiredfurni.params.requireall")," "),e.xp6(3),e.Q6J("ngModel",t.requireAll),e.xp6(2),e.Oqu(e.lcZ(7,7,"wiredfurni.params.requireall.0")),e.xp6(3),e.Q6J("ngModel",t.requireAll),e.xp6(2),e.Oqu(e.lcZ(12,9,"wiredfurni.params.requireall.1")))},encapsulation:2});class ye extends fe{get code(){return ye.CODE}get negativeCode(){return ye.NEGATIVE_CODE}get requiresFurni(){return P._Str_4873}get hasStateSnapshot(){return!0}onEditStart(o){this.state=o.getBoolean(0),this.direction=o.getBoolean(1),this.position=o.getBoolean(2)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get hasSpecialInputs(){return!0}}ye.CODE=J.STATES_MATCH,ye.NEGATIVE_CODE=J.NOT_STATES_MATCH,ye.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ye)))(t||ye)}}(),ye.\u0275cmp=e.Xpm({type:ye,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:15,consts:[[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",0),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(r){return t.state=r}),e.qZA(),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"input",1),e.NdJ("ngModelChange",function(r){return t.direction=r}),e.qZA(),e.TgZ(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",0),e.TgZ(14,"input",1),e.NdJ("ngModelChange",function(r){return t.position=r}),e.qZA(),e.TgZ(15,"label",2),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,7,"wiredfurni.params.conditions")," "),e.xp6(3),e.Q6J("ngModel",t.state),e.xp6(2),e.Oqu(e.lcZ(7,9,"wiredfurni.params.condition.state")),e.xp6(3),e.Q6J("ngModel",t.direction),e.xp6(2),e.Oqu(e.lcZ(12,11,"wiredfurni.params.condition.direction")),e.xp6(3),e.Q6J("ngModel",t.position),e.xp6(2),e.Oqu(e.lcZ(17,13,"wiredfurni.params.condition.position")))},encapsulation:2});class Re extends fe{get code(){return Re.CODE}get negativeCode(){return Re.NEGATIVE_CODE}get requiresFurni(){return P._Str_4873}onInit(){}onEditStart(o){}get hasSpecialInputs(){return!0}}Re.CODE=J.STUFFS_IN_FORMATION,Re.NEGATIVE_CODE=J.NOT_STUFFS_IN_FORMATION,Re.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Re)))(t||Re)}}(),Re.\u0275cmp=e.Xpm({type:Re,selectors:[["ng-component"]],features:[e.qOj],decls:2,vars:0,template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1,"STUFFS_IN_FORMATION"),e.qZA())},encapsulation:2});class K extends fe{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return K.CODE}onEditStart(o){this.time=o.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<K.MINIMUM_VALUE&&(this.time=K.MINIMUM_VALUE)}increase(){this.time+=1,this.time>K.MAXIMUM_VALUE&&(this.time=K.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=s.wjX.instance.getLocalizationWithParameter("wiredfurni.params.allowbefore","seconds",Yt.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:K.MINIMUM_VALUE,ceil:K.MAXIMUM_VALUE,step:K.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}K.CODE=J.TIME_ELAPSED_LESS,K.MINIMUM_VALUE=1,K.MAXIMUM_VALUE=1200,K.STEPPER_VALUE=1,K.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(K)))(t||K)}}(),K.\u0275cmp=e.Xpm({type:K,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.time=r})("valueChange",function(){return t.onSliderChange()}),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(8,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(t.timeLocale),e.xp6(4),e.Q6J("options",t.sliderOptions)("value",t.time))},encapsulation:2});class me extends K{get code(){return me.CODE}decrease(){this.time-=1,this.time<me.MINIMUM_VALUE&&(this.time=me.MINIMUM_VALUE)}increase(){this.time+=1,this.time>me.MAXIMUM_VALUE&&(this.time=me.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=s.wjX.instance.getLocalizationWithParameter("wiredfurni.params.allowafter","seconds",Yt.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:me.MINIMUM_VALUE,ceil:me.MAXIMUM_VALUE,step:me.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}me.CODE=J.TIME_ELAPSED_MORE,me.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(me)))(t||me)}}(),me.\u0275cmp=e.Xpm({type:me,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.time=r})("valueChange",function(){return t.onSliderChange()}),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(8,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(t.timeLocale),e.xp6(4),e.Q6J("options",t.sliderOptions)("value",t.time))},encapsulation:2});class D extends fe{constructor(){super(...arguments),this.minUsers=0,this.maxUsers=0}get code(){return D.CODE}get negativeCode(){return D.NEGATIVE_CODE}onEditStart(o){this.minUsers=o.intData[0]||1,this.maxUsers=o.intData[1]||50}readIntegerParamsFromForm(){return[this.minUsers,this.maxUsers]}decreaseMin(){this.minUsers-=1,this.minUsers<D.MINIMUM_VALUE&&(this.minUsers=D.MINIMUM_VALUE)}decreaseMax(){this.maxUsers-=1,this.maxUsers<D.MINIMUM_VALUE&&(this.maxUsers=D.MINIMUM_VALUE)}increaseMin(){this.minUsers+=1,this.minUsers>D.MAXIMUM_VALUE&&(this.minUsers=D.MAXIMUM_VALUE)}increaseMax(){this.maxUsers+=1,this.maxUsers>D.MAXIMUM_VALUE&&(this.maxUsers=D.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:D.MINIMUM_VALUE,ceil:D.MAXIMUM_VALUE,step:D.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}D.CODE=J.USER_COUNT_IN,D.NEGATIVE_CODE=J.NOT_USER_COUNT_IN,D.MINIMUM_VALUE=1,D.MAXIMUM_VALUE=50,D.STEPPER_VALUE=1,D.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(D)))(t||D)}}(),D.\u0275cmp=e.Xpm({type:D,selectors:[["ng-component"]],features:[e.qOj],decls:19,vars:14,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","minUsers",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","maxUsers",3,"options","value","valueChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"button",2),e.NdJ("click",function(){return t.decreaseMin()}),e._UZ(6,"i",3),e.qZA(),e.TgZ(7,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.minUsers=r}),e.qZA(),e.TgZ(8,"button",2),e.NdJ("click",function(){return t.increaseMin()}),e._UZ(9,"i",5),e.qZA(),e.qZA(),e.TgZ(10,"p",0),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"button",2),e.NdJ("click",function(){return t.decreaseMax()}),e._UZ(15,"i",3),e.qZA(),e.TgZ(16,"ngx-slider",6),e.NdJ("valueChange",function(r){return t.maxUsers=r}),e.qZA(),e.TgZ(17,"button",2),e.NdJ("click",function(){return t.increaseMax()}),e._UZ(18,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.Dn7(3,6,"wiredfurni.params.usercountmin","value",t.minUsers)),e.xp6(5),e.Q6J("options",t.sliderOptions)("value",t.minUsers),e.xp6(4),e.Oqu(e.Dn7(12,10,"wiredfurni.params.usercountmax","value",t.maxUsers)),e.xp6(5),e.Q6J("options",t.sliderOptions)("value",t.maxUsers))},encapsulation:2});class Wm{_Str_9781(o){switch(o){case we.CODE:case we.NEGATIVE_CODE:return we;case Ze.CODE:case Ze.NEGATIVE_CODE:return Ze;case ye.CODE:case ye.NEGATIVE_CODE:return ye;case me.CODE:return me;case K.CODE:return K;case D.CODE:case D.NEGATIVE_CODE:return D;case Se.CODE:case Se.NEGATIVE_CODE:return Se;case Ye.CODE:return Ye;case Ie.CODE:case Ie.NEGATIVE_CODE:return Ie;case Re.CODE:case Re.NEGATIVE_CODE:return Re;case Ee.CODE:case Ee.NEGATIVE_CODE:return Ee;case xe.CODE:case xe.NEGATIVE_CODE:return xe;case Ae.CODE:case Ae.NEGATIVE_CODE:return Ae;case Xe.CODE:return Xe;case Be.CODE:return Be;case Qe.CODE:return Qe}return null}_Str_15652(o){return this._Str_9781(o)}_Str_14545(o){return o instanceof s.bpN}_Str_1196(){return"condition"}}class Ge extends Yt{}let Me=(()=>{class i{}return i.AVATAR_SAYS_SOMETHING=0,i.AVATAR_WALKS_ON_FURNI=1,i.AVATAR_WALKS_OFF_FURNI=2,i.TRIGGER_ONCE=3,i.TOGGLE_FURNI=4,i.TRIGGER_PERIODICALLY=6,i.AVATAR_ENTERS_ROOM=7,i.GAME_STARTS=8,i.GAME_ENDS=9,i.SCORE_ACHIEVED=10,i.COLLISION=11,i.TRIGGER_PERIODICALLY_LONG=12,i.BOT_REACHED_STUFF=13,i.BOT_REACHED_AVATAR=14,i})();function Qm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"input",6),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().keyword=r}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.keyword)}}class ze extends Ge{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return ze.CODE}onEditStart(o){this.keyword=o.stringData||"",this.avatar=this.keyword.length>0?"1":"0"}readStringParamFromForm(){return"1"===this.avatar&&this.keyword.length>0?this.keyword:""}get hasSpecialInputs(){return!0}}ze.CODE=Me.AVATAR_ENTERS_ROOM,ze.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ze)))(t||ze)}}(),ze.\u0275cmp=e.Xpm({type:ze,selectors:[["ng-component"]],features:[e.qOj],decls:14,vars:12,consts:[[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",0),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(r){return t.avatar=r}),e.qZA(),e.TgZ(5,"label",2),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",0),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(r){return t.avatar=r}),e.qZA(),e.TgZ(10,"label",2),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.YNc(13,Qm,2,1,"div",4),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,6,"wiredfurni.params.picktriggerer")," "),e.xp6(3),e.Q6J("ngModel",t.avatar),e.xp6(2),e.Oqu(e.lcZ(7,8,"wiredfurni.params.anyavatar")),e.xp6(3),e.Q6J("ngModel",t.avatar),e.xp6(2),e.Oqu(e.lcZ(12,10,"wiredfurni.params.certainavatar")),e.xp6(2),e.Q6J("ngIf","1"===t.avatar))},encapsulation:2});class Ke extends Ge{constructor(){super(...arguments),this.keyword="",this.avatar="0"}get code(){return Ke.CODE}onEditStart(o){this.keyword=o.stringData||"",this.avatar=o.intData.length>0&&1===o.intData[0]?"1":"0"}readIntegerParamsFromForm(){return["1"===this.avatar?1:0]}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}get username(){return s.wjX.instance.sessionDataManager.userName}}Ke.CODE=Me.AVATAR_SAYS_SOMETHING,Ke.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ke)))(t||Ke)}}(),Ke.\u0275cmp=e.Xpm({type:Ke,selectors:[["ng-component"]],features:[e.qOj],decls:17,vars:13,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.keyword=r}),e.qZA(),e.qZA(),e._uU(6),e.ALo(7,"translate"),e.TgZ(8,"div",2),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(r){return t.avatar=r}),e.qZA(),e.TgZ(10,"label",4),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"input",5),e.NdJ("ngModelChange",function(r){return t.avatar=r}),e.qZA(),e.TgZ(15,"label",4),e._uU(16),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,7,"wiredfurni.params.whatissaid")),e.xp6(2),e.Q6J("ngModel",t.keyword),e.xp6(1),e.hij(" ",e.lcZ(7,9,"wiredfurni.params.picktriggerer")," "),e.xp6(3),e.Q6J("ngModel",t.avatar),e.xp6(2),e.Oqu(e.lcZ(12,11,"wiredfurni.params.anyavatar")),e.xp6(3),e.Q6J("ngModel",t.avatar),e.xp6(2),e.Oqu(t.username))},encapsulation:2});class $e extends Ge{get code(){return $e.CODE}get requiresFurni(){return P._Str_4991}}$e.CODE=Me.AVATAR_WALKS_OFF_FURNI,$e.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z($e)))(t||$e)}}(),$e.\u0275cmp=e.Xpm({type:$e,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class et extends Ge{get code(){return et.CODE}get requiresFurni(){return P._Str_4991}}et.CODE=Me.AVATAR_WALKS_ON_FURNI,et.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(et)))(t||et)}}(),et.\u0275cmp=e.Xpm({type:et,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class tt extends Ge{constructor(){super(...arguments),this.keyword=""}get code(){return tt.CODE}get requiresFurni(){return P._Str_5431}onEditStart(o){this.keyword=o.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}tt.CODE=Me.BOT_REACHED_AVATAR,tt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(tt)))(t||tt)}}(),tt.\u0275cmp=e.Xpm({type:tt,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.keyword=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.keyword))},encapsulation:2});class nt extends Ge{constructor(){super(...arguments),this.keyword=""}get code(){return nt.CODE}get requiresFurni(){return P._Str_4991}onEditStart(o){this.keyword=o.stringData}readStringParamFromForm(){return this.keyword}get hasSpecialInputs(){return!0}}nt.CODE=Me.BOT_REACHED_STUFF,nt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(nt)))(t||nt)}}(),nt.\u0275cmp=e.Xpm({type:nt,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"div",0),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",1),e.NdJ("ngModelChange",function(r){return t.keyword=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.keyword))},encapsulation:2});class it extends Ge{get code(){return it.CODE}}it.CODE=Me.COLLISION,it.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(it)))(t||it)}}(),it.\u0275cmp=e.Xpm({type:it,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class ot extends Ge{get code(){return ot.CODE}}ot.CODE=Me.GAME_ENDS,ot.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ot)))(t||ot)}}(),ot.\u0275cmp=e.Xpm({type:ot,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class rt extends Ge{get code(){return rt.CODE}}rt.CODE=Me.GAME_STARTS,rt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(rt)))(t||rt)}}(),rt.\u0275cmp=e.Xpm({type:rt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class ee extends Ge{constructor(){super(...arguments),this.score=0}get code(){return ee.CODE}onEditStart(o){this.score=o.intData[0]||0}readIntegerParamsFromForm(){return[this.score]}decrease(){this.score-=1,this.score<ee.MINIMUM_VALUE&&(this.score=ee.MINIMUM_VALUE)}increase(){this.score+=1,this.score>ee.MAXIMUM_VALUE&&(this.score=ee.MAXIMUM_VALUE)}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:ee.MINIMUM_VALUE,ceil:ee.MAXIMUM_VALUE,step:ee.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}ee.MINIMUM_VALUE=1,ee.MAXIMUM_VALUE=1e3,ee.STEPPER_VALUE=1,ee.CODE=Me.SCORE_ACHIEVED,ee.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ee)))(t||ee)}}(),ee.\u0275cmp=e.Xpm({type:ee,selectors:[["ng-component"]],features:[e.qOj],decls:10,vars:7,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(6,"i",3),e.qZA(),e.TgZ(7,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.score=r}),e.qZA(),e.TgZ(8,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(9,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(e.Dn7(3,3,"wiredfurni.params.setscore","points",t.score)),e.xp6(5),e.Q6J("options",t.sliderOptions)("value",t.score))},encapsulation:2});class st extends Ge{get code(){return st.CODE}get requiresFurni(){return P._Str_4991}}st.CODE=Me.TOGGLE_FURNI,st.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(st)))(t||st)}}(),st.\u0275cmp=e.Xpm({type:st,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:0,template:function(o,t){1&o&&e._UZ(0,"nitro-wired-base-component")},encapsulation:2});class $ extends Ge{constructor(){super(...arguments),this.time=0,this.timeLocale=""}get code(){return $.CODE}onEditStart(o){this.time=o.intData[0]||1,this.updateLocaleParameter()}readIntegerParamsFromForm(){return[this.time]}onSliderChange(){this.updateLocaleParameter()}decrease(){this.time-=1,this.time<$.MINIMUM_VALUE&&(this.time=$.MINIMUM_VALUE)}increase(){this.time+=1,this.time>$.MAXIMUM_VALUE&&(this.time=$.MAXIMUM_VALUE)}updateLocaleParameter(){this.timeLocale=s.wjX.instance.getLocalizationWithParameter("wiredfurni.params.settime","seconds",Yt.getLocaleName(this.time))}get hasSpecialInputs(){return!0}get sliderOptions(){return{floor:$.MINIMUM_VALUE,ceil:$.MAXIMUM_VALUE,step:$.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}$.MINIMUM_VALUE=1,$.MAXIMUM_VALUE=1200,$.STEPPER_VALUE=1,$.CODE=Me.TRIGGER_ONCE,$.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z($)))(t||$)}}(),$.\u0275cmp=e.Xpm({type:$,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.time=r})("valueChange",function(){return t.onSliderChange()}),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(8,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(t.timeLocale),e.xp6(4),e.Q6J("options",t.sliderOptions)("value",t.time))},encapsulation:2});class pe extends ${get code(){return pe.CODE}increase(){this.time+=1,this.time>pe.MAXIMUM_VALUE&&(this.time=pe.MAXIMUM_VALUE)}get sliderOptions(){return{floor:pe.MINIMUM_VALUE,ceil:pe.MAXIMUM_VALUE,step:pe.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}pe.MAXIMUM_VALUE=120,pe.CODE=Me.TRIGGER_PERIODICALLY,pe.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(pe)))(t||pe)}}(),pe.\u0275cmp=e.Xpm({type:pe,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.time=r})("valueChange",function(){return t.onSliderChange()}),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(8,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(t.timeLocale),e.xp6(4),e.Q6J("options",t.sliderOptions)("value",t.time))},encapsulation:2});class at extends pe{get code(){return at.CODE}updateLocaleParameter(){this.timeLocale=s.wjX.instance.getLocalizationWithParameter("wiredfurni.params.setlongtime","time",s.Uwc.format(5*this.time))}}at.CODE=Me.TRIGGER_PERIODICALLY_LONG,at.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(at)))(t||at)}}(),at.\u0275cmp=e.Xpm({type:at,selectors:[["ng-component"]],features:[e.qOj],decls:9,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","time",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-base-component"),e.TgZ(1,"p",0),e._uU(2),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"button",2),e.NdJ("click",function(){return t.decrease()}),e._UZ(5,"i",3),e.qZA(),e.TgZ(6,"ngx-slider",4),e.NdJ("valueChange",function(r){return t.time=r})("valueChange",function(){return t.onSliderChange()}),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return t.increase()}),e._UZ(8,"i",5),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Oqu(t.timeLocale),e.xp6(4),e.Q6J("options",t.sliderOptions)("value",t.time))},encapsulation:2});class Xm{_Str_9781(o){switch(o){case Ke.CODE:return Ke;case et.CODE:return et;case $e.CODE:return $e;case $.CODE:return $;case st.CODE:return st;case pe.CODE:return pe;case ze.CODE:return ze;case rt.CODE:return rt;case ot.CODE:return ot;case ee.CODE:return ee;case it.CODE:return it;case at.CODE:return at;case nt.CODE:return nt;case tt.CODE:return tt}return null}_Str_15652(o){return this._Str_9781(o)}_Str_14545(o){return o instanceof s.eHY}_Str_1196(){return"trigger"}}let B=(()=>{class i{}return i.TOGGLE_FURNI_STATE=0,i.RESET=1,i.SET_FURNI_STATE=3,i.MOVE_FURNI=4,i.GIVE_SCORE=6,i.CHAT=7,i.TELEPORT=8,i.JOIN_TEAM=9,i.LEAVE_TEAM=10,i.CHASE=11,i.FLEE=12,i.MOVE_TO_DIRECTION=13,i.GIVE_SCORE_TO_PREDEFINED_TEAM=14,i.TOGGLE_TO_RANDOM_STATE=15,i.MOVE_FURNI_TO=16,i.GIVE_REWARD=17,i.CALL_ANOTHER_STACK=18,i.KICK_FROM_ROOM=19,i.MUTE_USER=20,i.BOT_TELEPORT=21,i.BOT_MOVE=22,i.BOT_TALK=23,i.BOT_GIVE_HAND_ITEM=24,i.BOT_FOLLOW_AVATAR=25,i.BOT_CHANGE_FIGURE=26,i.BOT_TALK_DIRECT_TO_AVTR=27,i})();class Oe extends V{constructor(){super(...arguments),this.defaultFigure="hd-180-1.ch-210-66.lg-270-82.sh-290-81"}get code(){return Oe.CODE}onEditStart(o){const t=o.stringData.split(Oe.DELIMETER);t.length>0&&(this.botName=t[0]),t.length>1&&(this.figure=t[1].length>0?t[1]:this.defaultFigure),super.onEditStart(o)}readStringParamFromForm(){return this.botName+Oe.DELIMETER+this.figure}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_5431}copyLook(){this.figure=s.wjX.instance.sessionDataManager.figure}}Oe.CODE=B.BOT_CHANGE_FIGURE,Oe.DELIMETER="\t",Oe.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Oe)))(t||Oe)}}(),Oe.\u0275cmp=e.Xpm({type:Oe,selectors:[["ng-component"]],features:[e.qOj],decls:13,vars:10,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"row","mb-1"],[1,"col-md-6"],["nitro-avatar-image","",3,"figure","direction"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e._UZ(8,"div",5),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"button",6),e.NdJ("click",function(){return t.copyLook()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,6,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName),e.xp6(3),e.Q6J("figure",t.figure)("direction",2),e.xp6(3),e.Oqu(e.lcZ(12,8,"wiredfurni.params.capture.figure")))},encapsulation:2});class ct extends V{constructor(){super(...arguments),this.followMode="0"}get code(){return ct.CODE}onEditStart(o){this.botName=o.stringData,this.followMode=o.intData.length>0?o.intData[0].toString():"0",super.onEditStart(o)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.followMode)]}get hasSpecialInputs(){return!0}}ct.CODE=B.BOT_FOLLOW_AVATAR,ct.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ct)))(t||ct)}}(),ct.\u0275cmp=e.Xpm({type:ct,selectors:[["ng-component"]],features:[e.qOj],decls:16,vars:13,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"input",4),e.NdJ("ngModelChange",function(r){return t.followMode=r}),e.qZA(),e.TgZ(8,"label",5),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",3),e.TgZ(12,"input",6),e.NdJ("ngModelChange",function(r){return t.followMode=r}),e.qZA(),e.TgZ(13,"label",5),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,7,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName),e.xp6(2),e.Q6J("ngModel",t.followMode),e.xp6(2),e.Oqu(e.lcZ(10,9,"wiredfurni.params.start.following")),e.xp6(3),e.Q6J("ngModel",t.followMode),e.xp6(2),e.Oqu(e.lcZ(15,11,"wiredfurni.params.stop.following")))},encapsulation:2});class lt extends V{constructor(){super(...arguments),this.allowedHanditemIds=["2","5","7","8","9","10","27"],this.handitemId="0"}get code(){return lt.CODE}onEditStart(o){this.botName=o.stringData,this.handitemId=o.intData.length>0&&this.allowedHanditemIds.includes(o.intData[0].toString())?o.intData[0].toString():"0",super.onEditStart(o)}readStringParamFromForm(){return this.botName}readIntegerParamsFromForm(){return[Number.parseInt(this.handitemId)]}get hasSpecialInputs(){return!0}}lt.CODE=B.BOT_GIVE_HAND_ITEM,lt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(lt)))(t||lt)}}(),lt.\u0275cmp=e.Xpm({type:lt,selectors:[["ng-component"]],features:[e.qOj],decls:35,vars:41,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0",3,"selected"],["value","2",3,"selected"],["value","5",3,"selected"],["value","7",3,"selected"],["value","8",3,"selected"],["value","9",3,"selected"],["value","10",3,"selected"],["value","27",3,"selected"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"select",3),e.NdJ("ngModelChange",function(r){return t.handitemId=r}),e.TgZ(11,"option",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"option",5),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"option",6),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"option",7),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"option",8),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"option",9),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"option",10),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"option",11),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,21,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName),e.xp6(3),e.Oqu(e.lcZ(9,23,"wiredfurni.params.handitem")),e.xp6(2),e.Q6J("ngModel",t.handitemId),e.xp6(1),e.Q6J("selected","0"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(13,25,"wiredfurni.tooltip.handitem")),e.xp6(2),e.Q6J("selected","2"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(16,27,"handitem2")),e.xp6(2),e.Q6J("selected","5"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(19,29,"handitem5")),e.xp6(2),e.Q6J("selected","7"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(22,31,"handitem7")),e.xp6(2),e.Q6J("selected","8"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(25,33,"handitem8")),e.xp6(2),e.Q6J("selected","9"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(28,35,"handitem9")),e.xp6(2),e.Q6J("selected","10"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(31,37,"handitem10")),e.xp6(2),e.Q6J("selected","27"==t.handitemId),e.xp6(1),e.Oqu(e.lcZ(34,39,"handitem27")))},encapsulation:2});class ut extends V{get code(){return ut.CODE}onEditStart(o){this.botName=o.stringData,super.onEditStart(o)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_4873}}ut.CODE=B.BOT_MOVE,ut.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ut)))(t||ut)}}(),ut.\u0275cmp=e.Xpm({type:ut,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,3,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName))},encapsulation:2});class Ue extends V{get code(){return Ue.CODE}onEditStart(o){const t=o.stringData.split(Ue.DELIMETER);this.botName=t.length>=1?t[0]:"",this.message=2==t.length?t[1]:"",this.mode=o.intData.length>0?o.intData[0].toString():"0",super.onEditStart(o)}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_5431}readStringParamFromForm(){return this.botName+Ue.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}Ue.CODE=B.BOT_TALK_DIRECT_TO_AVTR,Ue.DELIMETER="\t",Ue.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ue)))(t||Ue)}}(),Ue.\u0275cmp=e.Xpm({type:Ue,selectors:[["ng-component"]],features:[e.qOj],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",3),e.NdJ("ngModelChange",function(r){return t.message=r}),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(r){return t.mode=r}),e.qZA(),e.TgZ(13,"label",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",4),e.TgZ(17,"input",7),e.NdJ("ngModelChange",function(r){return t.mode=r}),e.qZA(),e.TgZ(18,"label",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,9,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName),e.xp6(3),e.Oqu(e.lcZ(9,11,"wiredfurni.params.message")),e.xp6(2),e.Q6J("ngModel",t.message),e.xp6(2),e.Q6J("ngModel",t.mode),e.xp6(2),e.Oqu(e.lcZ(15,13,"wiredfurni.params.whisper")),e.xp6(3),e.Q6J("ngModel",t.mode),e.xp6(2),e.Oqu(e.lcZ(20,15,"wiredfurni.params.talk")))},encapsulation:2});class Ne extends V{get code(){return Ne.CODE}onEditStart(o){const t=o.stringData.split(Ne.DELIMETER);this.botName=t.length>=1?t[0]:"",this.message=2==t.length?t[1]:"",this.mode=o.intData.length>0?o.intData[0].toString():"0",super.onEditStart(o)}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_5431}readStringParamFromForm(){return this.botName+Ne.DELIMETER+this.message}readIntegerParamsFromForm(){return[Number.parseInt(this.mode)]}}Ne.CODE=B.BOT_TALK,Ne.DELIMETER="\t",Ne.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ne)))(t||Ne)}}(),Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["ng-component"]],features:[e.qOj],decls:21,vars:17,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","maxlength","64",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[1,"form-check"],["type","radio","name","radio","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","radio","value","1",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",3),e.NdJ("ngModelChange",function(r){return t.message=r}),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(r){return t.mode=r}),e.qZA(),e.TgZ(13,"label",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",4),e.TgZ(17,"input",7),e.NdJ("ngModelChange",function(r){return t.mode=r}),e.qZA(),e.TgZ(18,"label",6),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,9,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName),e.xp6(3),e.Oqu(e.lcZ(9,11,"wiredfurni.params.message")),e.xp6(2),e.Q6J("ngModel",t.message),e.xp6(2),e.Q6J("ngModel",t.mode),e.xp6(2),e.Oqu(e.lcZ(15,13,"wiredfurni.params.talk")),e.xp6(3),e.Q6J("ngModel",t.mode),e.xp6(2),e.Oqu(e.lcZ(20,15,"wiredfurni.params.shout")))},encapsulation:2});class _t extends V{get code(){return _t.CODE}onEditStart(o){this.botName=o.stringData,super.onEditStart(o)}readStringParamFromForm(){return this.botName}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_4873}}_t.CODE=B.BOT_TELEPORT,_t.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(_t)))(t||_t)}}(),_t.\u0275cmp=e.Xpm({type:_t,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text","maxlength","32",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.botName=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,3,"wiredfurni.params.bot.name")),e.xp6(2),e.Q6J("ngModel",t.botName))},encapsulation:2});class gt extends V{get code(){return gt.CODE}get requiresFurni(){return P._Str_5430}}gt.CODE=B.CALL_ANOTHER_STACK,gt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(gt)))(t||gt)}}(),gt.\u0275cmp=e.Xpm({type:gt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class dt extends V{get code(){return dt.CODE}get requiresFurni(){return P._Str_5430}}dt.CODE=B.CHASE,dt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(dt)))(t||dt)}}(),dt.\u0275cmp=e.Xpm({type:dt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class mt extends V{get code(){return mt.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(o){this.message=o.stringData,super.onEditStart(o)}validate(){return this.message.length>100?s.wjX.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}mt.CODE=B.CHAT,mt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(mt)))(t||mt)}}(),mt.\u0275cmp=e.Xpm({type:mt,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.message=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,3,"wiredfurni.params.message")),e.xp6(2),e.Q6J("ngModel",t.message))},encapsulation:2});class pt extends V{get code(){return pt.CODE}get requiresFurni(){return P._Str_5430}}function Ym(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.TgZ(1,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().decreaseLimit()}),e._UZ(2,"i",18),e.qZA(),e.TgZ(3,"ngx-slider",19),e.NdJ("valueChange",function(r){return e.CHM(t),e.oxw().rewardsLimit=r}),e.qZA(),e.TgZ(4,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().increaseLimit()}),e._UZ(5,"i",20),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("options",t.limitSliderOptions)("value",t.rewardsLimit)}}function zm(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"label"),e._uU(2,"Interval value"),e.qZA(),e.TgZ(3,"input",22),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().limitationInterval=r}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.limitationInterval)}}function Km(i,o){1&i&&(e.TgZ(0,"td"),e.TgZ(1,"small"),e._uU(2,"Probability"),e.qZA(),e.qZA())}function $m(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"td"),e.TgZ(1,"input",22),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw().index;return e.oxw().rewardRows[a].probability=r}),e.qZA(),e.qZA()}if(2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.rewardRows[t].probability)}}function ep(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e.TgZ(2,"input",23),e.NdJ("ngModelChange",function(r){const c=e.CHM(t).index;return e.oxw().rewardRows[c].badge=r}),e.qZA(),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"input",22),e.NdJ("ngModelChange",function(r){const c=e.CHM(t).index;return e.oxw().rewardRows[c].itemCode=r}),e.qZA(),e.qZA(),e.YNc(5,$m,2,1,"td",12),e.qZA()}if(2&i){const t=o.index,n=e.oxw();e.xp6(2),e.Q6J("ngModel",n.rewardRows[t].badge),e.xp6(2),e.Q6J("ngModel",n.rewardRows[t].itemCode),e.xp6(1),e.Q6J("ngIf",0==n.uniqueRewards)}}pt.CODE=B.FLEE,pt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(pt)))(t||pt)}}(),pt.\u0275cmp=e.Xpm({type:pt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class te extends V{constructor(){super(...arguments),this.SETTING_ONCE="0",this.SETTING_N_MINS="3",this.SETTING_N_HOURS="2",this.SETTING_N_DAYS="1",this.limitationInterval="1",this.uniqueRewards=!1,this.rewardRows=[]}get code(){return te.CODE}onEditStart(o){if(this.rewardTime=(o.intData.length>0?o.intData[0]:0).toString(),this.uniqueRewards=o.intData.length>1&&1==o.intData[1],this.rewardsLimit=o.intData.length>2?o.intData[2]:0,this.limitationInterval=o.intData.length>3?o.intData[3].toString():"",this.limitEnabled=this.limitationInterval.length>0,o.stringData.length>0&&o.stringData.includes(";")&&o.stringData.split(";").forEach(n=>{if(n.length>0&&n.includes(",")){const r=n.split(",");3==r.length&&this.rewardRows.push({badge:"0"==r[0],itemCode:r[1],probability:r[2]})}}),this.rewardRows.length<4)for(let t=this.rewardRows.length;t<4;t++)this.rewardRows.push({badge:!1,itemCode:"",probability:""});super.onEditStart(o)}readIntegerParamsFromForm(){return[Number.parseInt(this.rewardTime),this.uniqueRewards?1:0,this.rewardsLimit,Number.parseInt(this.limitationInterval)]}readStringParamFromForm(){let o="";for(let t=0;t<this.rewardRows.length;t++){const n=this.rewardRows[t];if(""==n.itemCode)continue;const r=n.probability.toString();o=o+(""==o?"":";")+[n.badge?0:1,n.itemCode,r.length>0?r:0].join(",")}return o}decreaseLimit(){this.rewardsLimit-=1,this.rewardsLimit<te.LIMIT_MINIMUM_VALUE&&(this.rewardsLimit=te.LIMIT_MINIMUM_VALUE)}increaseLimit(){this.rewardsLimit+=1,this.rewardsLimit>te.LIMIT_MAXIMUM_VALUE&&(this.rewardsLimit=te.LIMIT_MAXIMUM_VALUE)}increaseRewardsCount(){this.rewardRows.push({badge:!1,itemCode:"",probability:""})}get limitSliderOptions(){return{floor:te.LIMIT_MINIMUM_VALUE,ceil:te.LIMIT_MAXIMUM_VALUE,step:te.LIMIT_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get hasIntervalValue(){return this.rewardTime==this.SETTING_N_DAYS||this.rewardTime==this.SETTING_N_HOURS||this.rewardTime==this.SETTING_N_MINS}validate(){let o=0;if(this.limitationInterval.trim().length>0&&isNaN(Number.parseInt(this.limitationInterval)))return"The interval value has to be a number.";for(let a=0;a<this.rewardRows.length;a++){const c=this.rewardRows[a];if(0!=c.itemCode.trim().length||0!=c.probability.trim().length){if(c.itemCode.includes(","))return"Product/badge codes must not contain ',' characters.";if(c.itemCode.includes(";"))return"Product/badge codes must not contain ';' characters.";if(c.itemCode.length>100)return"Product/badge codes cannot contain more than 100 characters.";if(""==c.itemCode)return"Remember to define product/badge codes for all rewards (fill all fields or leave all fields empty).";if(!this.uniqueRewards){if(""==c.probability)return"Remember to define probabilities for all rewards (fill all fields or leave all fields empty).";const l=Number.parseInt(c.probability);if(isNaN(l))return"Make sure all probabilities are numbers.";if(l<1||l>100)return"Make sure all probabilities are numbers between 1 and 100.";o+=l}}}return o>100?`The sum of probabilities cannot exceed 100. You now have ${o}.`:null}}te.LIMIT_MINIMUM_VALUE=1,te.LIMIT_MAXIMUM_VALUE=1e3,te.LIMIT_STEPPER_VALUE=1,te.CODE=B.GIVE_REWARD,te.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(te)))(t||te)}}(),te.\u0275cmp=e.Xpm({type:te,selectors:[["ng-component"]],features:[e.qOj],decls:40,vars:23,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["class","d-flex align-items-center justify-content-center my-2 custom-slider mb-2",4,"ngIf"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value","selected"],["class","form-group mb-2",4,"ngIf"],[1,"w-100","text-center","mb-2"],[1,"form-row","mb-2"],[2,"min-height","200px","max-height","200px"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","mb-2",3,"click"],[1,"fas","fa-plus"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider","mb-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","limit",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(r){return t.limitEnabled=r}),e.qZA(),e.TgZ(3,"label",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.YNc(6,Ym,6,2,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"label"),e._uU(9,"How often can a user be rewarded"),e.qZA(),e.TgZ(10,"select",6),e.NdJ("ngModelChange",function(r){return t.rewardTime=r}),e.TgZ(11,"option",7),e._uU(12,"Once"),e.qZA(),e.TgZ(13,"option",7),e._uU(14,"1/n minutes"),e.qZA(),e.TgZ(15,"option",7),e._uU(16,"1/n hours"),e.qZA(),e.TgZ(17,"option",7),e._uU(18,"1/n days"),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,zm,4,1,"div",8),e.TgZ(20,"div",1),e.TgZ(21,"input",2),e.NdJ("ngModelChange",function(r){return t.uniqueRewards=r}),e.qZA(),e.TgZ(22,"label",3),e._uU(23,"Unique Rewards"),e.qZA(),e.qZA(),e.TgZ(24,"p",9),e._uU(25,"If checked each reward will be given once to each user. This will disable the probabilities option."),e.qZA(),e.TgZ(26,"div",10),e.TgZ(27,"perfect-scrollbar",11),e.TgZ(28,"table"),e.TgZ(29,"tr"),e.TgZ(30,"td"),e.TgZ(31,"small"),e._uU(32,"Badge"),e.qZA(),e.qZA(),e.TgZ(33,"td"),e.TgZ(34,"small"),e._uU(35,"Item code"),e.qZA(),e.qZA(),e.YNc(36,Km,3,0,"td",12),e.qZA(),e.YNc(37,ep,6,3,"tr",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"button",14),e.NdJ("click",function(){return t.increaseRewardsCount()}),e._UZ(39,"i",15),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(2),e.Q6J("ngModel",t.limitEnabled),e.xp6(2),e.Oqu(e.Dn7(5,19,"wiredfurni.params.prizelimit","amount",t.rewardsLimit>0?t.rewardsLimit:"")),e.xp6(2),e.Q6J("ngIf",t.limitEnabled),e.xp6(4),e.ekj("mb-2",!t.hasIntervalValue),e.Q6J("ngModel",t.rewardTime),e.xp6(1),e.Q6J("value",t.SETTING_ONCE)("selected",t.rewardTime==t.SETTING_ONCE),e.xp6(2),e.Q6J("value",t.SETTING_N_MINS)("selected",t.rewardTime==t.SETTING_N_MINS),e.xp6(2),e.Q6J("value",t.SETTING_N_HOURS)("selected",t.rewardTime==t.SETTING_N_HOURS),e.xp6(2),e.Q6J("value",t.SETTING_N_DAYS)("selected",t.rewardTime==t.SETTING_N_DAYS),e.xp6(2),e.Q6J("ngIf",t.hasIntervalValue),e.xp6(2),e.Q6J("ngModel",t.uniqueRewards),e.xp6(15),e.Q6J("ngIf",0==t.uniqueRewards),e.xp6(1),e.Q6J("ngForOf",t.rewardRows))},encapsulation:2});class q extends V{constructor(){super(...arguments),this.points=1,this.times=1}get code(){return q.CODE}onEditStart(o){this.points=o.intData.length>0?o.intData[0]:1,this.times=o.intData.length>1?o.intData[1]:1,super.onEditStart(o)}readIntegerParamsFromForm(){return[this.points,this.times]}get hasSpecialInputs(){return!0}decreasePoints(){this.points-=1,this.points<q.MINIMUM_VALUE&&(this.points=q.MINIMUM_VALUE)}increasePoints(){this.points+=1,this.points>q.POINTS_MAXIMUM_VALUE&&(this.points=q.POINTS_MAXIMUM_VALUE)}decreaseTimes(){this.times-=1,this.times<q.MINIMUM_VALUE&&(this.times=q.MINIMUM_VALUE)}increaseTimes(){this.times+=1,this.times>q.TIMES_MAXIMUM_VALUE&&(this.times=q.TIMES_MAXIMUM_VALUE)}get pointsSliderOptions(){return{floor:q.MINIMUM_VALUE,ceil:q.POINTS_MAXIMUM_VALUE,step:q.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}get timesSliderOptions(){return{floor:q.MINIMUM_VALUE,ceil:q.TIMES_MAXIMUM_VALUE,step:q.STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}q.MINIMUM_VALUE=1,q.STEPPER_VALUE=1,q.POINTS_MAXIMUM_VALUE=100,q.TIMES_MAXIMUM_VALUE=10,q.CODE=B.GIVE_SCORE,q.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(q)))(t||q)}}(),q.\u0275cmp=e.Xpm({type:q,selectors:[["ng-component"]],features:[e.qOj],decls:19,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.decreasePoints()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"ngx-slider",5),e.NdJ("valueChange",function(r){return t.points=r}),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return t.increasePoints()}),e._UZ(9,"i",6),e.qZA(),e.qZA(),e.TgZ(10,"p",1),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"button",3),e.NdJ("click",function(){return t.decreaseTimes()}),e._UZ(15,"i",4),e.qZA(),e.TgZ(16,"ngx-slider",7),e.NdJ("valueChange",function(r){return t.times=r}),e.qZA(),e.TgZ(17,"button",3),e.NdJ("click",function(){return t.increaseTimes()}),e._UZ(18,"i",6),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(2),e.Oqu(e.Dn7(3,7,"wiredfurni.params.setpoints","points",t.points)),e.xp6(5),e.Q6J("options",t.pointsSliderOptions)("value",t.points),e.xp6(4),e.Oqu(e.Dn7(12,11,"wiredfurni.params.settimesingame","times",t.times)),e.xp6(5),e.Q6J("options",t.timesSliderOptions)("value",t.times))},encapsulation:2});class ht extends q{get code(){return ht.CODE}onEditStart(o){this.team=(o.intData.length>2?o.intData[2]:1).toString(),super.onEditStart(o)}readIntegerParamsFromForm(){return[this.points,this.times,parseInt(this.team)]}}ht.CODE=B.GIVE_SCORE_TO_PREDEFINED_TEAM,ht.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ht)))(t||ht)}}(),ht.\u0275cmp=e.Xpm({type:ht,selectors:[["ng-component"]],features:[e.qOj],decls:36,vars:35,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","points",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],["name","times",3,"options","value","valueChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.decreasePoints()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"ngx-slider",5),e.NdJ("valueChange",function(r){return t.points=r}),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return t.increasePoints()}),e._UZ(9,"i",6),e.qZA(),e.qZA(),e.TgZ(10,"p",1),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"button",3),e.NdJ("click",function(){return t.decreaseTimes()}),e._UZ(15,"i",4),e.qZA(),e.TgZ(16,"ngx-slider",7),e.NdJ("valueChange",function(r){return t.times=r}),e.qZA(),e.TgZ(17,"button",3),e.NdJ("click",function(){return t.increaseTimes()}),e._UZ(18,"i",6),e.qZA(),e.qZA(),e.TgZ(19,"div",8),e.TgZ(20,"label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"select",9),e.NdJ("ngModelChange",function(r){return t.team=r}),e.TgZ(24,"option",10),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"option",11),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"option",12),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"option",13),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(2),e.Oqu(e.Dn7(3,17,"wiredfurni.params.setpoints","points",t.points)),e.xp6(5),e.Q6J("options",t.pointsSliderOptions)("value",t.points),e.xp6(4),e.Oqu(e.Dn7(12,21,"wiredfurni.params.settimesingame","times",t.times)),e.xp6(5),e.Q6J("options",t.timesSliderOptions)("value",t.times),e.xp6(5),e.Oqu(e.lcZ(22,25,"wiredfurni.params.team")),e.xp6(2),e.Q6J("ngModel",t.team),e.xp6(1),e.Q6J("selected","1"==t.team),e.xp6(1),e.Oqu(e.lcZ(26,27,"wiredfurni.params.team.1")),e.xp6(2),e.Q6J("selected","2"==t.team),e.xp6(1),e.Oqu(e.lcZ(29,29,"wiredfurni.params.team.2")),e.xp6(2),e.Q6J("selected","3"==t.team),e.xp6(1),e.Oqu(e.lcZ(32,31,"wiredfurni.params.team.3")),e.xp6(2),e.Q6J("selected","4"==t.team),e.xp6(1),e.Oqu(e.lcZ(35,33,"wiredfurni.params.team.4")))},encapsulation:2});class ft extends V{get code(){return ft.CODE}onEditStart(o){this.team=(o.intData.length>0?o.intData[0]:1).toString(),super.onEditStart(o)}readIntegerParamsFromForm(){return[Number.parseInt(this.team)]}get hasSpecialInputs(){return!0}}ft.CODE=B.JOIN_TEAM,ft.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ft)))(t||ft)}}(),ft.\u0275cmp=e.Xpm({type:ft,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:21,consts:[[3,"delay","delayChange"],[1,"form-group"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","1",3,"selected"],["value","2",3,"selected"],["value","3",3,"selected"],["value","4",3,"selected"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",2),e.NdJ("ngModelChange",function(r){return t.team=r}),e.TgZ(6,"option",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"option",4),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"option",5),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",6),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,11,"wiredfurni.params.team")),e.xp6(2),e.Q6J("ngModel",t.team),e.xp6(1),e.Q6J("selected","1"==t.team),e.xp6(1),e.Oqu(e.lcZ(8,13,"wiredfurni.params.team.1")),e.xp6(2),e.Q6J("selected","2"==t.team),e.xp6(1),e.Oqu(e.lcZ(11,15,"wiredfurni.params.team.2")),e.xp6(2),e.Q6J("selected","3"==t.team),e.xp6(1),e.Oqu(e.lcZ(14,17,"wiredfurni.params.team.3")),e.xp6(2),e.Q6J("selected","4"==t.team),e.xp6(1),e.Oqu(e.lcZ(17,19,"wiredfurni.params.team.4")))},encapsulation:2});class vt extends V{get code(){return vt.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}onEditStart(o){this.message=o.stringData,super.onEditStart(o)}validate(){return this.message.length>100?s.wjX.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}}vt.CODE=B.KICK_FROM_ROOM,vt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(vt)))(t||vt)}}(),vt.\u0275cmp=e.Xpm({type:vt,selectors:[["ng-component"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"delay","delayChange"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"div",1),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(r){return t.message=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(3),e.Oqu(e.lcZ(4,3,"wiredfurni.params.message")),e.xp6(2),e.Q6J("ngModel",t.message))},encapsulation:2});class Tt extends V{get code(){return Tt.CODE}}Tt.CODE=B.LEAVE_TEAM,Tt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Tt)))(t||Tt)}}(),Tt.\u0275cmp=e.Xpm({type:Tt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class ne extends V{get code(){return ne.CODE}onEditStart(o){this.movement=(o.intData.length>0?o.intData[0]:0).toString(),this.spacing=o.intData.length>1?o.intData[1]:1,super.onEditStart(o)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),this.spacing]}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_4991}decreaseSpacing(){this.spacing-=1,this.spacing<ne.SPACING_MINIMUM_VALUE&&(this.spacing=ne.SPACING_MINIMUM_VALUE)}increaseSpacing(){this.spacing+=1,this.spacing>ne.SPACING_MAXIMUM_VALUE&&(this.spacing=ne.SPACING_MAXIMUM_VALUE)}get spacingSliderOptions(){return{floor:ne.SPACING_MINIMUM_VALUE,ceil:ne.SPACING_MAXIMUM_VALUE,step:ne.SPACING_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}ne.SPACING_MINIMUM_VALUE=1,ne.SPACING_MAXIMUM_VALUE=5,ne.SPACING_STEPPER_VALUE=1,ne.CODE=B.MOVE_FURNI_TO,ne.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ne)))(t||ne)}}(),ne.\u0275cmp=e.Xpm({type:ne,selectors:[["ng-component"]],features:[e.qOj],decls:29,vars:15,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","spacing",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.decreaseSpacing()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"ngx-slider",5),e.NdJ("valueChange",function(r){return t.spacing=r}),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return t.increaseSpacing()}),e._UZ(9,"i",6),e.qZA(),e.qZA(),e._uU(10),e.ALo(11,"translate"),e.TgZ(12,"div",7),e.TgZ(13,"div",8),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(15,"label",10),e._UZ(16,"i",11),e.qZA(),e.qZA(),e.TgZ(17,"div",8),e.TgZ(18,"input",12),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(19,"label",10),e._UZ(20,"i",13),e.qZA(),e.qZA(),e.TgZ(21,"div",8),e.TgZ(22,"input",14),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(23,"label",10),e._UZ(24,"i",15),e.qZA(),e.qZA(),e.TgZ(25,"div",8),e.TgZ(26,"input",16),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(27,"label",10),e._UZ(28,"i",17),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(2),e.Oqu(e.Dn7(3,9,"wiredfurni.params.emptytiles","tiles",t.spacing)),e.xp6(5),e.Q6J("options",t.spacingSliderOptions)("value",t.spacing),e.xp6(3),e.hij(" ",e.lcZ(11,13,"wiredfurni.params.startdir")," "),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement))},encapsulation:2});class bt extends V{get code(){return bt.CODE}onEditStart(o){this.movement=(o.intData.length>0?o.intData[0]:0).toString(),this.rotation=(o.intData.length>1?o.intData[1]:0).toString(),super.onEditStart(o)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_5430}}bt.CODE=B.MOVE_FURNI,bt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(bt)))(t||bt)}}(),bt.\u0275cmp=e.Xpm({type:bt,selectors:[["ng-component"]],features:[e.qOj],decls:62,vars:34,consts:[[3,"delay","delayChange"],[1,"form-row"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-row","mb-2"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-ne"],["type","radio","name","movement","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","7",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-7"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-2"],["type","radio","name","movement","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-3"],["type","radio","name","movement","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-mv-1"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-1"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-rot-2"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(6,"label",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"div",2),e.TgZ(11,"input",6),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(12,"label",4),e._UZ(13,"i",7),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"input",8),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(16,"label",4),e._UZ(17,"i",9),e.qZA(),e.qZA(),e.TgZ(18,"div",2),e.TgZ(19,"input",10),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(20,"label",4),e._UZ(21,"i",11),e.qZA(),e.qZA(),e.TgZ(22,"div",2),e.TgZ(23,"input",12),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(24,"label",4),e._UZ(25,"i",13),e.qZA(),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"input",14),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(28,"label",4),e._UZ(29,"i",15),e.qZA(),e.qZA(),e.TgZ(30,"div",2),e.TgZ(31,"input",16),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(32,"label",4),e._UZ(33,"i",17),e.qZA(),e.qZA(),e.TgZ(34,"div",2),e.TgZ(35,"input",18),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(36,"label",4),e._UZ(37,"i",19),e.qZA(),e.qZA(),e.qZA(),e._uU(38),e.ALo(39,"translate"),e.TgZ(40,"div",2),e.TgZ(41,"input",20),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(42,"label",4),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.qZA(),e.TgZ(45,"div",2),e.TgZ(46,"input",21),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(47,"label",4),e._UZ(48,"i",22),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.qZA(),e.TgZ(51,"div",2),e.TgZ(52,"input",23),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(53,"label",4),e._UZ(54,"i",24),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.qZA(),e.TgZ(57,"div",2),e.TgZ(58,"input",25),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(59,"label",4),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(1),e.hij(" ",e.lcZ(2,20,"wiredfurni.params.movefurni")," "),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(2),e.Oqu(e.lcZ(8,22,"wiredfurni.params.movefurni.0")),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(3),e.hij(" ",e.lcZ(39,24,"wiredfurni.params.rotatefurni")," "),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(44,26,"wiredfurni.params.rotatefurni.0")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(3),e.hij(" ",e.lcZ(50,28,"wiredfurni.params.rotatefurni.1"),""),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(3),e.hij(" ",e.lcZ(56,30,"wiredfurni.params.rotatefurni.2"),""),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(61,32,"wiredfurni.params.rotatefurni.3")))},encapsulation:2});class Ct extends V{get code(){return Ct.CODE}onEditStart(o){this.movement=(o.intData.length>0?o.intData[0]:0).toString(),this.rotation=(o.intData.length>1?o.intData[1]:0).toString(),super.onEditStart(o)}readIntegerParamsFromForm(){return[Number.parseInt(this.movement),Number.parseInt(this.rotation)]}get hasSpecialInputs(){return!0}get requiresFurni(){return P._Str_5430}}Ct.CODE=B.MOVE_TO_DIRECTION,Ct.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Ct)))(t||Ct)}}(),Ct.\u0275cmp=e.Xpm({type:Ct,selectors:[["ng-component"]],features:[e.qOj],decls:57,vars:39,consts:[[3,"delay","delayChange"],[1,"form-row","mb-2"],[1,"form-check"],["type","radio","name","movement","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"icon","icon-ne"],["type","radio","name","movement","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-se"],["type","radio","name","movement","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-sw"],["type","radio","name","movement","value","6",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"icon","icon-nw"],["type","radio","name","rotation","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","4",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","5",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","rotation","value","6",1,"form-check-input",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"input",3),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(6,"label",4),e._UZ(7,"i",5),e.qZA(),e.qZA(),e.TgZ(8,"div",2),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(10,"label",4),e._UZ(11,"i",7),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(14,"label",4),e._UZ(15,"i",9),e.qZA(),e.qZA(),e.TgZ(16,"div",2),e.TgZ(17,"input",10),e.NdJ("ngModelChange",function(r){return t.movement=r}),e.qZA(),e.TgZ(18,"label",4),e._UZ(19,"i",11),e.qZA(),e.qZA(),e.qZA(),e._uU(20),e.ALo(21,"translate"),e.TgZ(22,"div",2),e.TgZ(23,"input",12),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(24,"label",4),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.TgZ(27,"div",2),e.TgZ(28,"input",13),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(29,"label",4),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.qZA(),e.TgZ(32,"div",2),e.TgZ(33,"input",14),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(34,"label",4),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.qZA(),e.TgZ(37,"div",2),e.TgZ(38,"input",15),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(39,"label",4),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.qZA(),e.TgZ(42,"div",2),e.TgZ(43,"input",16),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(44,"label",4),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.qZA(),e.TgZ(47,"div",2),e.TgZ(48,"input",17),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(49,"label",4),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.qZA(),e.TgZ(52,"div",2),e.TgZ(53,"input",18),e.NdJ("ngModelChange",function(r){return t.rotation=r}),e.qZA(),e.TgZ(54,"label",4),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(1),e.hij(" ",e.lcZ(2,21,"wiredfurni.params.startdir")," "),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(4),e.Q6J("ngModel",t.movement),e.xp6(3),e.hij(" ",e.lcZ(21,23,"wiredfurni.params.turn")," "),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(26,25,"wiredfurni.params.turn.0")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(31,27,"wiredfurni.params.turn.1")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(36,29,"wiredfurni.params.turn.2")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(41,31,"wiredfurni.params.turn.3")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(46,33,"wiredfurni.params.turn.4")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(51,35,"wiredfurni.params.turn.5")),e.xp6(3),e.Q6J("ngModel",t.rotation),e.xp6(2),e.Oqu(e.lcZ(56,37,"wiredfurni.params.turn.6")))},encapsulation:2});class ie extends V{constructor(){super(...arguments),this.length=0}get code(){return ie.CODE}get hasSpecialInputs(){return!0}readStringParamFromForm(){return this.message}readIntegerParamsFromForm(){return[this.length]}onEditStart(o){this.message=o.stringData,this.length=o.intData.length>0?o.intData[0]:10,super.onEditStart(o)}validate(){return this.message.length>100?s.wjX.instance.localization.getValue("wiredfurni.chatmsgtoolong",!1):null}decreaseLength(){this.length-=1,this.length<ie.LENGTH_MINIMUM_VALUE&&(this.length=ie.LENGTH_MINIMUM_VALUE)}increaseLength(){this.length+=1,this.length>ie.LENGTH_MAXIMUM_VALUE&&(this.length=ie.LENGTH_MAXIMUM_VALUE)}get lengthSliderOptions(){return{floor:ie.LENGTH_MINIMUM_VALUE,ceil:ie.LENGTH_MAXIMUM_VALUE,step:ie.LENGTH_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}ie.LENGTH_MINIMUM_VALUE=1,ie.LENGTH_MAXIMUM_VALUE=10,ie.LENGTH_STEPPER_VALUE=1,ie.CODE=B.MUTE_USER,ie.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(ie)))(t||ie)}}(),ie.\u0275cmp=e.Xpm({type:ie,selectors:[["ng-component"]],features:[e.qOj],decls:15,vars:12,consts:[[3,"delay","delayChange"],[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","length",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.TgZ(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.decreaseLength()}),e._UZ(6,"i",4),e.qZA(),e.TgZ(7,"ngx-slider",5),e.NdJ("valueChange",function(r){return t.length=r}),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return t.increaseLength()}),e._UZ(9,"i",6),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(r){return t.message=r}),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(2),e.Oqu(e.Dn7(3,6,"wiredfurni.params.length.minutes","minutes",t.length)),e.xp6(5),e.Q6J("options",t.lengthSliderOptions)("value",t.length),e.xp6(5),e.Oqu(e.lcZ(13,10,"wiredfurni.params.message")),e.xp6(2),e.Q6J("ngModel",t.message))},encapsulation:2});class Et extends V{get code(){return Et.CODE}}Et.CODE=B.RESET,Et.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(Et)))(t||Et)}}(),Et.\u0275cmp=e.Xpm({type:Et,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class St extends V{get code(){return St.CODE}onEditStart(o){this.state=o.getBoolean(0),this.direction=o.getBoolean(1),this.position=o.getBoolean(2),super.onEditStart(o)}readIntegerParamsFromForm(){return[this.state?1:0,this.direction?1:0,this.position?1:0]}get requiresFurni(){return P._Str_4873}get hasStateSnapshot(){return!0}}St.CODE=B.SET_FURNI_STATE,St.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(St)))(t||St)}}(),St.\u0275cmp=e.Xpm({type:St,selectors:[["ng-component"]],features:[e.qOj],decls:18,vars:16,consts:[[3,"delay","delayChange"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"div",1),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(r){return t.state=r}),e.qZA(),e.TgZ(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.TgZ(8,"div",1),e.TgZ(9,"input",2),e.NdJ("ngModelChange",function(r){return t.direction=r}),e.qZA(),e.TgZ(10,"label",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"input",2),e.NdJ("ngModelChange",function(r){return t.position=r}),e.qZA(),e.TgZ(15,"label",3),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("delay",t.delay),e.xp6(1),e.hij(" ",e.lcZ(2,8,"wiredfurni.params.conditions")," "),e.xp6(3),e.Q6J("ngModel",t.state),e.xp6(2),e.Oqu(e.lcZ(7,10,"wiredfurni.params.condition.state")),e.xp6(3),e.Q6J("ngModel",t.direction),e.xp6(2),e.Oqu(e.lcZ(12,12,"wiredfurni.params.condition.direction")),e.xp6(3),e.Q6J("ngModel",t.position),e.xp6(2),e.Oqu(e.lcZ(17,14,"wiredfurni.params.condition.position")))},encapsulation:2});class At extends V{get code(){return At.CODE}get requiresFurni(){return P._Str_5430}}At.CODE=B.TELEPORT,At.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(At)))(t||At)}}(),At.\u0275cmp=e.Xpm({type:At,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class wt extends V{get code(){return wt.CODE}get requiresFurni(){return P._Str_5430}}wt.CODE=B.TOGGLE_FURNI_STATE,wt.\u0275fac=function(){let i;return function(t){return(i||(i=e.n5z(wt)))(t||wt)}}(),wt.\u0275cmp=e.Xpm({type:wt,selectors:[["ng-component"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"delay","delayChange"]],template:function(o,t){1&o&&(e.TgZ(0,"nitro-wired-action-base-component",0),e.NdJ("delayChange",function(r){return t.delay=r}),e.qZA()),2&o&&e.Q6J("delay",t.delay)},encapsulation:2});class tp{_Str_9781(o){switch(o){case wt.CODE:return wt;case At.CODE:return At;case dt.CODE:return dt;case pt.CODE:return pt;case gt.CODE:return gt;case mt.CODE:return mt;case lt.CODE:return lt;case ct.CODE:return ct;case Tt.CODE:return Tt;case Et.CODE:return Et;case vt.CODE:return vt;case _t.CODE:return _t;case St.CODE:return St;case ut.CODE:return ut;case ie.CODE:return ie;case Oe.CODE:return Oe;case Ue.CODE:return Ue;case Ne.CODE:return Ne;case bt.CODE:return bt;case Ct.CODE:return Ct;case ft.CODE:return ft;case ht.CODE:return ht;case q.CODE:return q;case ne.CODE:return ne;case te.CODE:return te}return null}_Str_15652(o){return this._Str_9781(o)}_Str_14545(o){return o instanceof s.Ghs}_Str_1196(){return"action"}}const np=["inputsContainer"];function ip(i,o){}let P=(()=>{class i{constructor(t,n,r,a,c){this._settingsService=t,this._notificationService=n,this._wiredService=r,this._componentFactoryResolver=a,this._ngZone=c,this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}ngOnInit(){this._wiredService.component=this,this._triggerConfs=new Xm,this._actionTypes=new tp,this._conditionTypes=new Wm,this._selectionVisualizer=new Hm(this)}ngOnDestroy(){this._wiredService.component=null}setupTrigger(t){this._updated=t;const n=this._Str_3959();this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._furniSelectedIds=[...this._updated.selectedItems],n.onEditStart(this._updated),this._selectionVisualizer.applySelectionShaderToFurni(this._furniSelectedIds)}_Str_19071(){return this._updated instanceof s.eHY?this._triggerConfs:this._updated instanceof s.Ghs?this._actionTypes:this._updated instanceof s.bpN?this._conditionTypes:null}_Str_3959(){const t=this._Str_19071()._Str_15652(this._updated.code);if(!t)return null;if(this._lastComponent&&this._lastComponent.instance instanceof t)return this._lastComponent.instance;this.inputsContainer.length&&this.inputsContainer.remove();const n=this._componentFactoryResolver.resolveComponentFactory(t);let r=null;return n&&(r=this.inputsContainer.createComponent(n)),this._lastComponent=r,r?(r.instance.onInitStart(),r.instance):null}close(){this.inputsContainer.length&&this.inputsContainer.remove(),this._selectionVisualizer.clearSelectionShaderFromFurni(this._furniSelectedIds),this._updated=null,this._lastComponent=null,this._furniSelectedIds=[]}save(){this.isOwnerOfFurniture(this._updated.id)?this.update():this._notificationService.alertWithConfirm("${wiredfurni.nonowner.change.confirm.body}","${wiredfurni.nonowner.change.confirm.title}",()=>{this.update()})}update(){const n=this._Str_3959().validate();n?this._notificationService.alert(n,"Update failed"):this._updated instanceof s.eHY?s.wjX.instance.communication.connection.send(new s.Y_g(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode())):this._updated instanceof s.Ghs?s.wjX.instance.communication.connection.send(new s.V03(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.getActionDelay(),this.readFurniSelectionCode())):this._updated instanceof s.bpN&&s.wjX.instance.communication.connection.send(new s.eXf(this._updated.id,this.readIntegerParams(),this.readStringParam(),this.readFurniSelectionIds(),this.readFurniSelectionCode()))}getActionDelay(){const t=this._Str_3959();return t&&t instanceof V?t.delay:0}readIntegerParams(){const t=this._Str_3959();return t?t.readIntegerParamsFromForm():[]}readStringParam(){const t=this._Str_3959();return t?t.readStringParamFromForm():""}readFurniSelectionIds(){return[...this._furniSelectedIds]}readFurniSelectionCode(){if(!this._updated.stuffTypeSelectionEnabled)return 0;const t=this._Str_3959();return!t||t.requiresFurni!==i._Str_4991&&t.requiresFurni!==i._Str_5430?0:this._updated.stuffTypeSelectionCode}getFurniName(){const t=this._updated&&this._updated.spriteId||-1,n=s.wjX.instance.sessionDataManager.getFloorItemData(t);return n?n.name:"NAME: "+t}getFurniDescription(){const t=this._updated&&this._updated.spriteId||-1,n=s.wjX.instance.sessionDataManager.getFloorItemData(t);return n?n.description:"NAME: "+t}_Str_19885(){return this._Str_3959().requiresFurni!==i._Str_5431}toggleFurniSelected(t,n){if(!this._updated||!this._Str_19885())return;const r=this._furniSelectedIds.indexOf(t);r>=0?(this._furniSelectedIds.splice(r,1),this._selectionVisualizer.hide(t)):this._furniSelectedIds.length<this._updated.maximumItemSelectionCount&&(this._furniSelectedIds.push(t),this._selectionVisualizer.show(t)),s.wjX.instance.localization.registerParameter("wiredfurni.pickfurnis.caption","count",this._furniSelectedIds.length.toString())}isOwnerOfFurniture(t){const n=s.wjX.instance.roomEngine.getRoomObject(this._wiredService.roomId,t,s.YGE.FLOOR);return!!n&&n.model.getValue(s.fql.FURNITURE_OWNER_ID)===s.wjX.instance.sessionDataManager.userId}get roomId(){return this._wiredService.roomId}get furniSelectedIds(){return this._furniSelectedIds}get maximumItemSelectionCount(){return this._updated.maximumItemSelectionCount}}return i._Str_5431=0,i._Str_4873=1,i._Str_4991=2,i._Str_5430=3,i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(R),e.Y36(pn),e.Y36(e._Vd),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-wired-main-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(np,5,e.s_b),2&t){let r;e.iGM(r=e.CRH())&&(n.inputsContainer=r.first)}},decls:2,vars:0,consts:[["inputsContainer",""]],template:function(t,n){1&t&&e.YNc(0,ip,0,0,"ng-template",null,0,e.W1O)},encapsulation:2}),i})();function op(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).getMembers(!0)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.Dn7(2,1,"group.members.pendingmembers","count",t.groupMembershipRequestsCount))}}function rp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).manage()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.manage")))}function sp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).leave()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.isOwner),e.xp6(1),e.Oqu(e.lcZ(2,2,"group.leave"))}}function ap(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).join()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.join")))}function cp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).join()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.requestmembership")))}function lp(i,o){1&i&&(e.TgZ(0,"button",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.membershippending")))}function up(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,cp,3,3,"button",21),e.YNc(2,lp,3,3,"button",27),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0===t.groupMembershipType),e.xp6(1),e.Q6J("ngIf",2===t.groupMembershipType)}}const _p=function(i,o,t){return{"fa-user-plus":i,"fa-key":o,"fa-ban":t}},gp=function(){return["date","owner"]},dp=function(i,o){return[i,o]};function mp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"h6",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._UZ(7,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e._UZ(11,"nitro-badge",10),e.TgZ(12,"div",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().getMembers(!1)}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,op,3,5,"div",12),e.qZA(),e.TgZ(16,"div",13),e.TgZ(17,"div"),e._UZ(18,"i",14),e._uU(19),e.qZA(),e.TgZ(20,"div",15),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",16),e._uU(24),e.qZA(),e.TgZ(25,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().goToHomeRoom()}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,rp,3,3,"button",18),e.qZA(),e.qZA(),e.TgZ(29,"div",19),e.YNc(30,sp,3,4,"button",20),e.YNc(31,ap,3,3,"button",21),e.YNc(32,up,3,2,"div",22),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,14,"group.window.title")),e.xp6(7),e.Q6J("badge",t.groupBadgeCode)("isGroup",!0),e.xp6(2),e.Oqu(e.Dn7(14,16,"group.members.members","count",t.groupMembersCount)),e.xp6(2),e.Q6J("ngIf",t.groupMembershipRequestsCount>0),e.xp6(3),e.Q6J("ngClass",e.kEZ(26,_p,0===t.groupType,1===t.groupType,2===t.groupType)),e.xp6(1),e.Oqu(t.groupName),e.xp6(2),e.Oqu(e.Dn7(22,20,"group.created",e.DdM(30,gp),e.WLB(31,dp,t.groupCreationDate,t.groupOwnerName))),e.xp6(3),e.Oqu(t.groupDescription),e.xp6(2),e.Oqu(e.lcZ(27,24,"group.linktobase")),e.xp6(2),e.Q6J("ngIf",t.isOwner),e.xp6(2),e.Q6J("ngIf",1===t.groupMembershipType),e.xp6(1),e.Q6J("ngIf",0===t.groupType&&0===t.groupMembershipType),e.xp6(1),e.Q6J("ngIf",1===t.groupType)}}let pp=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._navigatorService=n,this._groupService=r,this._groupService.groupInfoComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._groupDescription=null,this._groupType=-1,this._groupMembershipType=-1,this._groupCreationDate=null,this._groupOwnerName=null,this._groupMembersCount=0,this._groupMembershipRequestsCount=0,this._groupHomeRoomId=0,this._isOwner=!1})}goToHomeRoom(){this._navigatorService.goToRoom(this._groupHomeRoomId)}manage(){s.wjX.instance.createLinkEvent("groups/manage/"+this.groupId)}getMembers(t){this._groupService.getMembers(this._groupId,0,null,t?2:0)}join(){!this.groupId||0!==this._groupMembershipType||this._groupService.join(this.groupId)}leave(){!this.groupId||1!==this._groupMembershipType||this.isOwner||this._groupService.removeMember(this.groupId,s.wjX.instance.sessionDataManager.userId)}confirmLeave(){return[s.wjX.instance.localization.getValue("group.leaveconfirm.title"),s.wjX.instance.localization.getValue("group.leaveconfirm.desc"),[new Bt("group.leave",()=>{s.wjX.instance.communication.connection.send(new s.p0V(this.groupId,s.wjX.instance.sessionDataManager.userId))},["btn-danger"]),new Bt("generic.close",()=>{},["btn-primary"])]]}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get groupDescription(){return this._groupDescription}set groupDescription(t){this._groupDescription=t}get groupType(){return this._groupType}set groupType(t){this._groupType=t}get groupMembershipType(){return this._groupMembershipType}set groupMembershipType(t){this._groupMembershipType=t}get groupCreationDate(){return this._groupCreationDate}set groupCreationDate(t){this._groupCreationDate=t}get groupOwnerName(){return this._groupOwnerName}set groupOwnerName(t){this._groupOwnerName=t}get groupMembersCount(){return this._groupMembersCount}set groupMembersCount(t){this._groupMembersCount=t}get groupMembershipRequestsCount(){return this._groupMembershipRequestsCount}set groupMembershipRequestsCount(t){this._groupMembershipRequestsCount=t}get groupHomeRoomId(){return this._groupHomeRoomId}set groupHomeRoomId(t){this._groupHomeRoomId=t}get isOwner(){return this._isOwner}set isOwner(t){this._isOwner=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(ce),e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-info-component"]],decls:1,vars:1,consts:[["class","nitro-group-info-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-info-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"group-members-count","mt-3","text-center",3,"click"],["class","group-members-count mt-1 text-center",3,"click",4,"ngIf"],[1,"w-100"],[1,"fas","mr-2",3,"ngClass"],[1,"small","mb-2"],[1,"small","mb-3"],[1,"btn","btn-primary","btn-sm","mt-1",3,"click"],["class","btn btn-primary btn-sm mt-2",3,"click",4,"ngIf"],[1,"mt-3"],["class","btn btn-danger btn-block",3,"disabled","click",4,"ngIf"],["class","btn btn-success btn-block",3,"click",4,"ngIf"],[4,"ngIf"],[1,"group-members-count","mt-1","text-center",3,"click"],[1,"btn","btn-primary","btn-sm","mt-2",3,"click"],[1,"btn","btn-danger","btn-block",3,"disabled","click"],[1,"btn","btn-success","btn-block",3,"click"],["class","btn btn-primary disabled btn-block","disabled","",4,"ngIf"],["disabled","",1,"btn","btn-primary","disabled","btn-block"]],template:function(t,n){1&t&&e.YNc(0,mp,33,34,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,Le,u.mk],pipes:[m],encapsulation:2}),i})();function hp(i,o){1&i&&(e.TgZ(0,"option",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.members.search.pending")))}function fp(i,o){if(1&i&&e._UZ(0,"i",33),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("ngClass",n.getRankIcon(t.rank))}}function vp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).removeOrDeclineMember(r.id,r.rank)}),e._UZ(1,"i",6),e.qZA()}}function Tp(i,o){1&i&&(e.TgZ(0,"button",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.members.owner")))}function bp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(2).takeAdmin(r.id)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.members.removerights")))}function Cp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(2).giveAdmin(r.id)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.members.giverights")))}function Ep(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"span",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(2).acceptMembership(r.id)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.members.accept")))}function Sp(i,o){if(1&i&&(e.TgZ(0,"button",35),e.YNc(1,bp,3,3,"span",31),e.YNc(2,Cp,3,3,"span",31),e.YNc(3,Ep,3,3,"span",31),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1===t.rank),e.xp6(1),e.Q6J("ngIf",2===t.rank),e.xp6(1),e.Q6J("ngIf",3===t.rank)}}function Ap(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"div",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).openProfile(a.id)}),e.YNc(4,fp,1,1,"i",30),e._uU(5),e.qZA(),e.YNc(6,vp,2,0,"div",31),e.qZA(),e.YNc(7,Tp,3,3,"button",32),e.YNc(8,Sp,4,3,"button",32),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(4),e.Q6J("ngIf",t.rank<3),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",n.admin&&t.rank>0),e.xp6(1),e.Q6J("ngIf",0===t.rank),e.xp6(1),e.Q6J("ngIf",n.admin&&t.id!==n.myId&&0!==t.rank)}}const wp=function(){return["amount","page","totalPages"]},xp=function(i,o,t){return[i,o,t]};function Zp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"h6",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._UZ(7,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e._UZ(11,"nitro-badge",10),e.qZA(),e.TgZ(12,"div",11),e.TgZ(13,"input",12),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().query=r})("keyup.enter",function(){return e.CHM(t),e.oxw().searchMembers()}),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"select",13),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().level=r})("ngModelChange",function(){return e.CHM(t),e.oxw().searchMembers()}),e.TgZ(16,"option",14),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"option",15),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,hp,3,3,"option",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",17),e.TgZ(24,"div",18),e.YNc(25,Ap,9,5,"div",19),e.qZA(),e.qZA(),e.TgZ(26,"div",20),e.TgZ(27,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().previousPage()}),e._UZ(28,"i",22),e.qZA(),e.TgZ(29,"div",23),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().nextPage()}),e._UZ(33,"i",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.Dn7(5,13,"group.members.title","groupName",t.groupName)),e.xp6(7),e.Q6J("badge",t.groupBadgeCode)("isGroup",!0),e.xp6(2),e.Q6J("placeholder",e.lcZ(14,17,"group.members.searchinfo"))("ngModel",t.query),e.xp6(2),e.Q6J("ngModel",t.level),e.xp6(2),e.Oqu(e.lcZ(18,19,"group.members.search.all")),e.xp6(3),e.Oqu(e.lcZ(21,21,"group.members.search.admins")),e.xp6(2),e.Q6J("ngIf",t.admin),e.xp6(3),e.Q6J("ngForOf",t.result),e.xp6(2),e.Q6J("disabled",0===t.pageIndex),e.xp6(3),e.Oqu(e.Dn7(31,23,"group.members.pageinfo",e.DdM(27,wp),e.kEZ(28,xp,t.totalMembersCount,t.pageIndex+1,t.totalPages))),e.xp6(2),e.Q6J("disabled",t.pageIndex+1===t.totalPages)}}let Ip=(()=>{class i{constructor(t,n){this._ngZone=t,this._groupService=n,this._groupService.groupMembersComponent=this,this.clear()}clear(){this._ngZone.run(()=>{this._groupId=0,this._groupName=null,this._groupBadgeCode=null,this._totalMembersCount=0,this._result=[],this._admin=!1,this._pageSize=1,this._pageIndex=0,this.level="0",this.query=null})}getMembers(){this._groupService.getMembers(this._groupId,this._pageIndex,this.query,parseInt(this.level))}searchMembers(){this._ngZone.run(()=>{this._pageSize=1,this._pageIndex=0,this._totalMembersCount=0}),this.getMembers()}nextPage(){this._pageIndex+1!==this.totalPages&&(this._pageIndex++,this.getMembers())}previousPage(){0!==this._pageIndex&&(this._pageIndex--,this.getMembers())}giveAdmin(t){!this._groupId||!this._admin||(this._groupService.giveAdmin(this._groupId,t),this.getMembers())}takeAdmin(t){!this._groupId||!this._admin||(this._groupService.takeAdmin(this._groupId,t),this.getMembers())}acceptMembership(t){!this._groupId||!this._admin||(this._groupService.acceptMembership(this._groupId,t),this.getMembers())}removeOrDeclineMember(t,n){!this._groupId||!this._admin||(3===n?this._groupService.declineMembership(this._groupId,t):(this._groupService.removeMember(this._groupId,t),this.getMembers()))}confirmRemove(t,n){const r=s.wjX.instance.localization.getValue("group.kickconfirm.title");let a=null;return a=n?s.wjX.instance.localization.getValueWithParameters("group.kickconfirm.desc",["user","amount"],["<b>"+t+"</b>","<b>"+n+"</b>"]):s.wjX.instance.localization.getValueWithParameter("group.kickconfirm_nofurni.desc","user","<b>"+t+"</b>"),[r,a,[new Bt("group.kickconfirm.title",()=>{s.wjX.instance.communication.connection.send(new s.p0V(this.groupId,t)),this.getMembers()},["btn-danger"]),new Bt("generic.close",()=>{},["btn-primary"])]]}openProfile(t){this._groupService.openProfile(t)}getRankIcon(t){return 0===t?"fas fa-crown":1===t?"fas fa-star":"far fa-star"}get visible(){return this._groupId>0}get groupId(){return this._groupId}set groupId(t){this._groupId=t}get groupName(){return this._groupName}set groupName(t){this._groupName=t}get groupBadgeCode(){return this._groupBadgeCode}set groupBadgeCode(t){this._groupBadgeCode=t}get totalMembersCount(){return this._totalMembersCount}set totalMembersCount(t){this._totalMembersCount=t}get result(){return this._result}set result(t){this._result=t}get admin(){return this._admin}set admin(t){this._admin=t}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=t}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=t}get totalPages(){return Math.ceil(this._totalMembersCount/this._pageSize)}get myId(){return s.wjX.instance.sessionDataManager.userId}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.R0b),e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-members-component"]],decls:1,vars:1,consts:[["class","nitro-group-members-component","dragHandle",".drag-handler",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-members-component",3,"bringToTop","draggable"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","justify-content-between","w-100","mb-2"],[1,"mr-3"],[3,"badge","isGroup"],[1,"w-100"],["type","text",1,"form-control","form-control-sm","mb-1",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2",4,"ngIf"],[1,"grid-container","mt-3"],[1,"grid-items","grid-3"],["class","d-flex flex-row justify-content-between item-detail",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mt-3"],[1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fas","fa-chevron-left"],[1,"text-center","w-100","pagination-counter"],[1,"fas","fa-chevron-right"],["value","2"],[1,"d-flex","flex-row","justify-content-between","item-detail"],[1,"bg-emperor","w-100","p-2","rounded"],[1,"d-flex","flex-row","justify-content-between"],[1,"w-100",3,"click"],["class","mr-2",3,"ngClass",4,"ngIf"],[3,"click",4,"ngIf"],["class","btn btn-primary btn-sm w-100 mt-1",4,"ngIf"],[1,"mr-2",3,"ngClass"],[3,"click"],[1,"btn","btn-primary","btn-sm","w-100","mt-1"]],template:function(t,n){1&t&&e.YNc(0,Zp,34,32,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,Le,_.Fj,_.JJ,_.On,_.EJ,_.YN,_.Kr,u.sg,u.mk],pipes:[m],encapsulation:2}),i})();function yp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-manager-tab-info-component",18),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw(2).groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("groupSettings",t.groupSettings)("showNameError",t.showNameError)("showDescriptionError",t.showDescriptionError)}}function Rp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-creator-tab-badge-component",19),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw(2).groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function Mp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-creator-tab-colors-component",19),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw(2).groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("groupSettings",t.groupSettings)("setDefaultValues",!1)}}function Op(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-group-manager-tab-preferences-component",20),e.NdJ("groupSettingsChange",function(r){return e.CHM(t),e.oxw(2).groupSettings=r}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("groupSettings",t.groupSettings)}}const Gn=function(i){return{active:i}};function Up(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"h6",4),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(7,"i",6),e.qZA(),e.qZA(),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(1)}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(2)}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(3)}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(4)}),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.qZA(),e.YNc(22,yp,1,3,"nitro-group-manager-tab-info-component",10),e.YNc(23,Rp,1,2,"nitro-group-creator-tab-badge-component",11),e.YNc(24,Mp,1,2,"nitro-group-creator-tab-colors-component",11),e.YNc(25,Op,1,1,"nitro-group-manager-tab-preferences-component",12),e.TgZ(26,"div",13),e.TgZ(27,"div",14),e.TgZ(28,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().delete()}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.TgZ(34,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().save()}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,16,"group.window.title")),e.xp6(6),e.Q6J("ngClass",e.VKq(32,Gn,1===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(12,18,"group.edit.tab.1")),e.xp6(2),e.Q6J("ngClass",e.VKq(34,Gn,2===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(15,20,"group.edit.tab.2")),e.xp6(2),e.Q6J("ngClass",e.VKq(36,Gn,3===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(18,22,"group.edit.tab.3")),e.xp6(2),e.Q6J("ngClass",e.VKq(38,Gn,4===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(21,24,"group.edit.tab.5")),e.xp6(2),e.Q6J("ngIf",1===t.currentTab),e.xp6(1),e.Q6J("ngIf",2===t.currentTab),e.xp6(1),e.Q6J("ngIf",3===t.currentTab),e.xp6(1),e.Q6J("ngIf",4===t.currentTab),e.xp6(4),e.Oqu(e.lcZ(30,26,"generic.cancel")),e.xp6(3),e.Oqu(e.lcZ(33,28,"group.delete")),e.xp6(3),e.Oqu(e.lcZ(36,30,"save"))}}let yo=(()=>{class i{constructor(t,n,r){this._groupService=t,this._notificationService=n,this._ngZone=r,this._groupService.groupManagerComponent=this,this._clear()}_clear(){this.groupSettings=new zi,this.visible=!1,this._currentTab=1,this._showNameError=!1,this._showDescriptionError=!1}ngOnInit(){this._clear()}ngOnDestroy(){this._clear()}load(t){this._clear(),this._ngZone.run(()=>{this.groupSettings.id=t.id,this.groupSettings.name=t.title,this.groupSettings.description=t.description,this.groupSettings.roomId=t.roomId.toString(),this.groupSettings.badgeParts=t.badgeParts,this.groupSettings.colorA=t.colorA,this.groupSettings.colorB=t.colorB,this.groupSettings.state=t.state,this.groupSettings.canMembersDecorate=t.canMembersDecorate,this.visible=!0})}setTab(t){this._currentTab=t}hide(){this.visible=!1}save(){this._showNameError=0===this.groupSettings.name.length||this.groupSettings.name.length>29,this._showDescriptionError=this.groupSettings.description.length>254,this._showNameError||this._showDescriptionError?this._currentTab=1:this._groupService.save(this.groupSettings)}delete(){const t=s.wjX.instance.localization.getValue("group.deleteconfirm.title"),n=s.wjX.instance.localization.getValue("group.deleteconfirm.desc"),r=[new Bt("group.delete",()=>{this._groupService.deleteGroup(this.groupSettings.id),this.hide(),this._groupService.groupInfoComponent.clear()},["btn-danger"]),new Bt("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(n,r,t)}get currentTab(){return this._currentTab}get showNameError(){return this._showNameError}get showDescriptionError(){return this._showDescriptionError}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot),e.Y36(R),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-manager-component"]],decls:1,vars:1,consts:[["class","nitro-group-manager-component","dragHandle",".drag-handler",3,"draggable","bringToTop",4,"ngIf"],["dragHandle",".drag-handler",1,"nitro-group-manager-component",3,"draggable","bringToTop"],[1,"card"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"btn-group","mb-3","w-100"],[1,"btn","btn-primary",3,"ngClass","click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange",4,"ngIf"],[3,"groupSettings","setDefaultValues","groupSettingsChange",4,"ngIf"],[3,"groupSettings","groupSettingsChange",4,"ngIf"],[1,"d-flex","flex-row","justify-content-between"],[1,"btn-group"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-success",3,"click"],[3,"groupSettings","showNameError","showDescriptionError","groupSettingsChange"],[3,"groupSettings","setDefaultValues","groupSettingsChange"],[3,"groupSettings","groupSettingsChange"]],template:function(t,n){1&t&&e.YNc(0,Up,37,40,"div",0),2&t&&e.Q6J("ngIf",n.visible)},encapsulation:2}),i})(),Np=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-main-component"]],decls:3,vars:0,template:function(t,n){1&t&&(e._UZ(0,"nitro-group-info-component"),e._UZ(1,"nitro-group-members-component"),e._UZ(2,"nitro-group-manager-component"))},directives:[pp,Ip,yo],encapsulation:2}),i})(),zt=(()=>{class i{constructor(t,n){this._notificationService=t,this._ngZone=n,this.registerMessages()}ngOnDestroy(){this.unregisterMessages()}registerMessages(){this._messages&&this.unregisterMessages(),this._messages=[new s.hmb(this.onUserInfoEvent.bind(this))];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)}unregisterMessages(){if(this._messages&&this._messages.length)for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t)}load(t){s.wjX.instance.communication.connection.send(new s.nl$(t))}onUserInfoEvent(t){if(!t)return;const n=t.getParser();!n||!n.data||this._ngZone.run(()=>this._currentUserInfo=n.data)}get currentUserInfo(){return this._currentUserInfo}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(R),e.LFG(e.R0b))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();function qp(i,o){if(1&i&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectedUser.username)}}function Lp(i,o){1&i&&e._UZ(0,"nitro-mod-tool-room-component")}function kp(i,o){1&i&&e._UZ(0,"nitro-mod-tool-room-chatlogs-component")}function Fp(i,o){if(1&i&&e._UZ(0,"nitro-mod-tool-user-component",17),2&i){const t=e.oxw(2);e.Q6J("user",t.clickedUser)}}function Dp(i,o){if(1&i&&e._UZ(0,"nitro-mod-tool-mod-action-user-component",17),2&i){const t=e.oxw(2);e.Q6J("user",t.clickedUser)}}function Pp(i,o){if(1&i&&e._UZ(0,"nitro-mod-tool-user-visited-rooms-component",17),2&i){const t=e.oxw(2);e.Q6J("user",t.clickedUser)}}function Jp(i,o){if(1&i&&e._UZ(0,"nitro-mod-tool-user-send-message-component",17),2&i){const t=e.oxw(2);e.Q6J("user",t.clickedUser)}}function jp(i,o){if(1&i&&e._UZ(0,"nitro-mod-tool-user-chatlogs-component",17),2&i){const t=e.oxw(2);e.Q6J("user",t.clickedUser)}}function Vp(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3,"Mod tools"),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openRoomTool()}),e._UZ(7,"i",7),e._uU(8," Room Tool "),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openChatlogTool()}),e._UZ(10,"i",8),e._uU(11," Chatlog Tool "),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectUser()}),e._UZ(13,"i",9),e._uU(14," User: "),e.YNc(15,qp,2,1,"span",10),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleReportsTool()}),e._UZ(17,"i",12),e._uU(18," Reports Tool "),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,Lp,1,0,"nitro-mod-tool-room-component",13),e.YNc(20,kp,1,0,"nitro-mod-tool-room-chatlogs-component",13),e.YNc(21,Fp,1,1,"nitro-mod-tool-user-component",14),e.TgZ(22,"nitro-mod-tool-reports-component",15),e.NdJ("visibleChange",function(r){return e.CHM(t),e.oxw().reportsToolVisible=r}),e.qZA(),e.YNc(23,Dp,1,1,"nitro-mod-tool-mod-action-user-component",14),e.YNc(24,Pp,1,1,"nitro-mod-tool-user-visited-rooms-component",14),e.YNc(25,Jp,1,1,"nitro-mod-tool-user-send-message-component",14),e.YNc(26,jp,1,1,"nitro-mod-tool-user-chatlogs-component",14),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("topCenter",!1),e.xp6(6),e.Q6J("disabled",!t.hasRoomInfo()),e.xp6(3),e.Q6J("disabled",!t.hasRoomInfo()),e.xp6(3),e.Q6J("disabled",!t.selectedUser),e.xp6(3),e.Q6J("ngIf",t.selectedUser),e.xp6(4),e.Q6J("ngIf",t.showRoomTool),e.xp6(1),e.Q6J("ngIf",t.showRoomChatlogs),e.xp6(1),e.Q6J("ngIf",t.userToolVisible),e.xp6(1),e.Q6J("visible",t.reportsToolVisible),e.xp6(1),e.Q6J("ngIf",t.showModActionOnUser),e.xp6(1),e.Q6J("ngIf",t.showVisitedRoomsForUser),e.xp6(1),e.Q6J("ngIf",t.showSendUserMessage),e.xp6(1),e.Q6J("ngIf",t.showSendUserChatlogs)}}let Ro=(()=>{class i{constructor(t,n,r,a){this._settingsService=t,this._modToolService=n,this._modToolsUserService=r,this._ngZone=a,this.visible=!1,this.roomToolVisible=!1,this.chatlogToolVisible=!1,this.userToolVisible=!1,this.reportsToolVisible=!1,this.clickedUser=null}ngOnInit(){this._modToolService.component=this}ngOnDestroy(){this._modToolService.component=null}toggleRoomTool(){this.roomToolVisible=!this.roomToolVisible}openRoomTool(){this._modToolService.openRoomTool()}openChatlogTool(){this._modToolService.openChatlogTool()}selectUser(){this.clickedUser=this.selectedUser,this._modToolsUserService.load(this.selectedUser.id),this.userToolVisible=!0}toggleReportsTool(){this.reportsToolVisible=!this.reportsToolVisible}hasRoomInfo(){return!!this._modToolService.currentRoom}get users(){return this._modToolService.users}get selectedUser(){return this._modToolService.selectedUser}get showModActionOnUser(){return this._modToolService.showModActionOnUser}get showVisitedRoomsForUser(){return this._modToolService.showVisitedRoomsForUser}get showSendUserMessage(){return this._modToolService.showSendUserMessage}get showSendUserChatlogs(){return this._modToolService.showSendUserChatlogs}get showRoomChatlogs(){return this._modToolService.showRoomChatLogs}get showRoomTool(){return this._modToolService.showRoomTools}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(je),e.Y36(zt),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-main-component"]],inputs:{visible:"visible"},decls:1,vars:1,consts:[["class","nitro-mod-tool-component card",3,"bringToTop","draggable","topCenter",4,"ngIf"],[1,"nitro-mod-tool-component","card",3,"bringToTop","draggable","topCenter"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],[1,"d-flex","flex-column","p-3"],[1,"btn-group","btn-group-vertical","w-100"],[1,"btn","btn-sm","btn-secondary",3,"disabled","click"],[1,"icon","modtool-room-icon","mr-1"],[1,"icon","modtool-chatlog-icon","mr-1"],[1,"icon","modtool-user-icon","mr-1"],["class","username",4,"ngIf"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"icon","modtool-reports-icon","mr-1"],[4,"ngIf"],[3,"user",4,"ngIf"],[3,"visible","visibleChange"],[1,"username"],[3,"user"]],template:function(t,n){1&t&&e.YNc(0,Vp,27,13,"div",0),2&t&&e.Q6J("ngIf",n.visible)},encapsulation:2}),i})();const Bp=function(i){return{background:i}},Gp=function(i){return{backgroundImage:i}};let Hp=(()=>{class i{constructor(t){this.sessionService=t,this._background=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images").background),this._backgroundColour=s.wjX.instance.getConfiguration("hotelview.images")["background.colour"],this._sun=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images").sun),this._drape=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images").drape),this._left=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images").left),this._right=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images").right),this._rightRepeat=s.wjX.instance.core.configuration.interpolate(s.wjX.instance.getConfiguration("hotelview.images")["right.repeat"])}get figure(){return this.sessionService.figure}get background(){return this._background||null}get backgroundColour(){return this._backgroundColour||null}get sun(){return this._sun||null}get drape(){return this._drape||null}get left(){return this._left||null}get right(){return this._right||null}get rightRepeat(){return this._rightRepeat||null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(hn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-hotelview-component"]],decls:7,vars:11,consts:[[1,"nitro-hotelview-component",3,"ngStyle"],[1,"background","position-absolute",3,"ngStyle"],["image-placeholder","",1,"sun","position-absolute",3,"src"],["image-placeholder","",1,"drape","position-absolute",3,"src"],["image-placeholder","",1,"left","position-absolute",3,"src"],["image-placeholder","",1,"rightRepeat","position-absolute",3,"src"],["image-placeholder","",1,"right","position-absolute",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e._UZ(2,"img",2),e._UZ(3,"img",3),e._UZ(4,"img",4),e._UZ(5,"img",5),e._UZ(6,"img",6),e.qZA()),2&t&&(e.Q6J("ngStyle",e.VKq(7,Bp,n.backgroundColour)),e.xp6(1),e.Q6J("ngStyle",e.VKq(9,Gp,"url("+n.background+")")),e.xp6(1),e.Q6J("src",n.sun,e.LSH),e.xp6(1),e.Q6J("src",n.drape,e.LSH),e.xp6(1),e.Q6J("src",n.left,e.LSH),e.xp6(1),e.Q6J("src",n.rightRepeat,e.LSH),e.xp6(1),e.Q6J("src",n.right,e.LSH))},directives:[u.PC,le],encapsulation:2}),i})();function Wp(i,o){1&i&&e._UZ(0,"nitro-hotelview-component")}let Qp=(()=>{class i{constructor(t,n,r){this._notificationService=t,this._settingsService=n,this._ngZone=r,this.roomComponent=null,this._landingViewVisible=!0,this.onRoomEngineEvent=this.onRoomEngineEvent.bind(this),this.onInterstitialEvent=this.onInterstitialEvent.bind(this),this.onRoomEngineObjectEvent=this.onRoomEngineObjectEvent.bind(this),this.onRoomSessionEvent=this.onRoomSessionEvent.bind(this),this.onRoomErrorEvent=this.onRoomErrorEvent.bind(this),s.wjX.instance.addLinkEventTracker(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events&&(s.wjX.instance.roomEngine.events.addEventListener(s._Z0.INITIALIZED,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.DISPOSED,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.ENGINE_INITIALIZED,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.OBJECTS_INITIALIZED,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.NORMAL_MODE,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.GAME_MODE,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.addEventListener(s.JwU.ROOM_ZOOM,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s.ipN.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s.WQf.ROOM_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s.G53.ROOM_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.SELECTED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.DESELECTED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.ADDED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.REMOVED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.PLACED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.REQUEST_MOVE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.REQUEST_ROTATE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.MOUSE_ENTER,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.MCw.MOUSE_LEAVE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.OPEN_WIDGET,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.CLOSE_WIDGET,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_TROPHY,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.LQw.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_STICKIE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_DIMMER,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_MANNEQUIN,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_PRESENT,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.addEventListener(s.L4R.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),s.wjX.instance.roomSessionManager.events&&(s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.CREATED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.ROOM_DATA,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.SeR.ENDED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.JTx.CHAT_EVENT,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.JTx.FLOOD_EVENT,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.LTL.RSDE_DANCE,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.mUG.RSUBE_BADGES,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s._LU.DOORBELL,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s._LU.RSDE_REJECTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s._LU.RSDE_ACCEPTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.BKf.ROOM_DIMMER_PRESETS,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.MZ1.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.J8G.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_KICKED,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_MAX_PETS,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.addEventListener(s.Gps.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.roomEngine.events&&(s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.INITIALIZED,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.DISPOSED,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.ENGINE_INITIALIZED,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.OBJECTS_INITIALIZED,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.NORMAL_MODE,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.removeEventListener(s._Z0.GAME_MODE,this.onInterstitialEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.JwU.ROOM_ZOOM,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.ipN.ROOM_BACKGROUND_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.WQf.ROOM_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.G53.ROOM_COLOR,this.onRoomEngineEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.SELECTED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.DESELECTED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.ADDED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.REMOVED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.PLACED,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.REQUEST_MOVE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.REQUEST_ROTATE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.MOUSE_ENTER,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.MCw.MOUSE_LEAVE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.OPEN_WIDGET,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.CLOSE_WIDGET,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_INTERNAL_LINK,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_ROOM_LINK,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_TROPHY,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_CREDITFURNI,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.LQw.OPEN_FURNI_CONTEXT_MENU,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_STICKIE,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_DIMMER,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_BACKGROUND_COLOR,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_FRIEND_FURNITURE_ENGRAVING,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_PRESENT,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent),s.wjX.instance.roomEngine.events.removeEventListener(s.L4R.REQUEST_HIDE_HIGH_SCORE_DISPLAY,this.onRoomEngineObjectEvent)),s.wjX.instance.roomSessionManager.events&&(s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.CREATED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.STARTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.ROOM_DATA,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.SeR.ENDED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.JTx.CHAT_EVENT,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.LTL.RSDE_DANCE,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.mUG.RSUBE_BADGES,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s._LU.DOORBELL,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s._LU.RSDE_REJECTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s._LU.RSDE_ACCEPTED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.BKf.ROOM_DIMMER_PRESETS,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.MZ1.RSFRE_FRIEND_REQUEST,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.J8G.RSPE_PRESENT_OPENED,this.onRoomSessionEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_KICKED,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_PETS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_PETS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_MAX_PETS,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_MAX_NUMBER_OF_OWN_PETS,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_NO_FREE_TILES_FOR_PET,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_BOTS_FORBIDDEN_IN_HOTEL,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_BOTS_FORBIDDEN_IN_FLAT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_BOT_LIMIT_REACHED,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT,this.onRoomErrorEvent),s.wjX.instance.roomSessionManager.events.removeEventListener(s.Gps.RSEME_BOT_NAME_NOT_ACCEPTED,this.onRoomErrorEvent))}),s.wjX.instance.removeLinkEventTracker(this)}ngAfterContentInit(){s.wjX.instance.communication.connection.onReady()}onRoomEngineEvent(t){if(!t||s.Rz.isRoomPreviewerId(t.roomId))return;const n=s.wjX.instance.roomSessionManager.getSession(t.roomId);if(n)switch(t.type){case s._Z0.INITIALIZED:return void(this.roomComponent&&(this.roomComponent.prepareRoom(n),s.wjX.instance.roomEngine.setActiveRoomId(t.roomId),this.roomComponent.createWidget(s.z5f.CHAT_WIDGET,Ul),this.roomComponent.createWidget(s.z5f.INFOSTAND,vl),this.roomComponent.createWidget(s.z5f.LOCATION_WIDGET,null),this.roomComponent.createWidget(s.z5f.INTERNAL_LINK,null),this.roomComponent.createWidget(s.z5f.ROOM_LINK,null),this.roomComponent.createWidget(s.z5f.CUSTOM_STACK_HEIGHT,va),this.roomComponent.createWidget(s.z5f.ROOM_DIMMER,xa),this.roomComponent.createWidget(s.z5f.FURNI_STICKIE_WIDGET,Oc),this.roomComponent.createWidget(s.z5f.DOORBELL,Cl),this.roomComponent.createWidget(s.z5f.FURNI_TROPHY_WIDGET,Nc),this.roomComponent.createWidget(s.z5f.FURNI_CREDIT_WIDGET,ha),this.roomComponent.createWidget(s.z5f.FURNITURE_CONTEXT_MENU,ma),this.roomComponent.createWidget(s.z5f.ROOM_BACKGROUND_COLOR,aa),this.roomComponent.createWidget(s.z5f.FRIEND_FURNI_CONFIRM,Ia),this.roomComponent.createWidget(s.z5f.FRIEND_FURNI_ENGRAVING,Ma),this.roomComponent.createWidget(s.z5f.ROOM_TOOLS,Dl),this.roomComponent.createWidget(s.z5f.MANNEQUIN,S),this.roomComponent.createWidget(s.z5f.FURNI_PRESENT_WIDGET,lc),this.roomComponent.createWidget(s.z5f.FRIEND_REQUEST,ra),this.roomComponent.createWidget(s.z5f.HIGH_SCORE_DISPLAY,vc),this.roomComponent.roomSession.isSpectator||(this.roomComponent.createWidget(s.z5f.CHAT_INPUT_WIDGET,Js),this.roomComponent.createWidget(s.z5f.AVATAR_INFO,qs),this.roomComponent.createWidget(s.z5f.FURNI_CHOOSER,Ys),this.roomComponent.createWidget(s.z5f.USER_CHOOSER,ea))));case s._Z0.DISPOSED:return void(this.roomComponent&&this.roomComponent.endRoom());case s.JwU.ROOM_ZOOM:{const r=t;let a=r.level<1?.5:1<<Math.floor(r.level)-1;return(r.forceFlip||r.asDelta)&&(a=r.level),void(this.roomComponent&&s.wjX.instance.roomEngine.setRoomInstanceRenderingCanvasScale(this.roomComponent.roomSession.roomId,this.roomComponent.getFirstCanvasId(),a,null,null,!1,r.asDelta))}case s.WQf.ROOM_COLOR:if(this.roomComponent){const r=t;r.bgOnly?this.roomComponent.setRoomColorizerColor(16711680,255):this.roomComponent.setRoomColorizerColor(r.color,r.brightness)}return;case s.G53.ROOM_COLOR:return void(this.roomComponent&&this.roomComponent._Str_2485(t));case s.ipN.ROOM_BACKGROUND_COLOR:if(this.roomComponent){const r=t;r.enable?this.roomComponent.setRoomBackgroundColor(r.hue,r.saturation,r.lightness):this.roomComponent.setRoomBackgroundColor(0,0,0)}return}}onInterstitialEvent(t){!t||t.type!==s._Z0.GAME_MODE&&t.type!==s._Z0.NORMAL_MODE||this.roomComponent&&this.roomComponent.onRoomEngineEvent(t)}onRoomEngineObjectEvent(t){this.roomComponent&&this.roomComponent.onRoomEngineObjectEvent(t)}onRoomErrorEvent(t){if(!t)return;let n,r="${error.title}";switch(t.type){case s.Gps.RSEME_MAX_PETS:n="${room.error.max_pets}";break;case s.Gps.RSEME_MAX_NUMBER_OF_OWN_PETS:n="${room.error.max_own_pets}";break;case s.Gps.RSEME_KICKED:n="${room.error.kicked}",r="${generic.alert.title}";break;case s.Gps.RSEME_PETS_FORBIDDEN_IN_HOTEL:n="${room.error.pets.forbidden_in_hotel}";break;case s.Gps.RSEME_PETS_FORBIDDEN_IN_FLAT:n="${room.error.pets.forbidden_in_flat}";break;case s.Gps.RSEME_NO_FREE_TILES_FOR_PET:n="${room.error.pets.no_free_tiles}";break;case s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_PET:n="${room.error.pets.selected_tile_not_free}";break;case s.Gps.RSEME_BOTS_FORBIDDEN_IN_HOTEL:n="${room.error.bots.forbidden_in_hotel}";break;case s.Gps.RSEME_BOTS_FORBIDDEN_IN_FLAT:n="${room.error.bots.forbidden_in_flat}";break;case s.Gps.RSEME_BOT_LIMIT_REACHED:n="${room.error.max_bots}";break;case s.Gps.RSEME_SELECTED_TILE_NOT_FREE_FOR_BOT:n="${room.error.bots.selected_tile_not_free}";break;case s.Gps.RSEME_BOT_NAME_NOT_ACCEPTED:n="${room.error.bots.name.not.accepted}";break;default:return}this._notificationService.alert(n,r)}onRoomSessionEvent(t){if(t)switch(t.type){case s.SeR.CREATED:return this._ngZone.run(()=>{this._landingViewVisible=!1}),void s.wjX.instance.roomSessionManager.startSession(t.session);case s.SeR.STARTED:case s.SeR.ROOM_DATA:return;case s.SeR.ENDED:return this.roomComponent&&this.roomComponent.endRoom(),void this._ngZone.run(()=>{this._landingViewVisible=t.openLandingView});default:return void(this.roomComponent&&this.roomComponent.processEvent(t))}}linkReceived(t){const n=t.split("/");if(!(n.length<2))switch(n[1]){case"open":if(n.length>2)switch(n[2]){case"credits":break;default:s.bTG.openHabblet(n[2])}return}}get eventUrlPrefix(){return"habblet"}get landingViewVisible(){return this._landingViewVisible}get avatarEditorVisible(){return this._settingsService.avatarEditorVisible}get catalogVisible(){return this._settingsService.catalogVisible}get navigatorVisible(){return this._settingsService.navigatorVisible}get inventoryVisible(){return this._settingsService.inventoryVisible}get friendListVisible(){return this._settingsService.friendListVisible}get achievementsVisible(){return this._settingsService.achievementsVisible}get chatHistoryVisible(){return this._settingsService.chatHistoryVisible}get modToolVisible(){return s.wjX.instance.sessionDataManager.isModerator}get userSettingsVisible(){return this._settingsService.userSettingsVisible}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(w),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-main-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ve,5),2&t){let r;e.iGM(r=e.CRH())&&(n.roomComponent=r.first)}},decls:24,vars:12,consts:[[1,"nitro-main-component"],[1,"nitro-right-side"],[1,"d-flex","flex-column"],[3,"visible"],[4,"ngIf"],[3,"isInRoom"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"nitro-alert-center-component"),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e._UZ(4,"nitro-purse-main-component"),e._UZ(5,"nitro-group-room-info-component"),e._UZ(6,"nitro-notification-center-component"),e.qZA(),e.qZA(),e._UZ(7,"nitro-achievements-main-component",3),e._UZ(8,"nitro-call-for-help-main-component"),e._UZ(9,"nitro-pedia-main-component"),e._UZ(10,"nitro-avatar-editor-main-component",3),e.YNc(11,Wp,1,0,"nitro-hotelview-component",4),e._UZ(12,"nitro-toolbar-component",5),e._UZ(13,"nitro-friendlist-main-component",3),e._UZ(14,"nitro-catalog-main-component",3),e._UZ(15,"nitro-navigator-main-component",3),e._UZ(16,"nitro-inventory-main-component",3),e._UZ(17,"nitro-user-profile-component"),e._UZ(18,"nitro-chat-history-component",3),e._UZ(19,"nitro-user-settings-component",3),e._UZ(20,"nitro-wired-main-component"),e._UZ(21,"nitro-group-main-component"),e._UZ(22,"nitro-mod-tool-main-component",3),e._UZ(23,"nitro-room-component"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("@inOutAnimation",void 0),e.xp6(5),e.Q6J("visible",n.achievementsVisible),e.xp6(3),e.Q6J("visible",n.avatarEditorVisible),e.xp6(1),e.Q6J("ngIf",n.landingViewVisible),e.xp6(1),e.Q6J("isInRoom",!n.landingViewVisible),e.xp6(1),e.Q6J("visible",n.friendListVisible),e.xp6(1),e.Q6J("visible",n.catalogVisible),e.xp6(1),e.Q6J("visible",n.navigatorVisible),e.xp6(1),e.Q6J("visible",n.inventoryVisible),e.xp6(2),e.Q6J("visible",n.chatHistoryVisible),e.xp6(1),e.Q6J("visible",n.userSettingsVisible),e.xp6(3),e.Q6J("visible",n.modToolVisible))},directives:[Yl,iu,Tu,Iu,Ku,$u,i_,no,u.O5,S_,io,fo,vo,wo,Rm,Pm,jm,P,Np,Ro,Ve,Hp],encapsulation:2,data:{animation:[(0,F.X$)("inOutAnimation",[(0,F.eR)(":enter",[(0,F.oB)({top:"-100%"}),(0,F.jt)("1s ease-out",(0,F.oB)({top:0}))])])]}}),i})();function Xp(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.message)}}function Yp(i,o){1&i&&(e.TgZ(0,"div",8),e._UZ(1,"div"),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e.qZA())}function zp(i,o){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"div",4),e.YNc(2,Xp,2,1,"div",5),e.YNc(3,Yp,5,0,"div",6),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.message&&t.message.length),e.xp6(1),e.Q6J("ngIf",!t.isError)}}function Kp(i,o){1&i&&e._UZ(0,"nitro-main-component")}let $p=(()=>{class i{constructor(t,n){this._settingsService=t,this._ngZone=n,this.message="Getting Ready",this.percentage=0,this.hideProgress=!0,this.isLocalizationReady=!1,this.isAvatarRenderReady=!1,this.isError=!1,this._isReady=!1,this.onNitroEvent=this.onNitroEvent.bind(this)}ngOnInit(){this._ngZone.runOutsideAngular(()=>{if(!NitroConfig)throw new Error("NitroConfig is not defined!");s.XYe.isWebGLAvailable()?(s.wjX.instance||(s.D6b.UI_VERSION="1.1.0",s.wjX.bootstrap()),s.wjX.instance.setWorker(new Worker(U.tu(new URL(U.p+U.u(493),U.b)),{type:void 0})),s.wjX.instance.events.addEventListener(s.mVU.CONNECTION_HANDSHAKING,this.onNitroEvent),s.wjX.instance.events.addEventListener(s.mVU.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),s.wjX.instance.events.addEventListener(s.mVU.CONNECTION_AUTHENTICATED,this.onNitroEvent),s.wjX.instance.events.addEventListener(s.mVU.CONNECTION_ERROR,this.onNitroEvent),s.wjX.instance.events.addEventListener(s.mVU.CONNECTION_CLOSED,this.onNitroEvent),s.wjX.instance.roomEngine.events.addEventListener(s._Z0.ENGINE_INITIALIZED,this.onNitroEvent),s.wjX.instance.localization.events.addEventListener(s.Ffv.LOADED,this.onNitroEvent),s.wjX.instance.core.configuration.events.addEventListener(s.RB4.LOADED,this.onNitroEvent),s.wjX.instance.core.configuration.events.addEventListener(s.RB4.FAILED,this.onNitroEvent),s.wjX.instance.core.configuration.init(),this._connectionTimeout=setTimeout(this.onConnectionTimeout,15e3)):this.onNitroEvent(new s._dI(s.wjX.WEBGL_UNAVAILABLE))})}ngOnDestroy(){this._ngZone.runOutsideAngular(()=>{s.wjX.instance.events.removeEventListener(s.mVU.CONNECTION_HANDSHAKING,this.onNitroEvent),s.wjX.instance.events.removeEventListener(s.mVU.CONNECTION_HANDSHAKE_FAILED,this.onNitroEvent),s.wjX.instance.events.removeEventListener(s.mVU.CONNECTION_AUTHENTICATED,this.onNitroEvent),s.wjX.instance.events.removeEventListener(s.mVU.CONNECTION_ERROR,this.onNitroEvent),s.wjX.instance.events.removeEventListener(s.mVU.CONNECTION_CLOSED,this.onNitroEvent),s.wjX.instance.localization.events.removeEventListener(s.Ffv.LOADED,this.onNitroEvent),s.wjX.instance.core.configuration.events.removeEventListener(s.RB4.LOADED,this.onNitroEvent),s.wjX.instance.core.configuration.events.removeEventListener(s.RB4.FAILED,this.onNitroEvent),clearTimeout(this._connectionTimeout)})}getPreloadAssetUrls(){const t=[],n=s.wjX.instance.getConfiguration("preload.assets.urls");if(n&&n.length)for(const r of n)t.push(s.wjX.instance.core.configuration.interpolate(r));return t}onNitroEvent(t){if(t)switch(t.type){case s.RB4.LOADED:return void s.wjX.instance.localization.init();case s.RB4.FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Configuration Failed"});case s.wjX.WEBGL_UNAVAILABLE:return void this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Required"});case s.wjX.WEBGL_CONTEXT_LOST:return this._ngZone.run(()=>{this.isError=!0,this.message="WebGL Context Lost - Reloading"}),void setTimeout(()=>location.reload(),1500);case s.mVU.CONNECTION_HANDSHAKING:return clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case s.mVU.CONNECTION_HANDSHAKE_FAILED:return void this._ngZone.run(()=>{this.isError=!0,this.message="Handshake Failed"});case s.mVU.CONNECTION_AUTHENTICATED:return this._ngZone.run(()=>{this.message="Finishing Up"}),s.wjX.instance.init(),clearTimeout(this._connectionTimeout),void(this._connectionTimeout=null);case s.mVU.CONNECTION_ERROR:return void this._ngZone.run(()=>{this.isError=!0,this.message="Connection Error"});case s.mVU.CONNECTION_CLOSED:return s.wjX.instance.roomEngine&&s.wjX.instance.roomEngine.dispose(),this._ngZone.run(()=>{this.isError=!0,this.message="Connection Closed"}),void s.XQ4.call("disconnect",-1,"client.init.handshake.fail");case s._Z0.ENGINE_INITIALIZED:return void this._ngZone.run(()=>this._isReady=!0);case s.Ffv.LOADED:return void s.wjX.instance.core.asset.downloadAssets(this.getPreloadAssetUrls(),n=>{n?(this._ngZone.run(()=>{this.message="Connecting"}),s.wjX.instance.communication.init()):this._ngZone.run(()=>{this.isError=!0,this.message="Assets Failed"})})}}onConnectionTimeout(){s.XQ4.call("logDebug","TcpAuth control socket security error")}get isReady(){return this._isReady}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-root"]],decls:3,vars:2,consts:[["id","nitro"],["class","d-flex flex-column justify-content-center align-items-center w-100 h-100",4,"ngIf"],[4,"ngIf"],[1,"d-flex","flex-column","justify-content-center","align-items-center","w-100","h-100"],[1,"logo","mb-4"],["class","h4 m-0",4,"ngIf"],["class","lds-ellipsis",4,"ngIf"],[1,"h4","m-0"],[1,"lds-ellipsis"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,zp,4,2,"div",1),e.YNc(2,Kp,1,0,"nitro-main-component",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.isReady||n.isError),e.xp6(1),e.Q6J("ngIf",n.isReady&&!n.isError))},directives:[u.O5,Qp],encapsulation:2}),i})();var Hn=U(6958),Wn=U(2533),Mo=U(9344);const eh={suppressScrollX:!0};let oe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:C.op,useValue:eh},ai,Qi],imports:[[qe.b2,Ii.PW,u.ez,_.u5,_.UX,Mo.Rh.forRoot(),W.XC,W.HK,W.bz,Wn.JX,he.kx,C.Xd,Hn.yi.forRoot(),mi.t8,W.IJ],u.ez,_.u5,_.UX,Mo.Rh,W.XC,W.HK,W.bz,Wn.JX,he.kx,C.Xd,Hn.yi,mi.t8,W.IJ,qe.b2]}),i})(),th=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Xt],imports:[[oe]]}),i})();const nh=["nitro-avatar-model-viewer-component",""],Ai=function(i){return{active:i}},wi=function(i){return{selected:i}};function ih(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",3),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectCategory(a.name)}),e._UZ(1,"i",4),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngClass",e.VKq(5,Ai,n.activeCategory===t)),e.xp6(1),e.Gre("icon ",t.name,"-icon"),e.Q6J("ngClass",e.VKq(7,wi,n.activeCategory===t))}}function oh(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ih,2,9,"button",2),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.categories.getValues())}}function rh(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectGender("M")}),e._UZ(2,"i",5),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectGender("F")}),e._UZ(4,"i",6),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Ai,"M"===t.gender)),e.xp6(1),e.Q6J("ngClass",e.VKq(6,wi,"M"===t.gender)),e.xp6(1),e.Q6J("ngClass",e.VKq(8,Ai,"F"===t.gender)),e.xp6(1),e.Q6J("ngClass",e.VKq(10,wi,"F"===t.gender))}}const sh=function(i,o){return{"col-6 pr-1":i,"flex-grow-1":o}};function ah(i,o){if(1&i&&(e.TgZ(0,"div",12),e._UZ(1,"div",13),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("ngClass",e.WLB(6,sh,t.maxPaletteCount>=2,t.maxPaletteCount<=1)),e.xp6(1),e.Q6J("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(0))("paletteIndex",0)("maxPaletteCount",t.maxPaletteCount)}}function ch(i,o){if(1&i&&(e.TgZ(0,"div",14),e._UZ(1,"div",13),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("model",t.model)("category",t.activeCategory)("paletteSet",t.activeCategory.getPalette(1))("paletteIndex",1)("maxPaletteCount",t.maxPaletteCount)}}function lh(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",7),e._UZ(2,"div",8),e.qZA(),e.TgZ(3,"div",9),e.YNc(4,ah,2,9,"div",10),e.YNc(5,ch,2,5,"div",11),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("model",t.model)("category",t.activeCategory)("partSet",t.activeCategory.parts),e.xp6(2),e.Q6J("ngIf",t.maxPaletteCount>=1),e.xp6(1),e.Q6J("ngIf",2===t.maxPaletteCount)}}let Oo=(()=>{class i{constructor(t){this._avatarEditorService=t,this.model=null,this.gender=null}ngOnChanges(t){this.prepareModel()}prepareModel(){!this.model||(this.model.setViewer(this),this.model.init(),this._activeCategory=null,this.selectFirstCategory())}selectFirstCategory(){if(this.model)for(const t of this.model.categories.getKeys())if(t)return void this.selectCategory(t)}selectCategory(t){if(!this.model||!t)return;const n=this.model.categories.getValue(t);if(n){n.init(),this._activeCategory=n;for(const r of this._activeCategory.parts)if(r&&r.isSelected){this.model.maxPaletteCount=r.colorLayerCount;break}}}selectGender(t){!this.model||!t||this._avatarEditorService.component&&(this._avatarEditorService.component.gender=t)}get categories(){return this.model.categories}get activeCategory(){return this._activeCategory}get canSetGender(){return this.model&&this.model.canSetGender}get maxPaletteCount(){return this.model&&this.model.maxPaletteCount||1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(sn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-avatar-model-viewer-component",""]],inputs:{model:"model",gender:"gender"},features:[e.TTD],attrs:nh,decls:4,vars:3,consts:[[1,"btn-group","w-100","my-1",2,"min-height","45px"],[4,"ngIf"],["type","button","class","btn btn-secondary d-flex justify-content-center align-items-center",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","d-flex","justify-content-center","align-items-center",3,"ngClass","click"],[3,"ngClass"],[1,"icon","male-icon",3,"ngClass"],[1,"icon","female-icon",3,"ngClass"],[1,"d-flex"],["nitro-avatar-set-viewer-component","",1,"w-100",3,"model","category","partSet"],[1,"d-flex","no-gutters","mt-1"],["class","d-flex flex-column",3,"ngClass",4,"ngIf"],["class","d-flex col-6 pl-1 flex-column",4,"ngIf"],[1,"d-flex","flex-column",3,"ngClass"],["nitro-avatar-palette-viewer-component","",3,"model","category","paletteSet","paletteIndex","maxPaletteCount"],[1,"d-flex","col-6","pl-1","flex-column"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,oh,2,1,"ng-container",1),e.YNc(2,rh,5,12,"ng-container",1),e.qZA(),e.YNc(3,lh,6,5,"ng-container",1)),2&t&&(e.xp6(1),e.Q6J("ngIf",n.categories.length>1),e.xp6(1),e.Q6J("ngIf",n.canSetGender),e.xp6(1),e.Q6J("ngIf",n.activeCategory))},encapsulation:2}),i})();const uh=["nitro-avatar-palette-viewer-component",""],_h=function(i){return{active:i}},gh=function(i){return{"background-color":i}};function dh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectPalette(a)}),e._UZ(1,"button",4),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(2,_h,t.isSelected))("ngStyle",e.VKq(4,gh,t.color))}}const mh=function(i,o){return{"grid-6":i,"grid-12":o}};let ph=(()=>{class i{constructor(){this.model=null,this.category=null,this.paletteSet=[],this.paletteIndex=-1,this.maxPaletteCount=1}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPalette(t){if(!(this.model&&this.category&&this.paletteSet&&t&&t&&this.model))return;const n=this.paletteSet.indexOf(t);-1!==n&&this.model.selectColor(this.category.name,n,this.paletteIndex)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-avatar-palette-viewer-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(C.Vv,5),2&t){let r;e.iGM(r=e.CRH())&&(n.perfectScrollBar=r.first)}},inputs:{model:"model",category:"category",paletteSet:"paletteSet",paletteIndex:"paletteIndex",maxPaletteCount:"maxPaletteCount"},features:[e.TTD],attrs:uh,decls:3,vars:5,consts:[[1,"grid-container","palette-grid",2,"min-height","84px","max-height","84px","height","84px"],[1,"grid-items",3,"ngClass"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-primary","detail-info",3,"ngClass","ngStyle"]],template:function(t,n){1&t&&(e.TgZ(0,"perfect-scrollbar",0),e.TgZ(1,"div",1),e.YNc(2,dh,2,6,"div",2),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.WLB(2,mh,n.maxPaletteCount>=2,n.maxPaletteCount<=1)),e.xp6(1),e.Q6J("ngForOf",n.paletteSet))},directives:[C.Vv,u.mk,u.sg,u.PC],encapsulation:2}),i})();const hh=["nitro-avatar-set-viewer-component",""];function fh(i,o){1&i&&e._UZ(0,"i",6)}const vh=function(i){return{active:i}},Th=function(i){return{"background-image":i}};function bh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectPart(a)}),e.TgZ(1,"button",4),e.YNc(2,fh,1,0,"i",5),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(3,vh,t.isSelected))("ngStyle",t.imageUrl&&e.VKq(5,Th,"url("+t.imageUrl+")")),e.xp6(1),e.Q6J("ngIf",t.isClear)}}let Ch=(()=>{class i{constructor(){this.model=null,this.category=null,this.partSet=[]}ngOnChanges(t){t.category&&this.perfectScrollBar&&this.perfectScrollBar.directiveRef&&this.perfectScrollBar.directiveRef.scrollToTop()}selectPart(t){if(!(this.model&&this.category&&this.partSet&&t))return;const n=this.partSet.indexOf(t);-1!==n&&this.model.selectPart(this.category.name,n)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-avatar-set-viewer-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(C.Vv,5),2&t){let r;e.iGM(r=e.CRH())&&(n.perfectScrollBar=r.first)}},inputs:{model:"model",category:"category",partSet:"partSet"},features:[e.TTD],attrs:hh,decls:3,vars:1,consts:[[1,"grid-container",2,"min-height","158px","max-height","158px","height","158px"],[1,"grid-items","grid-6"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button",1,"btn","btn-secondary","detail-info","has-image",3,"ngClass","ngStyle"],["class","fas fa-times h5 m-0",4,"ngIf"],[1,"fas","fa-times","h5","m-0"]],template:function(t,n){1&t&&(e.TgZ(0,"perfect-scrollbar",0),e.TgZ(1,"div",1),e.YNc(2,bh,3,7,"div",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",n.partSet))},directives:[C.Vv,u.sg,u.mk,u.PC,u.O5],encapsulation:2}),i})();const Eh=["nitro-avatar-wardrobe-component",""];function Sh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"button",8),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().updateLook(a+1)}),e._UZ(3,"i",5),e.qZA(),e.TgZ(4,"button",8),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().loadLook(a+1)}),e._UZ(5,"i",3),e.qZA(),e.qZA(),e.TgZ(6,"button",9),e._UZ(7,"div",10),e.qZA(),e.qZA()}if(2&i){const t=o.index,n=e.oxw();e.xp6(7),e.Q6J("figure",n.getLook(t+1))("direction",4)}}let Ah=(()=>{class i{constructor(t){this._avatarEditorService=t,this.maxServerPage=1,this.maxClientPage=2,this.looksPerClientPage=5,this.figureData=null,this._currentServerPage=1,this._currentClientPage=1,this._maxLoadedServerPage=1,this._looks=new Map,this._avatarEditorService.wardrobeComponent=this,this._requestLooks(this._currentServerPage)}previousPage(){1!==this._currentClientPage&&this._currentClientPage--}nextPage(){if(this._currentClientPage!==this.maxClientPage&&(this._currentClientPage++,(this._currentClientPage-1)%2==0&&this._currentServerPage<this.maxServerPage)){if(this._currentServerPage++,this._currentServerPage<this._maxLoadedServerPage)return;this._maxLoadedServerPage=this._currentServerPage,this._requestLooks(this._currentServerPage)}}getLook(t){const n=this.getRealIndex(t);return this._looks.has(n)?this._looks.get(n)[0]:null}setLook(t,n,r){this._looks.set(t,[n,r])}updateLook(t){const n=this.getRealIndex(t);this._looks.set(n,[this._avatarEditorService.currentEditorLook,this._avatarEditorService.currentEditorGender]),this._avatarEditorService.setWardrobeSlot(n)}loadLook(t){const n=this.getRealIndex(t);if(!this._looks.has(n))return;const r=this._looks.get(n);this._avatarEditorService.loadAvatarInEditor(r[0],r[1])}counter(){return new Array(this.looksPerClientPage)}getRealIndex(t){return t+(this._currentClientPage-1)*this.looksPerClientPage}_requestLooks(t){this._avatarEditorService.requestWardrobePage(t)}get currentPage(){return this._currentClientPage}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(sn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-avatar-wardrobe-component",""]],inputs:{figureData:"figureData"},attrs:Eh,decls:8,vars:3,consts:[[1,"d-flex","flex-row","justify-content-between"],[1,"d-flex"],[1,"btn","btn-secondary","btn-sm","h-100",3,"disabled","click"],[1,"fas","fa-chevron-left"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-row"],[1,"d-flex","flex-column"],[1,"btn","btn-secondary","btn-sm","h-100",3,"click"],[1,"btn","btn-secondary","btn-sm"],["nitro-avatar-image","",1,"d-flex","justify-content-center","nitro-avatar-image",3,"figure","direction"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.previousPage()}),e._UZ(3,"i",3),e.qZA(),e.qZA(),e.YNc(4,Sh,8,2,"div",4),e.TgZ(5,"div",1),e.TgZ(6,"button",2),e.NdJ("click",function(){return n.nextPage()}),e._UZ(7,"i",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("disabled",1===n.currentPage),e.xp6(2),e.Q6J("ngForOf",n.counter()),e.xp6(2),e.Q6J("disabled",n.currentPage===n.maxClientPage))},directives:[u.sg,He],encapsulation:2}),i})(),wh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[sn],imports:[[oe]]}),i})();e.B6R(no,[u.O5,b,v,u.sg,u.mk,Oo,He,Ah],[m]),e.B6R(Oo,[u.O5,u.sg,u.mk,Ch,ph],[]);let xh=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[eo],imports:[[oe]]}),i})(),Zh=(()=>{class i{constructor(t,n){this._catalogService=t,this._ngZone=n}hide(){this._catalogService.component&&this._catalogService.component.setInsufficientFunds(!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-confirm-purchase-insufficient-funds"]],decls:16,vars:10,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-purchase-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body"],[1,"d-flex","flex-grow-1","flex-column","justify-content-center","p-2"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.hide()}),e._UZ(5,"i",3),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"div",7),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.hide()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!0),e.xp6(2),e.hij(" ",e.lcZ(3,4,"catalog.alert.notenough.title")," "),e.xp6(7),e.Oqu(e.lcZ(10,6,"catalog.alert.notenough.credits.description")),e.xp6(5),e.Oqu(e.lcZ(15,8,"catalog.purchase_confirmation.cancel")))},directives:[b,v],pipes:[m],encapsulation:2}),i})();const Ih=["imageElement"];function yh(i,o){if(1&i&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("X ",t.quantity,"")}}function Rh(i,o){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"div",21),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("type",-1),e.xp6(1),e.hij(" ",t.costCredits," ")}}function Mh(i,o){1&i&&(e.TgZ(0,"p",22),e._uU(1,"+"),e.qZA())}function Oh(i,o){if(1&i&&(e.TgZ(0,"div",20),e._UZ(1,"div",21),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("type",t.pointsType),e.xp6(1),e.hij(" ",t.costPoints," ")}}const Uh=function(i){return{"background-image":i}};let Nh=(()=>{class i{constructor(t,n){this._catalogService=t,this._ngZone=n,this.page=null,this.offer=null,this.giftOffer=null,this.quantity=1,this.extra=null,this.completed=!1,this._imageUrl=""}ngOnChanges(t){const r=t.offer.currentValue;r&&t.offer.previousValue!==r&&this.refresh()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this._catalogService.component&&this._catalogService.component.roomPreviewer;if(!t)return;const n=t.getRoomPreviewObject();if(n){const r=n.visualization.getImage(16711680,-1),a=s.Oau.generateImage(r);a&&(this._imageUrl=a.src)}})}purchase(){this.giftOffer?this._catalogService.component&&this._catalogService.component.makeGiftConfiguratorVisible():this._catalogService.purchase(this.page,this.offer,this.quantity,this.extra)}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const n=t.getBoundingClientRect(),r=new s.Pdl(t,n.x,n.y);r.iconName=s.V3W.INVENTORY,s.wjX.instance.roomEngine.events.dispatchEvent(r)})}get costCredits(){return this.offer.priceCredits*this.quantity}get costPoints(){return this.offer.priceActivityPoints*this.quantity}get pointsType(){return this.offer.priceActivityPointsType}get imageUrl(){return this._imageUrl}getOfferTitle(){const t=this.offer.localizationId,n=s.wjX.instance.sessionDataManager.getProductData(t);return n?n.name:t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-confirm-purchase-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ih,5),2&t){let r;e.iGM(r=e.CRH())&&(n.imageElement=r.first)}},inputs:{page:"page",offer:"offer",giftOffer:"giftOffer",quantity:"quantity",extra:"extra",completed:"completed"},features:[e.TTD],decls:27,vars:18,consts:[[1,"nitro-catalog-confirm-purchase-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"row","p-3"],[1,"col-6","d-flex","flex-column"],[1,"product-preview","bg-secondary","rounded",3,"ngStyle"],["imageElement",""],[1,"col-6","d-flex","flex-column","align-items-center","justify-content-center"],[1,"offer-name"],["class","offer-quantity",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","w-100"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"offer-quantity"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e._UZ(9,"div",7,8),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e.YNc(14,yh,2,1,"div",11),e.TgZ(15,"div",12),e.YNc(16,Rh,3,2,"div",13),e.YNc(17,Mh,2,0,"p",14),e.YNc(18,Oh,3,2,"div",13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",15),e.TgZ(20,"div",16),e.TgZ(21,"button",17),e.NdJ("click",function(){return n.hide()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"button",18),e.NdJ("click",function(){return n.purchase()}),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!0),e.xp6(3),e.Oqu(e.lcZ(4,10,null!=n.giftOffer?"catalog.purchase_confirmation.gift.title":"catalog.purchase_confirmation.title")),e.xp6(6),e.Q6J("ngStyle",e.VKq(16,Uh,"url("+n.imageUrl+")")),e.xp6(4),e.Oqu(n.getOfferTitle()),e.xp6(1),e.Q6J("ngIf",n.quantity),e.xp6(2),e.Q6J("ngIf",n.costCredits),e.xp6(1),e.Q6J("ngIf",n.costCredits&&n.costPoints),e.xp6(1),e.Q6J("ngIf",n.costPoints),e.xp6(4),e.Oqu(e.lcZ(23,12,"catalog.purchase_confirmation.cancel")),e.xp6(3),e.Oqu(e.lcZ(26,14,null!=n.giftOffer?"catalog.purchase_confirmation.gift":"catalog.purchase_confirmation.buy")))},directives:[b,v,u.PC,u.O5,Dn],pipes:[m],encapsulation:2}),i})();function qh(i,o){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e._UZ(2,"img",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("",t.subscription.priceCredits," "),e.xp6(1),e.Q6J("src",t.getCurrencyUrl(-1),e.LSH)}}function Lh(i,o){if(1&i&&(e.TgZ(0,"p",13),e._uU(1),e._UZ(2,"img",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" + ",t.subscription.priceActivityPoints," "),e.xp6(1),e.Q6J("src",t.getCurrencyUrl(t.subscription.priceActivityPointsType),e.LSH)}}let kh=(()=>{class i{constructor(t,n){this._catalogService=t,this._ngZone=n,this.subscription=null}getSubscriptionText(){let t=s.wjX.instance.localization.getValue("catalog.vip.buy.confirm.end_date");return t=t.replace("%month%",this.subscription.month.toString()),t=t.replace("%day%",this.subscription.day.toString()),t=t.replace("%year%",this.subscription.year.toString()),t}getSubscriptionHeader(){const t=this._catalogService.purse,r=0==this.subscription.months?"days":"months",c=s.wjX.instance.localization.getValue("catalog.vip.buy.confirm."+(t.clubDays>0||t.clubPeriods>0?"extension.":"subscription.")+r),l=0==this.subscription.months?this.subscription.extraDays:this.subscription.months;return c.replace("%NUM_"+r.toUpperCase()+"%",l.toString())}getCurrencyUrl(t){return s.wjX.instance.getConfiguration("currency.asset.icon.url").replace("%type%",t.toString())}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}purchase(){this._catalogService.purchaseById(this._catalogService.activePage.pageId,this.subscription.offerId,1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-confirm-vip-subscription-component"]],inputs:{subscription:"subscription"},decls:24,vars:14,consts:[["dragHandle",".card-header",1,"card","nitro-catalog-confirm-vip-subscription-component",3,"bringToTop","draggable","center"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","card-body","flex-row"],[1,"icon","icon-catalogue-hc_big"],[1,"ml-3"],[1,"d-flex","align-items-center","justify-content-center","bg-secondary","rounded","p-1"],["class","mb-0",4,"ngIf"],[1,"card-footer"],[1,"d-flex","justify-space-between","button-container","btn-group"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"mb-0"],["image-placeholder","",1,"px-1",3,"src"],["image-placeholder","",1,"pl-1",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.hide()}),e._UZ(5,"i",3),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"i",5),e.TgZ(8,"div",6),e.TgZ(9,"h6"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"div",7),e.YNc(14,qh,3,2,"p",8),e.YNc(15,Lh,3,2,"p",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"div",10),e.TgZ(18,"button",11),e.NdJ("click",function(){return n.hide()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",12),e.NdJ("click",function(){return n.purchase()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!0),e.xp6(2),e.hij(" ",e.lcZ(3,8,"catalog.club.buy.confirm")," "),e.xp6(8),e.Oqu(n.getSubscriptionHeader()),e.xp6(2),e.Oqu(n.getSubscriptionText()),e.xp6(2),e.Q6J("ngIf",n.subscription.priceCredits),e.xp6(1),e.Q6J("ngIf",n.subscription.priceActivityPoints),e.xp6(4),e.Oqu(e.lcZ(20,10,"catalog.purchase_confirmation.cancel")),e.xp6(3),e.Oqu(e.lcZ(23,12,"catalog.club.buy.subscribe")))},directives:[b,v,u.O5,le],pipes:[m],encapsulation:2}),i})();function Fh(i,o){if(1&i&&e._UZ(0,"div",32),2&i){const t=e.oxw();e.Q6J("headOnly",!0)("direction",2)("figure",t.habboFace)}}function Dh(i,o){1&i&&e._UZ(0,"div",33)}function Ph(i,o){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.priceText)}}const Jh=function(i){return{backgroundColor:i,height:"40px"}};function jh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectTypeId(a)}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("disabled",!n.hasColors)("ngStyle",e.VKq(2,Jh,n.getColor(t)))}}function Vh(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideUsernameDialog()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",36),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",37),e.TgZ(12,"div",38),e.TgZ(13,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideUsernameDialog()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,3,"catalog.gift_wrapping.receiver_not_found.title")),e.xp6(6),e.Oqu(e.lcZ(10,5,"catalog.gift_wrapping.receiver_not_found.info")),e.xp6(5),e.Oqu(e.lcZ(15,7,"generic.ok")))}const Bh=function(i){return{"is-unavailable":i}};let Gh=(()=>{class i{constructor(t,n){this._catalogService=t,this._ngZone=n,this.visible=!1,this.showUsernameErrorDialog=!1,this.receiverName="",this.message="",this.showFace=!0,this.habboFace="",this.hasColors=!1,this.boxSpriteId=-1,this.extras="",this._stuffColors=new Map,t.giftConfiguratorComponent=this;const r=this._catalogService.giftWrapperConfiguration,a=r.defaultStuffTypes;if(a.length>0){const c=Math.floor(Math.random()*a.length);this._defaultStuffType=a[c]}this._stuffTypes=r.stuffTypes,this._boxTypes=r.boxTypes,this._boxTypes.push(this._defaultStuffType),this._ribbonTypes=r.ribbonTypes,this._boxPrice=r.price,this._selectedTypeId=this._stuffTypes[2],this._ribbonIndex=this._ribbonTypes[0],this._boxIndex=0,this.updateIndexesAndSetUI(),this.loadColors()}get colors(){return this._stuffTypes}handleButton(t){switch(t){case"previous_box":this._boxIndex--,this.updateIndexesAndSetUI();break;case"next_box":this._boxIndex++,this.updateIndexesAndSetUI();break;case"previous_ribbon":this._ribbonIndex--,this.updateIndexesAndSetUI();break;case"next_ribbon":this._ribbonIndex++,this.updateIndexesAndSetUI();break;case"give_gift":this.giveGift()}}changeCheckbox(t){this.updateIndexesAndSetUI()}get isDefaultBox(){return this._isDefaultBox()}hide(){this._catalogService.component&&this._catalogService.component.hidePurchaseConfirmation()}getColor(t){return`#${this._stuffColors.get(t).toString(16)}`}typeHasColors(t){return this._stuffColors.has(t)}selectTypeId(t){this._selectedTypeId=t,this.updateIndexesAndSetUI()}hideUsernameDialog(){this.showUsernameErrorDialog=!1}showUsernameNotFoundDialog(){this._ngZone.run(()=>this.showUsernameErrorDialog=!0)}loadColors(){for(const t of this._stuffTypes){const n=s.wjX.instance.sessionDataManager.getFloorItemData(t);!n||n.colors&&n.colors.length>0&&this._stuffColors.set(t,n.colors[0])}}updateIndexesAndSetUI(){this._ribbonIndex<0&&(this._ribbonIndex=this._ribbonTypes.length-1),this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0),this._boxIndex<0&&(this._boxIndex=this._boxTypes.length-1),this._boxIndex>this._boxTypes.length-1&&(this._boxIndex=0);const t=this._boxTypes[this._boxIndex];8==t&&(this._ribbonIndex=10,this._ribbonIndex>this._ribbonTypes.length-1&&(this._ribbonIndex=0));let n=(1e3*t+this._ribbonTypes[this._ribbonIndex]).toString(),r=this._selectedTypeId;this._isDefaultBox()?(this.setHasColors(!1),r=this._defaultStuffType,n=""):8==t?this.setHasColors(!1):(this.setHasColors(!0),t>=3&&t<=6&&this.setHasColors(!1)),this.extras=n,this.boxSpriteId=r,this.setBoxTitles(),this.habboFace=s.wjX.instance.sessionDataManager.figure}setHasColors(t){this.hasColors=t}setBoxTitles(){const t=this._isDefaultBox(),r=t?"catalog.gift_wrapping_new.freeprice":"catalog.gift_wrapping_new.price",a="catalog.gift_wrapping_new.ribbon."+this._ribbonIndex;this.boxText=s.wjX.instance.localization.getValue(t?"catalog.gift_wrapping_new.box.default":"catalog.gift_wrapping_new.box."+this._boxTypes[this._boxIndex]),this.priceText=s.wjX.instance.localization.getValueWithParameter(r,"price",this._boxPrice.toString()),this.ribbonText=s.wjX.instance.localization.getValue(a)}giveGift(){if(!this.receiverName||0==this.receiverName.trim().length)return;const t=this.receiverName,n=this.message,r=this._isDefaultBox();this._catalogService.purchaseGiftOffer(this._catalogService.component.activePage,this._catalogService.component.activeOffer,this._catalogService.component.purchaseOfferExtra,t,n,r?this._defaultStuffType:this._selectedTypeId,r?0:this._boxTypes[this._boxIndex],r?0:this._ribbonTypes[this._ribbonIndex],this.showFace)}_isDefaultBox(){return this._boxTypes[this._boxIndex]==this._defaultStuffType}ngOnDestroy(){this._catalogService.giftConfiguratorComponent=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-customize-gift-component"]],inputs:{visible:"visible"},decls:56,vars:37,consts:[[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","mt-2"],["nitro-avatar-image","",3,"headOnly","direction","figure",4,"ngIf"],["class","ingognito",4,"ngIf"],[1,"d-flex","flex-grow-1"],[1,"form-control","w-200",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-center","align-items-center","mt-2"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange","change"],[1,"form-check-label"],[1,"d-flex","justify-content-center","mt-2"],["nitro-furniture-image","",1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded",2,"width","100px","height","100px",3,"type","spriteId","extras"],[1,"d-flex","flex-column","flex-grow-1","ml-2"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-chevron-left"],[1,"fas","fa-chevron-right"],[1,"d-flex","flex-column","ml-2"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[3,"ngClass"],[1,"d-flex","flex-column","mt-2"],[1,"btn-group","w-100"],["class","btn btn-sm btn-primary",3,"disabled","ngStyle","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],["class","nitro-catalog-customize-gift-component card",3,"bringToTop","draggable",4,"ngIf"],["nitro-avatar-image","",3,"headOnly","direction","figure"],[1,"ingognito"],[1,"btn","btn-sm","btn-primary",3,"disabled","ngStyle","click"],[1,"nitro-catalog-customize-gift-component","card",3,"bringToTop","draggable"],[1,"row","p-3"],[1,"row","align-items-end","pt-0","px-3","pb-3"],[1,"col","btn-group"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(a){return n.receiverName=a}),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,Fh,1,3,"div",8),e.YNc(12,Dh,1,0,"div",9),e.TgZ(13,"div",10),e.TgZ(14,"textarea",11),e.NdJ("ngModelChange",function(a){return n.message=a}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"div",13),e.TgZ(17,"input",14),e.NdJ("ngModelChange",function(a){return n.showFace=a})("change",function(a){return n.changeCheckbox(a)}),e.qZA(),e.TgZ(18,"label",15),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",16),e._UZ(22,"div",17),e.TgZ(23,"div",18),e.TgZ(24,"div",19),e.TgZ(25,"button",20),e.NdJ("click",function(){return n.handleButton("previous_box")}),e._UZ(26,"i",21),e.qZA(),e.TgZ(27,"button",20),e.NdJ("click",function(){return n.handleButton("next_box")}),e._UZ(28,"i",22),e.qZA(),e.TgZ(29,"div",23),e.TgZ(30,"span"),e._uU(31),e.qZA(),e.YNc(32,Ph,2,1,"span",24),e.qZA(),e.qZA(),e.TgZ(33,"div",19),e.TgZ(34,"button",25),e.NdJ("click",function(){return n.handleButton("previous_ribbon")}),e._UZ(35,"i",21),e.qZA(),e.TgZ(36,"button",25),e.NdJ("click",function(){return n.handleButton("next_ribbon")}),e._UZ(37,"i",22),e.qZA(),e.TgZ(38,"div",23),e.TgZ(39,"span",26),e._uU(40),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",27),e.TgZ(42,"span"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"div",28),e.YNc(46,jh,1,4,"button",29),e.qZA(),e.qZA(),e.TgZ(47,"div",7),e.TgZ(48,"div",28),e.TgZ(49,"button",20),e.NdJ("click",function(){return n.hide()}),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"button",30),e.NdJ("click",function(){return n.handleButton("give_gift")}),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(55,Vh,16,9,"div",31)),2&t&&(e.Q6J("center",!0),e.xp6(3),e.Oqu(e.lcZ(4,23,"catalog.gift_wrapping.title")),e.xp6(5),e.s9C("placeholder",e.lcZ(9,25,"catalog.gift_wrapping.receiver")),e.Q6J("ngModel",n.receiverName),e.xp6(3),e.Q6J("ngIf",n.showFace),e.xp6(1),e.Q6J("ngIf",!n.showFace),e.xp6(2),e.Q6J("ngModel",n.message),e.xp6(3),e.Q6J("ngModel",n.showFace),e.xp6(2),e.Oqu(e.lcZ(20,27,"catalog.gift_wrapping.show_face.title")),e.xp6(3),e.Q6J("type","s")("spriteId",n.boxSpriteId)("extras",n.extras),e.xp6(9),e.Oqu(n.boxText),e.xp6(1),e.Q6J("ngIf",n.priceText&&n.priceText.length>0),e.xp6(2),e.Q6J("disabled",n.isDefaultBox),e.xp6(2),e.Q6J("disabled",n.isDefaultBox),e.xp6(3),e.Q6J("ngClass",e.VKq(35,Bh,n.isDefaultBox)),e.xp6(1),e.Oqu(n.ribbonText),e.xp6(3),e.Oqu(e.lcZ(44,29,"catalog.gift_wrapping.pick_color")),e.xp6(3),e.Q6J("ngForOf",n.colors),e.xp6(4),e.Oqu(e.lcZ(51,31,"catalog.purchase_confirmation.cancel")),e.xp6(3),e.Oqu(e.lcZ(54,33,"catalog.gift_wrapping.give_gift")),e.xp6(2),e.Q6J("ngIf",n.showUsernameErrorDialog))},directives:[b,v,_.Fj,_.JJ,_.On,u.O5,_.Wl,Hi,u.mk,u.sg,He,u.PC],pipes:[m],encapsulation:2}),i})();function Hh(i,o){if(1&i&&e._UZ(0,"nitro-catalog-navigation-item-component",3),2&i){const t=e.oxw().$implicit;e.Q6J("catalogPage",t)}}function Wh(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Hh,1,1,"nitro-catalog-navigation-item-component",2),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.visible)}}let xi=(()=>{class i{constructor(t){this._catalogService=t,this.catalogPage=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-navigation-set-component"]],inputs:{catalogPage:"catalogPage"},decls:2,vars:1,consts:[[1,"list-group","list-group-flush"],[4,"ngFor","ngForOf"],[3,"catalogPage",4,"ngIf"],[3,"catalogPage"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,Wh,2,1,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.catalogPage.children))},encapsulation:2}),i})();const Qh=function(i,o){return{"fa-sort-down":i,"fa-sort-up":o}};function Xh(i,o){if(1&i&&e._UZ(0,"i",8),2&i){const t=e.oxw();e.Q6J("ngClass",e.WLB(1,Qh,!t.isToggled,t.isToggled))}}function Yh(i,o){if(1&i&&e._UZ(0,"nitro-catalog-navigation-set-component",9),2&i){const t=e.oxw();e.Q6J("catalogPage",t.catalogPage)}}const zh=function(i){return{"bg-dark":i}};let Kh=(()=>{class i{constructor(t){this._catalogService=t,this.catalogPage=null}selectPage(){this.isActive&&this._catalogService.manuallyCollapsePage(this.catalogPage),this._catalogService.component&&this._catalogService.component.selectPage(this.catalogPage)}get activePage(){return this._catalogService.activePage}get activePageData(){return this._catalogService.activePageData}get isDescendant(){return this._catalogService.isDescendant(this.catalogPage,this.activePageData)}get isActive(){return this.catalogPage.pageId===(this.activePage&&this.activePage.pageId)||this.isDescendant}get isCollapsed(){return this._catalogService.manuallyCollapsed.indexOf(this.catalogPage)>=0}get isToggled(){return!this.isCollapsed&&!!this.isActive}get iconUrl(){return s.wjX.instance.getConfiguration("catalog.asset.icon.url").replace("%name%",(this.catalogPage.icon||0).toString())}get isInSearchView(){return this._catalogService.searchResults instanceof s.n3O}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-navigation-item-component"]],inputs:{catalogPage:"catalogPage"},decls:9,vars:7,consts:[[1,"nav-item"],[1,"d-flex","list-group-item","align-items-center","bg-secondary","rounded","mb-1","overflow-hidden",3,"ngClass","click"],[1,"d-flex","flex-grow-1"],[1,"icon-container"],[1,"icon",3,"src"],[1,"flex-grow-1","mb-0","w-100","text-nowrap"],["class","fas",3,"ngClass",4,"ngIf"],[3,"catalogPage",4,"ngIf"],[1,"fas",3,"ngClass"],[3,"catalogPage"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"li",1),e.NdJ("click",function(){return n.selectPage()}),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"p",5),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,Xh,1,4,"i",6),e.qZA(),e.YNc(8,Yh,1,1,"nitro-catalog-navigation-set-component",7),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(5,zh,n.isActive)),e.xp6(3),e.Q6J("src",n.iconUrl,e.LSH),e.xp6(2),e.Oqu(n.catalogPage.localization),e.xp6(1),e.Q6J("ngIf",!n.isInSearchView&&n.catalogPage.children&&n.catalogPage.children.length),e.xp6(1),e.Q6J("ngIf",!n.isInSearchView&&n.isToggled&&n.catalogPage.children&&n.catalogPage.children.length>0))},directives:[u.mk,u.O5,xi],encapsulation:2}),i})();const $h=["nitro-catalog-navigation-component",""];function ef(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"i",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().clearResults()}),e.qZA()}}let tf=(()=>{class i{constructor(t){this._catalogService=t,this.searchControl=new _.NI}ngOnInit(){this.subscribe()}ngOnDestroy(){this.unsubscribe()}subscribe(){this.unsubscribe(),this._subscription=this.searchControl.valueChanges.pipe((0,Fi.x)(),(0,ki.b)(500)).subscribe(t=>this.search(t))}unsubscribe(){!this._subscription||(this._subscription.unsubscribe(),this._subscription=null)}search(t){if(!t||!t.length)return void this._catalogService.clearSearchResults();t=t.toLocaleLowerCase();const n=s.wjX.instance.sessionDataManager.getAllFurnitureData(this);if(!n)return;const r=[];for(const a of n){const c=this._catalogService.getOfferPages(a.purchaseOfferId),l=this._catalogService.getOfferPages(a.rentOfferId);if((c||l)&&-1!==[a.className,a.name,a.description].join(" ").toLocaleLowerCase().indexOf(t)&&(r.push(a),200===r.length))break}this._catalogService.component.handleSearchResults(r)}loadFurnitureData(){}get hasSearchResults(){return this._catalogService.activePage instanceof kn}get catalogPage(){return this._catalogService.component&&this._catalogService.component.activeTab||null}get searchResults(){return this._catalogService.searchResults}clearResults(){this._catalogService.clearSearchResults(),this.searchControl.setValue("")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-catalog-navigation-component",""]],attrs:$h,decls:7,vars:6,consts:[[1,"nitro-catalog-navigation-component","overflow-hidden"],[1,"btn-group","rounded","bg-secondary","mb-1","w-100"],["type","text",1,"form-control","form-control-sm","bg-secondary","rounded","border-0","shadow-none","text-white",3,"placeholder","formControl"],["class","d-flex justify-content-center align-items-center mr-2 fas fa-times-circle",3,"click",4,"ngIf"],[2,"min-height","463px","max-height","463px","height","463px"],[3,"catalogPage"],[1,"d-flex","justify-content-center","align-items-center","mr-2","fas","fa-times-circle",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"input",2),e.ALo(3,"translate"),e.YNc(4,ef,1,0,"i",3),e.qZA(),e.TgZ(5,"perfect-scrollbar",4),e._UZ(6,"nitro-catalog-navigation-set-component",5),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.s9C("placeholder",e.lcZ(3,4,"catalog.search")),e.Q6J("formControl",n.searchControl),e.xp6(2),e.Q6J("ngIf",n.searchControl.value),e.xp6(2),e.Q6J("catalogPage",n.searchResults||n.catalogPage))},directives:[_.Fj,_.JJ,_.oH,u.O5,C.Vv,xi],pipes:[m],encapsulation:2}),i})();const nf=["nitro-catalog-purchase-component",""];function of(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"p",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",14),e.TgZ(5,"div",15),e.TgZ(6,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).decrease()}),e._UZ(7,"i",17),e.qZA(),e.qZA(),e.TgZ(8,"input",18),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw(2).quantity=r}),e.qZA(),e.TgZ(9,"div",19),e.TgZ(10,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).increase()}),e._UZ(11,"i",20),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,3,"catalog.bundlewidget.quantity")),e.xp6(6),e.Q6J("ngModel",t.quantity)("max",t.maxQuantity)}}function rf(i,o){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("type",-1),e.xp6(1),e.hij(" ",t.costCredits," ")}}function sf(i,o){1&i&&(e.TgZ(0,"div",23),e._uU(1,"+"),e.qZA())}function af(i,o){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("type",t.pointsType),e.xp6(1),e.hij(" ",t.costPoints," ")}}function cf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).purchase(!0)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"catalog.purchase_confirmation.gift")))}const lf=function(i,o){return{"flex-column h-100 ":i,"justify-content-between":o}},Uo=function(i){return[i]},uf=function(i){return{"justify-content-end":i}};function _f(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.YNc(1,of,12,5,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div",4),e.TgZ(4,"p",5),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,rf,3,2,"div",7),e.YNc(9,sf,2,0,"div",8),e.YNc(10,af,3,2,"div",7),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().purchase()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,cf,3,3,"button",11),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.WLB(15,lf,t.vertical,t.quantityEnabled)),e.xp6(1),e.Q6J("ngIf",t.quantityEnabled),e.xp6(1),e.Q6J("ngClass",e.VKq(18,Uo,t.vertical||t.quantityEnabled?"flex-column justify-content-end h-100":"justify-content-between w-100")),e.xp6(1),e.Q6J("ngClass",e.VKq(20,uf,t.vertical)),e.xp6(2),e.Oqu(e.lcZ(6,11,"catalog.bundlewidget.price")),e.xp6(3),e.Q6J("ngIf",t.costCredits),e.xp6(1),e.Q6J("ngIf",t.costCredits&&t.costPoints),e.xp6(1),e.Q6J("ngIf",t.costPoints),e.xp6(1),e.Q6J("ngClass",e.VKq(22,Uo,t.vertical?"flex-column":"")),e.xp6(2),e.Oqu(e.lcZ(14,13,"buy")),e.xp6(2),e.Q6J("ngIf",t.isGiftable)}}let Sn=(()=>{class i{constructor(t){this._catalogService=t,this.activePage=null,this.activeOffer=null,this.quantityEnabled=!1,this.vertical=!1,this.quantity=1,this.forcedExtra=null}ngOnChanges(t){if(!t.activeOffer)return;const r=t.activeOffer.currentValue;r&&r!==t.activeOffer.previousValue&&this.resetOffer()}resetOffer(){this.quantity=1}purchase(t=!1){this._catalogService.component&&this._catalogService.component.confirmPurchase(this.activePage,this.activeOffer,this.quantity,this.extra,t)}increase(){this.quantity>=this.maxQuantity||this.quantity++}decrease(){this.quantity--,this.quantity<1&&(this.quantity=1)}get costCredits(){return this.activeOffer.priceCredits*this.quantity}get costPoints(){return this.activeOffer.priceActivityPoints*this.quantity}get pointsType(){return this.activeOffer.priceActivityPointsType}get extra(){return this.forcedExtra?this.forcedExtra:this.activeOffer.products[0]&&this.activeOffer.products[0].extraParam}get maxQuantity(){return 99}get isGiftable(){return this.activeOffer.giftable}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-catalog-purchase-component",""]],inputs:{activePage:"activePage",activeOffer:"activeOffer",quantityEnabled:"quantityEnabled",vertical:"vertical",forcedExtra:"forcedExtra"},features:[e.TTD],attrs:nf,decls:1,vars:1,consts:[["class","d-flex w-100",3,"ngClass",4,"ngIf"],[1,"d-flex","w-100",3,"ngClass"],["class","d-flex flex-column justify-content-end mr-3 quantity-area",4,"ngIf"],[1,"d-flex",3,"ngClass"],[1,"d-flex","flex-column","justify-content-center","align-items-end","price-area",3,"ngClass"],[1,"mb-0"],[1,"d-flex","mb-1"],["class","d-flex align-items-center mb-0",4,"ngIf"],["class","mx-2 mb-0",4,"ngIf"],[1,"d-flex","btn-group",3,"ngClass"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],[1,"d-flex","flex-column","justify-content-end","mr-3","quantity-area"],[1,"mb-1"],[1,"d-flex","input-group"],[1,"input-group-prepend"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["type","number","min","1",1,"form-control","form-control-sm",3,"ngModel","max","ngModelChange"],[1,"input-group-append"],[1,"fas","fa-arrow-right"],[1,"d-flex","align-items-center","mb-0"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"mx-2","mb-0"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,n){1&t&&e.YNc(0,_f,16,24,"div",0),2&t&&e.Q6J("ngIf",!n.activeOffer.products[0].uniqueLimitedItem||n.activeOffer.products[0].uniqueLimitedItemsLeft>0)},directives:[u.O5,u.mk,_.qQ,_.wV,_.Fd,_.Fj,_.JJ,_.On,Dn],pipes:[m],encapsulation:2}),i})(),gf=(()=>{class i{constructor(t){this._catalogService=t,this.localization=null,this.voucherCode=""}ngOnInit(){}redeem(){this._catalogService.redeemVoucher(this.voucherCode),this.voucherCode=""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de))},i.\u0275cmp=e.Xpm({type:i,selectors:[["redeem-voucher-component"]],inputs:{localization:"localization"},decls:7,vars:5,consts:[[1,"d-flex","flex-column","justify-content-center"],[1,"input-group"],["type","text",1,"form-control","form-control-sm",3,"ngModel","placeholder","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(a){return n.voucherCode=a}),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return n.redeem()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.s9C("placeholder",n.localization.texts[1]),e.Q6J("ngModel",n.voucherCode),e.xp6(3),e.Oqu(e.lcZ(6,3,"redeem")))},directives:[_.Fj,_.JJ,_.On],pipes:[m],encapsulation:2}),i})();const df=["imageElement"];function mf(i,o){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e.ALo(2,"uniqueNumber"),e._UZ(3,"div",22),e.ALo(4,"uniqueNumber"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.offer.stuffData.uniqueNumber),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.lcZ(4,4,t.offer.stuffData.uniqueSeries),e.oJD)}}const pf=function(i){return{"background-image":i}};let hf=(()=>{class i{constructor(t,n,r,a){this._catalogService=t,this._marketplaceService=n,this._inventoryFurniService=r,this._ngZone=a,this._imageUrl=""}ngOnChanges(t){const r=t.offer.currentValue;r&&t.offer.previousValue!==r&&this.refresh()}hide(){this._marketplaceService.buyOffer(null)}refresh(){this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{var t,n;this._imageUrl="";const r=this.offer;let a;if(a=1===this.offer.furniType?s.wjX.instance.roomEngine.getFurnitureFloorImage(r.furniId,new s.UJ(90,0,0),64,this,4293848814,null===(t=this.offer.extraData)||void 0===t?void 0:t.toString()):s.wjX.instance.roomEngine.getFurnitureWallImage(r.furniType,new s.UJ(90,0,0),64,this,4293848814,null===(n=this.offer.extraData)||void 0===n?void 0:n.toString()),a){const c=a.getImage();c&&this._ngZone.run(()=>this._imageUrl=c.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const n=t.getBoundingClientRect(),r=new s.Pdl(t,n.x,n.y);r.iconName=s.V3W.INVENTORY,s.wjX.instance.roomEngine.events.dispatchEvent(r)})}imageReady(t,n,r){if(n){if(r)return void this._ngZone.run(()=>this._imageUrl=r.src);if(n){const a=s.Oau.generateImageUrl(n);a&&this._ngZone.run(()=>this._imageUrl=a)}}}get costCredits(){return this.offer.price}imageFailed(t){}get imageUrl(){return this._imageUrl}getFurniTitle(){const t=this.offer;return s.wjX.instance.localization.getValue(2==t.furniType?"wallItem.name."+t.furniId:"roomItem.name."+t.furniId)}getFurniDescription(){const t=this.offer;return s.wjX.instance.localization.getValue(2==t.furniType?"wallItem.desc."+t.furniId:"roomItem.desc."+t.furniId)}getAveragePrice(){let t=s.wjX.instance.localization.getValue("catalog.marketplace.offer_details.average_price");const n=0==this.offer.averagePrice?" - ":this.offer.averagePrice.toString();return t=t.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString()),t=t.replace("%average%",n),t}getOfferCount(){return s.wjX.instance.localization.getValueWithParameter("catalog.marketplace.offer_details.offer_count","count",this.offer.offerCount.toString())}buy(){this._marketplaceService.buyMarketplaceOffer(this.offer.offerId)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(We),e.Y36(En),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-catalog-confirm-marketplace-purchase-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(df,5),2&t){let r;e.iGM(r=e.CRH())&&(n.imageElement=r.first)}},inputs:{offer:"offer"},features:[e.TTD],decls:35,vars:20,consts:[[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"badge","badge-secondary","d-flex","align-items-center","justify-content-center","text-wrap","mb-2","w-100"],["nitro-currency-icon","",1,"mr-1",2,"width","20px","height","20px",3,"type"],[1,"badge","badge-secondary","badge-sm","text-wrap","mr-2","w-100"],[1,"badge","badge-secondary","badge-sm","text-wrap","w-100","d-flex"],[1,"align-self-center","w-100"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.YNc(10,mf,5,6,"div",8),e._UZ(11,"div",9,10),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"div"),e._uU(15),e.qZA(),e.TgZ(16,"div",12),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"div",14),e.TgZ(20,"div"),e._uU(21),e.qZA(),e.qZA(),e.TgZ(22,"div",6),e.TgZ(23,"div",15),e._uU(24),e.qZA(),e.TgZ(25,"div",16),e.TgZ(26,"div",17),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",18),e.TgZ(29,"button",19),e.NdJ("click",function(){return n.buy()}),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"button",20),e.NdJ("click",function(){return n.hide()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!0),e.xp6(3),e.Oqu(e.lcZ(4,12,"catalog.marketplace.confirm_title")),e.xp6(7),e.Q6J("ngIf",n.offer&&n.offer.stuffData.uniqueNumber),e.xp6(1),e.Q6J("ngStyle",e.VKq(18,pf,"url("+n.imageUrl+")")),e.xp6(4),e.Oqu(n.getFurniTitle()),e.xp6(2),e.Oqu(n.getFurniDescription()),e.xp6(2),e.Q6J("type",-1),e.xp6(2),e.Oqu(n.costCredits),e.xp6(3),e.hij(" ",n.getAveragePrice()," "),e.xp6(3),e.Oqu(n.getOfferCount()),e.xp6(3),e.Oqu(e.lcZ(31,14,"catalog.purchase_confirmation.buy")),e.xp6(3),e.Oqu(e.lcZ(34,16,"catalog.purchase_confirmation.cancel")))},directives:[b,v,u.O5,u.PC,Dn],pipes:[m,Vt],encapsulation:2}),i})();const ff=["previewImage"],vf=["nitro-room-preview-component",""];let Nt=(()=>{class i{constructor(t,n){this._elementRef=t,this.ngZone=n,this.roomPreviewer=null,this.width=1,this.height=1,this.model=null,this.wallHeight=-1,this.modelScale=!0,this.renderingCanvas=null,this.imageUrl=null,this.isRunning=!1,this.onClick=this.onClick.bind(this)}ngOnChanges(t){if(t.model){const n=t.model.previousValue,r=t.model.currentValue;r&&r!==n&&this.updateModel()}if(t.wallHeight){const n=t.wallHeight.previousValue,r=t.wallHeight.currentValue;r&&r!==n&&this.updateModel()}}ngOnDestroy(){this.stop()}ngAfterViewInit(){if(this.roomPreviewer){if(1===this.width&&(this.width=Math.trunc(this.previewImageElement.offsetWidth)),1===this.height&&(this.height=Math.trunc(this.previewImageElement.offsetHeight)),this.previewImageElement.style.minWidth=this.width+"px",this.previewImageElement.style.minHeight=this.height+"px",this.roomPreviewer){let t=document.defaultView.getComputedStyle(this.previewImageElement,null).backgroundColor;t=s.No6.rgbStringToHex(t),t=t.replace("#","0x"),this.roomPreviewer.backgroundColor=parseInt(t,16),this.model&&this.updateModel(),this.roomPreviewer.getRoomCanvas(this.width,this.height),this.renderingCanvas=this.roomPreviewer.getRenderingCanvas()}this.start()}}start(){this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.addEventListener("click",this.onClick),s.wjX.instance.ticker.add(this.update,this)}),this.isRunning=!0)}stop(){!this.isRunning||(this.ngZone.runOutsideAngular(()=>{this.previewImageElement.removeEventListener("click",this.onClick),s.wjX.instance.ticker.remove(this.update,this)}),this.isRunning=!1)}update(t){if(this.roomPreviewer&&this.renderingCanvas&&(this.roomPreviewer.updatePreviewRoomView(),this.renderingCanvas.canvasUpdated)){const n=s.Oau.generateImageUrl(this.renderingCanvas.master);this.previewImageElement.style.backgroundImage=`url(${n})`}}onClick(t){!t||!this.isRunning||!this.roomPreviewer||(t.shiftKey?this.roomPreviewer.changeRoomObjectDirection():this.roomPreviewer.changeRoomObjectState())}updateModel(){!this.roomPreviewer||this.roomPreviewer.updatePreviewModel(this.model,this.wallHeight,this.modelScale)}get previewImageElement(){return this.previewImage&&this.previewImage.nativeElement||null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-room-preview-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(ff,5),2&t){let r;e.iGM(r=e.CRH())&&(n.previewImage=r.first)}},inputs:{roomPreviewer:"roomPreviewer",width:"width",height:"height",model:"model",wallHeight:"wallHeight",modelScale:"modelScale"},features:[e.TTD],attrs:vf,decls:2,vars:0,consts:[[1,"room-preview-image"],["previewImage",""]],template:function(t,n){1&t&&e._UZ(0,"div",0,1)},encapsulation:2}),i})(),Tf=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[de,We],imports:[[oe]]}),i})();e.B6R(an,[u.O5,le,Nt,C.Vv,u.sg,u.mk,u.PC,Sn],[Vt,m]),e.B6R(fi,[u.O5,u.PC,gf],[]),e.B6R(bi,[u.O5,le,Nt,C.Vv,u.sg,cn,u.mk,Sn],[]),e.B6R(Ti,[u.O5,le,Nt,Sn,u.mk,C.Vv,u.sg,u.PC],[m]),e.B6R(vi,[u.O5,le,Le,Nt,u.PC,_.EJ,_.JJ,_.On,u.sg,_.YN,_.Kr,C.Vv,u.mk,Sn],[]),e.B6R(fo,[u.O5,b,v,u.sg,u.mk,tf,hf,Nh,kh,Zh,Gh],[m]),e.B6R(xi,[u.sg,u.O5,Kh],[]),e.B6R(Tn,[u.O5,le,Nt,C.Vv,u.sg,u.PC,Sn],[]);let bf=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ci],imports:[[oe]]}),i})();const Cf=["nitro-friendlist-friends-list-component",""];function Ef(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"button",2),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectThread(a)}),e._uU(2),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openFriendProfile(a)}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().removeFriend(a)}),e._UZ(6,"i",6),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}let Sf=(()=>{class i{constructor(t,n){this._friendListService=t,this._ngZone=n,this.threadSelector=null,this.onlineOnly=!1}selectThread(t){if(!t)return;const n=this._friendListService.getMessageThread(t.id);!n||this.threadSelector&&this.threadSelector(n)}removeFriend(t){!t||(s.wjX.instance.communication.connection.send(new s.xL(t.id)),this._friendListService.friends.delete(t.id))}openFriendProfile(t){!t||s.wjX.instance.communication.connection.send(new s.m7m(t.id))}get friends(){const t=Array.from(this._friendListService.friends.values());return this.onlineOnly?t.filter(n=>n.online):t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Je),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-friends-list-component",""]],inputs:{threadSelector:"threadSelector",onlineOnly:"onlineOnly"},attrs:Cf,decls:1,vars:1,consts:[["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(t,n){1&t&&e.YNc(0,Ef,7,1,"div",0),2&t&&e.Q6J("ngForOf",n.friends)},directives:[u.sg],encapsulation:2}),i})();const Af=["nitro-friendlist-requests-list-component",""];function wf(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3),e.TgZ(2,"button",4),e._uU(3),e.qZA(),e.TgZ(4,"button",5),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).acceptRequest(a.value)}),e._UZ(5,"i",6),e.qZA(),e.TgZ(6,"button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).declineRequest(a.value)}),e._UZ(7,"i",8),e.qZA(),e.qZA(),e.BQk()}if(2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.value.requesterName)}}function xf(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().declineAllRequests()}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,wf,8,1,"ng-container",2),e.ALo(5,"keyvalue"),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"friendbar.requests.discard")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,4,t.requests))}}let Zf=(()=>{class i{constructor(t){this._friendListService=t}acceptRequest(t){!t||this._friendListService.acceptFriendRequest(t)}declineRequest(t){!t||this._friendListService.removeFriendRequest(t)}declineAllRequests(){this._friendListService.removeAllFriendRequests()}get requests(){return this._friendListService.requests}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Je))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-requests-list-component",""]],attrs:Af,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"btn","btn-danger","mb-1","w-100",3,"click"],[4,"ngFor","ngForOf"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-success",3,"click"],[1,"fas","fa-check"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"]],template:function(t,n){1&t&&e.YNc(0,xf,6,6,"ng-container",0),2&t&&e.Q6J("ngIf",n.requests.size>0)},directives:[u.O5,u.sg],pipes:[m,u.Nd],encapsulation:2}),i})();const If=["nitro-friendlist-search-component",""];function yf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"button",10),e._uU(2),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openProfile(a)}),e._UZ(4,"i",12),e.qZA(),e.TgZ(5,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().removeFriend(a)}),e._UZ(6,"i",14),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.avatarName)}}function Rf(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"friendlist.search.nofriendsfound"),""))}function Mf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"button",10),e._uU(2),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openProfile(a)}),e._UZ(4,"i",12),e.qZA(),e.TgZ(5,"button",15),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().sendFriendRequest(a)}),e._UZ(6,"i",16),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.avatarName),e.xp6(3),e.Q6J("disabled",!n.isFriendRequestAllowed(t.avatarId))}}function Of(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"friendlist.search.noothersfound"),""))}let Uf=(()=>{class i{constructor(t){this._friendListService=t,this.friendsCollapsed=!0,this.othersCollapsed=!0}searchAvatar(){0!==this.searchQuery.trim().length&&s.wjX.instance.communication.connection.send(new s.B2u(this.searchQuery))}removeFriend(t){!t||(s.wjX.instance.communication.connection.send(new s.xL(t.avatarId)),this._friendListService.friends.delete(t.avatarId))}openProfile(t){!t||s.wjX.instance.communication.connection.send(new s.m7m(t.avatarId))}sendFriendRequest(t){this._friendListService.avatarSearchResults.setFriendRequestSent(t.avatarId),this._friendListService.sendFriendRequest(t.avatarId,t.avatarName)}isFriendRequestAllowed(t){return!this._friendListService.avatarSearchResults.isRequestFriend(t)}get searchQuery(){return this._searchQuery}set searchQuery(t){this._searchQuery=t}get friends(){return this._friendListService.avatarSearchResults.friends}get others(){return this._friendListService.avatarSearchResults.others}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Je))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-search-component",""]],attrs:If,decls:17,vars:22,consts:[[1,"text-center",2,"margin","5px"],["type","text",3,"ngModel","keydown.enter","ngModelChange"],["type","button",1,"btn","btn-success","btn-sm",2,"display","inline-block","margin-left","5px",3,"click"],["type","button","aria-controls","collapseFriends",1,"btn","btn-primary","w-100",3,"click"],["id","collapseFriends",3,"ngbCollapse","ngbCollapseChange"],["class","btn-group w-100 mb-1",4,"ngFor","ngForOf"],[4,"ngIf"],["type","button","aria-controls","collapseOthers",1,"btn","btn-primary","w-100",3,"click"],["id","collapseOthers",3,"ngbCollapse","ngbCollapseChange"],[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary","w-100"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-id-card"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fas","fa-times"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"fas","fa-plus"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"input",1),e.NdJ("keydown.enter",function(){return n.searchAvatar()})("ngModelChange",function(a){return n.searchQuery=a}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.searchAvatar()}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.friendsCollapsed=!n.friendsCollapsed}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4),e.NdJ("ngbCollapseChange",function(a){return n.friendsCollapsed=a}),e.YNc(9,yf,7,1,"div",5),e.YNc(10,Rf,3,3,"p",6),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return n.othersCollapsed=!n.othersCollapsed}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",8),e.NdJ("ngbCollapseChange",function(a){return n.othersCollapsed=a}),e.YNc(15,Mf,7,2,"div",5),e.YNc(16,Of,3,3,"p",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngModel",n.searchQuery),e.xp6(2),e.Oqu(e.lcZ(4,12,"generic.search")),e.xp6(2),e.uIk("aria-expanded",!n.friendsCollapsed),e.xp6(1),e.hij(" ",e.Dn7(7,14,"friendlist.search.friendscaption","cnt",n.friends?n.friends.length.toString():"0"),"\n"),e.xp6(2),e.Q6J("ngbCollapse",n.friendsCollapsed),e.xp6(1),e.Q6J("ngForOf",n.friends),e.xp6(1),e.Q6J("ngIf",0===(null==n.friends?null:n.friends.length)),e.xp6(1),e.uIk("aria-expanded",!n.othersCollapsed),e.xp6(1),e.hij(" ",e.Dn7(13,18,"friendlist.search.otherscaption","cnt",n.others?n.others.length.toString():"0"),"\n"),e.xp6(2),e.Q6J("ngbCollapse",n.othersCollapsed),e.xp6(1),e.Q6J("ngForOf",n.others),e.xp6(1),e.Q6J("ngIf",0===(null==n.others?null:n.others.length)))},directives:[_.Fj,_.JJ,_.On,W._D,u.sg,u.O5],pipes:[m],encapsulation:2}),i})();const Nf=["nitro-friendlist-friends-viewer-component",""];function qf(i,o){if(1&i&&(e.TgZ(0,"span",9),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.totalFriendRequests)}}function Lf(i,o){if(1&i&&e._UZ(0,"div",10),2&i){const t=e.oxw();e.Q6J("threadSelector",t.threadSelector)("onlineOnly",t.onlineOnly)}}function kf(i,o){1&i&&e._UZ(0,"div",11)}function Ff(i,o){1&i&&e._UZ(0,"div",12)}const Qn=function(i){return{active:i}};let Df=(()=>{class i{constructor(t,n){this._friendListService=t,this._ngZone=n,this.threadSelector=null,this._requestsShowing=!1,this._friendsShowing=!0,this._onlineOnly=!0,this._searchShowing=!1}showOnlineFriends(){this.showFriends(),this._onlineOnly=!0}showFriends(){this._requestsShowing=!1,this._searchShowing=!1,this._friendsShowing=!0,this._onlineOnly=!1}showRequests(){this._requestsShowing=!0,this._friendsShowing=!1,this._onlineOnly=!1,this._searchShowing=!1}showSearch(){this._searchShowing=!0,this._friendsShowing=!1,this._requestsShowing=!1,this._onlineOnly=!1}get requestsShowing(){return this._requestsShowing}get friendsShowing(){return this._friendsShowing}get onlineOnly(){return this._onlineOnly}get searchShowing(){return this._searchShowing}get totalFriendRequests(){return this._friendListService.requests.size}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Je),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-friends-viewer-component",""]],inputs:{threadSelector:"threadSelector"},attrs:Nf,decls:19,vars:28,consts:[[1,"btn-group","w-100","mb-1"],["type","button",1,"btn","btn-secondary",3,"ngClass","click"],["class","badge badge-danger ml-1","style","font-size:12px;",4,"ngIf"],["type","button",1,"btn","btn-success",3,"ngClass","click"],[1,"d-flex","w-100"],[1,"position-relative","w-100",2,"min-height","350px","max-height","350px","height","350px"],["nitro-friendlist-friends-list-component","","class","w-100",3,"threadSelector","onlineOnly",4,"ngIf"],["nitro-friendlist-requests-list-component","","class","w-100",4,"ngIf"],["nitro-friendlist-search-component","","class","w-100",4,"ngIf"],[1,"badge","badge-danger","ml-1",2,"font-size","12px"],["nitro-friendlist-friends-list-component","",1,"w-100",3,"threadSelector","onlineOnly"],["nitro-friendlist-requests-list-component","",1,"w-100"],["nitro-friendlist-search-component","",1,"w-100"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.showOnlineFriends()}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",1),e.NdJ("click",function(){return n.showFriends()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",1),e.NdJ("click",function(){return n.showRequests()}),e._uU(8),e.ALo(9,"translate"),e.YNc(10,qf,2,1,"span",2),e.qZA(),e.TgZ(11,"button",3),e.NdJ("click",function(){return n.showSearch()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div",4),e.TgZ(15,"perfect-scrollbar",5),e.YNc(16,Lf,1,2,"div",6),e.YNc(17,kf,1,0,"div",7),e.YNc(18,Ff,1,0,"div",8),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(20,Qn,n.friendsShowing&&n.onlineOnly)),e.xp6(1),e.Oqu(e.lcZ(3,12,"friendlist.online")),e.xp6(2),e.Q6J("ngClass",e.VKq(22,Qn,n.friendsShowing&&!n.onlineOnly)),e.xp6(1),e.Oqu(e.lcZ(6,14,"friendlist.friends.all")),e.xp6(2),e.Q6J("ngClass",e.VKq(24,Qn,n.requestsShowing)),e.xp6(1),e.Oqu(e.lcZ(9,16,"friendbar.requests.title")),e.xp6(2),e.Q6J("ngIf",n.totalFriendRequests>0),e.xp6(1),e.Q6J("ngClass",e.VKq(26,Qn,n.searchShowing)),e.xp6(1),e.Oqu(e.lcZ(13,18,"generic.search")),e.xp6(4),e.Q6J("ngIf",n.friendsShowing),e.xp6(1),e.Q6J("ngIf",n.requestsShowing),e.xp6(1),e.Q6J("ngIf",n.searchShowing))},directives:[u.mk,u.O5,C.Vv,Sf,Zf,Uf],pipes:[m],encapsulation:2}),i})();const Pf=["nitro-friendlist-thread-list-component",""],Jf=function(i){return{active:i}};function jf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectThread(a)}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,Jf,n.currentThread===t)),e.xp6(1),e.Oqu(t.participant.name)}}let Vf=(()=>{class i{constructor(t,n){this._friendListService=t,this._ngZone=n,this.currentThread=null,this.threadSelector=null}selectThread(t){!t||this.threadSelector&&this.threadSelector(t)}get threads(){const t=Array.from(this._friendListService.threads.values());return t.sort((n,r)=>r.lastUpdated-n.lastUpdated),t}}return i.THREAD_SELECTED="FLTLC_THREAD_SELECTED",i.\u0275fac=function(t){return new(t||i)(e.Y36(Je),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-thread-list-component",""]],inputs:{currentThread:"currentThread",threadSelector:"threadSelector"},attrs:Pf,decls:1,vars:1,consts:[["type","button","class","btn btn-secondary w-100 mb-1",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","w-100","mb-1",3,"ngClass","click"]],template:function(t,n){1&t&&e.YNc(0,jf,2,4,"button",0),2&t&&e.Q6J("ngForOf",n.threads)},directives:[u.sg,u.mk],encapsulation:2}),i})();var Bf=U(9780);const Gf=["threadScroller"],Hf=["nitro-friendlist-thread-viewer-component",""];function Wf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().followParticipant()}),e._UZ(1,"i",20),e.qZA()}}function Qf(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().changeRelation(a)}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}const No=function(i){return[i]};function Xf(i,o){if(1&i&&(e.TgZ(0,"div",22),e.TgZ(1,"div",23),e._uU(2),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(2,No,t.senderId===n.participant.id?"thread-viewer-list-left":"thread-viewer-list-right")),e.xp6(2),e.Oqu(t.message)}}let Yf=(()=>{class i{constructor(t,n,r){this._friendListService=t,this._settingsService=n,this._ngZone=r,this.thread=null,this._subscription=null}ngOnChanges(t){const n=t.thread.previousValue,r=t.thread.currentValue;r&&r!==n?this.prepareThread():!r&&r!==n&&this.unsubscribe()}ngOnDestroy(){this.unsubscribe()}ngAfterViewInit(){this.scrollToBottom()}unsubscribe(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}prepareThread(){this.unsubscribe(),this._subscription=this.thread.emitter.asObservable().pipe((0,Bf.g)(1)).subscribe(t=>{switch(t){case Ni.MESSAGE_RECEIVED:return void this.messageReceived()}})}messageReceived(){this.scrollToBottom()}sendMessage(t){!t||!t.length||(this._ngZone.run(()=>{this.thread.insertChat(s.wjX.instance.sessionDataManager.userId,t,0,null),this.thread.setRead()}),s.wjX.instance.communication.connection.send(new s.ndR(this.participant.id,t)))}changeRelation(t){!this.participant||-1!==s.t6z.RELATIONSHIP_TYPES.indexOf(t)&&s.wjX.instance.communication.connection.send(new s.pzU(this.participant.id,t))}followParticipant(){!this.participant||(this._settingsService.toggleFriendList(),s.wjX.instance.communication.connection.send(new s.nj(this.participant.id)))}onKeyDownEvent(t){if(!t)return;const n=t.target;if(n)switch(t.key){case"Enter":return this.sendMessage(n.value),void(n.value="")}}scrollToBottom(){!this.threadScroller||this.threadScroller.directiveRef.scrollToBottom(0,200)}get participant(){return this.thread.participant}get chats(){return this.thread.chats}get relations(){return s.t6z.RELATIONSHIP_NAMES}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Je),e.Y36(w),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-friendlist-thread-viewer-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(Gf,5),2&t){let r;e.iGM(r=e.CRH())&&(n.threadScroller=r.first)}},inputs:{thread:"thread"},features:[e.TTD],attrs:Hf,decls:23,vars:12,consts:[[1,"nitro-friendlist-thread-viewer-component"],[1,"d-flex","flex-row","thread-viewer-user","mb-1","justify-content-between"],[1,"d-flex","flex-row"],["nitro-avatar-image","",1,"avatar-img",3,"headOnly","figure","direction"],[1,"thread-viewer-user-info"],[1,"ml-2","p-1","rounded-circle","align-self-center",3,"ngClass"],[1,"d-block","text-muted","small","text-truncate"],["ngbDropdown","",1,"input-group-prepend","align-self-center"],[1,"btn-group"],["class","btn btn-sm btn-dgreen align-self-center",3,"click",4,"ngIf"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item small","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],[1,"position-relative","w-100","my-1",2,"min-height","299px","max-height","299px","height","299px"],["threadScroller",""],[1,"thread-viewer-list"],["class","thread-viewer-list-item mb-1",3,"ngClass",4,"ngFor","ngForOf"],[1,"thread-viewer-input"],["type","text","maxLength","420",1,"thread-viewer-input","form-control",3,"keydown.enter"],[1,"btn","btn-sm","btn-dgreen","align-self-center",3,"click"],[1,"fas","fa-arrow-right"],["ngbDropdownItem","",1,"dropdown-item","small",3,"click"],[1,"thread-viewer-list-item","mb-1",3,"ngClass"],[1,"thread-viewer-list-item-message","p-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"b",2),e._uU(6),e._UZ(7,"div",5),e.qZA(),e.TgZ(8,"span",6),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e.TgZ(11,"div",8),e.YNc(12,Wf,2,0,"div",9),e.TgZ(13,"button",10),e._uU(14),e.qZA(),e.TgZ(15,"div",11),e.YNc(16,Qf,2,1,"button",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"perfect-scrollbar",13,14),e.TgZ(19,"div",15),e.YNc(20,Xf,3,4,"div",16),e.qZA(),e.qZA(),e.TgZ(21,"div",17),e.TgZ(22,"input",18),e.NdJ("keydown.enter",function(a){return n.onKeyDownEvent(a)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("headOnly",1)("figure",n.thread.participant.figure)("direction",2),e.xp6(3),e.Oqu(n.participant.name),e.xp6(1),e.Q6J("ngClass",e.VKq(10,No,n.participant.online?"bg-success":"bg-danger")),e.xp6(2),e.Oqu(n.participant.motto),e.xp6(3),e.Q6J("ngIf",n.participant.online),e.xp6(2),e.Oqu(n.relations[n.thread.participant.relationshipStatus]),e.xp6(2),e.Q6J("ngForOf",n.relations),e.xp6(4),e.Q6J("ngForOf",n.chats))},directives:[He,u.mk,W.jt,u.O5,W.iD,W.Vi,u.sg,C.Vv,W.TH],encapsulation:2}),i})(),zf=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Je],imports:[[oe]]}),i})();e.B6R(io,[u.O5,b,v,u.mk,C.Vv,Vf,Df,Yf],[m]);const Kf=["nitro-group-image-selector-component",""],qo=function(i){return{active:i}};function $f(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().selectPart(0)}),e._UZ(1,"i",7),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,qo,0===t.part.key))}}function e1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().selectPart(a.key)}),e._UZ(1,"nitro-badge",8),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Q6J("ngClass",e.VKq(3,qo,n.part.key===t.key)),e.xp6(1),e.Q6J("badge",n.getBadgeCode(t.key))("isGroup",!0)}}let t1=(()=>{class i{constructor(){this.onSelect=new e.vpe}getBadgeCode(t){return(this.part.isBase?"b":"s")+(t<100?"0":"")+(t<10?"0":"")+t+(this.part.color<10?"0"+this.part.color:this.part.color)+4}selectPart(t){this.onSelect.emit(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-group-image-selector-component",""]],inputs:{items:"items",part:"part"},outputs:{onSelect:"onSelect"},attrs:Kf,decls:7,vars:4,consts:[[1,"nitro-group-image-selector-component","mb-3"],[2,"min-height","414px","max-height","414px","height","414px"],[1,"grid-container"],[1,"grid-items","grid-8"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngIf"],["class","item-detail btn btn-primary btn-sm p-0",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"item-detail","btn","btn-primary","btn-sm","p-0",3,"ngClass","click"],[1,"fas","fa-times"],[3,"badge","isGroup"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"perfect-scrollbar",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.YNc(4,$f,2,3,"button",4),e.YNc(5,e1,2,5,"button",5),e.ALo(6,"keyvalue"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",!n.part.isBase),e.xp6(1),e.Q6J("ngForOf",e.lcZ(6,2,n.items)))},directives:[C.Vv,u.O5,u.sg,u.mk,Le],pipes:[u.Nd],encapsulation:2}),i})();function n1(i,o){if(1&i&&e._UZ(0,"nitro-badge",4),2&i){const t=e.oxw().$implicit;e.Q6J("badge",t.value.code)("isGroup",!0)}}function i1(i,o){1&i&&e._UZ(0,"i",19)}function o1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().$implicit.value.position=a}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw().$implicit;e.Q6J("ngClass",n.value.position===t?"btn-light":"btn-primary")}}const r1=function(i){return{backgroundColor:i}};function s1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().$implicit.value.color=a.key}),e.qZA()}2&i&&e.Akn(e.VKq(2,r1,"#"+o.$implicit.value))}const a1=function(i){return{opacity:i}};function c1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"button",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).openPartSelector(a.value)}),e.YNc(2,n1,1,2,"nitro-badge",11),e.YNc(3,i1,1,0,"i",12),e.qZA(),e.TgZ(4,"div",13),e.TgZ(5,"div",14),e.YNc(6,o1,1,1,"button",15),e.qZA(),e.qZA(),e.TgZ(7,"div",16),e.TgZ(8,"div",17),e.YNc(9,s1,1,4,"button",18),e.ALo(10,"keyvalue"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.value.code),e.xp6(1),e.Q6J("ngIf",!t.value.code),e.xp6(1),e.Q6J("ngStyle",e.VKq(7,a1,t.value.isBase?0:1)),e.xp6(2),e.Q6J("ngForOf",n.positions),e.xp6(3),e.Q6J("ngForOf",e.lcZ(10,5,n.badgePartColors))}}function l1(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,c1,11,9,"div",8),e.ALo(2,"keyvalue"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.groupSettings.badgeParts))}}function u1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22),e.NdJ("onSelect",function(r){return e.CHM(t),e.oxw().onPartSelected(r)}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("items",t.badgePartBeingSelected&&t.badgePartBeingSelected.isBase?t.badgeBases:t.badgeSymbols)("part",t.badgePartBeingSelected)}}let Lo=(()=>{class i{constructor(t){this._groupsService=t,this._clear()}_clear(){this._badgeBases=new Map,this._badgeSymbols=new Map,this._badgePartColors=new Map,this._badgePartBeingSelected=null,this._selectorVisible=!1,this._positions=[];for(let t=0;t<9;t++)this._positions.push(t)}ngOnInit(){this._clear(),this.loadBadgeData()}loadBadgeData(){this._badgeBases=this._groupsService.badgeBases,this._badgeSymbols=this._groupsService.badgeSymbols,this._badgePartColors=this._groupsService.badgePartColors,this.setDefaultValues&&(this.groupSettings.getBadgePart(0).key=this._badgeSymbols.keys().next().value,this.groupSettings.setPartsColor(this._badgePartColors.keys().next().value))}openPartSelector(t){this._badgePartBeingSelected=t,this._selectorVisible=!0}onPartSelected(t){this._badgePartBeingSelected.key=t,this._badgePartBeingSelected=null,this._selectorVisible=!1}get badgePartBeingSelected(){return this._badgePartBeingSelected}get selectorVisible(){return this._selectorVisible}get positions(){return this._positions}get badgeBases(){return this._badgeBases}get badgeSymbols(){return this._badgeSymbols}get badgePartColors(){return this._badgePartColors}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-creator-tab-badge-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:10,vars:7,consts:[[1,"mb-3"],[1,"row"],[1,"col-3"],[1,"btn","btn-primary",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"col-9"],[4,"ngIf"],["nitro-group-image-selector-component","",3,"items","part","onSelect",4,"ngIf"],["class","d-flex flex-row justify-content-between mb-3",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","mb-3"],[1,"btn","btn-primary",2,"width","120px","height","67px",3,"click"],[3,"badge","isGroup",4,"ngIf"],["class","fas fa-plus","style","width: 39px",4,"ngIf"],[1,"grid-container","ml-3",3,"ngStyle"],[1,"grid-items","grid-3","pb-1"],["class","item-detail btn btn-sm",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"grid-container","ml-3"],[1,"grid-items","grid-8","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"fas","fa-plus",2,"width","39px"],[1,"item-detail","btn","btn-sm",3,"ngClass","click"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"],["nitro-group-image-selector-component","",3,"items","part","onSelect"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e._UZ(6,"nitro-badge",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.YNc(8,l1,3,3,"div",6),e.YNc(9,u1,1,2,"div",7),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,5,"group.edit.badge.badge")),e.xp6(5),e.Q6J("badge",n.groupSettings.currentBadgeCode)("isGroup",!0),e.xp6(2),e.Q6J("ngIf",!n.selectorVisible),e.xp6(1),e.Q6J("ngIf",n.selectorVisible))},directives:[Le,u.O5,u.sg,u.PC,u.mk,t1],pipes:[m,u.Nd],encapsulation:2}),i})();const Xn=function(i){return{backgroundColor:i}};function _1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().groupSettings.colorA=a.key}),e.qZA()}2&i&&e.Akn(e.VKq(2,Xn,"#"+o.$implicit.value))}function g1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().groupSettings.colorB=a.key}),e.qZA()}2&i&&e.Akn(e.VKq(2,Xn,"#"+o.$implicit.value))}let ko=(()=>{class i{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB,this.setDefaultValues&&(this.groupSettings.colorA=this._groupColorsA.keys().next().value,this.groupSettings.colorB=this._groupColorsB.keys().next().value)}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-creator-tab-colors-component"]],inputs:{groupSettings:"groupSettings",setDefaultValues:"setDefaultValues"},outputs:{groupSettings:"groupSettings"},decls:27,vars:26,consts:[[1,"mb-3"],[1,"d-flex","justify-content-between","mb-3"],[1,"mr-3"],[1,"mb-1"],[1,"btn-group",2,"height","67px","width","110px"],[1,"btn","btn-primary","btn-lg"],[1,"grid-container"],[1,"grid-items","grid-9","pb-1"],["class","item-detail btn btn-primary btn-sm",3,"style","click",4,"ngFor","ngForOf"],[1,"grid-items","grid-6","pb-1"],[1,"item-detail","btn","btn-primary","btn-sm",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"button",5),e._UZ(10,"button",5),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"div",3),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"div",7),e.YNc(17,_1,1,4,"button",8),e.ALo(18,"keyvalue"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div"),e.TgZ(20,"div",3),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"div",6),e.TgZ(24,"div",9),e.YNc(25,g1,1,4,"button",8),e.ALo(26,"keyvalue"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,10,"group.create.stepcaption.3")),e.xp6(5),e.Oqu(e.lcZ(7,12,"group.edit.color.guild.color")),e.xp6(3),e.Akn(e.VKq(22,Xn,"#"+n.groupColorsA.get(n.groupSettings.colorA))),e.xp6(1),e.Akn(e.VKq(24,Xn,"#"+n.groupColorsB.get(n.groupSettings.colorB))),e.xp6(3),e.Oqu(e.lcZ(14,14,"group.edit.color.primary.color")),e.xp6(4),e.Q6J("ngForOf",e.lcZ(18,16,n.groupColorsA)),e.xp6(4),e.Oqu(e.lcZ(22,18,"group.edit.color.secondary.color")),e.xp6(4),e.Q6J("ngForOf",e.lcZ(26,20,n.groupColorsB)))},directives:[u.sg],pipes:[m,u.Nd],encapsulation:2}),i})();const Fo=function(i){return{backgroundColor:i}};let d1=(()=>{class i{constructor(t){this._groupsService=t}ngOnInit(){this.loadColorsData()}loadColorsData(){this._groupColorsA=this._groupsService.groupColorsA,this._groupColorsB=this._groupsService.groupColorsB}get groupColorsA(){return this._groupColorsA}get groupColorsB(){return this._groupColorsB}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-creator-tab-confirmation-component"]],inputs:{groupSettings:"groupSettings",groupCost:"groupCost"},decls:26,vars:29,consts:[[1,"mb-3"],[1,"row"],[1,"col-4"],[1,"mb-1"],[1,"btn","btn-primary","mb-3",2,"width","120px","height","67px"],[3,"badge","isGroup"],[1,"btn-group",2,"height","67px","width","120px"],[1,"btn","btn-primary","btn-lg"],[1,"col-8"],[1,"small","mb-3"],[1,"mb-2",3,"innerHtml"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",4),e._UZ(9,"nitro-badge",5),e.qZA(),e.TgZ(10,"div",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"button",7),e._UZ(15,"button",7),e.qZA(),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"div"),e._uU(18),e.qZA(),e.TgZ(19,"div",9),e._uU(20),e.qZA(),e._UZ(21,"div",10),e.ALo(22,"translate"),e.TgZ(23,"div"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,13,"group.create.stepcaption.4")),e.xp6(5),e.Oqu(e.lcZ(7,15,"group.create.confirm.guildbadge")),e.xp6(3),e.Q6J("badge",n.groupSettings.currentBadgeCode)("isGroup",!0),e.xp6(2),e.Oqu(e.lcZ(12,17,"group.create.confirm.guildcolors")),e.xp6(3),e.Akn(e.VKq(25,Fo,"#"+n.groupColorsA.get(n.groupSettings.colorA))),e.xp6(1),e.Akn(e.VKq(27,Fo,"#"+n.groupColorsB.get(n.groupSettings.colorB))),e.xp6(3),e.Oqu(n.groupSettings.name),e.xp6(2),e.Oqu(n.groupSettings.description),e.xp6(1),e.Q6J("innerHtml",e.lcZ(22,19,"group.create.confirm.info"),e.oJD),e.xp6(3),e.Oqu(e.Dn7(25,21,"group.create.confirm.buyinfo","amount",n.groupCost)))},directives:[Le],pipes:[m],encapsulation:2}),i})();function m1(i,o){1&i&&(e.TgZ(0,"small",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"group.edit.error.no.name.or.room.selected")))}function p1(i,o){if(1&i&&(e.TgZ(0,"option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.Oqu(t.value)}}const Zi=function(i){return{"is-invalid":i}};let h1=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-creator-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError",showRoomError:"showRoomError",availableRooms:"availableRooms"},outputs:{groupSettings:"groupSettings"},decls:27,vars:34,consts:[[1,"mb-3"],["class","form-text text-muted invalid-feedback mb-3",4,"ngIf"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],["selected","","disabled","","value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"form-text","text-muted","invalid-feedback","mb-3"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.YNc(3,m1,3,3,"small",1),e.TgZ(4,"div",2),e.TgZ(5,"label"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"input",3),e.NdJ("ngModelChange",function(a){return n.groupSettings.name=a}),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"textarea",4),e.NdJ("ngModelChange",function(a){return n.groupSettings.description=a}),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"select",4),e.NdJ("ngModelChange",function(a){return n.groupSettings.roomId=a}),e.TgZ(19,"option",5),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,p1,2,2,"option",6),e.ALo(23,"keyvalue"),e.qZA(),e.TgZ(24,"small",7),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,14,"group.edit.tabcaption.1")),e.xp6(2),e.Q6J("ngIf",n.showNameError||n.showRoomError),e.xp6(3),e.Oqu(e.lcZ(7,16,"group.edit.name")),e.xp6(2),e.Q6J("ngClass",e.VKq(28,Zi,n.showNameError))("ngModel",n.groupSettings.name),e.xp6(3),e.Oqu(e.lcZ(12,18,"group.edit.desc")),e.xp6(2),e.Q6J("ngClass",e.VKq(30,Zi,n.showDescriptionError))("ngModel",n.groupSettings.description),e.xp6(3),e.Oqu(e.lcZ(17,20,"group.edit.base")),e.xp6(2),e.Q6J("ngClass",e.VKq(32,Zi,n.showRoomError))("ngModel",n.groupSettings.roomId),e.xp6(2),e.Oqu(e.lcZ(21,22,"group.edit.base.select.room")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(23,24,n.availableRooms)),e.xp6(3),e.Oqu(e.lcZ(26,26,"group.edit.base.warning")))},directives:[u.O5,_.Fj,u.mk,_.JJ,_.On,_.EJ,_.YN,_.Kr,u.sg],pipes:[m,u.Nd],encapsulation:2}),i})();const Do=function(i){return{"is-invalid":i}};let f1=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-manager-tab-info-component"]],inputs:{groupSettings:"groupSettings",showNameError:"showNameError",showDescriptionError:"showDescriptionError"},outputs:{groupSettings:"groupSettings"},decls:13,vars:17,consts:[[1,"mb-3"],[1,"form-group"],["type","text",1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"],[1,"form-control","form-control-sm",3,"ngClass","ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"input",2),e.NdJ("ngModelChange",function(a){return n.groupSettings.name=a}),e.qZA(),e.qZA(),e.TgZ(8,"div",1),e.TgZ(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"textarea",3),e.NdJ("ngModelChange",function(a){return n.groupSettings.description=a}),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,7,"group.edit.tabcaption.1")),e.xp6(4),e.Oqu(e.lcZ(6,9,"group.edit.name")),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Do,n.showNameError))("ngModel",n.groupSettings.name),e.xp6(3),e.Oqu(e.lcZ(11,11,"group.edit.desc")),e.xp6(2),e.Q6J("ngClass",e.VKq(15,Do,n.showDescriptionError))("ngModel",n.groupSettings.description))},directives:[_.Fj,u.mk,_.JJ,_.On],pipes:[m],encapsulation:2}),i})(),v1=(()=>{class i{constructor(){this._groupSettings=null,this._state="0",this._canMembersDecorate=!1}get groupSettings(){return this._groupSettings}set groupSettings(t){this._groupSettings=t,this._state=this.groupSettings.state.toString(),this._canMembersDecorate=this.groupSettings.canMembersDecorate}get state(){return this._state}set state(t){this._state=t,this._groupSettings.state=parseInt(t)}get canMembersDecorate(){return this._canMembersDecorate}set canMembersDecorate(t){this._canMembersDecorate=t,this._groupSettings.canMembersDecorate=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-group-manager-tab-preferences-component"]],inputs:{groupSettings:"groupSettings"},decls:41,vars:34,consts:[[1,"mb-3"],[1,"mb-1"],[1,"form-check","mb-1"],["type","radio","name","state","id","radioState0","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState0",1,"form-check-label"],[1,"fas","fa-user-plus","mr-2"],["id","passwordHelpBlock",1,"form-text","text-muted"],["type","radio","name","state","id","radioState1","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState1",1,"form-check-label"],[1,"fas","fa-key","mr-2"],[1,"form-check","mb-3"],["type","radio","name","state","id","radioState2","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["for","radioState2",1,"form-check-label"],[1,"fas","fa-ban","mr-2"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(a){return n.state=a}),e.qZA(),e.TgZ(8,"label",4),e._UZ(9,"i",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"small",6),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"div",2),e.TgZ(16,"input",7),e.NdJ("ngModelChange",function(a){return n.state=a}),e.qZA(),e.TgZ(17,"label",8),e._UZ(18,"i",9),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"small",6),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.TgZ(24,"div",10),e.TgZ(25,"input",11),e.NdJ("ngModelChange",function(a){return n.state=a}),e.qZA(),e.TgZ(26,"label",12),e._UZ(27,"i",13),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"small",6),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.qZA(),e.TgZ(33,"div",1),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div",10),e.TgZ(37,"input",14),e.NdJ("ngModelChange",function(a){return n.canMembersDecorate=a}),e.qZA(),e.TgZ(38,"label",15),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,14,"group.edit.tabcaption.5")),e.xp6(3),e.Oqu(e.lcZ(5,16,"group.edit.settings.type.caption")),e.xp6(3),e.Q6J("ngModel",n.state),e.xp6(3),e.hij("",e.lcZ(11,18,"group.edit.settings.type.regular.label")," "),e.xp6(3),e.Oqu(e.lcZ(14,20,"group.edit.settings.type.regular.help")),e.xp6(3),e.Q6J("ngModel",n.state),e.xp6(3),e.hij("",e.lcZ(20,22,"group.edit.settings.type.exclusive.label")," "),e.xp6(3),e.Oqu(e.lcZ(23,24,"group.edit.settings.type.exclusive.help")),e.xp6(3),e.Q6J("ngModel",n.state),e.xp6(3),e.hij("",e.lcZ(29,26,"group.edit.settings.type.private.label")," "),e.xp6(3),e.Oqu(e.lcZ(32,28,"group.edit.settings.type.private.help")),e.xp6(3),e.Oqu(e.lcZ(35,30,"group.edit.settings.rights.caption")),e.xp6(3),e.Q6J("ngModel",n.canMembersDecorate),e.xp6(2),e.Oqu(e.lcZ(40,32,"group.edit.settings.rights.members.help")))},directives:[_._,_.Fj,_.JJ,_.On,_.Wl],pipes:[m],encapsulation:2}),i})(),T1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Ot],imports:[[oe]]}),i})();e.B6R(Ki,[u.O5,h1,Lo,ko,d1],[m]),e.B6R(yo,[u.O5,v,b,u.mk,f1,Lo,ko,v1],[m]);let b1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[pi],imports:[[]]}),i})(),C1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[oe]]}),i})();class Yn{constructor(o,t){this._inventoryService=o,this._ngZone=t}get canPlace(){return!!this._inventoryService.roomSession}get tradeRunning(){return this._inventoryService.controller.tradeService.running}offerOnMarketplace(){this._inventoryService.controller.furnitureService.offerOnMarketplace()}attemptItemPlacement(){!this.canPlace||this.tradeRunning||this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.furnitureService.attemptItemPlacement())}attemptBotPlacement(){!this.canPlace||this.tradeRunning||this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.botService.attemptBotPlacement())}attemptPetPlacement(){!this.canPlace||this.tradeRunning||this._ngZone.runOutsideAngular(()=>this._inventoryService.controller.petService.attemptPetPlacement())}}let E1=(()=>{class i{constructor(t){this.elementRef=t,this.badge="",this.isGroup=!1,this.asBackground=!1,this.needsUpdate=!0}ngOnInit(){this.needsUpdate&&this.buildBadge()}ngOnChanges(t){const n=t.badge;n&&n.previousValue!==n.currentValue&&(this.needsUpdate=!0);const r=t.isGroup;r&&r.previousValue!==r.currentValue&&(this.needsUpdate=!0),this.needsUpdate&&this.buildBadge()}buildBadge(){this.needsUpdate=!1;const t=this.badgeUrl;if(!t||!t.length)return;const n=this.elementRef.nativeElement;if(n)if(this.asBackground)n.style.backgroundImage=`url(${t})`;else{const r=n.getElementsByClassName("badge-image");let a=r.length;for(;a<0;)r[a].remove(),a--;const c=document.createElement("img");c.className="badge-image",c.src=t}}get badgeUrl(){return this.isGroup?s.wjX.instance.getConfiguration("badge.asset.group.url").replace("%badgedata%",this.badge):s.wjX.instance.getConfiguration("badge.asset.url").replace("%badgename%",this.badge)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","badge-image",""]],inputs:{badge:"badge",isGroup:"isGroup",asBackground:"asBackground"},features:[e.TTD]}),i})();const S1=["nitro-inventory-badges-component",""];function A1(i,o){1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,2,"inventory.empty.title")),e.xp6(3),e.hij(" ",e.lcZ(10,4,"inventory.effects.defaultdescription")," "))}const Po=function(i){return{active:i}};function w1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectBadge(a)}),e._UZ(1,"button",21),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Po,n.selectedBadge===t))("badge",t)("asBackground",!0)}}function x1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectBadge(a)}),e._UZ(1,"button",21),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(3,Po,n.selectedBadge===t))("badge",t)("asBackground",!0)}}function Z1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.TgZ(1,"div",18),e.TgZ(2,"div",22),e.TgZ(3,"div",23),e._UZ(4,"nitro-badge",24),e.TgZ(5,"div",25),e.TgZ(6,"p",26),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",27),e.TgZ(9,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).wearBadge()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("badge",t.selectedBadge)("isGroup",!1),e.xp6(3),e.Oqu(t.selectedBadgeName),e.xp6(2),e.Q6J("disabled",t.badgeButtonDisabled),e.xp6(1),e.Oqu(e.lcZ(11,5,t.isWearingBadge(t.selectedBadge)?"inventory.badges.clearbadge":"inventory.badges.wearbadge"))}}function I1(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8),e.TgZ(2,"perfect-scrollbar",9),e.TgZ(3,"div",10),e.YNc(4,w1,2,5,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",12),e.TgZ(6,"p",13),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",14),e.TgZ(10,"div",15),e.YNc(11,x1,2,5,"div",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,Z1,12,7,"div",16),e.TgZ(13,"div",17),e.TgZ(14,"div",18),e.TgZ(15,"div",19),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.badges),e.xp6(3),e.Oqu(e.lcZ(8,5,"inventory.badges.activebadges")),e.xp6(4),e.Q6J("ngForOf",t.activeBadges),e.xp6(1),e.Q6J("ngIf",t.selectedBadge),e.xp6(4),e.hij("",e.Dn7(17,7,"achievements_score_description","score",t.achievementsScore)," ")}}let y1=(()=>{class i extends Yn{constructor(t,n,r,a){super(r,a),this._notificationService=t,this._achievementService=n,this._inventoryService=r,this._ngZone=a,this.selectedBadge=null}ngOnInit(){this._inventoryService.badgesController=this,this._inventoryService.controller.badgeService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBadgesSeen(),this._inventoryService.badgesController=null}prepareInventory(){!this._inventoryService.controller.badgeService.isInitalized||this._inventoryService.controller.badgeService.needsUpdate?this._inventoryService.controller.badgeService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedBadge&&this.badges.indexOf(this.selectedBadge)>-1?this.selectBadge(this.selectedBadge):this.selectFirstBadge()}selectFirstBadge(){let t=null;for(const n of this.badges)if(t){t=n;break}this.selectBadge(t)}selectBadge(t){this.selectedBadge!==t&&(this.selectedBadge=t)}wearBadge(){const t=this.selectedBadge;if(!t)return;this._inventoryService.controller.badgeService.wearOrClearBadge(t);const n=new s.iSG;for(const r of this.activeBadges)n.addActivatedBadge(r);s.wjX.instance.communication.connection.send(n)}isWearingBadge(t){return this._inventoryService.controller.badgeService.isWearingBadge(t)}get hasBadgeItems(){return this.badges&&this.badges.length>0}get badges(){return this._inventoryService.controller.badgeService.badges}get activeBadges(){return this._inventoryService.controller.badgeService.activeBadges}get selectedBadgeName(){return this.selectedBadge&&s.wjX.instance.localization.getBadgeName(this.selectedBadge)||null}get badgeButtonDisabled(){const t=this._inventoryService.controller.badgeService.badgeLimitReached();return(!this.selectedBadge||!this.isWearingBadge(this.selectedBadge))&&t}get achievementsScore(){return this._achievementService.achievementScore}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(Xt),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-badges-component",""]],features:[e.qOj],attrs:S1,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"col-5","d-flex","flex-column"],[1,"mb-1"],[1,"grid-container","w-100"],[1,"grid-items","grid-3"],["class","row w-100 m-0 mt-2",4,"ngIf"],[1,"row","w-100","m-0","mt-2"],[1,"col"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","rounded","text-center","p-1"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"click"],["type","button","badge-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","badge","asBackground"],[1,"d-flex","justify-content-between","align-items-center","bg-secondary","rounded","p-2"],[1,"d-flex","flex-grow-1"],[1,"d-flex","justify-content-center","align-items-center",2,"min-height","50px",3,"badge","isGroup"],[1,"d-flex","flex-column","justify-content-center","flex-grow-1","ml-2"],[1,"mb-0"],[1,"d-flex"],["type","button",1,"btn","btn-secondary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,A1,11,6,"div",1),e.YNc(2,I1,18,11,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.hasBadgeItems),e.xp6(1),e.Q6J("ngIf",n.hasBadgeItems))},directives:[u.O5,C.Vv,u.sg,E1,u.mk,Le],pipes:[m],encapsulation:2}),i})();const R1=["nitro-inventory-bots-component",""];function M1(i,o){1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,2,"inventory.empty.bots.title")),e.xp6(3),e.hij(" ",e.lcZ(10,4,"inventory.empty.bots.desc")," "))}const O1=function(i,o){return{active:i,"bg-success":o}};function U1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("mousedown",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseDown(a)})("mouseout",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseOut(a)}),e._UZ(1,"button",16),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(6,O1,n.selectedItem===t,t.isUnseen))("scale",4)("figure",t.botData.figure)("direction",3)("headOnly",!0)("asBackground",!0)}}function N1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).attemptBotPlacement()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.furni.placetoroom")))}function q1(i,o){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"div",18),e._uU(2),e.qZA(),e.TgZ(3,"div",19),e.YNc(4,N1,3,3,"button",20),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.selectedItem.botData.name),e.xp6(2),e.Q6J("ngIf",!t.tradeRunning&&t.canPlace)}}function L1(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8),e.TgZ(2,"perfect-scrollbar",9),e.TgZ(3,"div",10),e.YNc(4,U1,2,9,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",12),e._UZ(6,"div",13),e.YNc(7,q1,5,2,"div",14),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.botItems)("ngForTrackBy",t.trackByType),e.xp6(2),e.Q6J("roomPreviewer",t.roomPreviewer)("height",140),e.xp6(1),e.Q6J("ngIf",t.selectedItem)}}let k1=(()=>{class i extends Yn{constructor(t,n,r){super(n,r),this._notificationService=t,this._inventoryService=n,this._ngZone=r,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.botsController=this,this._inventoryService.controller.botService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllBotsSeen(),this._inventoryService.botsController=null}prepareInventory(){!this._inventoryService.controller.botService.isInitalized||this._inventoryService.controller.botService.needsUpdate?this._inventoryService.controller.botService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.botItems.indexOf(this.selectedItem)>-1?this.selectBotItem(this.selectedItem):this.selectFirstBot()}selectFirstBot(){let t=null;for(const n of this.botItems)if(n){t=n;break}this.selectBotItem(t)}selectBotItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.botService.unselectAllBotItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const n=this.selectedItem.botData;if(!n)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let r=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_WALL_TYPE),a=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_FLOOR_TYPE),c=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_LANDSCAPE_TYPE);r=r&&r.length?r:"101",a=a&&a.length?a:"101",c=c&&c.length?c:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(a,r,c),this.roomPreviewer.addAvatarIntoRoom(n.figure,0)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){!t||(this.selectBotItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){!this.mouseDown||this.selectedItem===t&&this.attemptBotPlacement()}trackByType(t,n){return n.id}get botItems(){return this._inventoryService.controller.botService.bots}get hasBotItems(){return!!this.botItems.length}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-bots-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[e.qOj],attrs:R1,decls:3,vars:2,consts:[[1,"row","nitro-inventory-bots-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","avatar-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","scale","figure","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("mouseup",function(){return n.onMouseUp()}),e.YNc(1,M1,11,6,"div",1),e.YNc(2,L1,8,5,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.hasBotItems),e.xp6(1),e.Q6J("ngIf",n.hasBotItems))},directives:[u.O5,C.Vv,u.sg,Nt,cn,u.mk],pipes:[m],encapsulation:2}),i})();const F1=["nitro-inventory-furniture-component",""];function D1(i,o){1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,2,"inventory.empty.title")),e.xp6(3),e.hij(" ",e.lcZ(10,4,"inventory.empty.desc")," "))}function P1(i,o){if(1&i&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.getUnlockedCount())}}function J1(i,o){if(1&i&&(e._UZ(0,"div",29),e.ALo(1,"uniqueNumber")),2&i){const t=e.oxw().$implicit;e.Q6J("innerHtml",e.lcZ(1,1,t.stuffData.uniqueNumber),e.oJD)}}const j1=function(i){return{opacity:i}},V1=function(i,o,t){return{active:i,"bg-success":o,unique:t}},B1=function(i){return{"background-image":i}};function G1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23),e.NdJ("mousedown",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseDown(a)})("mouseout",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseOut(a)}),e.TgZ(1,"button",24),e._UZ(2,"div",25),e.YNc(3,P1,2,1,"div",26),e.YNc(4,J1,2,3,"div",27),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngStyle",e.VKq(5,j1,t.getUnlockedCount()?"1":"0.5")),e.xp6(1),e.Q6J("ngClass",e.kEZ(7,V1,n.selectedGroup===t,t.hasUnseenItems,t.stuffData.uniqueNumber)),e.xp6(1),e.Q6J("ngStyle",e.VKq(11,B1,"url("+n.getIconUrl(t)+")")),e.xp6(1),e.Q6J("ngIf",!t.stuffData.uniqueNumber),e.xp6(1),e.Q6J("ngIf",t.stuffData.uniqueNumber)}}function H1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(),e.MAs(1).setCurrent(r.value)}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.label,"")}}function W1(i,o){if(1&i&&(e.TgZ(0,"div",38),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function Q1(i,o){if(1&i&&(e.TgZ(0,"li",34),e.YNc(1,H1,2,1,"div",35),e.YNc(2,W1,2,1,"div",36),e.qZA()),2&i){const t=o.$implicit;e.oxw();const n=e.MAs(1);e.ekj("active",n.getCurrent()===t.value),e.xp6(1),e.Q6J("ngIf",n.getCurrent()!==t.value),e.xp6(1),e.Q6J("ngIf",n.getCurrent()===t.value)}}function X1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"pagination-template",30,31),e.NdJ("pageChange",function(r){return e.CHM(t),e.oxw(2).paginateConfig.currentPage=r}),e.TgZ(2,"ul",32),e.YNc(3,Q1,3,4,"li",33),e.qZA(),e.qZA()}if(2&i){const t=e.MAs(1),n=e.oxw(2);e.Q6J("id",n.paginateConfig.id)("maxSize",11),e.xp6(3),e.Q6J("ngForOf",t.pages)}}function Y1(i,o){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"div",40),e.ALo(2,"uniqueNumber"),e._UZ(3,"div",40),e.ALo(4,"uniqueNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.selectedGroup.stuffData.uniqueNumber),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.lcZ(4,4,t.selectedGroup.stuffData.uniqueSeries),e.oJD)}}function z1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).attemptItemPlacement()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.furni.placetoroom")))}function K1(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).offerOnMarketplace()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.marketplace.sell")))}const $1=function(i){return{disabled:i}};function ev(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).attemptItemOffer()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(4,$1,!t.selectedGroup.getUnlockedCount())),e.xp6(1),e.Oqu(e.lcZ(2,2,"inventory.trading.offer"))}}function tv(i,o){if(1&i&&(e.TgZ(0,"div",41),e.TgZ(1,"div",42),e._uU(2),e.qZA(),e.TgZ(3,"div",43),e.YNc(4,z1,3,3,"button",44),e.YNc(5,K1,3,3,"button",44),e.YNc(6,ev,3,6,"button",45),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.selectedGroup.name),e.xp6(2),e.Q6J("ngIf",!t.tradeRunning&&t.canPlace),e.xp6(1),e.Q6J("ngIf",t.selectedGroup.isSellable),e.xp6(1),e.Q6J("ngIf",t.tradeRunning)}}function nv(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"div",10),e._UZ(4,"i",11),e.qZA(),e.TgZ(5,"input",12),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().search=r}),e.qZA(),e.TgZ(6,"select",13),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().searchType=r}),e.TgZ(7,"option",14),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"option",14),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",14),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"perfect-scrollbar",15),e.TgZ(17,"div",16),e.YNc(18,G1,5,13,"div",17),e.ALo(19,"paginate"),e.qZA(),e.qZA(),e.YNc(20,X1,4,3,"pagination-template",18),e.qZA(),e.TgZ(21,"div",19),e.YNc(22,Y1,5,6,"div",20),e._UZ(23,"div",21),e.YNc(24,tv,7,4,"div",22),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.search),e.xp6(1),e.Q6J("ngModel",t.searchType),e.xp6(1),e.Q6J("value",""),e.xp6(1),e.Oqu(e.lcZ(9,15,"inventory.filter.option.everything")),e.xp6(2),e.Q6J("value","s"),e.xp6(1),e.Oqu(e.lcZ(12,17,"inventory.furni.tab.floor")),e.xp6(2),e.Q6J("value","i"),e.xp6(1),e.Oqu(e.lcZ(15,19,"inventory.furni.tab.wall")),e.xp6(4),e.Q6J("ngForOf",t.groupItems)("ngForTrackBy",e.xi3(19,21,t.trackByType,t.paginateConfig)),e.xp6(2),e.Q6J("ngIf",t.groupItems.length>t.paginateConfig.itemsPerPage),e.xp6(2),e.Q6J("ngIf",t.selectedGroup&&t.selectedGroup.stuffData.uniqueNumber),e.xp6(1),e.Q6J("roomPreviewer",t.roomPreviewer)("height",140),e.xp6(1),e.Q6J("ngIf",t.selectedGroup)}}let iv=(()=>{class i extends Yn{constructor(t,n,r){super(n,r),this._notificationService=t,this._inventoryService=n,this._ngZone=r,this.roomPreviewer=null,this.selectedGroup=null,this.mouseDown=!1,this._filteredItems=[],this._subscription=null,this._hasGroupItems=!1}ngOnInit(){this._inventoryService.controller.furnitureService.isInitalized&&this.selectExistingGroupOrDefault(),this._inventoryService.furniController=this,this._subscription=this._inventoryService.events.subscribe(t=>{switch(t){case En.INVENTORY_UPDATED:return void this.refreshInventory()}}),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllFurnitureSeen(),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this._inventoryService.furniController=null}refreshInventory(){let t=this._inventoryService.controller.furnitureService.groupItems;if(t.length&&(this._hasGroupItems=!0),this.search&&this.search.length||this.searchType&&this.searchType.length){const n=this.search.toLocaleLowerCase();t=t.filter(r=>{let a=!0;return this.searchType&&1===this.searchType.length&&("s"===this.searchType?a=!r.isWallItem:"i"===this.searchType&&(a=r.isWallItem)),n&&n.length&&(a=r.name.toLocaleLowerCase().includes(n)),a})}this._filteredItems=t}prepareInventory(){!this._inventoryService.controller.furnitureService.isInitalized||this._inventoryService.controller.furnitureService.needsUpdate?this._inventoryService.controller.furnitureService.requestLoad():(this.refreshInventory(),this.selectExistingGroupOrDefault())}selectExistingGroupOrDefault(){this.selectedGroup&&this.groupItems.indexOf(this.selectedGroup)>-1?this.selectGroup(this.selectedGroup):this.selectFirstGroup()}selectFirstGroup(){let t=null;for(const n of this.groupItems)if(n&&!n.locked){t=n;break}this.selectGroup(t)}selectGroup(t){if(this.selectedGroup!==t)if(this._inventoryService.controller.furnitureService.unselectAllGroupItems(),this.selectedGroup=t,this.selectedGroup){this.selectedGroup.selected=!0,this.selectedGroup.hasUnseenItems&&(this.selectedGroup.hasUnseenItems=!1);const n=this.selectedGroup.getLastItem();if(!n)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let r=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_WALL_TYPE),a=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_FLOOR_TYPE),c=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_LANDSCAPE_TYPE);r=r&&r.length?r:"101",a=a&&a.length?a:"101",c=c&&c.length?c:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateObjectRoom(a,r,c),n.category===M._Str_3639||n.category===M._Str_3683||n.category===M._Str_3432?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),a=n.category===M._Str_3683?this.selectedGroup.stuffData.getLegacyString():a,r=n.category===M._Str_3639?this.selectedGroup.stuffData.getLegacyString():r,c=n.category===M._Str_3432?this.selectedGroup.stuffData.getLegacyString():c,this.roomPreviewer.updateObjectRoom(a,r,c)):t.isWallItem?(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!0,!0),this.roomPreviewer.addWallItemIntoRoom(this.selectedGroup.type,new s.UJ(90),n.stuffData.getLegacyString())):(this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.addFurnitureIntoRoom(this.selectedGroup.type,new s.UJ(90),this.selectedGroup.stuffData,n.extra.toString()))}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){!t||(this.selectGroup(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){!this.mouseDown||this.selectedGroup===t&&this.attemptItemPlacement()}attemptItemOffer(t=1){if(!this.selectedGroup||!this.tradeRunning)return;const n=this.selectedGroup;if(!n)return;const r=n.getTradeItems(t);if(!r||!r.length)return;let a=null;const c=[];for(const l of r)c.push(l.id),a||(a=l);!a||this.tradeRunning&&(this._inventoryService.controller.tradeService.getOwnTradingItemIds().length+c.length<=1500?this._inventoryService.controller.tradeService.offerItems(c,a.isWallItem,a.type,a.category,a.isGroupable,a.stuffData):this._notificationService.alert("${trading.items.too_many_items.desc}","${trading.items.too_many_items.title}"))}getIconUrl(t){return t&&t.iconUrl||null}trackByType(t,n){return n.type}get groupItems(){return this._filteredItems}get paginateConfig(){return{id:"custom",itemsPerPage:5,currentPage:1}}get search(){return this._inventoryService.controller.furnitureService.search}set search(t){this._inventoryService.controller.furnitureService.search=t,this.refreshInventory()}get searchType(){return this._inventoryService.controller.furnitureService.searchType}set searchType(t){this._inventoryService.controller.furnitureService.searchType=t,this.refreshInventory()}get hasGroupItems(){return this._hasGroupItems}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-furniture-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[e.qOj],attrs:F1,decls:3,vars:2,consts:[[1,"row","nitro-inventory-furni-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"d-flex","mb-2"],[1,"d-flex","justify-content-center","align-items-center","bg-secondary","border","shadow","px-2"],[1,"fas","fa-search"],["type","text",1,"form-control","form-control-sm","flex-grow-1",3,"ngModel","ngModelChange"],[1,"form-control","form-control-sm","w-auto",3,"ngModel","ngModelChange"],[3,"value"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"ngStyle","mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","maxSize","pageChange",4,"ngIf"],[1,"col-5","d-flex","flex-column"],["class","unique-counter-compact",4,"ngIf"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"ngStyle","mousedown","mouseout"],["type","button",1,"position-relative","btn","btn-secondary","align-items-end","detail-info",3,"ngClass"],[1,"position-absolute","detail-info","has-image",3,"ngStyle"],["class","position-absolute btn btn-sm btn-primary px-1 py-0 rounded count",4,"ngIf"],["class","position-absolute unique-counter",3,"innerHtml",4,"ngIf"],[1,"position-absolute","btn","btn-sm","btn-primary","px-1","py-0","rounded","count"],[1,"position-absolute","unique-counter",3,"innerHtml"],[3,"id","maxSize","pageChange"],["p","paginationApi"],[1,"pagination","pagination-sm","custom-pagination"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link",3,"click",4,"ngIf"],["class","page-link",4,"ngIf"],[1,"page-link",3,"click"],[1,"page-link"],[1,"unique-counter-compact"],[3,"innerHTML"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary w-100",3,"ngClass","click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"],["type","button",1,"btn","btn-secondary","w-100",3,"ngClass","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("mouseup",function(){return n.onMouseUp()}),e.YNc(1,D1,11,6,"div",1),e.YNc(2,nv,25,24,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.hasGroupItems),e.xp6(1),e.Q6J("ngIf",n.hasGroupItems))},directives:[u.O5,_.Fj,_.JJ,_.On,_.EJ,_.YN,_.Kr,C.Vv,u.sg,Nt,u.PC,u.mk,Wn.tk],pipes:[m,Wn._s,Vt],encapsulation:2}),i})();const ov=["nitro-inventory-pets-component",""];function rv(i,o){1&i&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"br"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Oqu(e.lcZ(7,2,"inventory.empty.pets.title")),e.xp6(3),e.hij(" ",e.lcZ(10,4,"inventory.empty.pets.desc")," "))}const sv=function(i,o){return{active:i,"bg-success":o}};function av(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("mousedown",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseDown(a)})("mouseout",function(){const a=e.CHM(t).$implicit;return e.oxw(2).onMouseOut(a)}),e._UZ(1,"button",16),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.WLB(5,sv,n.selectedItem===t,t.isUnseen))("petFigureData",t.petData.figureData)("direction",2)("headOnly",!0)("asBackground",!0)}}function cv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).attemptPetPlacement()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"inventory.furni.placetoroom")))}function lv(i,o){if(1&i&&(e.TgZ(0,"div",17),e.TgZ(1,"div",18),e._uU(2),e.qZA(),e.TgZ(3,"div",19),e.YNc(4,cv,3,3,"button",20),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.selectedItem.petData.name),e.xp6(2),e.Q6J("ngIf",!t.tradeRunning&&t.canPlace)}}function uv(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8),e.TgZ(2,"perfect-scrollbar",9),e.TgZ(3,"div",10),e.YNc(4,av,2,8,"div",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",12),e._UZ(6,"div",13),e.YNc(7,lv,5,2,"div",14),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.petItems)("ngForTrackBy",t.trackByType),e.xp6(2),e.Q6J("roomPreviewer",t.roomPreviewer)("height",140),e.xp6(1),e.Q6J("ngIf",t.selectedItem)}}let _v=(()=>{class i extends Yn{constructor(t,n,r){super(n,r),this._notificationService=t,this._inventoryService=n,this._ngZone=r,this.roomPreviewer=null,this.selectedItem=null,this.mouseDown=!1}ngOnInit(){this._inventoryService.petsController=this,this._inventoryService.controller.petService.isInitalized&&this.selectExistingGroupOrDefault(),this.prepareInventory()}ngOnDestroy(){this._inventoryService.controller.setAllPetsSeen(),this._inventoryService.petsController=null}prepareInventory(){!this._inventoryService.controller.petService.isInitalized||this._inventoryService.controller.petService.needsUpdate?this._inventoryService.controller.petService.requestLoad():this.selectExistingGroupOrDefault()}selectExistingGroupOrDefault(){this.selectedItem&&this.petItems.indexOf(this.selectedItem)>-1?this.selectPetItem(this.selectedItem):this.selectFirstPet()}selectFirstPet(){let t=null;for(const n of this.petItems)if(n){t=n;break}this.selectPetItem(t)}selectPetItem(t){if(this.selectedItem!==t)if(this._inventoryService.controller.petService.unselectAllPetItems(),this.selectedItem=t,this.selectedItem){this.selectedItem.selected=!0,this.selectedItem.isUnseen&&(this.selectedItem.isUnseen=!1);const n=this.selectedItem.petData;if(!n)return;this._ngZone.runOutsideAngular(()=>{if(this.roomPreviewer){let r=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_WALL_TYPE),a=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_FLOOR_TYPE),c=s.wjX.instance.roomEngine.getRoomInstanceVariable(s.wjX.instance.roomEngine.activeRoomId,s.fql.ROOM_LANDSCAPE_TYPE);r=r&&r.length?r:"101",a=a&&a.length?a:"101",c=c&&c.length?c:"1.1",this.roomPreviewer.reset(!1),this.roomPreviewer.updateRoomWallsAndFloorVisibility(!1,!0),this.roomPreviewer.updateObjectRoom(a,r,c),this.roomPreviewer.addPetIntoRoom(n.figureData.figuredata)}})}else this._ngZone.runOutsideAngular(()=>this.roomPreviewer&&this.roomPreviewer.reset(!1))}onMouseDown(t){!t||(this.selectPetItem(t),this.mouseDown=!0)}onMouseUp(){this.mouseDown=!1}onMouseOut(t){!this.mouseDown||this.selectedItem===t&&this.attemptPetPlacement()}trackByType(t,n){return n.id}get petItems(){return this._inventoryService.controller.petService.pets}get hasPetItems(){return!!this.petItems.length}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-pets-component",""]],inputs:{roomPreviewer:"roomPreviewer"},features:[e.qOj],attrs:ov,decls:3,vars:2,consts:[[1,"row","nitro-inventory-pets-component",3,"mouseup"],["class","col-12",4,"ngIf"],[4,"ngIf"],[1,"col-12"],[1,"row","pt-2"],[1,"col-4","d-flex","justify-content-center","align-items-center"],[1,"empty-image"],[1,"col-8","pt-3"],[1,"col-7","d-flex","flex-column",2,"z-index","1"],[1,"grid-container","w-100",2,"min-height","209px","max-height","209px","height","209px"],[1,"grid-items","grid-5"],["class","d-flex flex-column item-detail justify-content-center align-items-center",3,"mousedown","mouseout",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-5","d-flex","flex-column"],["nitro-room-preview-component","",1,"room-preview",3,"roomPreviewer","height"],["class","d-flex flex-column flex-grow-1 justify-content-between","style","z-index: 1;",4,"ngIf"],[1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"mousedown","mouseout"],["type","button","pet-image","",1,"position-relative","btn","btn-secondary","align-items-end","detail-info","has-image",3,"ngClass","petFigureData","direction","headOnly","asBackground"],[1,"d-flex","flex-column","flex-grow-1","justify-content-between",2,"z-index","1"],[1,"d-flex","justify-content-center","align-items-center","w-100","h-100"],[1,"btn-group-vertical","w-100"],["type","button","class","btn btn-secondary w-100",3,"click",4,"ngIf"],["type","button",1,"btn","btn-secondary","w-100",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("mouseup",function(){return n.onMouseUp()}),e.YNc(1,rv,11,6,"div",1),e.YNc(2,uv,8,5,"ng-container",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!n.hasPetItems),e.xp6(1),e.Q6J("ngIf",n.hasPetItems))},directives:[u.O5,C.Vv,u.sg,Nt,Wi,u.mk],pipes:[m],encapsulation:2}),i})();const gv=["imageElement"],dv=["nitro-inventory-offer-marketplace-component",""];function mv(i,o){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e.ALo(2,"uniqueNumber"),e._UZ(3,"div",22),e.ALo(4,"uniqueNumber"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.item.stuffData.uniqueNumber),e.oJD),e.xp6(2),e.Q6J("innerHTML",e.lcZ(4,4,t.item.stuffData.uniqueSeries),e.oJD)}}const pv=function(i){return{"background-image":i}};function hv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.YNc(10,mv,5,6,"div",9),e._UZ(11,"div",10,11),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"div"),e._uU(15),e.qZA(),e.TgZ(16,"div",13),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",7),e.TgZ(19,"div",14),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"input",15),e.NdJ("input",function(r){return e.CHM(t),e.oxw().updateInterface(r)})("ngModelChange",function(r){return e.CHM(t),e.oxw().askingPrice=r}),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e._uU(24),e.qZA(),e.TgZ(25,"div",17),e._uU(26),e.qZA(),e.TgZ(27,"div",18),e.TgZ(28,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().postOffer()}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("center",!0),e.xp6(3),e.Oqu(e.lcZ(4,14,"inventory.marketplace.make_offer.title")),e.xp6(7),e.Q6J("ngIf",t.item&&t.item.stuffData.uniqueNumber),e.xp6(1),e.Q6J("ngStyle",e.VKq(22,pv,"url("+t.imageUrl+")")),e.xp6(4),e.Oqu(t.getFurniTitle()),e.xp6(2),e.Oqu(t.getFurniDescription()),e.xp6(3),e.Oqu(e.lcZ(21,16,"inventory.marketplace.make_offer.price_request")),e.xp6(2),e.Q6J("ngModel",t.askingPrice),e.xp6(2),e.hij(" ",t.getAveragePrice()," "),e.xp6(1),e.Q6J("ngClass",t.canPostItem?"badge-success":"badge-secondary"),e.xp6(1),e.Oqu(t.creditsPrice()),e.xp6(2),e.Q6J("disabled",!t.canPostItem),e.xp6(1),e.Oqu(e.lcZ(30,18,"inventory.marketplace.make_offer.post")),e.xp6(3),e.Oqu(e.lcZ(33,20,"inventory.marketplace.no_credits.cancel"))}}function fv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"h6",3),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeConfirmDialog()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",23),e._uU(9),e.qZA(),e.TgZ(10,"div",18),e.TgZ(11,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().doPostOffer()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeConfirmDialog()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("center",!0),e.xp6(3),e.Oqu(e.lcZ(4,5,"inventory.marketplace.confirm_offer.title")),e.xp6(6),e.Oqu(t.confirmationText()),e.xp6(3),e.Oqu(e.lcZ(13,7,"inventory.marketplace.make_offer.post")),e.xp6(3),e.Oqu(e.lcZ(16,9,"inventory.marketplace.confirm_offer.cancel"))}}let vv=(()=>{class i{constructor(t,n,r,a){this._catalogService=t,this._inventoryFurniService=n,this._inventoryService=r,this._ngZone=a,this.showMainWindow=!1,this.askingPrice=null,this.showConfirmDialog=!1,this._imageUrl="",this._text=null,this.canPostItem=!1}ngOnChanges(t){if(!t.item)return;const r=t.item.currentValue;r&&t.item.previousValue!==r&&this.refresh()}hide(){this.closeMainWindow()}refresh(){this.updateInterface(null),this.refreshImage()}refreshImage(){this._ngZone.runOutsideAngular(()=>{this._imageUrl="";const t=this.item;let n;if(n=this.item.isWallItem?s.wjX.instance.roomEngine.getFurnitureWallImage(t.type,new s.UJ(90,0,0),64,this,4293848814,this.item.extra.toString()):s.wjX.instance.roomEngine.getFurnitureFloorImage(t.type,new s.UJ(90,0,0),64,this,4293848814,this.item.extra.toString()),n){const r=n.getImage();r&&this._ngZone.run(()=>this._imageUrl=r.src)}})}purchase(){}completePurchase(){this._ngZone.runOutsideAngular(()=>{const t=new HTMLImageElement;t.className="toolbar-icon-animation",t.src=this._imageUrl,t.style.visibility="hidden",this.imageElement&&this.imageElement.nativeElement.appendChild(t);const n=t.getBoundingClientRect(),r=new s.Pdl(t,n.x,n.y);r.iconName=s.V3W.INVENTORY,s.wjX.instance.roomEngine.events.dispatchEvent(r)})}get imageUrl(){return this._imageUrl}getFurniTitle(){const t=this.item;return s.wjX.instance.localization.getValue(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type)}getFurniDescription(){const t=this.item;return s.wjX.instance.localization.getValue(t.isWallItem?"wallItem.desc."+t.type:"roomItem.desc."+t.type)}confirmationText(){const t=this.item,r=s.wjX.instance.localization.getValue(t.isWallItem?"wallItem.name."+t.type:"roomItem.name."+t.type);return s.wjX.instance.localization.getValueWithParameters("inventory.marketplace.confirm_offer.info",["furniname","price"],[r,this.askingPrice.toString()])}getAveragePrice(){let t=s.wjX.instance.localization.getValue("inventory.marketplace.make_offer.average_price");const n=this._inventoryFurniService.marketPlaceConfig.commission;t=t.replace("%days%",this._inventoryFurniService.marketPlaceConfig.displayTime.toString());const a=this._inventoryFurniService.marketPlaceItemStats.averagePrice,c=0==a?" - ":a.toString();t=t.replace("%price%",c);const l=Math.floor(this._inventoryFurniService.marketPlaceItemStats.averagePrice/(1+.01*n)),g=0==l?" - ":l.toString();t=t.replace("%price_no_commission%",g);const d=this._inventoryFurniService.marketPlaceItemStats.averagePrice,h=0==d?" - ":d.toString();return t=t.replace("%average%",h),t}imageReady(t,n,r){if(n){if(r)return void this._ngZone.run(()=>this._imageUrl=r.src);if(n){const a=s.Oau.generateImageUrl(n);a&&this._ngZone.run(()=>this._imageUrl=a)}}}updateInterface(t){var n;const a=this._inventoryFurniService.marketPlaceConfig;let c=t?parseInt(t.target.value):null!==(n=this.askingPrice)&&void 0!==n?n:0;const l=9999;c>l&&(this.askingPrice=l,c=l,t&&(t.target.value=l));const g=Math.max(Math.ceil(.01*a.commission*c),1),d=c+g;if(c<a.minimumPrice)this.canPostItem=!1,this._text=s.wjX.instance.localization.getValueWithParameter("inventory.marketplace.make_offer.min_price","minprice",a.minimumPrice.toString());else{this.canPostItem=!0;let f=s.wjX.instance.localization.getValue("inventory.marketplace.make_offer.final_price");f=f.replace("%commission%",g.toString()),f=f.replace("%finalprice%",d.toString()),this._text=f}s.wjX.instance.localization.getValue("inventory.marketplace.make_offer.min_price")}closeMainWindow(){this.askingPrice=null,this.updateInterface(null),this._inventoryService.marketPlaceOfferVisible=!1,this._inventoryFurniService.marketPlaceItemStats=null}creditsPrice(){return this._text}imageFailed(t){}postOffer(){this._inventoryService.marketPlaceOfferVisible=!1,this.showConfirmDialog=!0}doPostOffer(){s.wjX.instance.communication.connection.send(new s.f84(this.askingPrice,this.item.isWallItem?2:1,this.item.ref)),this.showConfirmDialog=!1,this.closeMainWindow()}closeConfirmDialog(){this.showConfirmDialog=!1}get offerTime(){return this._inventoryFurniService.marketPlaceConfig.offerTime}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de),e.Y36(En),e.Y36(ge),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-inventory-offer-marketplace-component",""]],viewQuery:function(t,n){if(1&t&&e.Gf(gv,5),2&t){let r;e.iGM(r=e.CRH())&&(n.imageElement=r.first)}},inputs:{item:"item",showMainWindow:"showMainWindow"},features:[e.TTD],attrs:dv,decls:2,vars:2,consts:[["class","nitro-inventory-offer-marketplace-component card",3,"bringToTop","draggable","center",4,"ngIf"],[1,"nitro-inventory-offer-marketplace-component","card",3,"bringToTop","draggable","center"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"p-3"],[1,"d-flex","flex-row","mb-3"],[1,"position-relative","bg-secondary","rounded"],["class","unique-counter-compact","style","right: 0px;",4,"ngIf"],[1,"product-preview","bg-secondary",3,"ngStyle"],["imageElement",""],[1,"ml-2","align-self-center"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"align-self-center",2,"white-space","nowrap"],["type","number",1,"form-control","form-control-sm","w-100","ml-2",3,"ngModel","input","ngModelChange"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2","w-100"],[1,"badge","badge-sm","text-wrap","mb-3","w-100",3,"ngClass"],[1,"btn-group","w-100"],["type","button",1,"btn","btn-success",3,"disabled","click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"unique-counter-compact",2,"right","0px"],[3,"innerHTML"],[1,"mb-3"],["type","button",1,"btn","btn-success",3,"click"]],template:function(t,n){1&t&&(e.YNc(0,hv,34,24,"div",0),e.YNc(1,fv,17,11,"div",0)),2&t&&(e.Q6J("ngIf",n.showMainWindow),e.xp6(1),e.Q6J("ngIf",n.showConfirmDialog))},directives:[u.O5,b,v,u.PC,_.wV,_.Fj,_.JJ,_.On,u.mk],pipes:[m,Vt],encapsulation:2}),i})(),Tv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Co,To,En,ge,bo,un],imports:[[oe]]}),i})();function bv(i,o){if(1&i&&(e.TgZ(0,"p",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"navigator.roomownercaption")," ",t.ownerName,"")}}function Cv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("settings")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.room.popup.info.room.settings")))}function Ev(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("filter")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.roomsettings.roomfilter")))}function Sv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("floor-plan")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"open.floor.plan.editor")))}function Av(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("staff-pick")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.staffPickVisible?"navigator.staffpicks.unpick":"navigator.staffpicks.pick"))}}function wv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleButton("room-mute")}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,t.mutedVisible?"navigator.muteall_on":"navigator.muteall_off"),"")}}e.B6R(wo,[u.O5,b,v,u.mk,k1,_v,iv,y1,ln,vv],[m]);let xv=(()=>{class i{constructor(t,n){this._navigatorService=t,this._settingsService=n}hide(){this._navigatorService.roomInfoShowing=!1}handleButton(t){if(t)switch(t){case"settings":return void this.openRoomSettings();case"filter":return;case"floor-plan":return void(this._settingsService.floorPlanVisible=!0);case"staff-pick":return void this.staffPick();case"room-mute":this.muteRoom();break;case"report":return}}openRoomSettings(){s.wjX.instance.communication.connection.send(new s.OPC(this.roomData.roomId))}staffPick(){!this.roomData||(this.roomData.roomPicker=!this.roomData.roomPicker,s.wjX.instance.communication.connection.send(new s.RxT(this.roomData.roomId)))}muteRoom(){!this.roomData||(this.roomData.allInRoomMuted=!this.roomData.allInRoomMuted,s.wjX.instance.communication.connection.send(new s.R0j))}get data(){return this._navigatorService.data}get roomData(){return this.data&&this.data.enteredGuestRoom||null}get roomName(){return this.roomData&&this.roomData.roomName||""}get ownerName(){return this.roomData&&this.roomData.ownerName||""}get showOwner(){return this.roomData&&this.roomData.showOwner}get ranking(){return this.roomData&&this.roomData.ranking||0}get roomSettingsVisible(){return!!this.roomData&&(this.data.currentRoomOwner||s.wjX.instance.sessionDataManager.securityLevel>=s.KSJ.MODERATOR)}get roomFilterVisible(){return!!this.roomData&&(this.data.currentRoomOwner||s.wjX.instance.sessionDataManager.securityLevel>=s.KSJ.MODERATOR)}get floorPlanVisible(){if(!this.roomData)return!1;const t=s.wjX.instance.roomSessionManager.getSession(this.roomData.roomId);return!!t&&t.controllerLevel>=s.A5x.ROOM_OWNER}get addStaffPickedVisible(){return!!this.roomData&&s.wjX.instance.sessionDataManager.securityLevel>=s.KSJ.COMMUNITY}get hoomRegionVisible(){return!!this.roomData&&this.roomData.showOwner}get staffPickVisible(){return!!this.roomData&&this.roomData.roomPicker}get canMuteVisible(){return!!this.roomData&&this.roomData.canMute}get mutedVisible(){return!!this.roomData&&this.roomData.allInRoomMuted}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-room-info-component"]],decls:26,vars:17,consts:[[1,"nitro-navigator-room-info","card",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","flex-column"],[1,"h5","m-0","text-break"],["class","h6 m-0",4,"ngIf"],[1,"h6","m-0"],[1,"room-thumbnail"],["src","","image-placeholder",""],[1,"btn-group-vertical","w-100","mt-2"],["type","button","class","btn btn-secondary mb-1",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary mb-1","disabled","",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","disabled","",1,"btn","btn-danger","mb-1",3,"click"],["type","button",1,"btn","btn-secondary","mb-1",3,"click"],["type","button","disabled","",1,"btn","btn-secondary","mb-1",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"p",7),e._uU(10),e.qZA(),e.YNc(11,bv,3,4,"p",8),e.TgZ(12,"p",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"div",10),e._UZ(16,"img",11),e.qZA(),e.TgZ(17,"div",12),e.YNc(18,Cv,3,3,"button",13),e.YNc(19,Ev,3,3,"button",14),e.YNc(20,Sv,3,3,"button",13),e.YNc(21,Av,3,3,"button",15),e.TgZ(22,"button",16),e.NdJ("click",function(){return n.handleButton("report")}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.YNc(25,wv,3,3,"button",13),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,11,"navigator.room.info.popup.title")),e.xp6(7),e.Oqu(n.roomName),e.xp6(1),e.Q6J("ngIf",n.showOwner),e.xp6(2),e.AsE("",e.lcZ(14,13,"navigator.roomrating")," ",n.roomData.ranking,""),e.xp6(5),e.Q6J("ngIf",n.roomSettingsVisible),e.xp6(1),e.Q6J("ngIf",n.roomFilterVisible),e.xp6(1),e.Q6J("ngIf",n.floorPlanVisible),e.xp6(1),e.Q6J("ngIf",n.addStaffPickedVisible),e.xp6(2),e.Oqu(e.lcZ(24,15,"help.emergency.main.report.room")),e.xp6(2),e.Q6J("ngIf",n.canMuteVisible))},directives:[b,v,u.O5,le],pipes:[m],encapsulation:2}),i})();class Zv{constructor(o){this._ngZone=o,this.roomName=null,this.roomDescription=null,this.categoryId="0",this.userCount="0",this.tags=[],this.tradeState="0",this.allowWalkthrough=!1,this.lockState="0",this.password=null,this.confirmPassword=null,this.allowPets=!1,this.allowPetsEat=!1,this.usersWithRights=new Map,this.friendsWithoutRights=new Map,this.hideWalls=!1,this.wallThickness="0",this.floorThickness="0",this.chatBubbleMode="0",this.chatBubbleWeight="0",this.chatBubbleSpeed="0",this.chatFloodProtection="0",this.chatDistance=0,this.muteState="0",this.kickState="0",this.banState="0",this.bannedUsers=new Map,this.selectedUserToUnban=0}selectUserToUnban(o){this._ngZone.run(()=>{this.selectedUserToUnban=this.selectedUserToUnban===o?0:o})}get isValidPassword(){return"2"!==this.lockState||this.password&&this.password.length>0&&this.password===this.confirmPassword}get selectedUsernameToUnban(){return this.selectedUserToUnban>0?this.bannedUsers.get(this.selectedUserToUnban):null}}function Iv(i,o){if(1&i&&(e.TgZ(0,"option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(e.lcZ(2,2,t.name))}}function yv(i,o){if(1&i&&(e.TgZ(0,"option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Rv(i,o){if(1&i&&(e.TgZ(0,"option",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.key),e.xp6(1),e.Oqu(e.lcZ(2,2,t.value))}}let Mv=(()=>{class i{constructor(){this.onSave=new e.vpe,this.onDeleteRoom=new e.vpe}save(){this.onSave.emit(this.roomSettings)}deleteRoom(){this.onDeleteRoom.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-tab-basic-component"]],inputs:{roomSettings:"roomSettings",categories:"categories",maxVisitors:"maxVisitors",tradeSettings:"tradeSettings"},outputs:{onSave:"onSave",onDeleteRoom:"onDeleteRoom"},decls:37,vars:32,consts:[[1,"form-group","mb-2"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","mb-3"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"btn","btn-danger","btn-block",3,"click"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"input",1),e.NdJ("ngModelChange",function(a){return n.roomSettings.roomName=a})("blur",function(){return n.save()}),e.qZA(),e.qZA(),e.TgZ(5,"div",0),e.TgZ(6,"label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"textarea",2),e.NdJ("ngModelChange",function(a){return n.roomSettings.roomDescription=a})("blur",function(){return n.save()}),e.qZA(),e.qZA(),e.TgZ(10,"div",0),e.TgZ(11,"label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"select",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.categoryId=a})("ngModelChange",function(){return n.save()}),e.YNc(15,Iv,3,4,"option",4),e.qZA(),e.qZA(),e.TgZ(16,"div",0),e.TgZ(17,"label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"select",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.userCount=a})("ngModelChange",function(){return n.save()}),e.YNc(21,yv,2,2,"option",4),e.qZA(),e.qZA(),e.TgZ(22,"div",0),e.TgZ(23,"label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"select",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.tradeState=a})("ngModelChange",function(){return n.save()}),e.YNc(27,Rv,3,4,"option",4),e.ALo(28,"keyvalue"),e.qZA(),e.qZA(),e.TgZ(29,"div",5),e.TgZ(30,"input",6),e.NdJ("ngModelChange",function(a){return n.roomSettings.allowWalkthrough=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(31,"label",7),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.TgZ(34,"button",8),e.NdJ("click",function(){return n.deleteRoom()}),e._uU(35),e.ALo(36,"translate"),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,16,"navigator.roomname")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.roomName),e.xp6(3),e.Oqu(e.lcZ(8,18,"navigator.roomsettings.desc")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.roomDescription),e.xp6(3),e.Oqu(e.lcZ(13,20,"navigator.category")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.categoryId),e.xp6(1),e.Q6J("ngForOf",n.categories),e.xp6(3),e.Oqu(e.lcZ(19,22,"navigator.maxvisitors")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.userCount),e.xp6(1),e.Q6J("ngForOf",n.maxVisitors),e.xp6(3),e.Oqu(e.lcZ(25,24,"navigator.tradesettings")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.tradeState),e.xp6(1),e.Q6J("ngForOf",e.lcZ(28,26,n.tradeSettings)),e.xp6(3),e.Q6J("ngModel",n.roomSettings.allowWalkthrough),e.xp6(2),e.Oqu(e.lcZ(33,28,"navigator.roomsettings.allow_walk_through")),e.xp6(3),e.Oqu(e.lcZ(36,30,"navigator.roomsettings.delete")))},directives:[_.Fj,_.JJ,_.On,_.EJ,u.sg,_.Wl,_.YN,_.Kr],pipes:[m,u.Nd],encapsulation:2}),i})();function Ov(i,o){1&i&&(e.TgZ(0,"small",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"navigator.roomsettings.invalidconfirm")," "))}function Uv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",11),e.TgZ(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",12),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().roomSettings.password=r})("blur",function(){return e.CHM(t),e.oxw().save()}),e.qZA(),e.qZA(),e.TgZ(6,"div",13),e.TgZ(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",12),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().roomSettings.confirmPassword=r})("blur",function(){return e.CHM(t),e.oxw().save()}),e.qZA(),e.YNc(11,Ov,3,3,"small",14),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,5,"navigator.roomsettings.password")),e.xp6(2),e.Q6J("ngModel",t.roomSettings.password),e.xp6(3),e.Oqu(e.lcZ(9,7,"navigator.roomsettings.passwordconfirm")),e.xp6(2),e.Q6J("ngModel",t.roomSettings.confirmPassword),e.xp6(1),e.Q6J("ngIf",!t.roomSettings.isValidPassword)}}let Nv=(()=>{class i{constructor(){this.onSave=new e.vpe}save(){this.onSave.emit(this.roomSettings)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-tab-access-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:43,vars:37,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","radio","name","doormode","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","doormode","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","doormode","value","3",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check","mb-2"],["type","radio","name","doormode","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-group","mb-2"],["type","password","placeholder","*****",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"],[1,"form-group","mb-3"],["class","form-text text-muted font-weight-bold","style","color: red !important",4,"ngIf"],[1,"form-text","text-muted","font-weight-bold",2,"color","red !important"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",0),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"input",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.lockState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(11,"label",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"input",5),e.NdJ("ngModelChange",function(a){return n.roomSettings.lockState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(16,"label",4),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.TgZ(19,"div",2),e.TgZ(20,"input",6),e.NdJ("ngModelChange",function(a){return n.roomSettings.lockState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(21,"label",4),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.TgZ(24,"div",7),e.TgZ(25,"input",8),e.NdJ("ngModelChange",function(a){return n.roomSettings.lockState=a}),e.qZA(),e.TgZ(26,"label",4),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.YNc(29,Uv,12,9,"div",9),e.TgZ(30,"div",0),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",7),e.TgZ(34,"input",10),e.NdJ("ngModelChange",function(a){return n.roomSettings.allowPets=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(35,"label",4),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.qZA(),e.TgZ(38,"div",2),e.TgZ(39,"input",10),e.NdJ("ngModelChange",function(a){return n.roomSettings.allowPetsEat=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(40,"label",4),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,17,"navigator.roomsettings.roomaccess.caption")),e.xp6(3),e.Oqu(e.lcZ(5,19,"navigator.roomsettings.roomaccess.info")),e.xp6(3),e.Oqu(e.lcZ(8,21,"navigator.roomsettings.doormode")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.lockState),e.xp6(2),e.Oqu(e.lcZ(13,23,"navigator.roomsettings.doormode.open")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.lockState),e.xp6(2),e.Oqu(e.lcZ(18,25,"navigator.roomsettings.doormode.doorbell")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.lockState),e.xp6(2),e.Oqu(e.lcZ(23,27,"navigator.roomsettings.doormode.invisible")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.lockState),e.xp6(2),e.Oqu(e.lcZ(28,29,"navigator.roomsettings.doormode.password")),e.xp6(2),e.Q6J("ngIf","2"==n.roomSettings.lockState),e.xp6(2),e.Oqu(e.lcZ(32,31,"navigator.roomsettings.pets")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.allowPets),e.xp6(2),e.Oqu(e.lcZ(37,33,"navigator.roomsettings.allowpets")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.allowPetsEat),e.xp6(2),e.Oqu(e.lcZ(42,35,"navigator.roomsettings.allowfoodconsume")))},directives:[_._,_.Fj,_.JJ,_.On,u.O5,_.Wl],pipes:[m],encapsulation:2}),i})();function qv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openProfile(a.key)}),e._uU(2),e.qZA(),e.TgZ(3,"button",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().takeRights(a.key)}),e._UZ(4,"i",9),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.value)}}function Lv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",8),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().giveRights(a.key)}),e._UZ(2,"i",10),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openProfile(a.key)}),e._uU(4),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(4),e.Oqu(t.value)}}const Jo=function(){return["displayed","total"]},jo=function(i,o){return[i,o]};let kv=(()=>{class i{constructor(){this.onSave=new e.vpe,this.onGiveRights=new e.vpe,this.onTakeRights=new e.vpe,this.onOpenProfile=new e.vpe}save(){this.onSave.emit(this.roomSettings)}giveRights(t){this.onGiveRights.emit(t)}takeRights(t){this.onTakeRights.emit(t)}openProfile(t){this.onOpenProfile.emit(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-tab-rights-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onGiveRights:"onGiveRights",onTakeRights:"onTakeRights",onOpenProfile:"onOpenProfile"},decls:18,vars:24,consts:[[1,"row"],[1,"col-6"],[1,"font-weight-bold","mb-2"],[1,"grid-container","position-relativ","mb-1",2,"min-height","400px","max-height","400px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"grid-container","position-relative","mb-1",2,"min-height","400px","max-height","400px"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"],[1,"fas","fa-chevron-left"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"div",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",0),e.TgZ(10,"div",1),e.TgZ(11,"perfect-scrollbar",3),e.YNc(12,qv,5,1,"div",4),e.ALo(13,"keyvalue"),e.qZA(),e.qZA(),e.TgZ(14,"div",1),e.TgZ(15,"perfect-scrollbar",5),e.YNc(16,Lv,5,1,"div",4),e.ALo(17,"keyvalue"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.Dn7(4,4,"navigator.flatctrls.userswithrights",e.DdM(16,Jo),e.WLB(17,jo,n.roomSettings.usersWithRights.size.toString(),n.roomSettings.usersWithRights.size.toString()))),e.xp6(4),e.Oqu(e.Dn7(8,8,"navigator.flatctrls.friends",e.DdM(20,Jo),e.WLB(21,jo,n.roomSettings.friendsWithoutRights.size.toString(),n.roomSettings.friendsWithoutRights.size.toString()))),e.xp6(5),e.Q6J("ngForOf",e.lcZ(13,12,n.roomSettings.usersWithRights)),e.xp6(4),e.Q6J("ngForOf",e.lcZ(17,14,n.roomSettings.friendsWithoutRights)))},directives:[C.Vv,u.sg],pipes:[m,u.Nd],encapsulation:2}),i})(),Fv=(()=>{class i{constructor(){this.onSave=new e.vpe}save(){this.onSave.emit(this.roomSettings)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-tab-vipchat-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave"},decls:88,vars:86,consts:[[1,"font-weight-bold"],[1,"mb-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],[1,"form-control","form-control-sm","mb-3",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","-1"],["value","-2"],[1,"mb-2"],[1,"form-control","form-control-sm","mb-2",3,"ngModel","ngModelChange"],["value","2"],[1,"form-group","mb-0"],["type","number","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","blur"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",0),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"input",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.hideWalls=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(11,"label",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"select",5),e.NdJ("ngModelChange",function(a){return n.roomSettings.wallThickness=a})("ngModelChange",function(){return n.save()}),e.TgZ(15,"option",6),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",7),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",8),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"option",9),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.qZA(),e.TgZ(27,"select",5),e.NdJ("ngModelChange",function(a){return n.roomSettings.floorThickness=a})("ngModelChange",function(){return n.save()}),e.TgZ(28,"option",6),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"option",7),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"option",8),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"option",9),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.qZA(),e.TgZ(40,"div",0),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"div",10),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"select",11),e.NdJ("ngModelChange",function(a){return n.roomSettings.chatBubbleMode=a})("ngModelChange",function(){return n.save()}),e.TgZ(47,"option",6),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"option",7),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.qZA(),e.TgZ(53,"select",11),e.NdJ("ngModelChange",function(a){return n.roomSettings.chatBubbleWeight=a})("ngModelChange",function(){return n.save()}),e.TgZ(54,"option",6),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"option",7),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"option",12),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.qZA(),e.TgZ(63,"select",11),e.NdJ("ngModelChange",function(a){return n.roomSettings.chatBubbleSpeed=a})("ngModelChange",function(){return n.save()}),e.TgZ(64,"option",6),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"option",7),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"option",12),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.qZA(),e.TgZ(73,"select",11),e.NdJ("ngModelChange",function(a){return n.roomSettings.chatFloodProtection=a})("ngModelChange",function(){return n.save()}),e.TgZ(74,"option",6),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.TgZ(77,"option",7),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"option",12),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.qZA(),e.TgZ(83,"div",13),e.TgZ(84,"label"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"input",14),e.NdJ("ngModelChange",function(a){return n.roomSettings.chatDistance=a})("blur",function(){return n.save()}),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,34,"navigator.roomsettings.vip.caption")),e.xp6(3),e.Oqu(e.lcZ(5,36,"navigator.roomsettings.vip.info")),e.xp6(3),e.Oqu(e.lcZ(8,38,"navigator.roomsettings.vip_settings")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.hideWalls),e.xp6(2),e.Oqu(e.lcZ(13,40,"navigator.roomsettings.hide_walls")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.wallThickness),e.xp6(2),e.Oqu(e.lcZ(17,42,"navigator.roomsettings.wall_thickness.normal")),e.xp6(3),e.Oqu(e.lcZ(20,44,"navigator.roomsettings.wall_thickness.thick")),e.xp6(3),e.Oqu(e.lcZ(23,46,"navigator.roomsettings.wall_thickness.thin")),e.xp6(3),e.Oqu(e.lcZ(26,48,"navigator.roomsettings.wall_thickness.thinnest")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.floorThickness),e.xp6(2),e.Oqu(e.lcZ(30,50,"navigator.roomsettings.floor_thickness.normal")),e.xp6(3),e.Oqu(e.lcZ(33,52,"navigator.roomsettings.floor_thickness.thick")),e.xp6(3),e.Oqu(e.lcZ(36,54,"navigator.roomsettings.floor_thickness.thin")),e.xp6(3),e.Oqu(e.lcZ(39,56,"navigator.roomsettings.floor_thickness.thinnest")),e.xp6(3),e.Oqu(e.lcZ(42,58,"navigator.roomsettings.chat_settings")),e.xp6(3),e.Oqu(e.lcZ(45,60,"navigator.roomsettings.chat_settings.info")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.chatBubbleMode),e.xp6(2),e.Oqu(e.lcZ(49,62,"navigator.roomsettings.chat.mode.free.flow")),e.xp6(3),e.Oqu(e.lcZ(52,64,"navigator.roomsettings.chat.mode.line.by.line")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.chatBubbleWeight),e.xp6(2),e.Oqu(e.lcZ(56,66,"navigator.roomsettings.chat.bubbles.width.normal")),e.xp6(3),e.Oqu(e.lcZ(59,68,"navigator.roomsettings.chat.bubbles.width.thin")),e.xp6(3),e.Oqu(e.lcZ(62,70,"navigator.roomsettings.chat.bubbles.width.wide")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.chatBubbleSpeed),e.xp6(2),e.Oqu(e.lcZ(66,72,"navigator.roomsettings.chat.speed.fast")),e.xp6(3),e.Oqu(e.lcZ(69,74,"navigator.roomsettings.chat.speed.normal")),e.xp6(3),e.Oqu(e.lcZ(72,76,"navigator.roomsettings.chat.speed.slow")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.chatFloodProtection),e.xp6(2),e.Oqu(e.lcZ(76,78,"navigator.roomsettings.chat.flood.loose")),e.xp6(3),e.Oqu(e.lcZ(79,80,"navigator.roomsettings.chat.flood.normal")),e.xp6(3),e.Oqu(e.lcZ(82,82,"navigator.roomsettings.chat.flood.strict")),e.xp6(4),e.Oqu(e.lcZ(86,84,"navigator.roomsettings.chat_settings.hearing.distance")),e.xp6(2),e.Q6J("ngModel",n.roomSettings.chatDistance))},directives:[_.Wl,_.JJ,_.On,_.EJ,_.YN,_.Kr,_.qQ,_.wV,_.Fj],pipes:[m],encapsulation:2}),i})();function Dv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",18),e.TgZ(1,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openProfile(a.key)}),e._uU(2),e.qZA(),e.TgZ(3,"button",20),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().roomSettings.selectUserToUnban(a.key)}),e._UZ(4,"i",21),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.value)}}const Pv=function(i){return{disabled:i}};let Jv=(()=>{class i{constructor(){this.onSave=new e.vpe,this.onUnban=new e.vpe,this.onOpenProfile=new e.vpe}save(){this.onSave.emit(this.roomSettings)}unban(){this.onUnban.emit()}openProfile(t){this.onOpenProfile.emit(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-tab-mod-component"]],inputs:{roomSettings:"roomSettings"},outputs:{onSave:"onSave",onUnban:"onUnban",onOpenProfile:"onOpenProfile"},decls:59,vars:54,consts:[[1,"mb-3"],[1,"font-weight-bold"],[1,"form-check","form-check-inline"],["type","radio","name","moderation_mute","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"form-check-label"],["type","radio","name","moderation_mute","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-2"],["type","radio","name","moderation_kick","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_kick","value","2",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","0",1,"form-check-input",3,"ngModel","ngModelChange"],["type","radio","name","moderation_ban","value","1",1,"form-check-input",3,"ngModel","ngModelChange"],[1,"font-weight-bold","mt-3","mb-1"],[1,"row"],[1,"col-6"],[1,"grid-container","position-relativ","mb-1",2,"min-height","150px","max-height","150px"],["class","btn-group mb-1 w-100",4,"ngFor","ngForOf"],[1,"btn","btn-primary","btn-sm","w-100",3,"ngClass","click"],[1,"btn-group","mb-1","w-100"],[1,"btn","btn-primary","btn-sm","w-100",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-chevron-right"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(a){return n.roomSettings.muteState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(8,"label",4),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(a){return n.roomSettings.muteState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(13,"label",4),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",6),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div",2),e.TgZ(20,"input",7),e.NdJ("ngModelChange",function(a){return n.roomSettings.kickState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(21,"label",4),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.TgZ(24,"div",2),e.TgZ(25,"input",8),e.NdJ("ngModelChange",function(a){return n.roomSettings.kickState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(26,"label",4),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.TgZ(29,"div",2),e.TgZ(30,"input",9),e.NdJ("ngModelChange",function(a){return n.roomSettings.kickState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(31,"label",4),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.TgZ(34,"div",6),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"div",2),e.TgZ(38,"input",10),e.NdJ("ngModelChange",function(a){return n.roomSettings.banState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(39,"label",4),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.qZA(),e.TgZ(42,"div",2),e.TgZ(43,"input",11),e.NdJ("ngModelChange",function(a){return n.roomSettings.banState=a})("ngModelChange",function(){return n.save()}),e.qZA(),e.TgZ(44,"label",4),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.qZA(),e.TgZ(47,"div",12),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"div",13),e.TgZ(51,"div",14),e.TgZ(52,"perfect-scrollbar",15),e.YNc(53,Dv,5,1,"div",16),e.ALo(54,"keyvalue"),e.qZA(),e.qZA(),e.TgZ(55,"div",14),e.TgZ(56,"button",17),e.NdJ("click",function(){return n.unban()}),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,24,"navigator.roomsettings.moderation.header")),e.xp6(3),e.Oqu(e.lcZ(5,26,"navigator.roomsettings.moderation.mute.header")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.muteState),e.xp6(2),e.Oqu(e.lcZ(10,28,"navigator.roomsettings.moderation.none")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.muteState),e.xp6(2),e.Oqu(e.lcZ(15,30,"navigator.roomsettings.moderation.rights")),e.xp6(3),e.Oqu(e.lcZ(18,32,"navigator.roomsettings.moderation.kick.header")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.kickState),e.xp6(2),e.Oqu(e.lcZ(23,34,"navigator.roomsettings.moderation.all")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.kickState),e.xp6(2),e.Oqu(e.lcZ(28,36,"navigator.roomsettings.moderation.rights")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.kickState),e.xp6(2),e.Oqu(e.lcZ(33,38,"navigator.roomsettings.moderation.none")),e.xp6(3),e.Oqu(e.lcZ(36,40,"navigator.roomsettings.moderation.ban.header")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.banState),e.xp6(2),e.Oqu(e.lcZ(41,42,"navigator.roomsettings.moderation.none")),e.xp6(3),e.Q6J("ngModel",n.roomSettings.banState),e.xp6(2),e.Oqu(e.lcZ(46,44,"navigator.roomsettings.moderation.rights")),e.xp6(3),e.AsE("",e.lcZ(49,46,"navigator.roomsettings.moderation.banned.users")," (",n.roomSettings.bannedUsers.size,")"),e.xp6(5),e.Q6J("ngForOf",e.lcZ(54,48,n.roomSettings.bannedUsers)),e.xp6(3),e.Q6J("ngClass",e.VKq(52,Pv,0===n.roomSettings.selectedUserToUnban)),e.xp6(1),e.AsE("",e.lcZ(58,50,"navigator.roomsettings.moderation.unban")," ",n.roomSettings.selectedUsernameToUnban,""))},directives:[_._,_.Fj,_.JJ,_.On,C.Vv,u.sg,u.mk],pipes:[m,u.Nd],encapsulation:2}),i})();function jv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-navigator-roomsettings-tab-basic-component",12),e.NdJ("onSave",function(r){return e.CHM(t),e.oxw(2).onSave(r)})("onDeleteRoom",function(){return e.CHM(t),e.oxw(2).onDeleteRoom()}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("roomSettings",t.roomSettings)("categories",t.categories)("maxVisitors",t.maxVisitors)("tradeSettings",t.tradeSettings)}}function Vv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-navigator-roomsettings-tab-access-component",13),e.NdJ("onSave",function(r){return e.CHM(t),e.oxw(2).onSave(r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("roomSettings",t.roomSettings)}}function Bv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-navigator-roomsettings-tab-rights-component",14),e.NdJ("onSave",function(r){return e.CHM(t),e.oxw(2).onSave(r)})("onGiveRights",function(r){return e.CHM(t),e.oxw(2).onGiveRights(r)})("onTakeRights",function(r){return e.CHM(t),e.oxw(2).onTakeRights(r)})("onOpenProfile",function(r){return e.CHM(t),e.oxw(2).onOpenProfile(r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("roomSettings",t.roomSettings)}}function Gv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-navigator-roomsettings-tab-vipchat-component",13),e.NdJ("onSave",function(r){return e.CHM(t),e.oxw(2).onSave(r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("roomSettings",t.roomSettings)}}function Hv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"nitro-navigator-roomsettings-tab-mod-component",15),e.NdJ("onSave",function(r){return e.CHM(t),e.oxw(2).onSave(r)})("onUnban",function(r){return e.CHM(t),e.oxw(2).onUnban(r)})("onOpenProfile",function(r){return e.CHM(t),e.oxw(2).onOpenProfile(r)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("roomSettings",t.roomSettings)}}const An=function(i){return{active:i}};function Wv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"button",3),e.NdJ("click",function(){return e.CHM(t),e.oxw().hide()}),e._UZ(5,"i",4),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTab(1)}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTab(2)}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTab(3)}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTab(4)}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().changeTab(5)}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.YNc(23,jv,1,4,"nitro-navigator-roomsettings-tab-basic-component",8),e.YNc(24,Vv,1,1,"nitro-navigator-roomsettings-tab-access-component",9),e.YNc(25,Bv,1,1,"nitro-navigator-roomsettings-tab-rights-component",10),e.YNc(26,Gv,1,1,"nitro-navigator-roomsettings-tab-vipchat-component",9),e.YNc(27,Hv,1,1,"nitro-navigator-roomsettings-tab-mod-component",11),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,16,"navigator.roomsettings")," "),e.xp6(6),e.Q6J("ngClass",e.VKq(28,An,1===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(10,18,"navigator.roomsettings.tab.1")),e.xp6(2),e.Q6J("ngClass",e.VKq(30,An,2===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(13,20,"navigator.roomsettings.tab.2")),e.xp6(2),e.Q6J("ngClass",e.VKq(32,An,3===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(16,22,"navigator.roomsettings.tab.3")),e.xp6(2),e.Q6J("ngClass",e.VKq(34,An,4===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(19,24,"navigator.roomsettings.tab.4")),e.xp6(2),e.Q6J("ngClass",e.VKq(36,An,5===t.currentTab)),e.xp6(1),e.Oqu(e.lcZ(22,26,"navigator.roomsettings.tab.5")),e.xp6(2),e.Q6J("ngIf",1===t.currentTab),e.xp6(1),e.Q6J("ngIf",2===t.currentTab),e.xp6(1),e.Q6J("ngIf",3===t.currentTab),e.xp6(1),e.Q6J("ngIf",4===t.currentTab),e.xp6(1),e.Q6J("ngIf",5===t.currentTab)}}let Qv=(()=>{class i{constructor(t,n,r,a){this._navigatorService=t,this._friendListService=n,this._notificationService=r,this._ngZone=a,this._currentTab=1,this._messages=[],this._maxVisitors=[],this.onRoomSettingsEvent=this.onRoomSettingsEvent.bind(this),this.onRoomUsersWithRightsEvent=this.onRoomUsersWithRightsEvent.bind(this),this.onRoomBannedUsersEvent=this.onRoomBannedUsersEvent.bind(this),this.clear(),this.registerMessages()}clear(){this._currentTab=1,this.roomSettings=new Zv(this._ngZone),this._roomId=0,this._oldRoomName=null,this._visible=!1}ngOnDestroy(){this.clear(),this.unregisterMessages()}registerMessages(){this._ngZone.runOutsideAngular(()=>{this._messages=[new s.mo0(this.onRoomSettingsEvent),new s.cOx(this.onRoomUsersWithRightsEvent),new s.qG(this.onRoomBannedUsersEvent)];for(const t of this._messages)s.wjX.instance.communication.registerMessageEvent(t)})}unregisterMessages(){this._ngZone.runOutsideAngular(()=>{for(const t of this._messages)s.wjX.instance.communication.removeMessageEvent(t);this._messages=[]})}onRoomSettingsEvent(t){if(!(t instanceof s.mo0))return;const n=t.getParser();!n||(this.clear(),this._roomId=n.roomId,this._ngZone.run(()=>{this.roomSettings.roomName=n.name,this.roomSettings.roomDescription=n.description,this.roomSettings.categoryId=n.categoryId.toString(),this.roomSettings.userCount=n.userCount.toString(),this.roomSettings.tradeState=n.tradeMode.toString(),this.roomSettings.allowWalkthrough=n.allowWalkthrough,this.roomSettings.lockState=n.state.toString(),this.roomSettings.allowPets=n.allowPets,this.roomSettings.hideWalls=n.hideWalls,this.roomSettings.wallThickness=n.thicknessWall.toString(),this.roomSettings.floorThickness=n.thicknessFloor.toString(),this.roomSettings.chatBubbleMode=n.chatSettings.mode.toString(),this.roomSettings.chatBubbleWeight=n.chatSettings.weight.toString(),this.roomSettings.chatBubbleSpeed=n.chatSettings.speed.toString(),this.roomSettings.chatFloodProtection=n.chatSettings.protection.toString(),this.roomSettings.chatDistance=n.chatSettings.distance,this.roomSettings.muteState=n.moderationSettings.allowMute.toString(),this.roomSettings.kickState=n.moderationSettings.allowKick.toString(),this.roomSettings.banState=n.moderationSettings.allowBan.toString(),this._maxVisitors=this._navigatorService.getMaxVisitors(50),this._oldRoomName=n.name,this._oldLockState=n.state.toString(),this._visible=!0}),s.wjX.instance.communication.connection.send(new s.RDt(this._roomId)),s.wjX.instance.communication.connection.send(new s.szb(this._roomId)))}onRoomUsersWithRightsEvent(t){if(!(t instanceof s.cOx))return;const n=t.getParser();!n||(this.roomSettings.usersWithRights=new Map(n.users),this.getFriendsWithoutRights())}onRoomBannedUsersEvent(t){if(!(t instanceof s.qG))return;const n=t.getParser();!n||(this.roomSettings.bannedUsers=new Map(n.users))}getFriendsWithoutRights(){this._friendListService.friends.forEach((t,n)=>{this.roomSettings.usersWithRights.has(n)||this.roomSettings.friendsWithoutRights.set(n,t.name)})}changeTab(t){this._currentTab=t}onDeleteRoom(){const t=s.wjX.instance.localization.getValue("navigator.roomsettings.deleteroom.confirm.title"),n=s.wjX.instance.localization.getValueWithParameter("navigator.roomsettings.deleteroom.confirm.message","room_name","<b>"+this.roomSettings.roomName+"</b>"),r=[new Bt("navigator.roomsettings.delete",()=>{s.wjX.instance.communication.connection.send(new s.Q1w(this._roomId)),this.hide()},["btn-danger"]),new Bt("generic.close",()=>{},["btn-primary"])];this._notificationService.alertWithChoices(n,r,t)}onOpenProfile(t){}onGiveRights(t){!this.roomSettings.friendsWithoutRights.has(t)||(this._ngZone.run(()=>{this.roomSettings.usersWithRights.set(t,this.roomSettings.friendsWithoutRights.get(t)),this.roomSettings.friendsWithoutRights.delete(t)}),s.wjX.instance.communication.connection.send(new s.F3V(t)))}onTakeRights(t){!this.roomSettings.usersWithRights.has(t)||(this._ngZone.run(()=>{this.roomSettings.friendsWithoutRights.set(t,this.roomSettings.usersWithRights.get(t)),this.roomSettings.usersWithRights.delete(t)}),s.wjX.instance.communication.connection.send(new s.Enm(t)))}onUnban(){if(0===this.roomSettings.selectedUserToUnban||!this.roomSettings.bannedUsers.has(this.roomSettings.selectedUserToUnban))return;const t=this.roomSettings.selectedUserToUnban;this._ngZone.run(()=>{this.roomSettings.bannedUsers.delete(this.roomSettings.selectedUserToUnban),this.roomSettings.selectedUserToUnban=0}),s.wjX.instance.communication.connection.send(new s.nfs(t,this._roomId))}hide(){this._visible=!1,this.clear()}onSave(t){this._ngZone.run(()=>{this.roomSettings=t});let n=t.lockState,r=t.password;t.isValidPassword?this._oldLockState=n:(n=this._oldLockState,r=null),t.roomName.length<1&&(t.roomName=this._oldRoomName),parseInt(t.userCount)<0&&(t.userCount="10");const a=new s._9Q(this._roomId,t.roomName,t.roomDescription,parseInt(n),r,parseInt(t.userCount),parseInt(t.categoryId),t.tags.length,t.tags,parseInt(t.tradeState),t.allowPets,t.allowPetsEat,t.allowWalkthrough,t.hideWalls,parseInt(t.wallThickness),parseInt(t.floorThickness),parseInt(t.muteState),parseInt(t.kickState),parseInt(t.banState),parseInt(t.chatBubbleMode),parseInt(t.chatBubbleWeight),parseInt(t.chatBubbleSpeed),t.chatDistance,parseInt(t.chatFloodProtection));s.wjX.instance.communication.connection.send(a)}get currentTab(){return this._currentTab}get categories(){return this._navigatorService.categories}get maxVisitors(){return this._maxVisitors}get tradeSettings(){return this._navigatorService.tradeSettings}get visible(){return this._visible}get usersWithRights(){return this.roomSettings.usersWithRights}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(Je),e.Y36(R),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-navigator-roomsettings-component"]],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card nitro-navigator-roomsettings-component",3,"bringToTop","draggable",4,"ngIf"],["dragHandle",".card-header",1,"card","nitro-navigator-roomsettings-component",3,"bringToTop","draggable"],[1,"card-header"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100","mb-3"],["type","button",1,"btn","btn-sm","btn-primary",3,"ngClass","click"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom",4,"ngIf"],[3,"roomSettings","onSave",4,"ngIf"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile",4,"ngIf"],[3,"roomSettings","onSave","onUnban","onOpenProfile",4,"ngIf"],[3,"roomSettings","categories","maxVisitors","tradeSettings","onSave","onDeleteRoom"],[3,"roomSettings","onSave"],[3,"roomSettings","onSave","onGiveRights","onTakeRights","onOpenProfile"],[3,"roomSettings","onSave","onUnban","onOpenProfile"]],template:function(t,n){1&t&&e.YNc(0,Wv,28,38,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,b,v,u.mk,Mv,Nv,kv,Fv,Jv],pipes:[m],encapsulation:2}),i})();const Xv=["nitro-navigator-search-component",""];function Yv(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().changeFilter(a)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,"navigator.filter."+t.name))}}let zv=(()=>{class i{constructor(t,n){this._formBuilder=t,this._navigatorService=n}ngOnInit(){this._form=this._formBuilder.group({search:[""]})}changeFilter(t){this._navigatorService.setCurrentFilter(t)}search(t){this._navigatorService.search(this.searchValue)}clearSearch(){}get form(){return this._form}get searchValue(){return this._navigatorService.lastSearch}set searchValue(t){this._navigatorService.lastSearch=t}get currentFilter(){return this._navigatorService.filter}get searchFilters(){return ce.SEARCH_FILTERS}get hasSearchResults(){return this._navigatorService.lastSearchResults&&this._navigatorService.lastSearchResults.length>0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.qu),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-search-component",""]],attrs:Xv,decls:9,vars:8,consts:[[1,"input-group","mb-2"],["ngbDropdown","",1,"input-group-prepend"],["type","button","ngbDropdownToggle","",1,"btn","btn-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item","ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],["ngbDropdownItem","",1,"dropdown-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,Yv,3,3,"button",4),e.qZA(),e.qZA(),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(a){return n.searchValue=a})("keydown.enter",function(a){return n.search(a)}),e.ALo(8,"translate"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"navigator.filter."+n.currentFilter.name)),e.xp6(3),e.Q6J("ngForOf",n.searchFilters),e.xp6(1),e.Q6J("ngModel",n.searchValue)("placeholder",e.lcZ(8,6,"navigator.filter.input.placeholder")))},directives:[W.jt,W.iD,W.Vi,u.sg,_.Fj,_.JJ,_.On,W.TH],pipes:[m],encapsulation:2}),i})(),zn=(()=>{class i{}return i.LIST=0,i.THUMBNAILS=1,i.FORCED_THUMBNAILS=2,i})();const Kv=["nitro-navigator-search-result-item-component",""];function $v(i,o){1&i&&e._UZ(0,"i",12)}function eT(i,o){1&i&&e._UZ(0,"i",13)}function tT(i,o){1&i&&e._UZ(0,"i",14)}function nT(i,o){if(1&i&&(e.TgZ(0,"span",16),e._UZ(1,"i",3),e._uU(2),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.room.ownerName)}}function iT(i,o){if(1&i&&(e.TgZ(0,"div",15),e.TgZ(1,"span",16),e._uU(2),e.qZA(),e.TgZ(3,"span",17),e._uU(4),e.qZA(),e.YNc(5,nT,3,1,"span",18),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(t.room.roomName),e.xp6(2),e.hij('"',t.room.description,'"'),e.xp6(1),e.Q6J("ngIf",null!=t.room.ownerName)}}let oT=(()=>{class i{constructor(t,n){this._navigatorService=t,this._ngZone=n,this._thumbnailUrl=null,this._didRequestUrl=!1}visit(){if(this.room.ownerId!==s.wjX.instance.sessionDataManager.userId){if(0!==this.room.habboGroupId)return void this._navigatorService.goToPrivateRoom(this.room.roomId);switch(this.room.doorMode){case s.tX0.DOORBELL_STATE:return void this._navigatorService.openRoomDoorbell(this.room);case s.tX0.PASSWORD_STATE:return void this._navigatorService.openRoomPassword(this.room)}}this._navigatorService.goToRoom(this.room.roomId)}get isGroup(){return this.room&&this.room.habboGroupId>0}get isDoorbell(){return this.room&&this.room.doorMode===s.tX0.DOORBELL_STATE}get isPassword(){return this.room&&this.room.doorMode===s.tX0.PASSWORD_STATE}get thumbnail(){if(this._thumbnailUrl)return this._thumbnailUrl;if(!this.room||this._didRequestUrl)return null;let t=s.wjX.instance.core.configuration.getValue("thumbnails.url");t=t.replace("%thumbnail%",this.room.roomId.toString());const n=new XMLHttpRequest;return n.open("GET",t,!0),n.onreadystatechange=()=>{4===n.readyState&&200===n.status&&(this._thumbnailUrl=t)},n.send(),this._didRequestUrl=!0,null}get entryBg(){const t=this.room.userCount/this.room.maxUserCount*100;let n="badge-secondary";return t>=92?n="badge-danger":t>=50?n="badge-warning text-white":t>0&&(n="badge-success"),n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-search-result-item-component",""]],inputs:{room:"room",displayMode:"displayMode"},attrs:Kv,decls:15,vars:7,consts:[["type","button",1,"btn","btn-secondary","btn-sm","justify-content-between","detail-info",3,"click"],[1,"d-flex","justify-content-center","flex-grow-1","overflow-hidden"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","text-center",3,"ngClass"],[1,"fas","fa-user","mr-1"],[1,"d-flex","flex-column","justify-content-center","align-items-start","flex-grow-1","px-2","overflow-hidden"],[1,"d-block","text-truncate",2,"max-width","95%"],[1,"d-flex","flex-row-reverse","align-items-center"],["tooltipClass","search-result-item-tooltip","placement","right","container","body",1,"fas","fa-info-circle",3,"ngbTooltip"],["class","fas fa-users mr-2",4,"ngIf"],["class","fas fa-lock mr-2",4,"ngIf"],["class","fas fa-key mr-2",4,"ngIf"],["roomInfoTooltip",""],[1,"fas","fa-users","mr-2"],[1,"fas","fa-lock","mr-2"],[1,"fas","fa-key","mr-2"],[1,"container"],[1,"d-block"],[1,"d-block","small","text-muted"],["class","d-block",4,"ngIf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.visit()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"i",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"span",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"i",7),e.YNc(10,$v,1,0,"i",8),e.YNc(11,eT,1,0,"i",9),e.YNc(12,tT,1,0,"i",10),e.qZA(),e.YNc(13,iT,6,3,"ng-template",null,11,e.W1O),e.qZA()),2&t){const r=e.MAs(14);e.xp6(2),e.Q6J("ngClass",n.entryBg),e.xp6(2),e.Oqu(n.room.userCount),e.xp6(3),e.Oqu(n.room.roomName),e.xp6(2),e.Q6J("ngbTooltip",r),e.xp6(1),e.Q6J("ngIf",n.isGroup),e.xp6(1),e.Q6J("ngIf",n.isDoorbell),e.xp6(1),e.Q6J("ngIf",n.isPassword)}},directives:[u.mk,W._L,u.O5],encapsulation:2}),i})();const rT=["nitro-navigator-search-result-component",""],sT=function(i,o){return{"fa-bars":i,"fa-th":o}};function aT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"h6",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleListMode()}),e._UZ(1,"i",2),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(1,sT,1===t.displayMode,0===t.displayMode))}}const cT=function(i){return{"tall-detail":i}};function lT(i,o){if(1&i&&e._UZ(0,"div",8),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("room",t)("displayMode",n.displayMode)("ngClass",e.VKq(3,cT,n.displayMode>=1))}}const uT=function(i,o){return{"grid-2":i,"grid-1":o}};function _T(i,o){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e.YNc(2,lT,1,5,"div",7),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(2,uT,t.displayMode>=1,0===t.displayMode)),e.xp6(1),e.Q6J("ngForOf",t.result.rooms)}}const gT=function(i,o){return{"fa-minus":i,"fa-plus":o}};let dT=(()=>{class i{ngOnInit(){this._displayMode=this.result.mode,this._isCollapsed=this.result.closed}toggleListMode(){if(this._displayMode!==zn.FORCED_THUMBNAILS){if(this._displayMode===zn.LIST)return void(this._displayMode=zn.THUMBNAILS);this._displayMode=zn.LIST}}toggleCollapsed(){this._isCollapsed=!this._isCollapsed}get resultCode(){let t=this.result.code;return(!t||0==t.length)&&this.result.data&&this.result.data.length>0?this.result.data:(t=this.result.code.startsWith("${")?t.substr(2,t.length-3):"navigator.searchcode.title."+t,t)}get displayMode(){return this._displayMode}get isCollapsed(){return!this._isCollapsed}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-search-result-component",""]],inputs:{result:"result"},attrs:rT,decls:7,vars:9,consts:[[1,"d-flex","justify-content-between","align-items-center","pt-2"],[1,"m-0",3,"click"],[1,"fas",3,"ngClass"],["class","m-0",3,"click",4,"ngIf"],["class","d-flex flex-column pt-2 grid-container",4,"ngIf"],[1,"d-flex","flex-column","pt-2","grid-container"],[1,"grid-items",3,"ngClass"],["nitro-navigator-search-result-item-component","","class","d-flex flex-column item-detail justify-content-center align-items-center",3,"room","displayMode","ngClass",4,"ngFor","ngForOf"],["nitro-navigator-search-result-item-component","",1,"d-flex","flex-column","item-detail","justify-content-center","align-items-center",3,"room","displayMode","ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h6",1),e.NdJ("click",function(){return n.toggleCollapsed()}),e._UZ(2,"i",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,aT,2,4,"h6",3),e.qZA(),e.YNc(6,_T,3,5,"div",4)),2&t&&(e.xp6(2),e.Q6J("ngClass",e.WLB(6,gT,n.isCollapsed,!n.isCollapsed)),e.xp6(1),e.hij(" ",e.lcZ(4,4,n.resultCode)," "),e.xp6(2),e.Q6J("ngIf",2!==n.displayMode),e.xp6(1),e.Q6J("ngIf",n.isCollapsed&&n.result.rooms.length>0))},directives:[u.mk,u.O5,u.sg,oT],pipes:[m],encapsulation:2}),i})();const mT=["nitro-navigator-slider-component",""];function pT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mdb-carousel-item"),e.TgZ(1,"div",3),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().visit(a.roomId)}),e.TgZ(2,"div",4),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"img",5),e.NdJ("click",function(){return e.CHM(t).$implicit.roomId}),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Akn("background:url("+t.image+")"),e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("src",t.image,e.LSH)}}let hT=(()=>{class i{constructor(t,n){this._navigatorService=t,this._ngZone=n}ngOnInit(){this._sliderContent=s.wjX.instance.core.configuration.getValue("navigator.slider.content")}visit(t){this._navigatorService.goToPrivateRoom(t)}get sliderContent(){return this._sliderContent}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ce),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","nitro-navigator-slider-component",""]],attrs:mT,decls:3,vars:4,consts:[[1,"w-100","card","nitro-navigator-slider-component","mt-2","d-flex","flex-column"],[3,"isControls","animation"],[4,"ngFor","ngForOf"],[1,"nitro-navigator-slider-image-component","py-2","px-0","h-100",3,"click"],[1,"johnsshitblackbar","p-1","small"],["image-placeholder","",1,"d-block","w-100",3,"src","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"mdb-carousel",1),e.YNc(2,pT,5,4,"mdb-carousel-item",2),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("isControls",!1)("animation","slide")("isControls",!0),e.xp6(1),e.Q6J("ngForOf",n.sliderContent))},directives:[Hn.Fy,u.sg,Hn.o6,le],encapsulation:2}),i})(),fT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ce],imports:[[oe]]}),i})();e.B6R(vo,[u.O5,b,v,u.sg,u.mk,zv,C.Vv,dT,hT,xv,Qv],[m]);let vT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[R],imports:[[oe]]}),i})(),TT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Fn],imports:[[oe]]}),i})();const bT=function(i,o){return{fontSize:i,letterSpacing:o}};let CT=(()=>{class i{constructor(t,n){this._floorPlanService=t,this._ngZone=n,this._map=null,this._backupMap=null,this.fontSize="12",this.letterSpacing="3",this.mapChanged=!1}revert(){this._ngZone.run(()=>{this._map=this._backupMap})}save(){this._floorPlanService.floorMapSettings.heightMapString=this._map.split("\n").join("\r"),this._floorPlanService.save(this._floorPlanService.floorMapSettings)}close(){this._floorPlanService.showImportExport=!1}set map(t){this._map=t,this._backupMap||(this._backupMap=t.replace(/\r\n|\r|\n/g,"\r").toLowerCase()),this.mapChanged=this._map!==this._backupMap}get map(){return this._map}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ui),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-floorplan-import-export-component"]],inputs:{map:"map"},decls:15,vars:16,consts:[["dragHandle",".card-header",1,"card","nitro-floorplan-editor-import-export-component",3,"bringToTop","draggable"],[1,"card-header"],[1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],["spellcheck","false",1,"form-control","mb-3",2,"font-family","'Roboto Mono', monospace","height","350px",3,"ngStyle","ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["type","button",1,"btn","btn-success",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"div",2),e.NdJ("click",function(){return n.close()}),e._UZ(5,"i",3),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"textarea",5),e.NdJ("ngModelChange",function(a){return n.map=a}),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return n.revert()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return n.save()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"floor.plan.editor.import.export")," "),e.xp6(5),e.Q6J("ngStyle",e.WLB(13,bT,n.fontSize+"px",n.letterSpacing+"px"))("ngModel",n.map),e.xp6(2),e.Q6J("disabled",!n.mapChanged),e.xp6(1),e.Oqu(e.lcZ(11,9,"floor.plan.editor.revert.to.last.received.map")),e.xp6(2),e.Q6J("disabled",!n.mapChanged),e.xp6(1),e.Oqu(e.lcZ(14,11,"floor.plan.editor.save")))},directives:[b,v,_.Fj,u.PC,_.JJ,_.On],pipes:[m],encapsulation:2}),i})(),ET=(()=>{class i{ngOnDestroy(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),ST=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ui,ET],imports:[[oe]]}),i})();e.B6R(Pi,[u.O5,b,v,u.mk,u.sg,u.PC,cn,_.EJ,_.JJ,_.On,_.YN,_.Kr,Nt,CT],[m,u.Nd]);let AT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[oe,ST]]}),i})(),wT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[],imports:[[oe]]}),i})(),xT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[xo],imports:[[oe]]}),i})(),ZT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Io],imports:[[oe]]}),i})();const IT=function(){return["count","limit"]},yT=function(i,o){return[i,o]};function RT(i,o){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",18),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.Dn7(3,2,"wiredfurni.pickfurnis.caption",e.DdM(8,IT),e.WLB(9,yT,t.furniSelectionCount,t.maximumFurniSelectionCount))),e.xp6(3),e.Oqu(e.lcZ(6,6,"wiredfurni.pickfurnis.desc"))}}const MT=["*"];let O=(()=>{class i{constructor(t){this._wiredService=t}save(){this._wiredService.component.save()}hide(){this._wiredService.component.close()}get furniName(){return this._wiredService.component.getFurniName()}get furniDescription(){return this._wiredService.component.getFurniDescription()}get requiresFurni(){return this._wiredService.component._Str_19885()}get furniSelectionCount(){return this._wiredService.component.furniSelectedIds.length}get maximumFurniSelectionCount(){return this._wiredService.component.maximumItemSelectionCount}get wiredType(){const t=this._wiredService.component._Str_19071();return t?t._Str_1196():""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(pn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-wired-base-component"]],ngContentSelectors:MT,decls:26,vars:15,consts:[[1,"card","nitro-wired-component",3,"bringToTop","draggable"],[1,"drag-handler","d-flex","justify-content-between","align-items-center","px-3","pt-3"],[1,"m-0"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"d-flex","px-3","pt-3"],[1,"mr-2"],[1,"d-flex","justify-content-center","align-items-center","badge","badge-secondary","badge-sm"],[1,"d-flex","flex-grow-1","flex-column"],[1,"badge","badge-secondary","badge-sm","text-wrap","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap"],[1,"d-flex","flex-column","p-3"],["class","mt-2",4,"ngIf"],[1,"btn-group","w-100","mt-2"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"mt-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100","mb-2"],[1,"badge","badge-secondary","badge-sm","text-wrap","text-center","w-100"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h6",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.hide()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e._UZ(10,"i"),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.TgZ(12,"div",9),e._uU(13),e.qZA(),e.TgZ(14,"div",10),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.Hsn(17),e.YNc(18,RT,7,12,"div",12),e.TgZ(19,"div",13),e.TgZ(20,"button",14),e.NdJ("click",function(){return n.save()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",15),e.NdJ("click",function(){return n.hide()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,9,"wiredfurni.title")),e.xp6(7),e.Gre("icon icon-wired-",n.wiredType,""),e.xp6(3),e.Oqu(n.furniName),e.xp6(2),e.Oqu(n.furniDescription),e.xp6(3),e.Q6J("ngIf",n.requiresFurni),e.xp6(3),e.Oqu(e.lcZ(22,11,"wiredfurni.ready")),e.xp6(3),e.Oqu(e.lcZ(25,13,"cancel")))},directives:[b,v,u.O5],pipes:[m],encapsulation:2}),i})();const OT=["*"];let G=(()=>{class i{constructor(){this.delay=0,this.delayChange=new e.vpe,this.delayLocale=""}ngOnChanges(t){t.delay.currentValue!==t.delay.previousValue&&this.updateLocaleParameter()}onSliderChange(){this.delayChange.emit(this.delay)}decreaseDelay(){this.delay-=1,this.delay<i.DELAY_MINIMUM_VALUE&&(this.delay=i.DELAY_MINIMUM_VALUE),this.delayChange.emit(this.delay)}increaseDelay(){this.delay+=1,this.delay>i.DELAY_MAXIMUM_VALUE&&(this.delay=i.DELAY_MAXIMUM_VALUE),this.delayChange.emit(this.delay)}updateLocaleParameter(){this.delayLocale=s.wjX.instance.getLocalizationWithParameter("wiredfurni.params.delay","seconds",Yt.getLocaleName(this.delay))}get delaySliderOptions(){return{floor:i.DELAY_MINIMUM_VALUE,ceil:i.DELAY_MAXIMUM_VALUE,step:i.DELAY_STEPPER_VALUE,hidePointerLabels:!0,hideLimitLabels:!0}}}return i.DELAY_MINIMUM_VALUE=0,i.DELAY_MAXIMUM_VALUE=20,i.DELAY_STEPPER_VALUE=1,i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-wired-action-base-component"]],inputs:{delay:"delay"},outputs:{delayChange:"delayChange"},features:[e.TTD],ngContentSelectors:OT,decls:10,vars:3,consts:[[1,"w-100","text-center","mb-1"],[1,"d-flex","align-items-center","justify-content-center","my-2","custom-slider"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-arrow-left"],["name","delay",3,"options","value","valueChange"],[1,"fas","fa-arrow-right"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"nitro-wired-base-component"),e.Hsn(1),e.TgZ(2,"p",0),e._uU(3),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"button",2),e.NdJ("click",function(){return n.decreaseDelay()}),e._UZ(6,"i",3),e.qZA(),e.TgZ(7,"ngx-slider",4),e.NdJ("valueChange",function(a){return n.delay=a})("valueChange",function(){return n.onSliderChange()}),e.qZA(),e.TgZ(8,"button",2),e.NdJ("click",function(){return n.increaseDelay()}),e._UZ(9,"i",5),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Oqu(n.delayLocale),e.xp6(4),e.Q6J("options",n.delaySliderOptions)("value",n.delay))},directives:[O,he.w5],encapsulation:2}),i})(),Vo=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[pn],imports:[[oe,u.ez]]}),i})();e.B6R(Qe,[O,_.EJ,_.JJ,_.On,_.YN,_.Kr],[m]),e.B6R(Ee,[O],[]),e.B6R(Se,[O,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(Ae,[O,_.Fj,_.JJ,_.On],[m]),e.B6R(we,[O],[]),e.B6R(xe,[O,_.Fj,_.JJ,_.On],[m]),e.B6R(Be,[O,_.Fj,_.JJ,_.On],[m]),e.B6R(Xe,[O,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(Ze,[O],[]),e.B6R(Ie,[O],[]),e.B6R(Ye,[O,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(ye,[O,_.Wl,_.JJ,_.On],[m]),e.B6R(Re,[O],[]),e.B6R(K,[O,he.w5],[]),e.B6R(me,[O,he.w5],[]),e.B6R(D,[O,he.w5],[m]),e.B6R(ze,[O,_._,_.Fj,_.JJ,_.On,u.O5],[m]),e.B6R(Ke,[O,_.Fj,_.JJ,_.On,_._],[m]),e.B6R($e,[O],[]),e.B6R(et,[O],[]),e.B6R(tt,[O,_.Fj,_.JJ,_.On],[m]),e.B6R(nt,[O,_.Fj,_.JJ,_.On],[m]),e.B6R(it,[O],[]),e.B6R(ot,[O],[]),e.B6R(rt,[O],[]),e.B6R(ee,[O,he.w5],[m]),e.B6R(st,[O],[]),e.B6R($,[O,he.w5],[]),e.B6R(pe,[O,he.w5],[]),e.B6R(at,[O,he.w5],[]),e.B6R(wt,[G],[]),e.B6R(At,[G],[]),e.B6R(dt,[G],[]),e.B6R(pt,[G],[]),e.B6R(gt,[G],[]),e.B6R(mt,[G,_.Fj,_.JJ,_.On],[m]),e.B6R(lt,[G,_.Fj,_.nD,_.JJ,_.On,_.EJ,_.YN,_.Kr],[m]),e.B6R(ct,[G,_.Fj,_.nD,_.JJ,_.On,_._],[m]),e.B6R(Tt,[G],[]),e.B6R(Et,[G],[]),e.B6R(vt,[G,_.Fj,_.JJ,_.On],[m]),e.B6R(_t,[G,_.Fj,_.nD,_.JJ,_.On],[m]),e.B6R(St,[G,_.Wl,_.JJ,_.On],[m]),e.B6R(ut,[G,_.Fj,_.nD,_.JJ,_.On],[m]),e.B6R(ie,[G,he.w5,_.Fj,_.JJ,_.On],[m]),e.B6R(Oe,[G,_.Fj,_.nD,_.JJ,_.On,He],[m]),e.B6R(Ue,[G,_.Fj,_.nD,_.JJ,_.On,_._],[m]),e.B6R(Ne,[G,_.Fj,_.nD,_.JJ,_.On,_._],[m]),e.B6R(bt,[G,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(Ct,[G,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(ft,[G,_.EJ,_.JJ,_.On,_.YN,_.Kr],[m]),e.B6R(ht,[G,he.w5,_.EJ,_.JJ,_.On,_.YN,_.Kr],[m]),e.B6R(q,[G,he.w5],[m]),e.B6R(ne,[G,he.w5,_._,_.Fj,_.JJ,_.On],[m]),e.B6R(te,[G,_.Wl,_.JJ,_.On,u.O5,he.w5,_.EJ,_.YN,_.Kr,_.Fj,C.Vv,u.sg],[m]);let Kt=(()=>{class i{constructor(){this.visible=!1,this.visibleChange=new e.vpe,this._logger=new s.Aey(this.constructor.name)}ngOnInit(){}ngOnDestroy(){}hideTool(){this.visible=!1}getTranslatedForKey(t,n){const r=`modtools.nitro.${t}`,a=s.wjX.instance.localization.getValue(r);return a!==r?a:n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();function UT(i,o){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.Oqu(t)}}function NT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"span"),e._UZ(3,"i",3),e._uU(4," Room Tool "),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",7),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"div",11),e.TgZ(14,"span",12),e._uU(15,"Name:"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.qZA(),e.qZA(),e.TgZ(18,"div",11),e.TgZ(19,"span",12),e._uU(20,"Description:"),e.qZA(),e.TgZ(21,"div"),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",7),e.TgZ(24,"div",9),e.TgZ(25,"div",10),e.TgZ(26,"div",11),e.TgZ(27,"span",12),e._uU(28,"Owner:"),e.qZA(),e.TgZ(29,"div"),e._uU(30),e.qZA(),e.qZA(),e.TgZ(31,"div",11),e.TgZ(32,"span",12),e._uU(33,"Players in room:"),e.qZA(),e.TgZ(34,"div"),e._uU(35),e.qZA(),e.qZA(),e.TgZ(36,"div",11),e.TgZ(37,"span",12),e._uU(38,"Owner in room:"),e.qZA(),e.TgZ(39,"div"),e._uU(40),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",9),e.TgZ(42,"div",13),e.TgZ(43,"div",11),e.TgZ(44,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().enterRoom()}),e._uU(45,"Enter "),e.qZA(),e.qZA(),e.TgZ(46,"div",11),e.TgZ(47,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().openChatlog()}),e._uU(48,"Chatlogs "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",7),e.TgZ(50,"div",9),e.TgZ(51,"div",15),e.TgZ(52,"div",16),e.TgZ(53,"div",17),e.TgZ(54,"input",18),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().changeTitle=r}),e.qZA(),e.TgZ(55,"label",19),e._uU(56,"Change title to inappropriate"),e.qZA(),e.qZA(),e.TgZ(57,"div",17),e.TgZ(58,"input",20),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().kickUsers=r}),e.qZA(),e.TgZ(59,"label",21),e._uU(60,"Kick users(stops event)"),e.qZA(),e.qZA(),e.TgZ(61,"div",17),e.TgZ(62,"input",22),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().lockDoor=r}),e.qZA(),e.TgZ(63,"label",23),e._uU(64,"Lock room"),e.qZA(),e.qZA(),e.TgZ(65,"div",17),e.TgZ(66,"div",24),e.TgZ(67,"select",25),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().optionId=r})("change",function(){e.CHM(t);const r=e.oxw();return r.selectMessage(r.optionId)}),e.TgZ(68,"option",26),e._uU(69,"Select from messsage templates"),e.qZA(),e.YNc(70,UT,2,2,"option",27),e.qZA(),e.qZA(),e.TgZ(71,"div",24),e.TgZ(72,"textarea",28),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().message=r}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"div",29),e.TgZ(74,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().send()}),e._uU(75," Send caution "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("center",!1),e.xp6(17),e.Oqu(t.room.name),e.xp6(5),e.Oqu(t.room.description),e.xp6(8),e.Oqu(t.room.ownerName),e.xp6(5),e.Oqu(t.room.playerAmount),e.xp6(5),e.Oqu(t.room.owner?"yes":"no"),e.xp6(14),e.Q6J("ngModel",t.changeTitle),e.xp6(4),e.Q6J("ngModel",t.kickUsers),e.xp6(4),e.Q6J("ngModel",t.lockDoor),e.xp6(5),e.Q6J("ngModel",t.optionId),e.xp6(1),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("ngModel",t.message),e.xp6(2),e.Q6J("disabled",!t.isInCurrentRoom())}}let qT=(()=>{class i extends Kt{constructor(t,n,r){super(),this._modToolService=t,this._navigatorService=n,this._notificationService=r,this.lockDoor=!1,this.changeTitle=!1,this.kickUsers=!1,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showRoomTools=!1}send(){0!=this.message.trim().length?(s.wjX.instance.communication.connection.send(new s.pN0(1,this.message,"")),(this.kickUsers||this.changeTitle||this.lockDoor)&&s.wjX.instance.communication.connection.send(new s.LDQ(this.room.id,this.lockDoor?1:0,this.changeTitle?1:0,this.kickUsers?1:0)),this._modToolService.showRoomTools=!1):this._notificationService.alert("You must input a message to the user")}isInCurrentRoom(){return this._modToolService.currentRoom.roomId==this._modToolService.currentRoomModData.id}enterRoom(){this._navigatorService.goToPrivateRoom(this.room.id)}openChatlog(){s.wjX.instance.communication.connection.send(new s.fKc(this.room.id)),this._modToolService.showRoomChatLogs=!0}get room(){return this._modToolService.currentRoomModData}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325.roomMessageTemplates:[]}selectMessage(t){if("-1"==t)return void(this.message="");const n=parseInt(t);this.message=this.options[n]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(ce),e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-room-component"]],features:[e.qOj],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card room-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body","pl-3","pr-3"],[1,"row"],[1,"col","pr-2"],[1,"col"],[1,"badge","badge-secondary","mb-1","d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","flex-row","justify-content-between"],[1,"font-weight-bold","mr-2"],[1,"mb-1","d-flex","flex-column","justify-content-between","w-100"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"badge","badge-secondary","mb-1"],[1,"btn-group","btn-group-vertical"],[1,"mb-1"],["id","change-title","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","change-title",1,"form-check-label"],["id","kick-users","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","kick-users",1,"form-check-label"],["id","lock-room","type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["for","lock-room",1,"form-check-label"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,NT,76,14,"div",0),2&t&&e.Q6J("ngIf",n.room)},directives:[u.O5,v,_.Wl,_.JJ,_.On,_.EJ,_.YN,_.Kr,u.sg,_.Fj],encapsulation:2}),i})();function LT(i,o){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"th",12),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.getTranslatedForKey(t.nameKey,t.nameKeyFallback)),e.xp6(2),e.Oqu(t.value)}}let kT=(()=>{class i extends Kt{constructor(t,n){super(),this._modToolService=t,this._modToolUserInfoService=n,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeUserTool()}userData(){return this._modToolUserInfoService.currentUserInfo}get userProperties(){const t=this._modToolUserInfoService.currentUserInfo;return t?[{nameKey:"name",nameKeyFallback:"Name",value:t.userName},{nameKey:"cfhs",nameKeyFallback:"CFHs",value:t.cfhCount.toString()},{nameKey:"abusive_cfhs",nameKeyFallback:"Abusive CFHs",value:t.abusiveCfhCount.toString()},{nameKey:"cautions",nameKeyFallback:"Cautions",value:t.cautionCount.toString()},{nameKey:"bans",nameKeyFallback:"Bans",value:t.banCount.toString()},{nameKey:"last_sanction",nameKeyFallback:"Last sanction",value:t.lastSanctionTime},{nameKey:"trade_locks",nameKeyFallback:"Trade locks",value:t.tradingLockCount.toString()},{nameKey:"lock_expires",nameKeyFallback:"Lock expires",value:t.tradingExpiryDate},{nameKey:"last_login",nameKeyFallback:"Last login",value:i._Str_12797(60*t.minutesSinceLastLogin)},{nameKey:"purchase",nameKeyFallback:"Purchases",value:t.lastPurchaseDate},{nameKey:"email",nameKeyFallback:"Email",value:t.primaryEmailAddress},{nameKey:"acc_bans",nameKeyFallback:"Banned Accs.",value:t.identityRelatedBanCount.toString()},{nameKey:"registered",nameKeyFallback:"Registered",value:i._Str_12797(60*t.registrationAgeInMinutes)},{nameKey:"rank",nameKeyFallback:"Rank",value:t.userClassification}]:[]}handleClick(t){switch(t){case"roomchat":this._modToolService.showSendUserChatlogs=!0,s.wjX.instance.communication.connection.send(new s.O$n(this.user.id));break;case"send_message":this._modToolService.showSendUserMessage=!0;break;case"room_visits":this._modToolService.showVisitedRoomsForUser=!0,s.wjX.instance.communication.connection.send(new s.Znl(this.user.id));break;case"mod_action":this._modToolService.showModActionOnUser=!0}}static _Str_12797(t){return t<120?t+" secs ago":t<7200?Math.round(t/60)+" mins ago":t<172800?Math.round(t/3600)+" hours ago":t<63072e3?Math.round(t/86400)+" days ago":Math.round(t/31536e3)+" years ago"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(zt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-user-component"]],inputs:{user:"user"},features:[e.qOj],decls:22,vars:7,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"row"],[1,"col-6"],[1,"d-flex","flex-column","table","table-striped","table-sm","table-text-small"],[4,"ngFor","ngForOf"],[1,"col-5","p-3"],["type","button",1,"btn","btn-sm","btn-primary","w-100",3,"click"],["scope","row"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"div",7),e.TgZ(10,"table",8),e.TgZ(11,"tbody"),e.YNc(12,LT,5,2,"tr",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.handleClick("roomchat")}),e._uU(15),e.qZA(),e.TgZ(16,"button",11),e.NdJ("click",function(){return n.handleClick("send_message")}),e._uU(17),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){return n.handleClick("room_visits")}),e._uU(19),e.qZA(),e.TgZ(20,"button",11),e.NdJ("click",function(){return n.handleClick("mod_action")}),e._uU(21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" ",n.user.username," "),e.xp6(8),e.Q6J("ngForOf",n.userProperties),e.xp6(3),e.Oqu(n.getTranslatedForKey("roomchat","Room Chat")),e.xp6(2),e.Oqu(n.getTranslatedForKey("send_message","Send Message")),e.xp6(2),e.Oqu(n.getTranslatedForKey("room_visits","Room Visits")),e.xp6(2),e.Oqu(n.getTranslatedForKey("mod_action","Mod Action")))},directives:[v,u.sg],encapsulation:2}),i})();function FT(i,o){1&i&&(e.TgZ(0,"table",10),e.TgZ(1,"thead"),e.TgZ(2,"tr"),e.TgZ(3,"th"),e._uU(4,"Category"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Type"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Player"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Open"),e.qZA(),e.qZA(),e.qZA(),e._UZ(11,"tbody"),e.qZA())}function DT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"span"),e._UZ(3,"i",3),e._uU(4," Reports "),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().hideTool()}),e._UZ(6,"i",5),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(0)}),e._uU(10,"Open Issues"),e.qZA(),e.TgZ(11,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(1)}),e._uU(12,"My Issues"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().setTab(2)}),e._uU(14,"Picked Issues"),e.qZA(),e.qZA(),e.YNc(15,FT,12,0,"table",9),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("center",!1),e.xp6(15),e.Q6J("ngIf",0===t.tab)}}let PT=(()=>{class i extends Kt{constructor(){super(),this._tab=0}ngOnInit(){}ngOnDestroy(){}get tab(){return this._tab}set tab(t){this._tab=t}setTab(t){this.tab=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-reports-component"]],features:[e.qOj],decls:1,vars:1,consts:[["dragHandle",".card-header","class","card reports-tool-card",3,"draggable","center",4,"ngIf"],["dragHandle",".card-header",1,"card","reports-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-reports-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"btn-group","w-100"],[1,"btn","btn-sm","btn-secondary",3,"click"],["class","table table-striped",4,"ngIf"],[1,"table","table-striped"]],template:function(t,n){1&t&&e.YNc(0,DT,16,2,"div",0),2&t&&e.Q6J("ngIf",n.visible)},directives:[u.O5,v],encapsulation:2}),i})(),L=(()=>{class i{constructor(t,n,r,a,c){this._actionId=t,this._name=n,this._actionType=r,this._sanctionTypeId=a,this._actionLengthHours=c}get actionId(){return this._actionId}get name(){return this._name}get actionType(){return this._actionType}get _Str_22995(){return this._sanctionTypeId}get _Str_25670(){return this._actionLengthHours}}return i.ALERT=1,i.MUTE=2,i.BAN=3,i.KICK=4,i.TRADE_LOCK=5,i.MESSAGE=6,i})();function JT(i,o){if(1&i&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.Oqu(t)}}function jT(i,o){if(1&i&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.Oqu(t.name)}}let VT=(()=>{class i extends Kt{constructor(t,n){super(),this._modToolService=t,this._notifications=n,this.user=null,this.cfhType="-1",this.sanction="-1",this.message="",this._actions=[],this._actions=[new L(1,"Alert",L.ALERT,1,0),new L(2,"Mute 1h",L.MUTE,2,0),new L(4,"Ban 7 days",L.BAN,4,0),new L(3,"Ban 18h",L.BAN,3,0),new L(5,"Ban 30 days (step 1)",L.BAN,5,0),new L(7,"Ban 30 days (step 2)",L.BAN,7,0),new L(6,"Ban 100 years",L.BAN,6,0),new L(106,"Ban avatar-only 100 years",L.BAN,6,0),new L(101,"Kick",L.KICK,0,0),new L(102,"Lock trade 1 week",L.TRADE_LOCK,0,168),new L(104,"Lock trade permanent",L.TRADE_LOCK,0,876e3),new L(105,"Message",L.MESSAGE,0,0)]}ngOnInit(){}ngOnDestroy(){}sendSanction(){if("-1"==this.sanction)return void this._notifications.alert("Please select a sanction.");if("-1"==this.cfhType)return void this._notifications.alert("Please select a topic.");parseInt(this.cfhType);const n=this._actions[parseInt(this.sanction)];switch(n.actionType){case L.ALERT:if(!this._modToolService._Str_3325.alertPermission)return void this._notifications.alert("You have insufficient permissions.");s.wjX.instance.communication.connection.send(new s.QxT(this.user.id,this.message,parseInt(this.cfhType)));break;case L.MUTE:s.wjX.instance.communication.connection.send(new s.kH2(this.user.id,this.message,parseInt(this.cfhType)));break;case L.BAN:if(!this._modToolService._Str_3325.banPermission)return void this._notifications.alert("You have insufficient permissions.");s.wjX.instance.communication.connection.send(new s.Afe(this.user.id,this.message,parseInt(this.cfhType),parseInt(this.sanction),106==n.actionId));break;case L.KICK:if(!this._modToolService._Str_3325.kickPermission)return void this._notifications.alert("You have insufficient permissions.");s.wjX.instance.communication.connection.send(new s.Roh(this.user.id,this.message,parseInt(this.cfhType)));break;case L.TRADE_LOCK:s.wjX.instance.communication.connection.send(new s.Bjc(this.user.id,this.message,60*n._Str_25670,parseInt(this.cfhType)));break;case L.MESSAGE:if(0==this.message.trim().length)return void this._notifications.alert("Please write a message to user.");s.wjX.instance.communication.connection.send(new s.gnJ(this.user.id,this.message,parseInt(this.cfhType)))}this._modToolService.showModActionOnUser=!1}close(){this._modToolService.showModActionOnUser=!1}get categories(){const t=this._modToolService.callForHelpCategories,n=[];for(const r of t)for(const a of r.topics)n.push(s.wjX.instance.localization.getValue("help.cfh.topic."+a.id));return n}get actions(){return this._actions}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-mod-action-user-component"]],inputs:{user:"user"},features:[e.qOj],decls:25,vars:9,consts:[["dragHandle",".card-header",1,"card","room-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-room-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"select",7),e.NdJ("ngModelChange",function(a){return n.cfhType=a}),e.TgZ(10,"option",8),e._uU(11,"CFH Topic:"),e.qZA(),e.YNc(12,JT,2,2,"option",9),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"select",7),e.NdJ("ngModelChange",function(a){return n.sanction=a}),e.TgZ(15,"option",8),e._uU(16,"Sanction type:"),e.qZA(),e.YNc(17,jT,2,2,"option",9),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"label"),e._uU(20,"Optional message type, overrides default"),e.qZA(),e.TgZ(21,"textarea",10),e.NdJ("ngModelChange",function(a){return n.message=a}),e.qZA(),e.qZA(),e.TgZ(22,"div",6),e.TgZ(23,"button",11),e.NdJ("click",function(){return n.sendSanction()}),e._uU(24,"Sanction"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" Mod Actions on ",n.user.username," "),e.xp6(5),e.Q6J("ngModel",n.cfhType),e.xp6(1),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",n.categories),e.xp6(2),e.Q6J("ngModel",n.sanction),e.xp6(1),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",n.actions),e.xp6(4),e.Q6J("ngModel",n.message))},directives:[v,_.EJ,_.JJ,_.On,_.YN,_.Kr,u.sg,_.Fj],encapsulation:2}),i})();function BT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.TgZ(6,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().goToRoom(a)}),e._uU(7,"Enter"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.xp6(2),e.hij(" ",t.roomName," "),e.xp6(3),e.Oqu(n.showTime(t))}}let GT=(()=>{class i extends Kt{constructor(t,n,r){super(),this._modToolService=t,this._modToolUserInfoService=n,this._navigatorService=r,this.user=null}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.closeRoomVisitedTool()}get roomVisitedForUser(){return this._modToolService.roomUserVisitedData?this._modToolService.roomUserVisitedData.rooms:[]}showTime(t){const r=t.enterMinute;return this.prependZero(t.enterHour)+":"+this.prependZero(r)}prependZero(t){return t<10?`0${t}`:t.toString()}goToRoom(t){this._navigatorService.goToPrivateRoom(t.roomId)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(zt),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-user-visited-rooms-component"]],inputs:{user:"user"},features:[e.qOj],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],[1,"mr-2"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"perfect-scrollbar",6),e.YNc(9,BT,8,2,"div",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" Room visits: ",n.user.username," "),e.xp6(5),e.Q6J("ngForOf",n.roomVisitedForUser))},directives:[v,C.Vv,u.sg],encapsulation:2}),i})();function HT(i,o){if(1&i&&(e.TgZ(0,"option",8),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",o.index),e.xp6(1),e.Oqu(t)}}let WT=(()=>{class i extends Kt{constructor(t,n,r){super(),this._modToolService=t,this._modToolUserInfoService=n,this._notificationService=r,this.user=null,this.optionId="-1",this.message=""}ngOnInit(){}ngOnDestroy(){}close(){this._modToolService.showSendUserMessage=!1}get options(){return this._modToolService._Str_3325?this._modToolService._Str_3325.messageTemplates:[]}selectMessage(t){if("-1"==t)return void(this.message="");const n=parseInt(t);this.message=this.options[n]}sendMessage(){0!=this.message.trim().length?(s.wjX.instance.communication.connection.send(new s.gnJ(this.user.id,this.message,-999)),this._modToolService.showSendUserMessage=!1):this._notificationService.alert("Please enter a message")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(zt),e.Y36(R))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-user-send-message-component"]],inputs:{user:"user"},features:[e.qOj],decls:18,vars:6,consts:[["dragHandle",".card-header",1,"card","user-tool-card",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"form-group","mb-2"],[1,"form-control","form-control-sm",3,"ngModel","ngModelChange","change"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"select",7),e.NdJ("ngModelChange",function(a){return n.optionId=a})("change",function(){return n.selectMessage(n.optionId)}),e.TgZ(10,"option",8),e._uU(11,"Message :"),e.qZA(),e.YNc(12,HT,2,2,"option",9),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"textarea",10),e.NdJ("ngModelChange",function(a){return n.message=a}),e.qZA(),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"button",11),e.NdJ("click",function(){return n.sendMessage()}),e._uU(17,"Send message"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" Message to: ",n.user.username," "),e.xp6(5),e.Q6J("ngModel",n.optionId),e.xp6(1),e.Q6J("value",-1),e.xp6(2),e.Q6J("ngForOf",n.options),e.xp6(2),e.Q6J("ngModel",n.message))},directives:[v,_.EJ,_.JJ,_.On,_.YN,_.Kr,u.sg,_.Fj],encapsulation:2}),i})(),Bo=(()=>{class i extends Kt{constructor(t,n){super(),this._modToolService=t,this._navigatorService=n}goToRoom(t){this._navigatorService.goToPrivateRoom(t)}openRoomTools(t){this._modToolService.openRoomTool(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],features:[e.qOj],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();function QT(i,o){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.timestamp),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.message)}}function XT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",10),e.TgZ(5,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().goToRoom(a.roomId)}),e._uU(6,"View Room"),e.qZA(),e.TgZ(7,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openRoomTools(a.roomId)}),e._uU(8,"Room Tools"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,QT,8,3,"div",12),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(3),e.hij(" Room: ",t.roomName," "),e.xp6(6),e.Q6J("ngForOf",t.chatlogs)}}let YT=(()=>{class i extends Bo{constructor(t,n,r){super(t,r),this._modToolService=t,this._modToolUserInfoService=n,this._navigatorService=r}get title(){return this.user?`Chatlogs: ${this.user.username}`:""}getData(){return this._modToolService.roomVisits?this._modToolService.roomVisits:[]}close(){this._modToolService.showSendUserChatlogs=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(zt),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-user-chatlogs-component"]],inputs:{user:"user"},features:[e.qOj],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"perfect-scrollbar",6),e.YNc(9,XT,10,2,"div",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" ",n.title," "),e.xp6(5),e.Q6J("ngForOf",n.getData()))},directives:[v,C.Vv,u.sg],encapsulation:2}),i})();function zT(i,o){if(1&i&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e.TgZ(2,"div",15),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.timestamp),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.message)}}function KT(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",10),e.TgZ(5,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().goToRoom(a.roomId)}),e._uU(6,"View Room"),e.qZA(),e.TgZ(7,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openRoomTools(a.roomId)}),e._uU(8,"Room Tools"),e.qZA(),e.qZA(),e.qZA(),e.YNc(9,zT,8,3,"div",12),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(3),e.hij(" Room: ",t.roomName," "),e.xp6(6),e.Q6J("ngForOf",t.chatlogs)}}let $T=(()=>{class i extends Bo{constructor(t,n,r){super(t,r),this._modToolService=t,this._modToolUserInfoService=n,this._navigatorService=r}get title(){return this._modToolService.currentRoomModData?`Room Chatlog: ${this._modToolService.currentRoomModData.name}`:""}getData(){return this._modToolService.userChatlogs&&this._modToolService.currentRoomModData?[new s.Jkw(this._modToolService.currentRoomModData.name,this._modToolService.currentRoom.roomId,this._modToolService.userChatlogs)]:[]}close(){this._modToolService.showRoomChatLogs=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(je),e.Y36(zt),e.Y36(ce))},i.\u0275cmp=e.Xpm({type:i,selectors:[["nitro-mod-tool-room-chatlogs-component"]],features:[e.qOj],decls:10,vars:3,consts:[["dragHandle",".card-header",1,"card","user-tool-card-chatlogs",3,"draggable","center"],[1,"card-header"],[1,"icon","modtool-user-icon",2,"margin-right","5px"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"card-body"],[1,"position-relative","w-100",2,"min-height","200px","max-height","200px","height","200px"],["class","d-flex flex-column justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-between","w-100"],[1,"d-flex","bg-secondary","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row"],["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],["class","d-flex flex-row justify-content-between w-100",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-between","w-100"],[1,"d-flex","flex-row","mr-2"],[1,"mr-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"span"),e._UZ(3,"i",2),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(6,"i",4),e.qZA(),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"perfect-scrollbar",6),e.YNc(9,KT,10,2,"div",7),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("center",!1),e.xp6(4),e.hij(" ",n.title," "),e.xp6(5),e.Q6J("ngForOf",n.getData()))},directives:[v,C.Vv,u.sg],encapsulation:2}),i})(),eb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[je,zt],imports:[[oe,qe.b2]]}),i})();e.B6R(Ro,[u.O5,b,v,qT,$T,kT,PT,VT,GT,WT,YT],[]);let tb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[oe,th,wh,xh,Tf,zf,b1,C1,Tv,fT,vT,TT,AT,wT,Vo,eb,xT,Vo,bf,T1,ZT]]}),i})(),nb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[w]}),i})(),ib=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[hn]}),i})(),ob=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i,bootstrap:[$p]}),i.\u0275inj=e.cJS({imports:[[oe,nb,ib,tb,qe.b2,Ii.PW]]}),i})();(0,e.G48)(),qe.q6().bootstrapModule(ob).catch(i=>console.log(i))}},Gt=>{Gt.O(0,[736],()=>Gt(Gt.s=8845)),Gt.O()}]);
